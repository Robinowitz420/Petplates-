;/*FB_PKG_DELIM*/

__d("KadabraImagineCanvasHoverMenuMoreButton_media.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"KadabraImagineCanvasHoverMenuMoreButton_media",selections:[{args:null,kind:"FragmentSpread",name:"KadabraImagineCanvasHoverMenuMoreDropdownMenu_media"},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],type:"XFBGenAIImagineUserUploadedImage",abstractKey:null}],type:"XFBAbraMediaLibrary",abstractKey:"__isXFBAbraMediaLibrary"};a.exports=e}),null);
__d("KadabraImagineCanvasHoverMenuMoreDropdownMenu.entrypoint",["JSResourceForInteraction"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(t){return{queries:{}}},root:r("JSResourceForInteraction")("KadabraImagineCanvasHoverMenuMoreDropdownMenu.react").__setRef("KadabraImagineCanvasHoverMenuMoreDropdownMenu.entrypoint")};l.default=e}),98);
__d("KadabraImagineCanvasHoverMenuMoreButton.react",["fbt","CometRelay","KDSEntryPointMenuTrigger.react","KDSIconButton.react","KadabraConcordShareMenuLoadingState.react","KadabraImagineCanvasHoverMenuMoreButton_media.graphql","KadabraImagineCanvasHoverMenuMoreDropdownMenu.entrypoint","KadabraPostContext","MetaBrandThreeDotsHorizontalOutline24Icon.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=u||(u=o("react")),d=u.use;function m(t){var a=o("react-compiler-runtime").c(11),i=t.isCondensed,l=t.isPrivatePost,u=t.mediaKey,m=t.onDropdownVisibilityChange,p=i===void 0?!1:i,_=d(r("KadabraPostContext")),f=_.isPublic,g=l;g===void 0&&(g=f!==!0);var h=o("CometRelay").useFragment(e!==void 0?e:e=n("KadabraImagineCanvasHoverMenuMoreButton_media.graphql"),u);if((h==null?void 0:h.__typename)==="XFBGenAIImagineUserUploadedImage")return null;var y,C;a[0]===Symbol.for("react.memo_cache_sentinel")?(y={},C=c.jsx(r("KadabraConcordShareMenuLoadingState.react"),{}),a[0]=y,a[1]=C):(y=a[0],C=a[1]);var b;a[2]!==g||a[3]!==h?(b={isPrivatePost:g,mediaKey:h},a[2]=g,a[3]=h,a[4]=b):b=a[4];var v;a[5]!==p?(v=function(t,n,o,a,i,l){return c.jsx(r("KDSIconButton.react"),{icon:r("MetaBrandThreeDotsHorizontalOutline24Icon.react"),label:s._(/*BTDS*/"More"),onHoverIn:a,onHoverOut:i,onPress:function(){n()},onPressIn:l,ref:t,size:p?"28":"36",variant:"onMedia"})},a[5]=p,a[6]=v):v=a[6];var S;return a[7]!==m||a[8]!==b||a[9]!==v?(S=c.jsx(r("KDSEntryPointMenuTrigger.react"),{align:"end",entryPointParams:y,fallback:C,onVisibilityChange:m,otherProps:b,popoverEntryPoint:r("KadabraImagineCanvasHoverMenuMoreDropdownMenu.entrypoint"),popoverType:"menu",position:"below",preloadTrigger:"button",children:v}),a[7]=m,a[8]=b,a[9]=v,a[10]=S):S=a[10],S}l.default=m}),226);
__d("KadabraImagineCreateHoverMenuButtonFavorite_media.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"KadabraImagineCreateHoverMenuButtonFavorite_media",selections:[{args:null,kind:"FragmentSpread",name:"useKadabraImagineCreateToggleFavorite_media"}],type:"XFBAbraMediaLibrary",abstractKey:"__isXFBAbraMediaLibrary"};a.exports=e}),null);
__d("KadabraImagineCreateHoverMenuTypes",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e==="x-small"?"28":e==="small"?"32":e==="medium"?"36":(function(){throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+e)})()}i.hoverMenuSizeVariantToNumericSize=e}),66);
__d("useKadabraImagineCreateToggleFavoriteMutation_abraRelayOperation",[],(function(t,n,r,o,a,i){a.exports="24404127509253386"}),null);
__d("useKadabraImagineCreateToggleFavoriteMutation.graphql",["useKadabraImagineCreateToggleFavoriteMutation_abraRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"media_id"}],t=[{fields:[{kind:"Variable",name:"media_id",variableName:"media_id"}],kind:"ObjectValue",name:"input"}],r={alias:null,args:null,kind:"ScalarField",name:"is_favorited_by_owner",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"useKadabraImagineCreateToggleFavoriteMutation",selections:[{alias:null,args:t,concreteType:"XFBKadabraToggleFavoriteMediaResponse",kind:"LinkedField",name:"xfb_kadabra_toggle_favorite_media",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[r],storageKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"useKadabraImagineCreateToggleFavoriteMutation",selections:[{alias:null,args:t,concreteType:"XFBKadabraToggleFavoriteMediaResponse",kind:"LinkedField",name:"xfb_kadabra_toggle_favorite_media",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},r,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:n("useKadabraImagineCreateToggleFavoriteMutation_abraRelayOperation"),metadata:{},name:"useKadabraImagineCreateToggleFavoriteMutation",operationKind:"mutation",text:null}}})();a.exports=e}),null);
__d("useKadabraImagineCreateToggleFavoriteMutation",["CometRelay","react","react-compiler-runtime","useKadabraImagineCreateToggleFavoriteMutation.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(s||(s=o("react"))).useCallback,c=e!==void 0?e:e=n("useKadabraImagineCreateToggleFavoriteMutation.graphql");function d(){var e=o("react-compiler-runtime").c(2),t=o("CometRelay").useMutation(c),n=t[0],r;return e[0]!==n?(r=function(t,r,a,i){var e={xfb_kadabra_toggle_favorite_media:{media:{__typename:"GENAIAbraMediaLibrary",id:t,is_favorited_by_owner:!r}}},l=function(n){var e,r=n==null||(e=n.getRoot())==null||(e=e.getLinkedRecord("xab_viewer"))==null?void 0:e.getDataID(),a=[["FAVORITES"],["FAVORITES","SHARED"],["FAVORITES","EDITED"],["FAVORITES","SHARED","EDITED"]];a.forEach(function(e){var a=o("CometRelay").ConnectionHandler.getConnectionID(r!=null?r:"","KadabraMediaLibraryFeedFragment__media",{filters:e,media_generation_status_filter:"ALL"}),i=n.get(a);if(i!=null){var l=n.get(t);(l==null?void 0:l.getValue("is_favorited_by_owner"))===!1&&o("CometRelay").ConnectionHandler.deleteNode(i,t)}})};a.startInteraction(function(r){n({onCompleted:function(t){r.forceCompleteTrace(),i==null||i.onCompleted==null||i.onCompleted(t)},onError:function(t){r.failTrace("Error favoriting media",!0),i==null||i.onError==null||i.onError(t)},optimisticResponse:e,optimisticUpdater:l,updater:l,variables:{media_id:t}})})},e[0]=n,e[1]=r):r=e[1],r}l.default=d}),98);
__d("useKadabraImagineCreateToggleFavorite_media.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useKadabraImagineCreateToggleFavorite_media",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_favorited_by_owner",storageKey:null}],type:"XFBAbraMediaLibrary",abstractKey:"__isXFBAbraMediaLibrary"};a.exports=e}),null);
__d("useKadabraImagineCreateToggleFavorite",["fbt","CometRelay","KadabraImagineUtils","KadabraRouteUtils","MetaBrandStarFilled24Icon.react","MetaBrandStarOutline24Icon.react","kdsPushToast","react-compiler-runtime","useCometRouterDispatcher","useCurrentRoute","useKadabraImagineCreateToggleFavoriteMutation","useKadabraImagineCreateToggleFavorite_media.graphql","useKadabraInteractionLogger"],(function(t,n,r,o,a,i,l,s){"use strict";var e;function u(t,a,i){var l,u=o("react-compiler-runtime").c(13),c=(l=o("CometRelay").useFragment(e!==void 0?e:e=n("useKadabraImagineCreateToggleFavorite_media.graphql"),t))!=null?l:{},d=c.id,m=c.is_favorited_by_owner,p=m!=null?m:!1,_=r("useKadabraImagineCreateToggleFavoriteMutation")(),f=r("useKadabraInteractionLogger")(),g=r("useCometRouterDispatcher")(),h=r("useCurrentRoute")(),y=(h==null?void 0:h.tracePolicy)==="kadabra.imagine_create",C;u[0]!==g||u[1]!==a||u[2]!==f||u[3]!==y||u[4]!==p||u[5]!==d||u[6]!==i||u[7]!==_?(C=function(t){if(d!=null){var e=p,n=!e;if(f.log({action_target:"library_media_favorite_button",action_type:"click",entrypoint:o("KadabraImagineUtils").KadabraImagineLoggingEntrypoint.getName(a),event_name:n?"library_media_favorite_click":"library_media_unfavorite_click",imagine_media_info:{media_id:d!=null?d:""},position:i!=null?String(i):void 0}),_(d,e,t),n){var r=s._(/*BTDS*/"Media favorited"),l=s._(/*BTDS*/"View library");y?o("kdsPushToast").pushToast({message:r}):o("kdsPushToast").pushToast({action:{dismissToastOnPress:!0,label:l,onPress:function(){g==null||g.go(o("KadabraRouteUtils").kadabraRouteImagineCreate({}),{})}},message:r})}}},u[0]=g,u[1]=a,u[2]=f,u[3]=y,u[4]=p,u[5]=d,u[6]=i,u[7]=_,u[8]=C):C=u[8];var b=C,v=r(p?"MetaBrandStarFilled24Icon.react":"MetaBrandStarOutline24Icon.react"),S;return u[9]!==b||u[10]!==p||u[11]!==v?(S={handleToggleFavorite:b,icon:v,isFavorited:p},u[9]=b,u[10]=p,u[11]=v,u[12]=S):S=u[12],S}l.default=u}),226);
__d("KadabraImagineCreateHoverMenuButtonFavorite.react",["fbt","CometRelay","KDSIconButton.react","KadabraHeroInteraction.react","KadabraImagineCreateHoverMenuButtonFavorite_media.graphql","KadabraImagineCreateHoverMenuTypes","KadabraImagineUtils","gkx","react","react-compiler-runtime","useKadabraImagineCreateToggleFavorite"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=u||(u=o("react"));function d(t){var a=o("react-compiler-runtime").c(5),i=t.hideIfNotFavorited,l=t.mediaKey,u=t.position,d=t.sizeVariant,m=i===void 0?!1:i,p=d===void 0?"x-small":d,_=o("CometRelay").useFragment(e!==void 0?e:e=n("KadabraImagineCreateHoverMenuButtonFavorite_media.graphql"),l),f=r("useKadabraImagineCreateToggleFavorite")(_,o("KadabraImagineUtils").KadabraImagineLoggingEntrypoint.MEDIA_LIBRARY_HOVER,u),g=f.handleToggleFavorite,h=f.icon,y=f.isFavorited,C=r("gkx")("5101"),b=!m||y,v;return a[0]!==g||a[1]!==h||a[2]!==b||a[3]!==p?(v=c.jsx(r("KadabraHeroInteraction.react"),{description:"KadabraProfileFollowButton",policy:"kadabra.favoriteMedia",children:function(t,n){return!C&&b?c.jsx("div",{"data-testid":void 0,children:c.jsx(r("KDSIconButton.react"),{icon:h,label:s._(/*BTDS*/"Favorite"),onPress:function(){return g(n)},ref:t,size:o("KadabraImagineCreateHoverMenuTypes").hoverMenuSizeVariantToNumericSize(p),variant:"onMedia"})}):null}}),a[0]=g,a[1]=h,a[2]=b,a[3]=p,a[4]=v):v=a[4],v}l.default=d}),226);
__d("useKadabraCloseUnifiedCanvas",["KadabraRouteUtils","react-compiler-runtime","useCometRouterDispatcher","useKadabraGetPromptParams","useOnRoutableDialogClose"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e=o("react-compiler-runtime").c(7),t=r("useKadabraGetPromptParams")(),n=t.promptId,a=t.remix,i=t.remix_video_id,l=r("useCometRouterDispatcher")(),s;e[0]!==n?(s=n!=null?{extraConfig:{passthroughProps:{skipTransitionOnMobile:!0},replace:!0},url:o("KadabraRouteUtils").kadabraRoutePrompt({prompt_id:n})}:{extraConfig:{passthroughProps:{skipTransitionOnMobile:!0},replace:!0},url:o("KadabraRouteUtils").kadabraRouteImagineCreate({})},e[0]=n,e[1]=s):s=e[1];var u=s,c=r("useOnRoutableDialogClose")(u.url,u.extraConfig),d;return e[2]!==l||e[3]!==c||e[4]!==a||e[5]!==i?(d=function(){return a===!0&&i==null&&l!=null?l.goBack():c()},e[2]=l,e[3]=c,e[4]=a,e[5]=i,e[6]=d):d=e[6],d}l.default=e}),98);