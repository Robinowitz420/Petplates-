;/*FB_PKG_DELIM*/

__d("AbraWebEventsFeedbackClickItem",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({THUMB_UP:"thumb_up",THUMB_DOWN:"thumb_down",CUSTOM:"custom"}),l=e;i.default=l}),66);
__d("CometLightweightVideoAttachmentContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext({isLightweightVideoAttachment:!1});l.default=u}),98);
__d("KDSAnimatedFlexbox.react",["KDSFlexbox.react","react","react-compiler-runtime","useKadabraPageLayout"],(function(t,n,r,o,a,i,l){"use strict";var e=["animatingInState","animatingOutState","defaultState","isHovered","mobileLayoutState","xstyle"],s,u=s||(s=o("react")),c=s,d=c.useCallback,m=c.useState;function p(t){var n=o("react-compiler-runtime").c(28),a,i,l,s,c,d,p;n[0]!==t?(a=t.animatingInState,i=t.animatingOutState,l=t.defaultState,s=t.isHovered,c=t.mobileLayoutState,p=t.xstyle,d=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i,n[3]=l,n[4]=s,n[5]=c,n[6]=d,n[7]=p):(a=n[1],i=n[2],l=n[3],s=n[4],c=n[5],d=n[6],p=n[7]);var _=m(!1),f=_[0],g=_[1],h=r("useKadabraPageLayout")(),y=h.isMobileLayout,C=m(s),b=C[0],v=C[1];s!==b&&(v(s),!s&&b&&g(!0));var S;n[8]!==a||n[9]!==i||n[10]!==l||n[11]!==c?(S=function(t){if(Array.isArray(t)&&t.length===3&&t[2]===!0)return c!=null?c:{mounted:!0,style:null};if(Array.isArray(t)&&t.length===3&&t[0]===!1&&t[1]===!0)return i;if(Array.isArray(t)&&t.length===3&&t[0]===!0)return a;if(Array.isArray(t)&&t.length===3&&t[0]===!1&&t[1]===!1&&t[2]===!1)return l!=null?l:{mounted:!0,style:null};throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+t)},n[8]=a,n[9]=i,n[10]=l,n[11]=c,n[12]=S):S=n[12];var R;n[13]!==b||n[14]!==f||n[15]!==y?(R=[b,f,y],n[13]=b,n[14]=f,n[15]=y,n[16]=R):R=n[16];var L;n[17]!==S||n[18]!==R?(L=S(R),n[17]=S,n[18]=R,n[19]=L):L=n[19];var E=L,k=E.mounted,I=E.style,T;n[20]!==f?(T=function(t){if(t!=null&&f){var e=function(){return g(!1)};return t.addEventListener("animationend",e),(function(){t.removeEventListener("animationend",e)})}},n[20]=f,n[21]=T):T=n[21];var D=T,x;return n[22]!==D||n[23]!==k||n[24]!==d||n[25]!==I||n[26]!==p?(x=k?u.jsx(r("KDSFlexbox.react"),babelHelpers.extends({},d,{ref:D,xstyle:[p,I]})):null,n[22]=D,n[23]=k,n[24]=d,n[25]=I,n[26]=p,n[27]=x):x=n[27],x}l.default=p}),98);
__d("KadabraTileFeedButtonStyles",[],(function(t,n,r,o,a,i,l){"use strict";var e={ufiButton:{background:"x1md70p1",backgroundColor:"xjbqb8w",color:"xblyfo7",pointerEvents:"x67bb7w",":active_filter":"xya65yf",":hover_backdropFilter":"xghbtsm",":hover_background":"xw8t85u",$$css:!0}};l.KadabraTileFeedButtonStyles=e}),98);
__d("KDSUFIButton.react",["KDSBaseButton.react","KDSTooltip.react","KadabraTileFeedButtonStyles","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["ref","tooltip"],s=["tooltipOverride"],u,c=u||(u=o("react"));function d(t){var n=o("react-compiler-runtime").c(18),a,i,l;n[0]!==t?(i=t.ref,l=t.tooltip,a=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i,n[3]=l):(a=n[1],i=n[2],l=n[3]);var u;n[4]!==a||n[5]!==i?(u=c.jsx(r("KDSBaseButton.react"),babelHelpers.extends({isLabelHidden:!0,ref:i,xstyle:o("KadabraTileFeedButtonStyles").KadabraTileFeedButtonStyles.ufiButton},a)),n[4]=a,n[5]=i,n[6]=u):u=n[6];var d=u,m;n[7]!==l?(m=l!=null?l:{},n[7]=l,n[8]=m):m=n[8];var p,_;if(n[9]!==m){var f=m;p=f.tooltipOverride,_=babelHelpers.objectWithoutPropertiesLoose(f,s),n[9]=m,n[10]=p,n[11]=_}else p=n[10],_=n[11];var g;return n[12]!==d||n[13]!==a||n[14]!==l||n[15]!==p||n[16]!==_?(g=l!=null?c.jsx(r("KDSTooltip.react"),babelHelpers.extends({},_,{tooltip:p!=null?p:a.label,children:d})):d,n[12]=d,n[13]=a,n[14]=l,n[15]=p,n[16]=_,n[17]=g):g=n[17],g}l.default=d}),98);
__d("KadabraConcordTasteMakerFeedbackCopyToProfileButtonMutation_abraRelayOperation",[],(function(t,n,r,o,a,i){a.exports="24619561931028396"}),null);
__d("KadabraConcordTasteMakerFeedbackCopyToProfileButtonMutation.graphql",["KadabraConcordTasteMakerFeedbackCopyToProfileButtonMutation_abraRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={defaultValue:null,kind:"LocalArgument",name:"new_profile_id"},t={defaultValue:null,kind:"LocalArgument",name:"post_id"},r={defaultValue:null,kind:"LocalArgument",name:"unpublish_original_post"},o=[{kind:"Variable",name:"new_profile_id",variableName:"new_profile_id"},{kind:"Variable",name:"post_id",variableName:"post_id"},{kind:"Variable",name:"unpublish_original_post",variableName:"unpublish_original_post"}],a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"slug",storageKey:null},l={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null}],type:"XABSocialProfile",abstractKey:null};return{fragment:{argumentDefinitions:[e,t,r],kind:"Fragment",metadata:null,name:"KadabraConcordTasteMakerFeedbackCopyToProfileButtonMutation",selections:[{alias:null,args:o,concreteType:"XFBGENAIPost",kind:"LinkedField",name:"xfb_genai_imagine_taste_maker_copy_post_to_profile",plural:!1,selections:[a,i,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"genai_owner",plural:!1,selections:[l],storageKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[t,e,r],kind:"Operation",name:"KadabraConcordTasteMakerFeedbackCopyToProfileButtonMutation",selections:[{alias:null,args:o,concreteType:"XFBGENAIPost",kind:"LinkedField",name:"xfb_genai_imagine_taste_maker_copy_post_to_profile",plural:!1,selections:[a,i,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"genai_owner",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},l,a],storageKey:null}],storageKey:null}]},params:{id:n("KadabraConcordTasteMakerFeedbackCopyToProfileButtonMutation_abraRelayOperation"),metadata:{},name:"KadabraConcordTasteMakerFeedbackCopyToProfileButtonMutation",operationKind:"mutation",text:null}}})();a.exports=e}),null);
__d("KadabraConcordTasteMakerFeedbackCopyToProfileButton_data.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"KadabraConcordTasteMakerFeedbackCopyToProfileButton_data",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],type:"XFBGENAIPost",abstractKey:null};a.exports=e}),null);
__d("KadabraConcordTasteMakerFeedbackCopyToProfileDialog.entrypoint",["JSResourceForInteraction"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(){return{queries:{}}},root:r("JSResourceForInteraction")("KadabraConcordTasteMakerFeedbackCopyToProfileDialog.react").__setRef("KadabraConcordTasteMakerFeedbackCopyToProfileDialog.entrypoint")};l.default=e}),98);
__d("KadabraConcordTasteMakerFeedbackPressableButton.react",["CometPressable.react","KDSSpinner.react","KDSTooltip.react","KadabraHeroInteraction.react","react","react-compiler-runtime","stylex"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c={container:{backgroundColor:"xfokuf8",borderStartStartRadius:"x1mvgw25",borderStartEndRadius:"x1yfjhkk",borderEndEndRadius:"x1jy34x5",borderEndStartRadius:"xfpl1co",boxShadow:"xs3lmqk",overflowX:"x6ikm8r",overflowY:"x10wlt62",paddingTop:"x1y1aw1k",paddingInlineEnd:"xf159sx",paddingBottom:"xwib8y2",paddingInlineStart:"xmzvs34",position:"x1n2onr6",width:"xeq5yr9",":hover_backgroundColor":"xj0503r",$$css:!0},loadingSpinnerContainer:{alignItems:"x6s0dn4",backgroundColor:"x1wjgw90",bottom:"x1ey2m1c",display:"x78zum5",insetInlineEnd:"xtijo5x",insetInlineStart:"x1o0tod",justifyContent:"xl56j7k",opacity:"xg01cxk",position:"x10l6tqk",top:"x13vifvy",transition:"x11y9glp",$$css:!0},reducedContainerPadding:{paddingTop:"x1iorvi4",paddingInlineEnd:"x11lfxj5",paddingBottom:"xjkvuk6",paddingInlineStart:"x135b78x",$$css:!0},visible:{opacity:"x1hc1fzr",$$css:!0}};function d(t){var n=o("react-compiler-runtime").c(9),a=t.children,i=t.isDisabled,l=t.isLoading,s=t.linkProps,d=t.minified,m=t.onPress,p=t.tooltip,_=t.tooltipPosition,f=i===void 0?!1:i,g=l===void 0?!1:l,h=d===void 0?!1:d,y;return n[0]!==a||n[1]!==f||n[2]!==g||n[3]!==s||n[4]!==h||n[5]!==m||n[6]!==p||n[7]!==_?(y=u.jsx(r("KadabraHeroInteraction.react"),{description:"KadabraConcordTasteMakerFeedbackInteraction",policy:"kadabra.responseFeedback",children:function(n){return u.jsx(r("KDSTooltip.react"),{position:_,tooltip:p!=null?p:"",children:u.jsxs(r("CometPressable.react"),{disabled:f||g,linkProps:s,onPress:m,ref:n,xstyle:[c.container,h&&c.reducedContainerPadding],children:[a,u.jsx("div",{className:(e||(e=r("stylex")))([c.loadingSpinnerContainer,g&&c.visible]),children:g&&u.jsx(r("KDSSpinner.react"),{color:"newSecondary",size:h?12:16})})]})})}}),n[0]=a,n[1]=f,n[2]=g,n[3]=s,n[4]=h,n[5]=m,n[6]=p,n[7]=_,n[8]=y):y=n[8],y}l.default=d}),98);
__d("MetaBrandTwoPeopleCirclesOutline24Icon.react",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs("svg",babelHelpers.extends({viewBox:"0 0 24 24",fill:"currentColor",width:"1em",height:"1em"},e,{children:[e.title!=null&&s.jsx("title",{children:e.title}),e.children!=null&&s.jsx("defs",{children:e.children}),s.jsx("path",{d:"M8 5a2 2 0 1 1 0 4 2 2 0 0 1 0-4z"}),s.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1 8a7 7 0 1 1 14 0A7 7 0 0 1 1 8zm7 5c.69 0 1.347-.14 1.945-.393a.472.472 0 0 0-.169-.228C9.593 12.237 9.094 12 8 12c-1.094 0-1.593.237-1.776.379a.472.472 0 0 0-.17.228A4.984 4.984 0 0 0 8 13zm0-3c1.828 0 3.03.529 3.604 1.465a5 5 0 1 0-7.209 0C4.97 10.53 6.173 10 8 10z"}),s.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16 23a7.001 7.001 0 0 1-6.938-6.062 8.941 8.941 0 0 0 1.96-.458 4.983 4.983 0 0 0 1.374 2.985C12.97 18.53 14.172 18 16 18s3.03.529 3.605 1.465a5 5 0 0 0-3.125-8.442c.223-.625.378-1.281.458-1.96A7.001 7.001 0 0 1 16 23zm0-2c.69 0 1.348-.14 1.946-.392a.472.472 0 0 0-.17-.229C17.594 20.237 17.095 20 16 20c-1.094 0-1.592.237-1.776.38a.472.472 0 0 0-.17.228A4.984 4.984 0 0 0 16 21z"}),s.jsx("path",{d:"M14.588 16.416a2 2 0 1 0 2.825-2.832 2 2 0 0 0-2.825 2.832z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("KadabraConcordTasteMakerFeedbackCopyToProfileButton.react",["fbt","CometRelay","KDSIcon.react","KadabraConcordTasteMakerFeedbackCopyToProfileButtonMutation.graphql","KadabraConcordTasteMakerFeedbackCopyToProfileButton_data.graphql","KadabraConcordTasteMakerFeedbackCopyToProfileDialog.entrypoint","KadabraConcordTasteMakerFeedbackPressableButton.react","KadabraRouteUtils","MetaBrandTwoPeopleCirclesOutline24Icon.react","kdsPushToast","react","react-compiler-runtime","useCometRouterDispatcher","useKDSEntryPointDialog"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d=c||(c=o("react")),m=e!==void 0?e:e=n("KadabraConcordTasteMakerFeedbackCopyToProfileButtonMutation.graphql");function p(e){var t=o("react-compiler-runtime").c(14),a=e.minified,i=e.postKey,l=e.tooltipPosition,c=a===void 0?!1:a,p=o("CometRelay").useFragment(u!==void 0?u:u=n("KadabraConcordTasteMakerFeedbackCopyToProfileButton_data.graphql"),i),_=p==null?void 0:p.id,f;t[0]===Symbol.for("react.memo_cache_sentinel")?(f={},t[0]=f):f=t[0];var g=r("useKDSEntryPointDialog")(r("KadabraConcordTasteMakerFeedbackCopyToProfileDialog.entrypoint"),f),h=g[0],y=o("CometRelay").useMutation(m),C=y[0],b=y[1],v=r("useCometRouterDispatcher")(),S;t[1]!==C||t[2]!==v||t[3]!==_||t[4]!==h?(S=function(){if(_==null){o("kdsPushToast").pushGenericErrorToast();return}h({onSubmit:function(t,n){C({onCompleted:function(t){var e,n,r,a=(e=t.xfb_genai_imagine_taste_maker_copy_post_to_profile)==null?void 0:e.id,i=(n=t.xfb_genai_imagine_taste_maker_copy_post_to_profile)==null?void 0:n.slug,l=(r=t.xfb_genai_imagine_taste_maker_copy_post_to_profile)==null||(r=r.genai_owner)==null?void 0:r.username;if(a==null){o("kdsPushToast").pushGenericErrorToast();return}i!=null&&l!=null?o("kdsPushToast").pushToast({action:{label:s._(/*BTDS*/"View Post"),onPress:function(){v==null||v.go(o("KadabraRouteUtils").kadabraRouteConcordFeedPostPage({post_id:a,slug:i,vanity:"@"+(l!=null?l:"")}),{target:"self"})}},message:"Sucessfully copied post to profile"}):o("kdsPushToast").pushSimpleToast("Sucessfully copied post to profile")},variables:{new_profile_id:t,post_id:_,unpublish_original_post:n}})}})},t[1]=C,t[2]=v,t[3]=_,t[4]=h,t[5]=S):S=t[5];var R=c?14:16,L;t[6]!==R?(L=d.jsx(r("KDSIcon.react"),{icon:r("MetaBrandTwoPeopleCirclesOutline24Icon.react"),size:R}),t[6]=R,t[7]=L):L=t[7];var E;return t[8]!==b||t[9]!==c||t[10]!==S||t[11]!==L||t[12]!==l?(E=d.jsx(r("KadabraConcordTasteMakerFeedbackPressableButton.react"),{isLoading:b,minified:c,onPress:S,tooltip:"[FB-Only] Copy Post to Profile",tooltipPosition:l,children:L}),t[8]=b,t[9]=c,t[10]=S,t[11]=L,t[12]=l,t[13]=E):E=t[13],E}l.default=p}),226);
__d("KadabraConcordTasteMakerFeedbackDialogQuery_abraRelayOperation",[],(function(t,n,r,o,a,i){a.exports="31341078118869761"}),null);
__d("KadabraConcordTasteMakerFeedbackDialogQuery$Parameters",["KadabraConcordTasteMakerFeedbackDialogQuery_abraRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e={kind:"PreloadableConcreteRequest",params:{id:n("KadabraConcordTasteMakerFeedbackDialogQuery_abraRelayOperation"),metadata:{},name:"KadabraConcordTasteMakerFeedbackDialogQuery",operationKind:"query",text:null}};a.exports=e}),null);
__d("KadabraConcordTasteMakerFeedbackDialog.entrypoint",["JSResourceForInteraction","KadabraConcordTasteMakerFeedbackDialogQuery$Parameters"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(t){var e=t.post_id;return{queries:{queryReference:{parameters:n("KadabraConcordTasteMakerFeedbackDialogQuery$Parameters"),variables:{id:e!=null?e:""}}}}},root:r("JSResourceForInteraction")("KadabraConcordTasteMakerFeedbackDialog.react").__setRef("KadabraConcordTasteMakerFeedbackDialog.entrypoint")};l.default=e}),98);
__d("KadabraConcordTasteMakerFeedbackRankingScoreWarningButton_data.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"KadabraConcordTasteMakerFeedbackRankingScoreWarningButton_data",selections:[{alias:null,args:null,kind:"ScalarField",name:"ranking_vetted_score",storageKey:null}],type:"XFBGENAIPost",abstractKey:null};a.exports=e}),null);
__d("KadabraConcordTasteMakerFeedbackRankingScoreWarningButton.react",["CometRelay","KDSIcon.react","KadabraConcordTasteMakerFeedbackPressableButton.react","KadabraConcordTasteMakerFeedbackRankingScoreWarningButton_data.graphql","MetaBrandExclamationTriangleOutline24Icon.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react"));function c(t){var a,i=o("react-compiler-runtime").c(7),l=t.minified,s=t.postKey,c=t.vertical,d=l===void 0?!1:l,m=c===void 0?!1:c,p=o("CometRelay").useFragment(e!==void 0?e:e=n("KadabraConcordTasteMakerFeedbackRankingScoreWarningButton_data.graphql"),s),_=((a=p==null?void 0:p.ranking_vetted_score)!=null?a:0)>0;if(_)return null;var f;i[0]===Symbol.for("react.memo_cache_sentinel")?(f={target:"_blank",url:"https://fburl.com/c50-ranking-content-signals"},i[0]=f):f=i[0];var g=m?"end":"below",h=d?14:16,y;i[1]!==h?(y=u.jsx(r("KDSIcon.react"),{color:"newDestructive",icon:r("MetaBrandExclamationTriangleOutline24Icon.react"),size:h}),i[1]=h,i[2]=y):y=i[2];var C;return i[3]!==d||i[4]!==g||i[5]!==y?(C=u.jsx(r("KadabraConcordTasteMakerFeedbackPressableButton.react"),{isLoading:!1,linkProps:f,minified:d,tooltip:"[FB-Only] Ranking score is zero!",tooltipPosition:g,children:y}),i[3]=d,i[4]=g,i[5]=y,i[6]=C):C=i[6],C}l.default=c}),98);
__d("KadabraConcordTasteMakerFeedbackStatusButtonBotContentMutation_abraRelayOperation",[],(function(t,n,r,o,a,i){a.exports="25121468940771923"}),null);
__d("KadabraConcordTasteMakerFeedbackStatusButtonBotContentMutation.graphql",["KadabraConcordTasteMakerFeedbackStatusButtonBotContentMutation_abraRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={defaultValue:null,kind:"LocalArgument",name:"feedback"},t={defaultValue:null,kind:"LocalArgument",name:"post_id"},r=[{alias:null,args:[{kind:"Variable",name:"feedback",variableName:"feedback"},{kind:"Variable",name:"post_id",variableName:"post_id"}],concreteType:"XFBGENAIPost",kind:"LinkedField",name:"xfb_genai_imagine_taste_maker_feedback",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"taste_maker_decision",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_in_golden_set",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_visible_on_feed",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_visible_on_profile",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[e,t],kind:"Fragment",metadata:null,name:"KadabraConcordTasteMakerFeedbackStatusButtonBotContentMutation",selections:r,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[t,e],kind:"Operation",name:"KadabraConcordTasteMakerFeedbackStatusButtonBotContentMutation",selections:r},params:{id:n("KadabraConcordTasteMakerFeedbackStatusButtonBotContentMutation_abraRelayOperation"),metadata:{},name:"KadabraConcordTasteMakerFeedbackStatusButtonBotContentMutation",operationKind:"mutation",text:null}}})();a.exports=e}),null);
__d("KadabraConcordTasteMakerFeedbackStatusButtonBotContent_data.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"KadabraConcordTasteMakerFeedbackStatusButtonBotContent_data",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{args:null,kind:"FragmentSpread",name:"KadabraConcordTasteMakerFeedbackStatusProfileIcon_data"},{args:null,kind:"FragmentSpread",name:"KadabraConcordTasteMakerFeedbackStatusFeedIcon_data"},{args:null,kind:"FragmentSpread",name:"KadabraConcordTasteMakerFeedbackStatusSetIcon_data"}],type:"XFBGENAIPost",abstractKey:null};a.exports=e}),null);
__d("KadabraConcordTasteMakerFeedbackStatusFeedIcon_data.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"KadabraConcordTasteMakerFeedbackStatusFeedIcon_data",selections:[{alias:null,args:null,kind:"ScalarField",name:"is_visible_on_feed",storageKey:null}],type:"XFBGENAIPost",abstractKey:null};a.exports=e}),null);
__d("MetaBrandFeedPostFilled24Icon.react",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs("svg",babelHelpers.extends({viewBox:"0 0 24 24",fill:"currentColor",width:"1em",height:"1em"},e,{children:[e.title!=null&&s.jsx("title",{children:e.title}),e.children!=null&&s.jsx("defs",{children:e.children}),s.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.998 3a2.937 2.937 0 0 1 2.955 2.888A469.638 469.638 0 0 1 21.999 14H2.001L2 13c0-3.15.023-5.491.047-7.112A2.937 2.937 0 0 1 5.002 3h13.996zM2.008 16h19.984a268.16 268.16 0 0 1-.023 2.317C21.947 19.846 20.732 21 19.204 21H4.796c-1.528 0-2.743-1.154-2.765-2.683-.01-.623-.017-1.385-.023-2.317zM13 7a1 1 0 1 0 0 2h4a1 1 0 1 0 0-2h-4zm-1 4a1 1 0 0 1 1-1h4a1 1 0 1 1 0 2h-4a1 1 0 0 1-1-1zm-4 0a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("MetaBrandFeedPostOutline24Icon.react",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs("svg",babelHelpers.extends({viewBox:"0 0 24 24",fill:"currentColor",width:"1em",height:"1em"},e,{children:[e.title!=null&&s.jsx("title",{children:e.title}),e.children!=null&&s.jsx("defs",{children:e.children}),s.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.237 18.792c.12.116.307.208.56.208h14.407a.788.788 0 0 0 .56-.208.689.689 0 0 0 .206-.504c.009-.614.016-1.367.022-2.288H4.008c.006.921.014 1.674.022 2.288a.69.69 0 0 0 .207.504zM4 14h15.998L20 13c0-3.141-.022-5.471-.047-7.082A.937.937 0 0 0 18.998 5H5.002a.937.937 0 0 0-.955.918A468.37 468.37 0 0 0 4.001 14zm17.952-8.112A2.937 2.937 0 0 0 18.998 3H5.002a2.937 2.937 0 0 0-2.955 2.888A470.26 470.26 0 0 0 2 13c0 2.421.013 4.125.03 5.317C2.054 19.846 3.269 21 4.797 21h14.408c1.528 0 2.743-1.154 2.765-2.683.018-1.192.031-2.896.031-5.317 0-3.15-.023-5.491-.047-7.112zM13 7a1 1 0 1 0 0 2h4a1 1 0 1 0 0-2h-4zm-1 4a1 1 0 0 1 1-1h4a1 1 0 1 1 0 2h-4a1 1 0 0 1-1-1zm-4 0a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("KadabraConcordTasteMakerFeedbackStatusFeedIcon.react",["CometRelay","KDSIcon.react","KadabraConcordTasteMakerFeedbackStatusFeedIcon_data.graphql","MetaBrandFeedPostFilled24Icon.react","MetaBrandFeedPostOutline24Icon.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["overrideValue","postKey"],s,u,c=u||(u=o("react")),d={disabled:{opacity:"xbyyjgo",$$css:!0}};function m(t){var a,i=o("react-compiler-runtime").c(8),l,u,m;i[0]!==t?(u=t.overrideValue,m=t.postKey,l=babelHelpers.objectWithoutPropertiesLoose(t,e),i[0]=t,i[1]=l,i[2]=u,i[3]=m):(l=i[1],u=i[2],m=i[3]);var p=o("CometRelay").useFragment(s!==void 0?s:s=n("KadabraConcordTasteMakerFeedbackStatusFeedIcon_data.graphql"),m),_=(a=u!=null?u:p==null?void 0:p.is_visible_on_feed)!=null?a:!1;if(_){var f;return i[4]!==l?(f=c.jsx(r("KDSIcon.react"),babelHelpers.extends({},l,{icon:r("MetaBrandFeedPostFilled24Icon.react")})),i[4]=l,i[5]=f):f=i[5],f}var g;return i[6]!==l?(g=c.jsx(r("KDSIcon.react"),babelHelpers.extends({},l,{icon:r("MetaBrandFeedPostOutline24Icon.react"),xstyle:d.disabled})),i[6]=l,i[7]=g):g=i[7],g}l.default=m}),98);
__d("KadabraConcordTasteMakerFeedbackStatusProfileIcon_data.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"KadabraConcordTasteMakerFeedbackStatusProfileIcon_data",selections:[{alias:null,args:null,kind:"ScalarField",name:"is_visible_on_profile",storageKey:null}],type:"XFBGENAIPost",abstractKey:null};a.exports=e}),null);
__d("MetaBrandPersonCircleFilled24Icon.react",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs("svg",babelHelpers.extends({viewBox:"0 0 24 24",fill:"currentColor",width:"1em",height:"1em"},e,{children:[e.title!=null&&s.jsx("title",{children:e.title}),e.children!=null&&s.jsx("defs",{children:e.children}),s.jsx("path",{d:"M16 10a4 4 0 1 1-8 0 4 4 0 0 1 8 0z"}),s.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 23c6.075 0 11-4.925 11-11S18.075 1 12 1 1 5.925 1 12s4.925 11 11 11zm6.542-4.82a9 9 0 1 0-13.084 0C6.518 16.06 9.258 15 12 15c2.741 0 5.483 1.06 6.542 3.18z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("KadabraConcordTasteMakerFeedbackStatusProfileIcon.react",["CometRelay","KDSIcon.react","KadabraConcordTasteMakerFeedbackStatusProfileIcon_data.graphql","MetaBrandPersonCircleFilled24Icon.react","MetaBrandPersonCircleOutline24Icon.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["overrideValue","postKey"],s,u,c=u||(u=o("react")),d={disabled:{opacity:"xbyyjgo",$$css:!0}};function m(t){var a,i=o("react-compiler-runtime").c(8),l,u,m;i[0]!==t?(u=t.overrideValue,m=t.postKey,l=babelHelpers.objectWithoutPropertiesLoose(t,e),i[0]=t,i[1]=l,i[2]=u,i[3]=m):(l=i[1],u=i[2],m=i[3]);var p=o("CometRelay").useFragment(s!==void 0?s:s=n("KadabraConcordTasteMakerFeedbackStatusProfileIcon_data.graphql"),m),_=(a=u!=null?u:p==null?void 0:p.is_visible_on_profile)!=null?a:!1;if(_){var f;return i[4]!==l?(f=c.jsx(r("KDSIcon.react"),babelHelpers.extends({},l,{icon:r("MetaBrandPersonCircleFilled24Icon.react")})),i[4]=l,i[5]=f):f=i[5],f}var g;return i[6]!==l?(g=c.jsx(r("KDSIcon.react"),babelHelpers.extends({},l,{icon:r("MetaBrandPersonCircleOutline24Icon.react"),xstyle:d.disabled})),i[6]=l,i[7]=g):g=i[7],g}l.default=m}),98);
__d("KadabraConcordTasteMakerFeedbackStatusSetIcon_data.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"KadabraConcordTasteMakerFeedbackStatusSetIcon_data",selections:[{alias:null,args:null,kind:"ScalarField",name:"is_in_golden_set",storageKey:null}],type:"XFBGENAIPost",abstractKey:null};a.exports=e}),null);
__d("KadabraConcordTasteMakerFeedbackStatusSetIcon.react",["CometRelay","KDSIcon.react","KadabraConcordTasteMakerFeedbackStatusSetIcon_data.graphql","MetaBrandStarFilled24Icon.react","MetaBrandStarOutline24Icon.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["overrideValue","postKey"],s,u,c=u||(u=o("react")),d={disabled:{opacity:"xbyyjgo",$$css:!0}};function m(t){var a,i=o("react-compiler-runtime").c(8),l,u,m;i[0]!==t?(u=t.overrideValue,m=t.postKey,l=babelHelpers.objectWithoutPropertiesLoose(t,e),i[0]=t,i[1]=l,i[2]=u,i[3]=m):(l=i[1],u=i[2],m=i[3]);var p=o("CometRelay").useFragment(s!==void 0?s:s=n("KadabraConcordTasteMakerFeedbackStatusSetIcon_data.graphql"),m),_=(a=u!=null?u:p==null?void 0:p.is_in_golden_set)!=null?a:!1;if(_){var f;return i[4]!==l?(f=c.jsx(r("KDSIcon.react"),babelHelpers.extends({},l,{icon:r("MetaBrandStarFilled24Icon.react")})),i[4]=l,i[5]=f):f=i[5],f}var g;return i[6]!==l?(g=c.jsx(r("KDSIcon.react"),babelHelpers.extends({},l,{icon:r("MetaBrandStarOutline24Icon.react"),xstyle:d.disabled})),i[6]=l,i[7]=g):g=i[7],g}l.default=m}),98);
__d("XFBMetaAIContentTasteMakerVisibilityDecision.facebook",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum").Mirrored(["ADD_TO_PROFILE_FEED_GS_ONLY","ADD_TO_PROFILE_FEED_ONLY_NO_GS","ADD_TO_PROFILE_ONLY_NO_FEED_NO_GS","REMOVE_FROM_ALL_PROFILE_FEED_GS","UNREVIEWED"]),l=e;i.default=l}),66);
__d("KadabraConcordTasteMakerStatusUtils",[],(function(t,n,r,o,a,i,l){"use strict";var e=function(t){return t!=null&&["ADD_TO_PROFILE_FEED_GS_ONLY"].includes(t)},s=function(t){return t!=null&&["ADD_TO_PROFILE_FEED_GS_ONLY","ADD_TO_PROFILE_FEED_ONLY_NO_GS"].includes(t)},u=function(t){return t==null||["ADD_TO_PROFILE_FEED_GS_ONLY","ADD_TO_PROFILE_FEED_ONLY_NO_GS","ADD_TO_PROFILE_ONLY_NO_FEED_NO_GS"].includes(t)};l.isTasteMakerPostGoldenSetEnabled=e,l.isTasteMakerPostFeedEnabled=s,l.isTasteMakerPostProfileEnabled=u}),98);
__d("KadabraConcordTasteMakerFeedbackStatusButtonBotContent.react",["CometRelay","KDSFlexbox.react","KadabraConcordTasteMakerFeedbackDialog.entrypoint","KadabraConcordTasteMakerFeedbackPressableButton.react","KadabraConcordTasteMakerFeedbackStatusButtonBotContentMutation.graphql","KadabraConcordTasteMakerFeedbackStatusButtonBotContent_data.graphql","KadabraConcordTasteMakerFeedbackStatusFeedIcon.react","KadabraConcordTasteMakerFeedbackStatusProfileIcon.react","KadabraConcordTasteMakerFeedbackStatusSetIcon.react","KadabraConcordTasteMakerStatusUtils","react","react-compiler-runtime","useKDSEntryPointDialog"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=u||(u=o("react")),d=e!==void 0?e:e=n("KadabraConcordTasteMakerFeedbackStatusButtonBotContentMutation.graphql");function m(e){var t=o("react-compiler-runtime").c(29),a=e.minified,i=e.postKey,l=e.vertical,u=a===void 0?!1:a,m=l===void 0?!1:l,p=o("CometRelay").useFragment(s!==void 0?s:s=n("KadabraConcordTasteMakerFeedbackStatusButtonBotContent_data.graphql"),i),_=p==null?void 0:p.id,f=o("CometRelay").useMutation(d),g=f[0],h=f[1],y;t[0]!==_?(y={post_id:_},t[0]=_,t[1]=y):y=t[1];var C=r("useKDSEntryPointDialog")(r("KadabraConcordTasteMakerFeedbackDialog.entrypoint"),y),b=C[0],v;t[2]!==g||t[3]!==_?(v=function(t){t==null||_==null||g({optimisticResponse:{xfb_genai_imagine_taste_maker_feedback:{id:_,is_in_golden_set:o("KadabraConcordTasteMakerStatusUtils").isTasteMakerPostGoldenSetEnabled(t),is_visible_on_feed:o("KadabraConcordTasteMakerStatusUtils").isTasteMakerPostFeedEnabled(t),is_visible_on_profile:o("KadabraConcordTasteMakerStatusUtils").isTasteMakerPostProfileEnabled(t),taste_maker_decision:t}},variables:{feedback:t,post_id:_}})},t[2]=g,t[3]=_,t[4]=v):v=t[4];var S=v,R;t[5]!==b||t[6]!==S?(R=function(){b({onSubmit:S})},t[5]=b,t[6]=S,t[7]=R):R=t[7];var L=m?"end":"below",E=m?"column":"row",k=u?2:4,I=u?14:16,T;t[8]!==p||t[9]!==I?(T=c.jsx(r("KadabraConcordTasteMakerFeedbackStatusSetIcon.react"),{postKey:p,size:I}),t[8]=p,t[9]=I,t[10]=T):T=t[10];var D=u?14:16,x;t[11]!==p||t[12]!==D?(x=c.jsx(r("KadabraConcordTasteMakerFeedbackStatusFeedIcon.react"),{postKey:p,size:D}),t[11]=p,t[12]=D,t[13]=x):x=t[13];var $=u?14:16,P;t[14]!==p||t[15]!==$?(P=c.jsx(r("KadabraConcordTasteMakerFeedbackStatusProfileIcon.react"),{postKey:p,size:$}),t[14]=p,t[15]=$,t[16]=P):P=t[16];var N;t[17]!==T||t[18]!==x||t[19]!==P||t[20]!==E||t[21]!==k?(N=c.jsxs(r("KDSFlexbox.react"),{direction:E,gap:k,shrink:1,children:[T,x,P]}),t[17]=T,t[18]=x,t[19]=P,t[20]=E,t[21]=k,t[22]=N):N=t[22];var M;return t[23]!==h||t[24]!==u||t[25]!==N||t[26]!==R||t[27]!==L?(M=c.jsx(r("KadabraConcordTasteMakerFeedbackPressableButton.react"),{isLoading:h,minified:u,onPress:R,tooltip:"[FB-Only] Post visibility controls",tooltipPosition:L,children:N}),t[23]=h,t[24]=u,t[25]=N,t[26]=R,t[27]=L,t[28]=M):M=t[28],M}l.default=m}),98);
__d("KadabraConcordTasteMakerFeedbackStatusButtonUserGeneratedContentMutation_abraRelayOperation",[],(function(t,n,r,o,a,i){a.exports="31894894296791598"}),null);
__d("KadabraConcordTasteMakerFeedbackStatusButtonUserGeneratedContentMutation.graphql",["KadabraConcordTasteMakerFeedbackStatusButtonUserGeneratedContentMutation_abraRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={defaultValue:null,kind:"LocalArgument",name:"is_golden_set"},t={defaultValue:null,kind:"LocalArgument",name:"post_id"},r=[{alias:null,args:[{kind:"Variable",name:"is_golden_set",variableName:"is_golden_set"},{kind:"Variable",name:"post_id",variableName:"post_id"}],concreteType:"XFBGENAIPost",kind:"LinkedField",name:"xfb_genai_imagine_taste_maker_feedback_modify_ugc_post_golden_set_status",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_in_golden_set",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[e,t],kind:"Fragment",metadata:null,name:"KadabraConcordTasteMakerFeedbackStatusButtonUserGeneratedContentMutation",selections:r,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[t,e],kind:"Operation",name:"KadabraConcordTasteMakerFeedbackStatusButtonUserGeneratedContentMutation",selections:r},params:{id:n("KadabraConcordTasteMakerFeedbackStatusButtonUserGeneratedContentMutation_abraRelayOperation"),metadata:{},name:"KadabraConcordTasteMakerFeedbackStatusButtonUserGeneratedContentMutation",operationKind:"mutation",text:null}}})();a.exports=e}),null);
__d("KadabraConcordTasteMakerFeedbackStatusButtonUserGeneratedContent_data.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"KadabraConcordTasteMakerFeedbackStatusButtonUserGeneratedContent_data",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_in_golden_set",storageKey:null},{args:null,kind:"FragmentSpread",name:"KadabraConcordTasteMakerFeedbackStatusSetIcon_data"}],type:"XFBGENAIPost",abstractKey:null};a.exports=e}),null);
__d("KadabraConcordTasteMakerFeedbackStatusButtonUserGeneratedContent.react",["CometRelay","KDSFlexbox.react","KadabraConcordTasteMakerFeedbackPressableButton.react","KadabraConcordTasteMakerFeedbackStatusButtonUserGeneratedContentMutation.graphql","KadabraConcordTasteMakerFeedbackStatusButtonUserGeneratedContent_data.graphql","KadabraConcordTasteMakerFeedbackStatusSetIcon.react","react","react-compiler-runtime","useKDSConfirmationDialog"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=u||(u=o("react")),d=e!==void 0?e:e=n("KadabraConcordTasteMakerFeedbackStatusButtonUserGeneratedContentMutation.graphql");function m(e){var t,a=o("react-compiler-runtime").c(22),i=e.minified,l=e.postKey,u=e.vertical,m=i===void 0?!1:i,p=u===void 0?!1:u,_=o("CometRelay").useFragment(s!==void 0?s:s=n("KadabraConcordTasteMakerFeedbackStatusButtonUserGeneratedContent_data.graphql"),l),f=r("useKDSConfirmationDialog")(),g=_==null?void 0:_.id,h=(t=_==null?void 0:_.is_in_golden_set)!=null?t:!1,y=o("CometRelay").useMutation(d),C=y[0],b=y[1],v;a[0]!==C||a[1]!==g?(v=function(t){g!=null&&C({optimisticResponse:{xfb_genai_imagine_taste_maker_feedback:{id:g,is_in_golden_set:t}},variables:{is_golden_set:t,post_id:g}})},a[0]=C,a[1]=g,a[2]=v):v=a[2];var S=v,R;a[3]!==f||a[4]!==S?(R=function(){f({body:"Changing this setting will affect the ranking of this user's post. You can adjust this setting at any time.",primaryButtonLabel:"Remove from golden set",primaryButtonVariant:"negative",title:"Remove from golden set?"},function(){S(!1)})},a[3]=f,a[4]=S,a[5]=R):R=a[5];var L=R,E;a[6]!==f||a[7]!==S?(E=function(){f({body:"Changing this setting will affect the ranking of this user's post. You can adjust this setting at any time.",primaryButtonLabel:"Add to golden set",primaryButtonVariant:"primary",title:"Add to golden set?"},function(){S(!0)})},a[6]=f,a[7]=S,a[8]=E):E=a[8];var k=E,I=h?L:k,T=p?"end":"below",D=p?"column":"row",x=m?2:4,$=m?14:16,P;a[9]!==_||a[10]!==$?(P=c.jsx(r("KadabraConcordTasteMakerFeedbackStatusSetIcon.react"),{postKey:_,size:$}),a[9]=_,a[10]=$,a[11]=P):P=a[11];var N;a[12]!==P||a[13]!==D||a[14]!==x?(N=c.jsx(r("KDSFlexbox.react"),{direction:D,gap:x,shrink:1,children:P}),a[12]=P,a[13]=D,a[14]=x,a[15]=N):N=a[15];var M;return a[16]!==b||a[17]!==m||a[18]!==N||a[19]!==I||a[20]!==T?(M=c.jsx(r("KadabraConcordTasteMakerFeedbackPressableButton.react"),{isLoading:b,minified:m,onPress:I,tooltip:"[FB-Only] UGC Post visibility controls",tooltipPosition:T,children:N}),a[16]=b,a[17]=m,a[18]=N,a[19]=I,a[20]=T,a[21]=M):M=a[21],M}l.default=m}),98);
__d("KadabraConcordTasteMakerFeedbackStatusButton_data.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"KadabraConcordTasteMakerFeedbackStatusButton_data",selections:[{alias:null,args:null,kind:"ScalarField",name:"is_bot_post",storageKey:null},{args:null,kind:"FragmentSpread",name:"KadabraConcordTasteMakerFeedbackRankingScoreWarningButton_data"},{args:null,kind:"FragmentSpread",name:"KadabraConcordTasteMakerFeedbackStatusButtonBotContent_data"},{args:null,kind:"FragmentSpread",name:"KadabraConcordTasteMakerFeedbackStatusButtonUserGeneratedContent_data"},{args:null,kind:"FragmentSpread",name:"KadabraConcordTasteMakerFeedbackCopyToProfileButton_data"}],type:"XFBGENAIPost",abstractKey:null};a.exports=e}),null);
__d("KadabraConcordTasteMakerFeedbackStatusButton.react",["CometRelay","KDSFlexbox.react","KadabraConcordTasteMakerFeedbackCopyToProfileButton.react","KadabraConcordTasteMakerFeedbackRankingScoreWarningButton.react","KadabraConcordTasteMakerFeedbackStatusButtonBotContent.react","KadabraConcordTasteMakerFeedbackStatusButtonUserGeneratedContent.react","KadabraConcordTasteMakerFeedbackStatusButton_data.graphql","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c={root:{width:"xeq5yr9",$$css:!0}};function d(t){var a,i=o("react-compiler-runtime").c(22),l=t.minified,s=t.postKey,d=t.vertical,m=l===void 0?!1:l,p=d===void 0?!1:d,_=o("CometRelay").useFragment(e!==void 0?e:e=n("KadabraConcordTasteMakerFeedbackStatusButton_data.graphql"),s),f=(a=_==null?void 0:_.is_bot_post)!=null?a:!1,g,h=null;if(f===!0){var y;i[0]!==m||i[1]!==_||i[2]!==p?(y=u.jsx(r("KadabraConcordTasteMakerFeedbackStatusButtonBotContent.react"),{minified:m,postKey:_,vertical:p}),i[0]=m,i[1]=_,i[2]=p,i[3]=y):y=i[3],g=y;var C=p?"end":"below",b;i[4]!==m||i[5]!==_||i[6]!==C?(b=u.jsx(r("KadabraConcordTasteMakerFeedbackCopyToProfileButton.react"),{minified:m,postKey:_,tooltipPosition:C}),i[4]=m,i[5]=_,i[6]=C,i[7]=b):b=i[7],h=b}else{var v;i[8]!==m||i[9]!==_||i[10]!==p?(v=u.jsx(r("KadabraConcordTasteMakerFeedbackStatusButtonUserGeneratedContent.react"),{minified:m,postKey:_,vertical:p}),i[8]=m,i[9]=_,i[10]=p,i[11]=v):v=i[11],g=v}var S=p?"column-reverse":"row",R=p?8:4,L;i[12]!==m||i[13]!==_||i[14]!==p?(L=u.jsx(r("KadabraConcordTasteMakerFeedbackRankingScoreWarningButton.react"),{minified:m,postKey:_,vertical:p}),i[12]=m,i[13]=_,i[14]=p,i[15]=L):L=i[15];var E;return i[16]!==h||i[17]!==S||i[18]!==R||i[19]!==L||i[20]!==g?(E=u.jsxs(r("KDSFlexbox.react"),{alignItems:"center",direction:S,gap:R,justifyContent:"center",xstyle:c.root,children:[g,h,L]}),i[16]=h,i[17]=S,i[18]=R,i[19]=L,i[20]=g,i[21]=E):E=i[21],E}l.default=d}),98);
__d("KadabraFeedCard_data.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"KadabraFeedCard_data",selections:[{args:null,kind:"FragmentSpread",name:"KadabraFeedGenAIPost_data"}],type:"XFBGENAIPost",abstractKey:null};a.exports=e}),null);
__d("KadabraFeedCard_rankingData.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"KadabraFeedCard_rankingData",selections:[{alias:null,args:null,kind:"ScalarField",name:"ranking_request_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ranking_session_id",storageKey:null}],type:"XFBGenaiFetchFeedEdge",abstractKey:null};a.exports=e}),null);
__d("KadabraFeedGenAIPost_data.graphql",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"KadabraFeedGenAIPost_data",selections:[{kind:"RequiredField",field:e,action:"THROW"},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"genai_owner",plural:!1,selections:[e,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null}],type:"XABSocialProfile",abstractKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"post_type",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"post_media",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}],type:"XFBGenAIPublicPost",abstractKey:"__isXFBGenAIPublicPost"},{fragment:{kind:"InlineFragment",selections:[{args:null,kind:"FragmentSpread",name:"KadabraTileFeedMediaContent_data"}],type:"XFBGENAIPost",abstractKey:null},kind:"AliasedInlineFragmentSpread",name:"KadabraTileFeedMediaContent_data"},{args:null,kind:"FragmentSpread",name:"useKadabraFeedGenAIPostImpressionLogger_post"},{args:null,kind:"FragmentSpread",name:"useKadabraFeedGenAIPostVpvImpressionLogger_post"},{args:null,kind:"FragmentSpread",name:"useKadabraPromptRoute_post"},{args:null,kind:"FragmentSpread",name:"useKadabraConcordFeedPostLinkProps_post"}],type:"XFBGENAIPost",abstractKey:null}})();a.exports=e}),null);
__d("KadabraFeedCardLabelContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext({pivotLabel:null});l.default=u}),98);
__d("KadabraTileFeedCardHeader.react",["KDSAnimatedWaveform.react","KDSFlexbox.react","KDSLink.react","KDSMarquee.react","KDSText.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=r("react")),u={link:{":hover_textDecoration":"x1lku1pv",$$css:!0},root:{pointerEvents:"x67bb7w",width:"xh8yej3",$$css:!0}};function c(e){var t=o("react-compiler-runtime").c(20),n=e.addBelow,a=e.audioAttributions,i=e.overflowMenuButton,l;t[0]!==a?(l=a!=null?a:{},t[0]=a,t[1]=l):l=t[1];var c=l,d=c.artist,m=c.title,p=c.url,_=d!=null&&m!=null,f;t[2]!==d||t[3]!==_||t[4]!==m?(f=_&&s.jsxs(r("KDSText.react"),{color:"white",maxLines:1,testid:void 0,textAlign:"end",textStyle:"newSubheadline",children:[d," \xB7 ",m]}),t[2]=d,t[3]=_,t[4]=m,t[5]=f):f=t[5];var g=f,h;t[6]!==g||t[7]!==(a==null?void 0:a.onPress)||t[8]!==p?(h=p!=null?s.jsx(r("KDSLink.react"),{linkProps:{target:"_blank",url:p},onPress:a==null?void 0:a.onPress,variant:"currentColor",xstyle:u.link,children:g}):g,t[6]=g,t[7]=a==null?void 0:a.onPress,t[8]=p,t[9]=h):h=t[9];var y=h,C;t[10]!==y||t[11]!==_?(C=_&&s.jsxs(s.Fragment,{children:[s.jsx(r("KDSAnimatedWaveform.react"),{waveformColor:"white"}),s.jsx(r("KDSMarquee.react"),{children:y})]}),t[10]=y,t[11]=_,t[12]=C):C=t[12];var b=C,v;t[13]!==b||t[14]!==_||t[15]!==i?(v=_?s.jsxs(r("KDSFlexbox.react"),{alignItems:"center",gap:12,shrink:1,children:[b,i]}):s.jsx(r("KDSFlexbox.react"),{alignItems:"center",gap:12,grow:1,justifyContent:"end",children:i}),t[13]=b,t[14]=_,t[15]=i,t[16]=v):v=t[16];var S=v,R;return t[17]!==n||t[18]!==S?(R=s.jsxs(r("KDSFlexbox.react"),{alignContent:"center",direction:"column",gap:4,xstyle:u.root,children:[S,n]}),t[17]=n,t[18]=S,t[19]=R):R=t[19],R}l.default=c}),98);
__d("KadabraTileFeedCardWrapper.react",["CometPressable.react","FocusWithinHandler.react","react","react-compiler-runtime","stylex"],(function(t,n,r,o,a,i,l){"use strict";var e=["children","linkProps","onHover","onPress","ref","testid","wrapperXStyle","xstyle"],s,u,c=u||(u=o("react")),d=u.useState,m=0,p={pressableOverlay:{top:"x13vifvy",insetInlineEnd:"xtijo5x",bottom:"x1ey2m1c",insetInlineStart:"x1o0tod",position:"x10l6tqk",width:"xh8yej3",$$css:!0},root:{alignItems:"x1qjc9v5",backgroundColor:"xukmnpi",borderStartStartRadius:"x5uzrrg",borderStartEndRadius:"x632vos",borderEndEndRadius:"x1g00myu",borderEndStartRadius:"x191b7lb",display:"x78zum5",flexDirection:"xdt5ytf",height:"x5yr21d",isolation:"xc8icb0",justifyContent:"x1nhvcw1",maxWidth:"x193iq5w",overflowX:"x6ikm8r",overflowY:"x10wlt62",paddingTop:"xexx8yu",paddingInlineEnd:"xyri2b",paddingBottom:"x18d9i69",paddingInlineStart:"x1c1uobl",transition:"x10xxj64",width:"xswpmyp",$$css:!0},rootNonPressable:{position:"x1n2onr6",$$css:!0},wrapper:{paddingTop:"xexx8yu",paddingInlineEnd:"xyri2b",paddingBottom:"x18d9i69",paddingInlineStart:"x1c1uobl",position:"x1n2onr6",transition:"x19nuezv",$$css:!0},wrapperHovered:{filter:"xd8uiik",$$css:!0},wrapperPressed:{filter:"x1dk8vi9",transform:"xt73a7o","@media (max-width: 480px)_filter":"x1wub8z1","@media (max-width: 480px)_transform":"x1fkmi21","@media (max-width: 480px)_transition":"x1wpsjn4",$$css:!0}};function _(t){var n=o("react-compiler-runtime").c(46),a,i,l,u,m,_,f,g,h;n[0]!==t?(a=t.children,l=t.linkProps,u=t.onHover,m=t.onPress,_=t.ref,f=t.testid,g=t.wrapperXStyle,h=t.xstyle,i=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i,n[3]=l,n[4]=u,n[5]=m,n[6]=_,n[7]=f,n[8]=g,n[9]=h):(a=n[1],i=n[2],l=n[3],u=n[4],m=n[5],_=n[6],f=n[7],g=n[8],h=n[9]);var y=d(!1),C=y[0],b=y[1],v=d(!1),S=v[0],R=v[1],L=d(!1),E=L[0],k=L[1];if(m!=null||l!=null){var I;n[10]!==u?(I=function(){R(!0),u()},n[10]=u,n[11]=I):I=n[11];var T;n[12]===Symbol.for("react.memo_cache_sentinel")?(T=function(){R(!1)},n[12]=T):T=n[12];var D;n[13]!==S||n[14]!==C||n[15]!==g?(D=(s||(s=r("stylex"))).props(p.wrapper,S&&p.wrapperHovered,C&&p.wrapperPressed,g),n[13]=S,n[14]=C,n[15]=g,n[16]=D):D=n[16];var x;n[17]!==h?(x=[p.root,p.pressableOverlay,h],n[17]=h,n[18]=x):x=n[18];var $;n[19]!==i||n[20]!==l||n[21]!==m||n[22]!==_||n[23]!==x||n[24]!==f?($=c.jsx(r("CometPressable.react"),babelHelpers.extends({},i,{hideHoverOverlay:!0,linkProps:l,onPress:m,onPressChange:b,overlayDisabled:!0,ref:_,suppressFocusRing:!0,testid:void 0,xstyle:x})),n[19]=i,n[20]=l,n[21]=m,n[22]=_,n[23]=x,n[24]=f,n[25]=$):$=n[25];var P;n[26]===Symbol.for("react.memo_cache_sentinel")?(P={className:"x47corl x1n2onr6"},n[26]=P):P=n[26];var N=S||E,M;n[27]!==a||n[28]!==N?(M=a(N),n[27]=a,n[28]=N,n[29]=M):M=n[29];var w;n[30]!==M?(w=c.jsx("div",babelHelpers.extends({},P,{children:M})),n[30]=M,n[31]=w):w=n[31];var A;return n[32]!==I||n[33]!==D||n[34]!==$||n[35]!==w?(A=c.jsx(r("FocusWithinHandler.react"),{onFocusChange:k,children:c.jsxs("div",babelHelpers.extends({onMouseEnter:I,onMouseLeave:T},D,{children:[$,w]}))}),n[32]=I,n[33]=D,n[34]=$,n[35]=w,n[36]=A):A=n[36],A}var F;n[37]!==h?(F=(s||(s=r("stylex"))).props(p.root,p.rootNonPressable,h),n[37]=h,n[38]=F):F=n[38];var O=S||E,B;n[39]!==a||n[40]!==O?(B=a(O),n[39]=a,n[40]=O,n[41]=B):B=n[41];var W;return n[42]!==_||n[43]!==F||n[44]!==B?(W=c.jsx("div",babelHelpers.extends({},F,{ref:_,children:B})),n[42]=_,n[43]=F,n[44]=B,n[45]=W):W=n[45],W}l.default=_}),98);
__d("KadabraTileFeedFloatingPillLabel.react",["KDSAnimatedFlexbox.react","KDSText.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u="125ms",c="cubic-bezier(0.1, 0.2, 0.3, 0.94)",d={pill:{backdropFilter:"xrefnyo",backgroundColor:"xwb4oes",borderStartStartRadius:"x12ol6y4",borderStartEndRadius:"x180vkcf",borderEndEndRadius:"x1khw62d",borderEndStartRadius:"x709u02",boxShadow:"x1jj9n0v",insetInlineStart:"x1n8ud3w",left:null,right:null,opacity:"x1hc1fzr",paddingTop:"x1yrsyyn",paddingBottom:"x10b6aqq",paddingInlineStart:"x1g0dm76",paddingInlineEnd:"xpdmqnj",paddingLeft:null,paddingRight:null,position:"x10l6tqk",top:"xuivejd",$$css:!0},visibilityAnimationIn:{animationDuration:"x5eel8u",animationFillMode:"xskzprw",animationName:"xxp0q0x",animationTimingFunction:"xqq4s9r",opacity:"xg01cxk",$$css:!0},visibilityAnimationOut:{animationDuration:"x5eel8u",animationFillMode:"x10e4vud",animationName:"xqcmdr3",animationTimingFunction:"xqq4s9r",$$css:!0}};function m(e){var t=o("react-compiler-runtime").c(7),n=e.containerIsHovered,a=e.label,i,l;t[0]===Symbol.for("react.memo_cache_sentinel")?(i={mounted:!0,style:d.visibilityAnimationIn},l={mounted:!0,style:d.visibilityAnimationOut},t[0]=i,t[1]=l):(i=t[0],l=t[1]);var u;t[2]!==a?(u=s.jsx(r("KDSText.react"),{color:"white",textStyle:"newSubheadline",children:a}),t[2]=a,t[3]=u):u=t[3];var c;return t[4]!==n||t[5]!==u?(c=s.jsx(r("KDSAnimatedFlexbox.react"),{animatingInState:i,animatingOutState:l,isHovered:n,xstyle:d.pill,children:u}),t[4]=n,t[5]=u,t[6]=c):c=t[6],c}l.default=m}),98);
__d("KadabraTileFeedCoverCard.react",["KDSAnimatedFlexbox.react","KDSFlexbox.react","KadabraFeedUtils","KadabraTileFeedCardWrapper.react","KadabraTileFeedFloatingPillLabel.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["aspectRatio","disableOverlay","enableHeaderUnderlay","floatingPillLabel","footer","header","media","ref"],s,u=s||(s=o("react")),c="transform .5s cubic-bezier(0.25, 0.46, 0.45, 0.94)",d="500ms",m="cubic-bezier(0.1, 0.2, 0.3, 0.94)",p={absolute:{contain:"x6wvzqs",top:"x13vifvy",insetInlineEnd:"xtijo5x",bottom:"x1ey2m1c",insetInlineStart:"x1o0tod",position:"x10l6tqk",$$css:!0},footerUnderlay:{backgroundImage:"x1gmhyex",bottom:"x1ey2m1c",height:"x5yr21d",position:"x10l6tqk",width:"xh8yej3",$$css:!0},headerUnderlay:{backgroundImage:"x5i6mjz",height:"x5yr21d",position:"x10l6tqk",width:"xh8yej3",$$css:!0},mediaHovered:{height:"x5yr21d",transform:"x1bao77f",transition:"x1dy6fjb",$$css:!0},mediaNotHovered:{height:"x5yr21d",transform:"x3oybdh",transition:"x1dy6fjb",$$css:!0},overlay:{height:"x534gh0",paddingTop:"x1cnzs8",paddingInlineEnd:"x1xnnf8n",paddingBottom:"x1l90r2v",paddingInlineStart:"x106a9eq",position:"x10l6tqk",width:"x19sv2k2",$$css:!0},root:{backgroundColor:"x1seikjg",borderStartStartRadius:"x5uzrrg",borderStartEndRadius:"x632vos",borderEndEndRadius:"x1g00myu",borderEndStartRadius:"x191b7lb",boxShadow:"x1n86rs4",height:"x5yr21d",overflowX:"x6ikm8r",overflowY:"x10wlt62",position:"x1n2onr6",$$css:!0},rootAspectRatio:function(t){return[{aspectRatio:t!=null?"x10y9f9r":t,$$css:!0},{"--x-aspectRatio":t!=null?t:void 0}]},visibilityAnimationIn:{animationDuration:"xxkxylk",animationFillMode:"xskzprw",animationName:"xqcmdr3",animationTimingFunction:"xqq4s9r",$$css:!0},visibilityAnimationOut:{animationDuration:"xxkxylk",animationFillMode:"x10e4vud",animationName:"xxp0q0x",animationTimingFunction:"xqq4s9r",$$css:!0}};function _(t){var n=o("react-compiler-runtime").c(24),a,i,l,s,c,d,m,_,f;n[0]!==t?(a=t.aspectRatio,m=t.disableOverlay,_=t.enableHeaderUnderlay,i=t.floatingPillLabel,l=t.footer,s=t.header,c=t.media,d=t.ref,f=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i,n[3]=l,n[4]=s,n[5]=c,n[6]=d,n[7]=m,n[8]=_,n[9]=f):(a=n[1],i=n[2],l=n[3],s=n[4],c=n[5],d=n[6],m=n[7],_=n[8],f=n[9]);var g=m===void 0?!1:m,h=_===void 0?!1:_,y;n[10]!==a?(y=o("KadabraFeedUtils").getSnappedAspectRatioForFeedCard(a),n[10]=a,n[11]=y):y=n[11];var C=y,b;n[12]!==g||n[13]!==h||n[14]!==i||n[15]!==l||n[16]!==s||n[17]!==c||n[18]!==C?(b=function(t){return u.jsxs(r("KDSFlexbox.react"),{direction:"column",justifyContent:"end",xstyle:[p.root,p.rootAspectRatio(C)],children:[u.jsx(r("KDSFlexbox.react"),{direction:"column",justifyContent:"end",xstyle:t?p.mediaHovered:p.mediaNotHovered,children:c}),i!=null&&u.jsx(r("KadabraTileFeedFloatingPillLabel.react"),{containerIsHovered:t,label:i}),!g&&u.jsxs(r("KDSAnimatedFlexbox.react"),{animatingInState:{mounted:!0,style:p.visibilityAnimationIn},animatingOutState:{mounted:!0,style:p.visibilityAnimationOut},defaultState:{mounted:!1,style:null},isHovered:t,xstyle:p.absolute,children:[h&&u.jsx(r("KDSFlexbox.react"),{xstyle:p.headerUnderlay}),u.jsx(r("KDSFlexbox.react"),{xstyle:p.footerUnderlay}),u.jsxs(r("KDSFlexbox.react"),{direction:"column",justifyContent:"space-between",xstyle:p.overlay,children:[s,l]})]})]})},n[12]=g,n[13]=h,n[14]=i,n[15]=l,n[16]=s,n[17]=c,n[18]=C,n[19]=b):b=n[19];var v;return n[20]!==d||n[21]!==b||n[22]!==f?(v=u.jsx(r("KadabraTileFeedCardWrapper.react"),babelHelpers.extends({},f,{ref:d,children:b})),n[20]=d,n[21]=b,n[22]=f,n[23]=v):v=n[23],v}l.default=_}),98);
__d("KadabraTileFeedMediaContent_data.graphql",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{argumentDefinitions:[{kind:"RootArgument",name:"__relay_internal__pv__KadabraTasteMakerFeedbackStatusInFeedrelayprovider"}],kind:"Fragment",metadata:null,name:"KadabraTileFeedMediaContent_data",selections:[e,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"genai_owner",plural:!1,selections:[e],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"post_media",plural:!0,selections:[e,{alias:null,args:null,kind:"ScalarField",name:"media_type",storageKey:null},{fragment:{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"video_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"prompt",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"lookaside_uri",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"lookaside_poster_uri",storageKey:null}],type:"XFBGENAIVideoGen",abstractKey:null}],type:"XFBGenAIVideo",abstractKey:"__isXFBGenAIVideo"},kind:"AliasedInlineFragmentSpread",name:"video"},{args:null,kind:"FragmentSpread",name:"useKadabraVideoDeliveryResponse_data"}],storageKey:null},{args:null,kind:"FragmentSpread",name:"useKadabraTileFeedPostAudio_post"},{args:null,kind:"FragmentSpread",name:"KadabraTileFeedPostFooter_post"},{condition:"__relay_internal__pv__KadabraTasteMakerFeedbackStatusInFeedrelayprovider",kind:"Condition",passingValue:!0,selections:[{fragment:{kind:"InlineFragment",selections:[{args:null,kind:"FragmentSpread",name:"KadabraConcordTasteMakerFeedbackStatusButton_data"}],type:"XFBGENAIPost",abstractKey:null},kind:"AliasedInlineFragmentSpread",name:"KadabraConcordTasteMakerFeedbackStatusButton_data"}]},{args:null,kind:"FragmentSpread",name:"KadabraTileFeedPostOverflowButton_post"}],type:"XFBGENAIPost",abstractKey:null}})();a.exports=e}),null);
__d("KadabraTileFeedCardFooter.react",["KDSFlexbox.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={overflowHidden:{overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0},root:{marginInlineStart:"x1qfufaz",width:"xh8yej3",$$css:!0}};function c(e){var t=o("react-compiler-runtime").c(8),n=e.actor,a=e.children,i=e.xstyle,l;t[0]!==i?(l=[u.root,i],t[0]=i,t[1]=l):l=t[1];var c;t[2]!==n?(c=s.jsx(r("KDSFlexbox.react"),{grow:1,justifyContent:"start",xstyle:u.overflowHidden,children:n}),t[2]=n,t[3]=c):c=t[3];var d;return t[4]!==a||t[5]!==l||t[6]!==c?(d=s.jsxs(r("KDSFlexbox.react"),{alignItems:"end",alignSelf:"stretch",gap:12,justifyContent:"center",xstyle:l,children:[c,a]}),t[4]=a,t[5]=l,t[6]=c,t[7]=d):d=t[7],d}l.default=c}),98);
__d("KadabraTileFeedActor.react",["KDSButton.react","KDSFlexbox.react","KadabraTileFeedButtonStyles","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["ref","xstyle"],s,u=s||(s=o("react"));function c(t){var n=o("react-compiler-runtime").c(6),a,i;if(n[0]!==t){var l=t.ref,s=t.xstyle,c=babelHelpers.objectWithoutPropertiesLoose(t,e);i=l,a=c,n[0]=t,n[1]=a,n[2]=i}else a=n[1],i=n[2];var d;return n[3]!==a||n[4]!==i?(d=u.jsx(r("KDSFlexbox.react"),{children:u.jsx(r("KDSButton.react"),babelHelpers.extends({},a,{ref:i,testid:void 0,xstyle:o("KadabraTileFeedButtonStyles").KadabraTileFeedButtonStyles.ufiButton}))}),n[3]=a,n[4]=i,n[5]=d):d=n[5],d}l.default=c}),98);
__d("KadabraTileFeedPostActor_post.graphql",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"KadabraTileFeedPostActor_post",selections:[e,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"genai_owner",plural:!1,selections:[e,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"follow_status",storageKey:null}],type:"XABSocialProfile",abstractKey:null}],storageKey:null}],type:"XFBGENAIPost",abstractKey:null}})();a.exports=e}),null);
__d("KadabraTileFeedPostActor.react",["CometRelay","FBLogger","KDSHovercardTrigger.react","KDSPopoverLoadingState.react","KadabraProfileHovercard.entrypoint","KadabraRouteUtils","KadabraTileFeedActor.react","KadabraTileFeedPostActor_post.graphql","gkx","react","react-compiler-runtime","useKadabraInteractionLogger","useKadabraPageLayout"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=r("gkx")("8942");function d(t){var a,i,l,s=o("react-compiler-runtime").c(9),d=t.post,p=o("CometRelay").useFragment(e!==void 0?e:e=n("KadabraTileFeedPostActor_post.graphql"),d),_=r("useKadabraInteractionLogger")(),f=r("useKadabraPageLayout")(),g=f.isMobileLayout,h=p==null||(a=p.genai_owner)==null?void 0:a.username;if(h==null)throw r("FBLogger")("kadabra_core").mustfixThrow("Post owner username is null");if(p==null)throw r("FBLogger")("kadabra_core").mustfixThrow("Post is null");var y=(i=p.genai_owner)==null?void 0:i.follow_status,C;if(s[0]!==_||s[1]!==((l=p.genai_owner)==null?void 0:l.id)||s[2]!==p.id){var b;C=function(){var e;_.log({action_target:"profile",action_type:"click",event_name:"profile_click",post_id:p.id,target_user_id:(e=p.genai_owner)==null?void 0:e.id})},s[0]=_,s[1]=(b=p.genai_owner)==null?void 0:b.id,s[2]=p.id,s[3]=C}else C=s[3];var v=C,S;return s[4]!==y||s[5]!==g||s[6]!==v||s[7]!==h?(S=c&&!g&&y!=null?u.jsx(r("KDSHovercardTrigger.react"),{align:"start",fallback:u.jsx(r("KDSPopoverLoadingState.react"),{}),popoverEntryPoint:r("KadabraProfileHovercard.entrypoint"),popoverProps:{username:h},position:"above",children:function(t){return u.jsx(m,{logProfileClick:v,ref:t,username:h})}}):u.jsx(m,{logProfileClick:v,ref:null,username:h}),s[4]=y,s[5]=g,s[6]=v,s[7]=h,s[8]=S):S=s[8],S}function m(e){var t=o("react-compiler-runtime").c(9),n=e.logProfileClick,a=e.ref,i=e.username,l="@"+i,s;t[0]!==l?(s=o("KadabraRouteUtils").kadabraRouteProfile({vanity:l}),t[0]=l,t[1]=s):s=t[1];var c;t[2]!==s?(c={prefetchQueriesOnHover:!0,url:s},t[2]=s,t[3]=c):c=t[3];var d;return t[4]!==n||t[5]!==a||t[6]!==c||t[7]!==i?(d=u.jsx(r("KadabraTileFeedActor.react"),{label:i,linkProps:c,onPress:n,ref:a}),t[4]=n,t[5]=a,t[6]=c,t[7]=i,t[8]=d):d=t[8],d}l.default=d}),98);
__d("KadabraTileFeedPostFooterUFIButtons_post.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[{kind:"RootArgument",name:"__relay_internal__pv__kadabra_concord_remix_pivot_desktop_onlyrelayprovider"}],kind:"Fragment",metadata:null,name:"KadabraTileFeedPostFooterUFIButtons_post",selections:[{alias:null,args:null,kind:"ScalarField",name:"viewer_actions",storageKey:null},{args:null,kind:"FragmentSpread",name:"KadabraTileFeedPostFooterUFILikeButton_post"},{fragment:{kind:"InlineFragment",selections:[{args:null,kind:"FragmentSpread",name:"KadabraTileFeedPostFooterUFICommentButton_post"}],type:"GenAIPostBase",abstractKey:"__isGenAIPostBase"},kind:"AliasedInlineFragmentSpread",name:"KadabraTileFeedPostFooterUFICommentButton_post"},{condition:"__relay_internal__pv__kadabra_concord_remix_pivot_desktop_onlyrelayprovider",kind:"Condition",passingValue:!0,selections:[{fragment:{kind:"InlineFragment",selections:[{args:null,kind:"FragmentSpread",name:"KadabraTileFeedPostFooterUFIUsePromptHovercardTrigger_post"}],type:"GenAIPostBase",abstractKey:"__isGenAIPostBase"},kind:"AliasedInlineFragmentSpread",name:"remix_hovercard_trigger"}]},{condition:"__relay_internal__pv__kadabra_concord_remix_pivot_desktop_onlyrelayprovider",kind:"Condition",passingValue:!1,selections:[{fragment:{kind:"InlineFragment",selections:[{args:null,kind:"FragmentSpread",name:"KadabraTileFeedPostFooterUFIUsePromptButton_post"}],type:"GenAIPostBase",abstractKey:"__isGenAIPostBase"},kind:"AliasedInlineFragmentSpread",name:"remix_button"}]}],type:"XFBGENAIPost",abstractKey:null};a.exports=e}),null);
__d("KadabraTileFeedPostFooterUFICommentButton_post.graphql",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"KadabraTileFeedPostFooterUFICommentButton_post",selections:[{kind:"RequiredField",field:e,action:"THROW"},{alias:null,args:null,kind:"ScalarField",name:"total_comment_count",storageKey:null},{args:null,kind:"FragmentSpread",name:"useKadabraConcordFeedPostLinkProps_post"},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"genai_owner",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null}],type:"XABSocialProfile",abstractKey:null},e],storageKey:null}],type:"GenAIPostBase",abstractKey:"__isGenAIPostBase"}})();a.exports=e}),null);
__d("KadabraTileFeedUFIButton.react",["KDSUFIButton.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["ref"],s,u=s||(s=o("react"));function c(t){var n=o("react-compiler-runtime").c(6),a,i;n[0]!==t?(i=t.ref,a=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i):(a=n[1],i=n[2]);var l;return n[3]!==a||n[4]!==i?(l=u.jsx(r("KDSUFIButton.react"),babelHelpers.extends({ref:i},a)),n[3]=a,n[4]=i,n[5]=l):l=n[5],l}l.default=c}),98);
__d("KadabraTileFeedPostFooterUFICommentButton.react",["fbt","CometRelay","KadabraConcordFeedPostEntrypointType.entrypointutils","KadabraMessageIconOutline.react","KadabraPostContext","KadabraRouteUtils","KadabraTileFeedPostFooterUFICommentButton_post.graphql","KadabraTileFeedUFIButton.react","KadabraUFIUtils","react","react-compiler-runtime","useCurrentRoute","useKadabraConcordFeedPostLinkProps","useKadabraInteractionLogger","useKadabraLoginUpsellDialog"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=u||(u=o("react")),d=u.use;function m(t){var a,i,l,u,m=o("react-compiler-runtime").c(25),p=t.index,_=t.onPress,f=t.post,g=o("CometRelay").useFragment(e!==void 0?e:e=n("KadabraTileFeedPostFooterUFICommentButton_post.graphql"),f),h=d(r("KadabraPostContext")),y=h.composerRef,C=r("useCurrentRoute")(),b=r("useKadabraInteractionLogger")(),v=((a=g.genai_owner)==null?void 0:a.username)!=null?"@"+((i=g.genai_owner)==null?void 0:i.username):void 0,S=(C==null?void 0:C.tracePolicy)==="kadabra.prompt",R=(C==null?void 0:C.tracePolicy)==="kadabra.profile",L=r("useKadabraConcordFeedPostLinkProps")(g,R?o("KadabraConcordFeedPostEntrypointType.entrypointutils").KadabraConcordFeedPostEntrypointType.PROFILE_FEED_COMMENT:o("KadabraConcordFeedPostEntrypointType.entrypointutils").KadabraConcordFeedPostEntrypointType.HOME_FEED_COMMENT,p),E;m[0]!==L||m[1]!==g.id||m[2]!==v?(E=L!=null?L:{url:o("KadabraRouteUtils").kadabraRoutePrompt({prompt_id:g.id,vanity:v})},m[0]=L,m[1]=g.id,m[2]=v,m[3]=E):E=m[3];var k=E,I=S?void 0:k,T;if(m[4]!==y||m[5]!==((l=g.genai_owner)==null?void 0:l.id)||m[6]!==g.id||m[7]!==_||m[8]!==b||m[9]!==S){var D;T=function(t){var e;if(S){var n;y==null||(n=y.current)==null||n.focus()}_==null||_(t),b.log({action_target:"comment_button",action_type:"click",event_name:"comment_button_click",post_author_id:g==null||(e=g.genai_owner)==null?void 0:e.id,post_id:g.id})},m[4]=y,m[5]=(D=g.genai_owner)==null?void 0:D.id,m[6]=g.id,m[7]=_,m[8]=b,m[9]=S,m[10]=T}else T=m[10];var x=T,$=r("useKadabraLoginUpsellDialog")("prompt_ufi_button",x,I),P=$.linkProps,N=$.onPress,M=(u=g==null?void 0:g.total_comment_count)!=null?u:0,w,A,F;m[11]!==M?(F=s._(/*BTDS*/"Reply"),w=r("KadabraTileFeedUFIButton.react"),A=o("KadabraUFIUtils").getUFIButtonLabel(F,M),m[11]=M,m[12]=w,m[13]=A,m[14]=F):(w=m[12],A=m[13],F=m[14]);var O=(g==null?void 0:g.total_comment_count)==null||(g==null?void 0:g.total_comment_count)===0,B=M.toString(),W;m[15]!==F?(W={position:"below",tooltipOverride:F},m[15]=F,m[16]=W):W=m[16];var q;return m[17]!==w||m[18]!==P||m[19]!==N||m[20]!==A||m[21]!==O||m[22]!==B||m[23]!==W?(q=c.jsx(w,{"aria-label":A,icon:r("KadabraMessageIconOutline.react"),isLabelHidden:O,isXMDSIcon:!1,label:B,linkProps:P,onPress:N,testid:void 0,tooltip:W}),m[17]=w,m[18]=P,m[19]=N,m[20]=A,m[21]=O,m[22]=B,m[23]=W,m[24]=q):q=m[24],q}l.default=m}),226);
__d("KadabraTileFeedPostFooterUFILikeButton_post.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"KadabraTileFeedPostFooterUFILikeButton_post",selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"has_viewer_liked",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"like_count",storageKey:null}],type:"XFBGenAIPublicPost",abstractKey:"__isXFBGenAIPublicPost"},{args:null,kind:"FragmentSpread",name:"useKadabraLikePublicPost_post"}],type:"GenAIPostBase",abstractKey:"__isGenAIPostBase"};a.exports=e}),null);
__d("KadabraTileFeedPostFooterUFILikeButton.react",["fbt","CometHeroHoldTrigger.react","CometRelay","KadabraHeartIconFilled.react","KadabraHeartIconOutline.react","KadabraTileFeedPostFooterUFILikeButton_post.graphql","KadabraTileFeedUFIButton.react","KadabraUFIUtils","hero-tracing","react","react-compiler-runtime","useKadabraLikePublicPost"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=u||(u=o("react"));function d(t){var a,i=o("react-compiler-runtime").c(9),l=t.post,u=o("CometRelay").useFragment(e!==void 0?e:e=n("KadabraTileFeedPostFooterUFILikeButton_post.graphql"),l),d=r("useKadabraLikePublicPost")(u),m=d.inFlight,p=d.likePost,_=d.traceIdState,f=(a=u==null?void 0:u.like_count)!=null?a:0,g=(u==null?void 0:u.has_viewer_liked)===!0,h;i[0]===Symbol.for("react.memo_cache_sentinel")?(h=s._(/*BTDS*/"Like"),i[0]=h):h=i[0];var y=h,C;i[1]!==g||i[2]!==m||i[3]!==f||i[4]!==p?(C=function(t){return c.jsxs(c.Fragment,{children:[c.jsx(r("CometHeroHoldTrigger.react"),{hold:m}),c.jsx(r("KadabraTileFeedUFIButton.react"),{"aria-label":o("KadabraUFIUtils").getUFIButtonLabel(y,f),icon:r(g?"KadabraHeartIconFilled.react":"KadabraHeartIconOutline.react"),isLabelHidden:f<=0,isXMDSIcon:!1,label:f.toString(),onPress:p,ref:t,testid:void 0,tooltip:{position:"below",tooltipOverride:y}})]})},i[1]=g,i[2]=m,i[3]=f,i[4]=p,i[5]=C):C=i[5];var b;return i[6]!==C||i[7]!==_?(b=c.jsx(o("hero-tracing").HeroInteraction,{interactionDesc:"KadabraTileFeedPostFooterUFILikeButton",interactionUUID:_,renderTrackedDOMElement:C}),i[6]=C,i[7]=_,i[8]=b):b=i[8],b}l.default=d}),226);
__d("KadabraTileFeedPostFooterUFIButtons.react",["CometRelay","FBLogger","KDSButtonGroup.react","KadabraMetaAIEntryPointContext","KadabraTileFeedPostFooterUFIButtons_post.graphql","KadabraTileFeedPostFooterUFICommentButton.react","KadabraTileFeedPostFooterUFILikeButton.react","cr:12057","cr:15958","react","react-compiler-runtime","useKadabraPageLayout"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c={root:{columnGap:"x1o1pmfc",flexBasis:"xcklp1c",marginInlineEnd:"x1w5wx5t","@media (pointer: coarse)_width":"x1pl6kqj",$$css:!0}};function d(t){var a=o("react-compiler-runtime").c(17),i=t.index,l=t.post,s=o("CometRelay").useFragment(e!==void 0?e:e=n("KadabraTileFeedPostFooterUFIButtons_post.graphql"),l),d=r("useKadabraPageLayout")(),m=d.isMobileLayout;if(m)return null;if(s==null)throw r("FBLogger")("kadabra_core").mustfixThrow("Kadabra Post for footer is null");var p;if(a[0]!==(s==null?void 0:s.viewer_actions)){var _;p=s==null||(_=s.viewer_actions)==null?void 0:_.includes("REMIX"),a[0]=s==null?void 0:s.viewer_actions,a[1]=p}else p=a[1];var f=p,g;if(a[2]!==(s==null?void 0:s.viewer_actions)){var h;g=s==null||(h=s.viewer_actions)==null?void 0:h.includes("COMMENT"),a[2]=s==null?void 0:s.viewer_actions,a[3]=g}else g=a[3];var y=g,C;a[4]!==s?(C=u.jsx(r("KadabraTileFeedPostFooterUFILikeButton.react"),{post:s}),a[4]=s,a[5]=C):C=a[5];var b;a[6]!==f||a[7]!==s?(b=f&&u.jsx(o("KadabraMetaAIEntryPointContext").KadabraMetaAIEntryPointContextProvider,{value:"kadabra__feed__remix",children:n("cr:15958")!=null&&(s==null?void 0:s.remix_hovercard_trigger)!=null?u.jsx(n("cr:15958"),{post:s.remix_hovercard_trigger}):n("cr:12057")!=null&&(s==null?void 0:s.remix_button)!=null&&u.jsx(n("cr:12057"),{post:s.remix_button})}),a[6]=f,a[7]=s,a[8]=b):b=a[8];var v;a[9]!==y||a[10]!==i||a[11]!==s?(v=y&&u.jsx(r("KadabraTileFeedPostFooterUFICommentButton.react"),{index:i,post:s.KadabraTileFeedPostFooterUFICommentButton_post}),a[9]=y,a[10]=i,a[11]=s,a[12]=v):v=a[12];var S;return a[13]!==C||a[14]!==b||a[15]!==v?(S=u.jsxs(r("KDSButtonGroup.react"),{xstyle:c.root,children:[C,b,v]}),a[13]=C,a[14]=b,a[15]=v,a[16]=S):S=a[16],S}l.default=d}),98);
__d("KadabraTileFeedPostFooter_post.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"KadabraTileFeedPostFooter_post",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"genai_owner",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null}],type:"XABSocialProfile",abstractKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"KadabraTileFeedPostFooterUFIButtons_post"},{args:null,kind:"FragmentSpread",name:"KadabraTileFeedPostActor_post"}],type:"XFBGENAIPost",abstractKey:null};a.exports=e}),null);
__d("KadabraTileFeedPostFooter.react",["CometRelay","FBLogger","KadabraTileFeedCardFooter.react","KadabraTileFeedPostActor.react","KadabraTileFeedPostFooterUFIButtons.react","KadabraTileFeedPostFooter_post.graphql","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c={footer:{position:"x1n2onr6",$$css:!0}};function d(t){var a,i=o("react-compiler-runtime").c(8),l=t.data,s=t.index,d=o("CometRelay").useFragment(e!==void 0?e:e=n("KadabraTileFeedPostFooter_post.graphql"),l),m=d==null||(a=d.genai_owner)==null?void 0:a.username;if(m==null||d==null)throw r("FBLogger")("kadabra_core").mustfixThrow("Post owner username is null");var p;i[0]!==d?(p=u.jsx(r("KadabraTileFeedPostActor.react"),{post:d}),i[0]=d,i[1]=p):p=i[1];var _;i[2]!==s||i[3]!==d?(_=u.jsx(r("KadabraTileFeedPostFooterUFIButtons.react"),{index:s,post:d}),i[2]=s,i[3]=d,i[4]=_):_=i[4];var f;return i[5]!==p||i[6]!==_?(f=u.jsx(r("KadabraTileFeedCardFooter.react"),{actor:p,xstyle:c.footer,children:_}),i[5]=p,i[6]=_,i[7]=f):f=i[7],f}l.default=d}),98);
__d("KadabraTileFeedPostOverflowButton_post.graphql",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"KadabraTileFeedPostOverflowButton_post",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"genai_owner",plural:!1,selections:[e],storageKey:null},{kind:"RequiredField",field:e,action:"THROW"}],type:"GenAIPostBase",abstractKey:"__isGenAIPostBase"}})();a.exports=e}),null);
__d("KadabraTileFeedPostOverflowButton.react",["fbt","CometRelay","KDSEntryPointMenuTrigger.react","KDSIconButton.react","KadabraPostHeaderOverflowMenuRedesign.entrypoint","KadabraTileFeedButtonStyles","KadabraTileFeedPostOverflowButton_post.graphql","MetaBrandThreeDotsHorizontalOutline24Icon.react","react","react-compiler-runtime","useKadabraInteractionLogger"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=u||(u=o("react")),d=u.useId,m={moreButton:{pointerEvents:"x67bb7w",$$css:!0}};function p(t){var a,i=o("react-compiler-runtime").c(13),l=t.post,u=o("CometRelay").useFragment(e!==void 0?e:e=n("KadabraTileFeedPostOverflowButton_post.graphql"),l),p=d(),_=r("useKadabraInteractionLogger")(),f;i[0]!==u.id?(f={variables:{postID:u.id}},i[0]=u.id,i[1]=f):f=i[1];var g;i[2]!==p?(g={buttonId:p,isOverflowMenuInFeed:!0},i[2]=p,i[3]=g):g=i[3];var h;if(i[4]!==p||i[5]!==_||i[6]!==((a=u.genai_owner)==null?void 0:a.id)||i[7]!==u.id){var y;h=function(t,n,a,i,l,d,f,g,h){return c.jsx(r("KDSIconButton.react"),{icon:r("MetaBrandThreeDotsHorizontalOutline24Icon.react"),id:p,label:s._(/*BTDS*/"More"),onHoverIn:i,onHoverOut:l,onPress:function(){if(n(),!g){var e;_.log({action_target:"more_button",action_type:"click",event_name:"open_post_more_menu",post_id:u.id,target_user_id:(e=u.genai_owner)==null?void 0:e.id})}},onPressIn:d,ref:t,size:"32",tooltip:{position:"above"},xstyle:[m.moreButton,o("KadabraTileFeedButtonStyles").KadabraTileFeedButtonStyles.ufiButton]})},i[4]=p,i[5]=_,i[6]=(y=u.genai_owner)==null?void 0:y.id,i[7]=u.id,i[8]=h}else h=i[8];var C;return i[9]!==f||i[10]!==g||i[11]!==h?(C=c.jsx(r("KDSEntryPointMenuTrigger.react"),{align:"end",entryPointParams:f,otherProps:g,popoverEntryPoint:r("KadabraPostHeaderOverflowMenuRedesign.entrypoint"),popoverType:"menu",position:"below",children:h}),i[9]=f,i[10]=g,i[11]=h,i[12]=C):C=i[12],C}l.default=p}),226);
__d("useKadabraTileFeedPostAudio_post.graphql",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},t=[{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null}],n={alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"display_title",plural:!1,selections:t,storageKey:null},r=[e,{alias:null,args:null,concreteType:"AudioAsset",kind:"LinkedField",name:"audio_asset",plural:!1,selections:[{alias:null,args:null,concreteType:"ArtistsConnection",kind:"LinkedField",name:"artists",plural:!1,selections:[{alias:null,args:null,concreteType:"MusicArtist",kind:"LinkedField",name:"nodes",plural:!0,selections:[e,{alias:null,args:null,concreteType:"XFBMusicArtistProfileInfo",kind:"LinkedField",name:"ig_profile_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"display_artist",plural:!1,selections:t,storageKey:null},n];return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useKadabraTileFeedPostAudio_post",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"post_media",plural:!0,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"MusicSong",kind:"LinkedField",name:"audio_track",plural:!1,selections:r,storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"audio_overlays",plural:!0,selections:[{kind:"InlineFragment",selections:r,type:"MusicSong",abstractKey:null},{kind:"InlineFragment",selections:[e,n,{alias:null,args:null,kind:"ScalarField",name:"creator_name",storageKey:null}],type:"CustomAudioAsset",abstractKey:null}],storageKey:null}],type:"XFBGENAIImagineComposedMedia",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"XFBGenAIAudioTrackAndAvailability",kind:"LinkedField",name:"default_music_clip",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBGenAIMusicClip",kind:"LinkedField",name:"music_clip",plural:!1,selections:[{alias:null,args:null,concreteType:"MusicSong",kind:"LinkedField",name:"music_song",plural:!1,selections:r,storageKey:null}],storageKey:null}],storageKey:null}],type:"XFBGENAIVideoGen",abstractKey:null}],storageKey:null}],type:"GenAIPostBase",abstractKey:"__isGenAIPostBase"}})();a.exports=e}),null);
__d("useKadabraTileFeedPostAudio",["CometRelay","react-compiler-runtime","useKadabraTileFeedPostAudio_post.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var r,a,i,l,s,u=o("react-compiler-runtime").c(12),c=o("CometRelay").useFragment(e!==void 0?e:e=n("useKadabraTileFeedPostAudio_post.graphql"),t),d=c.post_media,m;u[0]!==d?(m=d==null?void 0:d.at(0),u[0]=d,u[1]=m):m=u[1];var p=m,_;if(u[2]!==(p==null?void 0:p.audio_overlays)||u[3]!==(p==null?void 0:p.audio_track)){var f,g;_=(f=p==null?void 0:p.audio_track)!=null?f:p==null||(g=p.audio_overlays)==null?void 0:g.at(0),u[2]=p==null?void 0:p.audio_overlays,u[3]=p==null?void 0:p.audio_track,u[4]=_}else _=u[4];var h=_,y=p==null||(r=p.default_music_clip)==null||(r=r.music_clip)==null?void 0:r.music_song,C=y!=null?y:h,b=C==null?void 0:C.audio_asset,v=C==null?void 0:C.id,S=(a=C==null||(i=C.display_artist)==null?void 0:i.text)!=null?a:C==null?void 0:C.creator_name,R=C==null||(l=C.display_title)==null?void 0:l.text,L;if(u[5]!==(b==null||(s=b.artists)==null?void 0:s.nodes)){var E,k;L=b==null||(E=b.artists)==null||(E=E.nodes.at(0))==null||(E=E.ig_profile_info)==null?void 0:E.url,u[5]=b==null||(k=b.artists)==null?void 0:k.nodes,u[6]=L}else L=u[6];var I=L,T;return u[7]!==I||u[8]!==v||u[9]!==S||u[10]!==R?(T={artistIGURL:I,audioAssetId:v,displayArtist:S,displayTitle:R},u[7]=I,u[8]=v,u[9]=S,u[10]=R,u[11]=T):T=u[11],T}l.default=s}),98);
__d("KadabraTileFeedMediaContent.react",["AbraImagineMediaTypeUtils","CometRelay","KDSImage.react","KDSVideo.react","KDSVideoMediaID","KadabraFeedCardLabelContext","KadabraFeedUtils","KadabraTileFeedCardHeader.react","KadabraTileFeedCoverCard.react","KadabraTileFeedMediaContent_data.graphql","KadabraTileFeedPostFooter.react","KadabraTileFeedPostOverflowButton.react","KadabraVideoUriUtils","KadabraWebConfig","VideoPlayerAutoplayRulesProvider","cr:6088","justknobx","react","react-compiler-runtime","useKadabraInteractionLogger","useKadabraPageLayout","useKadabraTileFeedPostAudio","useKadabraVideoDeliveryResponse"],(function(t,n,r,o,a,i,l){"use strict";var e=["data","index","ref"],s,u,c=u||(u=o("react")),d=u,m=d.use,p=d.useId;function _(t){var a,i,l,u,d,_,f,g=o("react-compiler-runtime").c(57),h,y,C,b;g[0]!==t?(h=t.data,y=t.index,b=t.ref,C=babelHelpers.objectWithoutPropertiesLoose(t,e),g[0]=t,g[1]=h,g[2]=y,g[3]=C,g[4]=b):(h=g[1],y=g[2],C=g[3],b=g[4]);var v=o("CometRelay").useFragment(s!==void 0?s:s=n("KadabraTileFeedMediaContent_data.graphql"),h),S=r("useKadabraInteractionLogger")(),R=r("useKadabraPageLayout")(),L=R.isMobileLayout,E=p(),k;if(g[5]!==(v==null?void 0:v.post_media)){var I;k=v==null||(I=v.post_media)==null?void 0:I.at(0),g[5]=v==null?void 0:v.post_media,g[6]=k}else k=g[6];var T=k,D=T==null?void 0:T.id,x=o("useKadabraVideoDeliveryResponse").useKadabraVideoDeliveryResponse(T),$=x.aspectRatio,P=x.mediaURI,N=x.videoDeliveryResponseResult,M=T==null?void 0:T.media_type,w=r("useKadabraTileFeedPostAudio")(v),A=w.artistIGURL,F=w.audioAssetId,O=w.displayArtist,B=w.displayTitle,W=m(r("KadabraFeedCardLabelContext")),q=W.pivotLabel,U=T==null||(a=T.video)==null?void 0:a.video_url,V;g[7]!==P||g[8]!==U?(V=o("KadabraVideoUriUtils").getKadabraVideoUriWithFallback(U,P),g[7]=P,g[8]=U,g[9]=V):V=g[9];var H=V;if(H==null)return null;var G=r("KadabraWebConfig").is_crawler_request&&(i=T==null||(l=T.video)==null?void 0:l.prompt)!=null?i:void 0,z=T==null||(u=T.video)==null?void 0:u.lookaside_poster_uri,j=T==null||(d=T.video)==null?void 0:d.lookaside_uri,K;g[10]===Symbol.for("react.memo_cache_sentinel")?(K=r("justknobx")._("560"),g[10]=K):K=g[10];var Q=K,X=L?o("KadabraFeedUtils").DEFAULT_FEED_CARD_ASPECT_RATIO:$!=null?$:o("KadabraFeedUtils").DEFAULT_FEED_CARD_ASPECT_RATIO,Y=O!=null&&B!=null,J;g[11]!==y||g[12]!==v?(J=c.jsx(r("KadabraTileFeedPostFooter.react"),{data:v,index:y}),g[11]=y,g[12]=v,g[13]=J):J=g[13];var Z;g[14]!==L||g[15]!==v.KadabraConcordTasteMakerFeedbackStatusButton_data?(Z=n("cr:6088")!=null&&(v==null?void 0:v.KadabraConcordTasteMakerFeedbackStatusButton_data)!=null?c.jsx(n("cr:6088"),{minified:L,postKey:v.KadabraConcordTasteMakerFeedbackStatusButton_data}):void 0,g[14]=L,g[15]=v.KadabraConcordTasteMakerFeedbackStatusButton_data,g[16]=Z):Z=g[16];var ee;if(g[17]!==F||g[18]!==S||g[19]!==((_=v.genai_owner)==null?void 0:_.id)||g[20]!==v.id){var te;ee=function(){var e;S.log({action_target:"audio",action_type:"click",audio_id:F,event_name:"audio_click",post_id:v.id,target_user_id:(e=v.genai_owner)==null?void 0:e.id})},g[17]=F,g[18]=S,g[19]=(te=v.genai_owner)==null?void 0:te.id,g[20]=v.id,g[21]=ee}else ee=g[21];var ne;g[22]!==A||g[23]!==O||g[24]!==B||g[25]!==ee?(ne={artist:O,onPress:ee,title:B,url:A},g[22]=A,g[23]=O,g[24]=B,g[25]=ee,g[26]=ne):ne=g[26];var re;g[27]!==L||g[28]!==v?(re=Q&&!L?c.jsx(r("KadabraTileFeedPostOverflowButton.react"),{post:v}):void 0,g[27]=L,g[28]=v,g[29]=re):re=g[29];var oe;g[30]!==ne||g[31]!==re||g[32]!==Z?(oe=c.jsx(r("KadabraTileFeedCardHeader.react"),{addBelow:Z,audioAttributions:ne,overflowMenuButton:re}),g[30]=ne,g[31]=re,g[32]=Z,g[33]=oe):oe=g[33];var ae;g[34]!==G||g[35]!==D||g[36]!==M||g[37]!==H||g[38]!==z||g[39]!==j||g[40]!==N?(ae=o("AbraImagineMediaTypeUtils").isVideo(M)?c.jsx(r("KDSVideo.react"),{alt:G,customAutoplayRules:o("VideoPlayerAutoplayRulesProvider").provideAutoplayRules("kadabra_tile_feed"),mediaFileUrlForProgressivePlayback:H,mediaId:o("KDSVideoMediaID").convertToKDSVideoMediaID(D),poster:z,seoWebCrawlerLookasideUrl:j,subOrigin:"meta_ai_home_feed",videoDeliveryResponseResult:N,videoPixelsFit:{objectFit:"cover"}}):c.jsx(r("KDSImage.react"),{src:H}),g[34]=G,g[35]=D,g[36]=M,g[37]=H,g[38]=z,g[39]=j,g[40]=N,g[41]=ae):ae=g[41];var ie;if(g[42]!==S||g[43]!==((f=v.genai_owner)==null?void 0:f.id)||g[44]!==v.id){var le;ie=function(){var e;S.log({action_target:"focus_on_post_hover",action_type:"hover",event_name:"focus_on_post_hover",post_id:v.id,target_user_id:(e=v.genai_owner)==null?void 0:e.id})},g[42]=S,g[43]=(le=v.genai_owner)==null?void 0:le.id,g[44]=v.id,g[45]=ie}else ie=g[45];var se;return g[46]!==q||g[47]!==C||g[48]!==b||g[49]!==oe||g[50]!==ae||g[51]!==ie||g[52]!==X||g[53]!==Y||g[54]!==J||g[55]!==E?(se=c.jsx(r("KadabraTileFeedCoverCard.react"),babelHelpers.extends({},C,{"aria-labelledby":E,aspectRatio:X,enableHeaderUnderlay:Y,floatingPillLabel:q,footer:J,header:oe,media:ae,onHover:ie,ref:b,testid:void 0})),g[46]=q,g[47]=C,g[48]=b,g[49]=oe,g[50]=ae,g[51]=ie,g[52]=X,g[53]=Y,g[54]=J,g[55]=E,g[56]=se):se=g[56],se}l.default=_}),98);
__d("useKadabraFeedGenAIPostImpressionLogger_post.graphql",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useKadabraFeedGenAIPostImpressionLogger_post",selections:[{kind:"RequiredField",field:e,action:"LOG"},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"genai_owner",plural:!1,selections:[e],storageKey:null}],type:"XFBGENAIPost",abstractKey:null}})();a.exports=e}),null);
__d("useKadabraFeedGenAIPostImpressionLogger",["CometRelay","KadabraTracePolicy","react-compiler-runtime","useCurrentRoute","useKadabraFeedGenAIPostImpressionLogger_post.graphql","useKadabraImpressionLogger","useSinglePartialViewImpression"],(function(t,n,r,o,a,i,l){"use strict";var e,s=new Set;function u(t){var a=o("react-compiler-runtime").c(5),i=o("CometRelay").useFragment(e!==void 0?e:e=n("useKadabraFeedGenAIPostImpressionLogger_post.graphql"),t),l=r("useCurrentRoute")(),u=r("KadabraTracePolicy").cast(l==null?void 0:l.tracePolicy)==="kadabra.profile",c=u?"profile_post_impression":"feed_post_impression",d=u?"profile_post":"feed_post",m=r("useKadabraImpressionLogger")(),p;return a[0]!==c||a[1]!==m||a[2]!==i||a[3]!==d?(p={onImpressionStart:function(){var e;i!=null&&(s.has(i.id)||(s.add(i.id),m.log({action_target:d,event_name:c,post_id:i.id,target_user_id:(e=i.genai_owner)==null?void 0:e.id})))}},a[0]=c,a[1]=m,a[2]=i,a[3]=d,a[4]=p):p=a[4],r("useSinglePartialViewImpression")(p)}l.default=u}),98);
__d("KadabraFeedGenAIPost.react",["fbt","CometRelay","CometRouteReferrerContext","FocusWithinHandler.react","KadabraConcordFeedPostEntrypointType.entrypointutils","KadabraFeedGenAIPost_data.graphql","KadabraFeedItem.react","KadabraFeedSessionContext.react","KadabraImagineRootContextProvider.react","KadabraMaybeVirtualizedMasonryItem.react","KadabraPlaceholderErrorBoundary.react","KadabraTileFeedMediaContent.react","RecoverableViolationWithComponentStack.react","react","react-compiler-runtime","useCurrentRoute","useKadabraConcordFeedPostLinkProps","useKadabraFeedGenAIPostImpressionLogger","useKadabraFeedGenAIPostVpvImpressionLogger","useKadabraInteractionLogger","useKadabraPromptRoute","useMergeRefs"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=u||(u=o("react")),d=u.use,m={feedColumn:{maxWidth:"x193iq5w",$$css:!0},focus:{borderStartStartRadius:"xbjudin",borderStartEndRadius:"xnlwouz",borderEndEndRadius:"xpp8er5",borderEndStartRadius:"xs9wviy",boxShadow:"xpbwql5",outline:"x1a2a7pz xvetz19",$$css:!0},viewTransitionName:function(t){return[{viewTransitionName:t!=null?"xqwjeat":t,$$css:!0},{"--x-viewTransitionName":t!=null?t:void 0}]}};function p(t){var a,i=o("react-compiler-runtime").c(39),l=t.data,u=t.disableOverlay,p=t.index,f=t.wrapperXStyle,g=t.xstyle,h=o("CometRelay").useFragment(e!==void 0?e:e=n("KadabraFeedGenAIPost_data.graphql"),l),y=h.genai_owner,C=y==null?void 0:y.username,b=o("KadabraFeedSessionContext.react").useKadabraFeedSessionContext(),v=b.rankingRequestId,S=b.rankingSessionId,R=d(r("CometRouteReferrerContext")),L=r("useKadabraFeedGenAIPostImpressionLogger")(h),E=r("useKadabraFeedGenAIPostVpvImpressionLogger")(h,"feed_post_vpv_impression",S,v),k=r("useMergeRefs")(L,E),I=r("useKadabraInteractionLogger")(),T=r("useCurrentRoute")(),D=(T==null?void 0:T.tracePolicy)==="kadabra.profile",x=(T==null?void 0:T.tracePolicy)==="kadabra.profile_remix_pivot",$=r("useKadabraPromptRoute")(h),P=o("KadabraImagineRootContextProvider.react").useKadabraImagineRootContext(),N=P.setLatestVideoEntrypoint,M=r("useKadabraConcordFeedPostLinkProps")(h,D?o("KadabraConcordFeedPostEntrypointType.entrypointutils").KadabraConcordFeedPostEntrypointType.PROFILE_FEED:x?o("KadabraConcordFeedPostEntrypointType.entrypointutils").KadabraConcordFeedPostEntrypointType.PROFILE_REMIX_PIVOT:o("KadabraConcordFeedPostEntrypointType.entrypointutils").KadabraConcordFeedPostEntrypointType.HOME_FEED,p);if(C==null||(h==null?void 0:h.KadabraTileFeedMediaContent_data)==null)return null;var w;i[0]!==h.id?(w=m.viewTransitionName("post-"+h.id),i[0]=h.id,i[1]=w):w=i[1];var A;i[2]!==w||i[3]!==g?(A=[w,g],i[2]=w,i[3]=g,i[4]=A):A=i[4];var F=A,O=h.post_type==="PRIVATE",B;i[5]===Symbol.for("react.memo_cache_sentinel")?(B=s._(/*BTDS*/"Post by you"),i[5]=B):B=i[5];var W=B,q;i[6]!==C?(q=s._(/*BTDS*/"Post by {author username}",[s._param("author username",C)]),i[6]=C,i[7]=q):q=i[7];var U=q,V;if(i[8]!==h.post_media){var H,G;V=(H=h==null||(G=h.post_media)==null?void 0:G.some(_))!=null?H:!1,i[8]=h.post_media,i[9]=V}else V=i[9];var z=V,j;if(i[10]!==((a=h.genai_owner)==null?void 0:a.id)||i[11]!==h.id||i[12]!==I||i[13]!==D||i[14]!==z||i[15]!==N){var K;j=function(){var e,t;I.log({action_target:D?"profile_post":"feed_post",action_type:"click",event_name:D?"profile_post_click":"feed_post_click",post_author_id:h==null||(e=h.genai_owner)==null?void 0:e.id,post_id:h.id,target_user_id:h==null||(t=h.genai_owner)==null?void 0:t.id}),z&&N("feed_post")},i[10]=(K=h.genai_owner)==null?void 0:K.id,i[11]=h.id,i[12]=I,i[13]=D,i[14]=z,i[15]=N,i[16]=j}else j=i[16];var Q=j,X;if(i[17]!==v||i[18]!==S||i[19]!==R){X=null;var Y;i[21]!==R?(Y=R!=null?R:{},i[21]=R,i[22]=Y):Y=i[22];var J=Y,Z=J.navigationType,ee=J.tracePolicy;if(S==null&&v!=null){var te;i[23]!==Z||i[24]!==ee?(te=[Z,ee],i[23]=Z,i[24]=ee,i[25]=te):te=i[25],X=c.jsx(r("RecoverableViolationWithComponentStack.react"),{errorMessage:'Missing ranking session ID, but have a ranking request ID. Navigation type: "%s", tracePolicy: "%s"',messageParams:te,projectName:"kadabra_core"})}i[17]=v,i[18]=S,i[19]=R,i[20]=X}else X=i[20];var ne;return i[26]!==F||i[27]!==M||i[28]!==h.KadabraTileFeedMediaContent_data||i[29]!==u||i[30]!==Q||i[31]!==p||i[32]!==O||i[33]!==X||i[34]!==k||i[35]!==U||i[36]!==$||i[37]!==f?(ne=c.jsx(r("KadabraPlaceholderErrorBoundary.react"),{children:c.jsx(r("FocusWithinHandler.react"),{children:function(t,n){return c.jsx(r("KadabraFeedItem.react"),{testid:void 0,xstyle:[t&&n&&m.focus,m.feedColumn],children:c.jsxs("div",{"aria-label":O?W:U,role:"article",children:[X,c.jsx(o("KadabraMaybeVirtualizedMasonryItem.react").KadabraMaybeVirtualizedMasonryItem,{children:c.jsx(r("KadabraTileFeedMediaContent.react"),{data:h.KadabraTileFeedMediaContent_data,disableOverlay:u,index:p,linkProps:M!=null?M:{url:$},onPress:Q,ref:k,wrapperXStyle:f,xstyle:F})})]})})}})}),i[26]=F,i[27]=M,i[28]=h.KadabraTileFeedMediaContent_data,i[29]=u,i[30]=Q,i[31]=p,i[32]=O,i[33]=X,i[34]=k,i[35]=U,i[36]=$,i[37]=f,i[38]=ne):ne=i[38],ne}function _(e){return e.__typename==="XFBGENAIVideoGen"}l.default=p}),226);
__d("KadabraFeedCard.react",["CometRelay","KadabraFeedCard_data.graphql","KadabraFeedCard_rankingData.graphql","KadabraFeedGenAIPost.react","KadabraFeedSessionContext.react","KadabraPlaceholderErrorBoundary.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=u||(u=o("react")),d={concordPost:{backgroundColor:null,borderStartStartRadius:"x1eps8hq",borderStartEndRadius:"x1wl3idq",borderEndEndRadius:"xmx59wx",borderEndStartRadius:"x1ba1ill",boxShadow:"x1ta6dxz",paddingTop:"xye1gum",paddingInlineEnd:"xrrkp5a",paddingBottom:"xvojnpq",paddingInlineStart:"xlhpewt",transition:"x1i6x7d5",width:"x1be37a",$$css:!0},concordWrapper:{borderStartStartRadius:"x1eps8hq",borderStartEndRadius:"x1wl3idq",borderEndEndRadius:"xmx59wx",borderEndStartRadius:"x1ba1ill",paddingTop:"xye1gum",paddingInlineEnd:"xrrkp5a",paddingBottom:"xvojnpq",paddingInlineStart:"xlhpewt",$$css:!0}};function m(t){var a=o("react-compiler-runtime").c(10),i=t.data,l=t.disableOverlay,u=t.index,m=t.isProfileCard,p=t.rankingData,_=m===void 0?!1:m,f=o("CometRelay").useFragment(e!==void 0?e:e=n("KadabraFeedCard_data.graphql"),i),g=o("CometRelay").useFragment(s!==void 0?s:s=n("KadabraFeedCard_rankingData.graphql"),p),h=g==null?void 0:g.ranking_request_id,y=g==null?void 0:g.ranking_session_id,C=!_&&d.concordWrapper,b=!_&&d.concordPost,v;a[0]!==f||a[1]!==l||a[2]!==u||a[3]!==C||a[4]!==b?(v=c.jsx(r("KadabraPlaceholderErrorBoundary.react"),{children:c.jsx(r("KadabraFeedGenAIPost.react"),{data:f,disableOverlay:l,index:u,wrapperXStyle:C,xstyle:b})}),a[0]=f,a[1]=l,a[2]=u,a[3]=C,a[4]=b,a[5]=v):v=a[5];var S;return a[6]!==h||a[7]!==y||a[8]!==v?(S=c.jsx(o("KadabraFeedSessionContext.react").KadabraFeedSessionContextProvider,{rankingRequestId:h,rankingSessionId:y,children:v}),a[6]=h,a[7]=y,a[8]=v,a[9]=S):S=a[9],S}l.default=m}),98);
__d("KadabraFeedContainerPaginationQuery_abraRelayOperation",[],(function(t,n,r,o,a,i){a.exports="25283487244617398"}),null);
__d("KadabraFeedContainerPaginationQuery.graphql",["KadabraFeedContainerPaginationQuery_abraRelayOperation","AbraIsLoggedOut.relayprovider","KadabraTasteMakerFeedbackStatusInFeed.relayprovider","KadabraVideoDeliveryRequest.relayprovider","kadabra_concord_remix_pivot_desktop_only.relayprovider","AbraDebugDevOnly.relayprovider","KadabraTasteMakerFeedback.relayprovider","kadabra_storybooks.relayprovider","enable_swap_me_on_kadabra.relayprovider","kadabra_story_builder_enabled.relayprovider"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={defaultValue:null,kind:"LocalArgument",name:"after"},t={defaultValue:null,kind:"LocalArgument",name:"first"},r={defaultValue:null,kind:"LocalArgument",name:"ranking_session_id"},o={defaultValue:null,kind:"LocalArgument",name:"remix_params"},a={kind:"Variable",name:"ranking_session_id",variableName:"ranking_session_id"},i=[{kind:"Variable",name:"after",variableName:"after"},{kind:"Literal",name:"context",value:{media_context:{include_video:!0}}},{kind:"Variable",name:"first",variableName:"first"},a,{kind:"Variable",name:"remix_params",variableName:"remix_params"}],l={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"aspect_ratio",storageKey:null},c=[u],d={kind:"InlineFragment",selections:c,type:"XFBGENAIVideoGen",abstractKey:null},m={kind:"InlineFragment",selections:c,type:"XFBGENAIImagineComposedMedia",abstractKey:null},p={alias:null,args:null,kind:"ScalarField",name:"has_block_relationship",storageKey:null},_={alias:null,args:null,kind:"ScalarField",name:"mute_state",storageKey:null},f=[s],g={kind:"InlineFragment",selections:f,type:"Node",abstractKey:"__isNode"},h={alias:null,args:null,kind:"ScalarField",name:"orientation",storageKey:null},y={name:"combined_aspect_ratio_internal_do_not_use",args:null,fragment:{kind:"InlineFragment",selections:[{kind:"InlineFragment",selections:[h,{alias:"imagine_image",args:[{kind:"Literal",name:"width",value:100}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null}],storageKey:"image(width:100)"}],type:"XFBGENAIImagineImage",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"imagine_media",plural:!1,selections:[l,{kind:"InlineFragment",selections:[u,h,{alias:null,args:null,kind:"ScalarField",name:"image_height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"image_width",storageKey:null}],type:"XFBGenAIImagineUserUploadedImage",abstractKey:null},s],storageKey:null}],type:"XFBGENAIUploadedFile",abstractKey:null},d,m],type:"XFBAbraMediaLibrary",abstractKey:"__isXFBAbraMediaLibrary"},kind:"RelayResolver",storageKey:null,isOutputType:!0},C={kind:"InlineFragment",selections:[y],type:"XFBAbraMediaLibrary",abstractKey:"__isXFBAbraMediaLibrary"},b=[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"source",plural:!1,selections:[l,C,s],storageKey:null}],v={kind:"InlineFragment",selections:b,type:"XFBGenAIVideo",abstractKey:"__isXFBGenAIVideo"},S={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"source_media",plural:!1,selections:[l,{kind:"InlineFragment",selections:[y,v],type:"XFBAbraMediaLibrary",abstractKey:"__isXFBAbraMediaLibrary"},s],storageKey:null}],type:"XFBGENAIImagineComposedMedia",abstractKey:null},R={name:"combined_aspect_ratio",args:null,fragment:{kind:"InlineFragment",selections:[y,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"generated_media_node",plural:!1,selections:[l,C,{kind:"InlineFragment",selections:b,type:"XFBGENAIVideoGen",abstractKey:null},S,s],storageKey:null}],type:"XFBGENAIImagineMediaGenerationStatus",abstractKey:null},v,S],type:"XFBAbraMediaLibrary",abstractKey:"__isXFBAbraMediaLibrary"},kind:"RelayResolver",storageKey:null,isOutputType:!0},L={alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},E={alias:null,args:null,kind:"ScalarField",name:"follow_status",storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"media_type",storageKey:null},I={kind:"TypeDiscriminator",abstractKey:"__isXFBGenAIPostMedia"},T={alias:null,args:null,kind:"ScalarField",name:"video_url",storageKey:null},D={alias:null,args:null,kind:"ScalarField",name:"generated_thumbnail_uri",storageKey:null},x={alias:null,args:null,kind:"ScalarField",name:"thumbnail_uri",storageKey:null},$={alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null},P={alias:null,args:null,concreteType:"XFBVideoDeliveryFailureReason",kind:"LinkedField",name:"failure_reason",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"message_format",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"message_params",storageKey:null}],storageKey:null},N={kind:"InlineFragment",selections:[{alias:"videoDeliveryResponseResult",args:[{kind:"Variable",name:"video_delivery_request",variableName:"__relay_internal__pv__KadabraVideoDeliveryRequestrelayprovider"}],concreteType:"XFBVideoDeliveryResponse",kind:"LinkedField",name:"video_delivery_response",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBDashManifestResponse",kind:"LinkedField",name:"dash_manifests",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"manifest_xml",storageKey:null},P],storageKey:null},{alias:null,args:null,concreteType:"XFBDashManifestUrlResponse",kind:"LinkedField",name:"dash_manifest_urls",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"manifest_url",storageKey:null},P],storageKey:null},{alias:null,args:null,concreteType:"XFBProgressiveUrlResponse",kind:"LinkedField",name:"progressive_urls",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"progressive_url",storageKey:null},P,{alias:null,args:null,concreteType:"XFBProgressiveUrlMetadata",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"quality",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"XFBHlsPlaylistUrlResponse",kind:"LinkedField",name:"hls_playlist_urls",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"hls_playlist_url",storageKey:null},P],storageKey:null}],storageKey:null}],type:"XFBGenAIMediaWithXPVDelivery",abstractKey:"__isXFBGenAIMediaWithXPVDelivery"},M={alias:null,args:null,kind:"ScalarField",name:"viewer_actions",storageKey:null},w={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},A={alias:null,args:null,concreteType:"XFBMusicArtistProfileInfo",kind:"LinkedField",name:"ig_profile_info",plural:!1,selections:[w],storageKey:null},F=[{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null}],O={alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"display_artist",plural:!1,selections:F,storageKey:null},B={alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"display_title",plural:!1,selections:F,storageKey:null},W=[s,{alias:null,args:null,concreteType:"AudioAsset",kind:"LinkedField",name:"audio_asset",plural:!1,selections:[{alias:null,args:null,concreteType:"ArtistsConnection",kind:"LinkedField",name:"artists",plural:!1,selections:[{alias:null,args:null,concreteType:"MusicArtist",kind:"LinkedField",name:"nodes",plural:!0,selections:[s,A],storageKey:null}],storageKey:null},s],storageKey:null},O,B],q=[$],U={alias:"thumbnail_request",args:[{kind:"Literal",name:"video_delivery_request",value:{thumbnail_requests:[{caller_identifier:"META_AI_STANDALONE_FEED",usecase:"PADDING_FRAME"}]}}],concreteType:"XFBVideoDeliveryResponse",kind:"LinkedField",name:"video_delivery_response",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBThumbnailResponse",kind:"LinkedField",name:"thumbnails",plural:!0,selections:[{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"image_source",plural:!0,selections:q,storageKey:null}],storageKey:null}],storageKey:'video_delivery_response(video_delivery_request:{"thumbnail_requests":[{"caller_identifier":"META_AI_STANDALONE_FEED","usecase":"PADDING_FRAME"}]})'},V={alias:null,args:null,kind:"ScalarField",name:"input_image_uri",storageKey:null},H={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"artifacts",plural:!0,selections:[l,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"artifact",plural:!1,selections:[l,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"latest_version",plural:!1,selections:[l,{alias:null,args:null,kind:"ScalarField",name:"version_uuid",storageKey:null},s],storageKey:null},s],storageKey:null}],storageKey:null},G={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"has_viewer_liked",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"like_count",storageKey:null}],type:"XFBGenAIPublicPost",abstractKey:"__isXFBGenAIPublicPost"},z={alias:null,args:null,concreteType:"XFBGENAIImagineVideoProject",kind:"LinkedField",name:"project",plural:!1,selections:f,storageKey:null},j={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"external_conversation_id",storageKey:null},{alias:null,args:null,concreteType:"XFBGenAIImagineVideoCard",kind:"LinkedField",name:"latest_video_card",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBGENAIVideoGen",kind:"LinkedField",name:"video",plural:!1,selections:f,storageKey:null},{alias:null,args:null,concreteType:"XFBGENAIImagineVideoProjectVersion",kind:"LinkedField",name:"project_version",plural:!1,selections:[z,s],storageKey:null},s],storageKey:null}],type:"XFBAbraGenAIStoredConversation",abstractKey:null},K={alias:null,args:null,kind:"ScalarField",name:"has_immersive_media",storageKey:null},Q={alias:null,args:null,kind:"ScalarField",name:"slug",storageKey:null},X=[k],Y={kind:"InlineFragment",selections:[K,Q,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"body_renderer_v2",plural:!1,selections:[l,{kind:"InlineFragment",selections:[{alias:null,args:[{kind:"Literal",name:"first",value:1}],concreteType:"XFBKadabraFeedPostCoverImageBodyRendererV2CoverImagesConnection",kind:"LinkedField",name:"cover_images",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:[l,s,{kind:"InlineFragment",selections:X,type:"XFBGENAIImagineImage",abstractKey:null},{kind:"InlineFragment",selections:X,type:"XFBGENAIImagineFlashImage",abstractKey:null},{kind:"InlineFragment",selections:X,type:"XFBGENAIImagineAnimatedVideo",abstractKey:null},{kind:"InlineFragment",selections:[k,z],type:"XFBGENAIVideoGen",abstractKey:null}],storageKey:null}],storageKey:"cover_images(first:1)"}],type:"XFBKadabraFeedPostCoverImageBodyRendererV2",abstractKey:null}],storageKey:null}],type:"XFBGENAIPost",abstractKey:null},J={alias:null,args:null,kind:"ScalarField",name:"total_comment_count",storageKey:null},Z={kind:"InlineFragment",selections:[V,U],type:"XFBGENAIVideoGen",abstractKey:null},ee=[U],te={kind:"InlineFragment",selections:ee,type:"XFBGENAIImagineComposedMedia",abstractKey:null},ne={alias:null,args:null,kind:"ScalarField",name:"feed_remix_count",storageKey:null},re=[l,s],oe={kind:"InlineFragment",selections:[L],type:"XABSocialProfile",abstractKey:null},ae=[{kind:"InlineFragment",selections:[ne,{alias:null,args:null,kind:"ScalarField",name:"public_remix_count",storageKey:null},{alias:null,args:[{kind:"Literal",name:"first",value:4},{kind:"Literal",name:"surface",value:"PIVOT_PAGE"}],concreteType:null,kind:"LinkedField",name:"remixes",plural:!1,selections:[l,{alias:null,args:null,concreteType:"XFBGENAIPost",kind:"LinkedField",name:"nodes",plural:!0,selections:[s,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"genai_owner",plural:!1,selections:re,storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"post_media",plural:!0,selections:[l,I,Z,te,s],storageKey:null},{kind:"InlineFragment",selections:[{kind:"InlineFragment",selections:[K,Q,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"genai_owner",plural:!1,selections:[oe],storageKey:null}],type:"XFBGENAIPost",abstractKey:null}],type:"GenAIPostBase",abstractKey:"__isGenAIPostBase"}],storageKey:null}],storageKey:'remixes(first:4,surface:"PIVOT_PAGE")'}],type:"XFBGenAIPublicPost",abstractKey:"__isXFBGenAIPublicPost"}],ie=[{kind:"InlineFragment",selections:[ne],type:"XFBGenAIPublicPost",abstractKey:"__isXFBGenAIPublicPost"}],le=[{alias:null,args:null,kind:"ScalarField",name:"is_bot_post",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ranking_vetted_score",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_visible_on_profile",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_visible_on_feed",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_in_golden_set",storageKey:null}],se={alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:q,storageKey:null};return{fragment:{argumentDefinitions:[e,t,r,o],kind:"Fragment",metadata:null,name:"KadabraFeedContainerPaginationQuery",selections:[{args:[a],kind:"FragmentSpread",name:"KadabraFeedContainerPaginationQuery_data"}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[e,t,r,o,{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__AbraIsLoggedOutrelayprovider"},{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__KadabraTasteMakerFeedbackStatusInFeedrelayprovider"},{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__KadabraVideoDeliveryRequestrelayprovider"},{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__kadabra_concord_remix_pivot_desktop_onlyrelayprovider"},{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__AbraDebugDevOnlyrelayprovider"},{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__KadabraTasteMakerFeedbackrelayprovider"},{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__kadabra_storybooksrelayprovider"},{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__enable_swap_me_on_kadabrarelayprovider"},{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__kadabra_story_builder_enabledrelayprovider"}],kind:"Operation",name:"KadabraFeedContainerPaginationQuery",selections:[{alias:null,args:i,concreteType:"XFBGenaiFetchFeedConnection",kind:"LinkedField",name:"xfb_genai_fetch_feed",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBGenaiFetchFeedEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[l,s,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"post_media",plural:!0,selections:[l,d,m,s],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"genai_owner",plural:!1,selections:[l,{condition:"__relay_internal__pv__AbraIsLoggedOutrelayprovider",kind:"Condition",passingValue:!1,selections:[{kind:"InlineFragment",selections:[p,_],type:"XABSocialProfile",abstractKey:null}]},s],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"remix_original_post",plural:!1,selections:[l,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"genai_owner",plural:!1,selections:[l,{kind:"InlineFragment",selections:[_],type:"XABSocialProfile",abstractKey:null},s],storageKey:null}],type:"XFBGENAIPost",abstractKey:null},g],storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"hide_on_feed",storageKey:null}]}],type:"XFBGENAIPost",abstractKey:null},{kind:"InlineFragment",selections:[{alias:"spark_video",args:null,concreteType:"XFBGENAIVideoGen",kind:"LinkedField",name:"video",plural:!1,selections:[u,s],storageKey:null},{alias:"spark_image",args:null,concreteType:"XFBGENAIImagineImage",kind:"LinkedField",name:"image",plural:!1,selections:[R,s],storageKey:null}],type:"XFBGENAIFeedSparkUnitData",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"genai_owner",plural:!1,selections:[l,s,{kind:"InlineFragment",selections:[L,E],type:"XABSocialProfile",abstractKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"post_type",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"post_media",plural:!0,selections:[l,s,k,I,{kind:"InlineFragment",selections:[T,{alias:null,args:null,kind:"ScalarField",name:"prompt",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"lookaside_uri",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"lookaside_poster_uri",storageKey:null}],type:"XFBGENAIVideoGen",abstractKey:null}],type:"XFBGenAIVideo",abstractKey:"__isXFBGenAIVideo"},{kind:"InlineFragment",selections:[D,x,$,u,N],type:"XFBGENAIVideoGen",abstractKey:null},{kind:"InlineFragment",selections:[x,$,u,N],type:"XFBGENAIImagineComposedMedia",abstractKey:null}],storageKey:null},M,{alias:null,args:null,kind:"ScalarField",name:"debug_id",storageKey:null},{kind:"TypeDiscriminator",abstractKey:"__isXFBGenAIPublicPost"},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"post_media",plural:!0,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"MusicSong",kind:"LinkedField",name:"audio_track",plural:!1,selections:W,storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"audio_overlays",plural:!0,selections:[l,{kind:"InlineFragment",selections:W,type:"MusicSong",abstractKey:null},{kind:"InlineFragment",selections:[s,B,{alias:null,args:null,kind:"ScalarField",name:"creator_name",storageKey:null}],type:"CustomAudioAsset",abstractKey:null}],storageKey:null},U],type:"XFBGENAIImagineComposedMedia",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"XFBGenAIAudioTrackAndAvailability",kind:"LinkedField",name:"default_music_clip",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBGenAIMusicClip",kind:"LinkedField",name:"music_clip",plural:!1,selections:[{alias:null,args:null,concreteType:"MusicSong",kind:"LinkedField",name:"music_song",plural:!1,selections:W,storageKey:null}],storageKey:null}],storageKey:null},V,U],type:"XFBGENAIVideoGen",abstractKey:null}],storageKey:null},H,G,j,Y],type:"GenAIPostBase",abstractKey:"__isGenAIPostBase"},{kind:"InlineFragment",selections:[J,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"post_media",plural:!0,selections:[Z,te],storageKey:null},{kind:"InlineFragment",selections:[K,Q],type:"XFBGENAIPost",abstractKey:null}],type:"GenAIPostBase",abstractKey:"__isGenAIPostBase"},{condition:"__relay_internal__pv__kadabra_concord_remix_pivot_desktop_onlyrelayprovider",kind:"Condition",passingValue:!0,selections:[{kind:"InlineFragment",selections:ae,type:"GenAIPostBase",abstractKey:"__isGenAIPostBase"}]},{condition:"__relay_internal__pv__kadabra_concord_remix_pivot_desktop_onlyrelayprovider",kind:"Condition",passingValue:!1,selections:[{kind:"InlineFragment",selections:ie,type:"GenAIPostBase",abstractKey:"__isGenAIPostBase"}]},{condition:"__relay_internal__pv__KadabraTasteMakerFeedbackStatusInFeedrelayprovider",kind:"Condition",passingValue:!0,selections:le}],type:"XFBGENAIPost",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"snapshot_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"source_imagine_prompt",storageKey:null},{alias:null,args:null,concreteType:"XFBGENAIVideoGen",kind:"LinkedField",name:"video",plural:!1,selections:[s,u],storageKey:null},{alias:null,args:null,concreteType:"XFBGENAIImagineImage",kind:"LinkedField",name:"image",plural:!1,selections:[s,R],storageKey:null},{if:null,kind:"Defer",label:"KadabraFeedSparkCardContent_data$defer$KadabraFeedSparkCardMedia_data",selections:[{alias:null,args:null,concreteType:"XFBGENAIVideoGen",kind:"LinkedField",name:"video",plural:!1,selections:[s,$],storageKey:null},{alias:null,args:null,concreteType:"XFBGENAIImagineImage",kind:"LinkedField",name:"image",plural:!1,selections:[$,s],storageKey:null}]}],type:"XFBGENAIFeedSparkUnitData",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"genai_owner",plural:!1,selections:[l,s,{kind:"InlineFragment",selections:[_,p,L,E,se],type:"XABSocialProfile",abstractKey:null}],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"post_media",plural:!0,selections:[l,I,s,k,{alias:null,args:[{kind:"Literal",name:"supported",value:"2BUACG"}],concreteType:null,kind:"LinkedField",name:"media_player_renderer",plural:!1,selections:[l,{kind:"InlineFragment",selections:[{args:null,documentName:"KadabraConcordFeedPostMedia_media",fragmentName:"KadabraConcordLightboxMediaPlayer_media",fragmentPropName:"media",kind:"ModuleImport"}],type:"XFBGenAIPostMediaSinglePlayerRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"KadabraConcordFeedPostMedia_media",fragmentName:"KadabraConcordLightboxDualMediaPlayer_media",fragmentPropName:"media",kind:"ModuleImport"}],type:"XFBGenAIPostMediaDualPlayerRenderer",abstractKey:null}],storageKey:'media_player_renderer(supported:"2BUACG")'},$,{kind:"InlineFragment",selections:[T],type:"XFBGenAIVideo",abstractKey:"__isXFBGenAIVideo"},{kind:"InlineFragment",selections:[D,x,u,V,U,{alias:null,args:null,concreteType:"XFBGenAIAudioTrackAndAvailability",kind:"LinkedField",name:"default_music_clip",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBGenAIMusicClip",kind:"LinkedField",name:"music_clip",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"start_time_ms",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"end_time_ms",storageKey:null},{alias:null,args:null,concreteType:"MusicSong",kind:"LinkedField",name:"music_song",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"dash_manifest",storageKey:null},{alias:null,args:null,concreteType:"AudioEncoding",kind:"LinkedField",name:"progressive_download",plural:!0,selections:[w,s],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"audio_asset_id",storageKey:null},O,B,{alias:null,args:null,concreteType:"AudioAsset",kind:"LinkedField",name:"audio_asset",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_explicit",storageKey:null},s],storageKey:null},{alias:null,args:null,concreteType:"ArtistsConnection",kind:"LinkedField",name:"artists",plural:!1,selections:[{alias:null,args:null,concreteType:"MusicArtist",kind:"LinkedField",name:"nodes",plural:!0,selections:[A,s],storageKey:null}],storageKey:null},s],storageKey:null}],storageKey:null}],storageKey:null},N,{args:null,documentName:"KadabraAudioAttributionHovercardTrigger_media",fragmentName:"KadabraVideoGenAudioAttributionHovercardTriggerV2_media",fragmentPropName:"media",kind:"ModuleImport"}],type:"XFBGENAIVideoGen",abstractKey:null},{kind:"InlineFragment",selections:[x,u,U,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"source_media",plural:!1,selections:re,storageKey:null},N,{args:null,documentName:"KadabraAudioAttributionHovercardTrigger_media",fragmentName:"KadabraComposedMediaAudioAttributionHovercardTrigger_media",fragmentPropName:"media",kind:"ModuleImport"}],type:"XFBGENAIImagineComposedMedia",abstractKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"created_timestamp",storageKey:null},M,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"original_prompt",plural:!1,selections:[l,{kind:"InlineFragment",selections:F,type:"XFBGenAIUploadedFileContent",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"body",storageKey:null}],type:"XFBGenAITextContent",abstractKey:null}],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"remix_original_post",plural:!1,selections:[l,{kind:"InlineFragment",selections:[s,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"genai_owner",plural:!1,selections:[l,s,oe],storageKey:null}],type:"GenAIPostBase",abstractKey:"__isGenAIPostBase"},g],storageKey:null},J,H,{kind:"InlineFragment",selections:[M,Q,{alias:null,args:null,concreteType:"XFBGENAIPostFeaturedUsersConnection",kind:"LinkedField",name:"featured_users",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBGENAIPostFeaturedUsersEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[l],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"caption",storageKey:null}],type:"XFBGENAIPost",abstractKey:null},{condition:"__relay_internal__pv__enable_swap_me_on_kadabrarelayprovider",kind:"Condition",passingValue:!0,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"XFBGENAIPostFeaturedUsersConnection",kind:"LinkedField",name:"featured_users",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBGENAIPostFeaturedUsersEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[l,se,L,s,{kind:"InlineFragment",selections:[E],type:"XABSocialProfile",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"XFBGENAIPost",abstractKey:null}]},{condition:"__relay_internal__pv__KadabraTasteMakerFeedbackrelayprovider",kind:"Condition",passingValue:!0,selections:[{kind:"InlineFragment",selections:le,type:"XFBGENAIPost",abstractKey:null}]},{condition:"__relay_internal__pv__kadabra_storybooksrelayprovider",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"post_media",plural:!0,selections:[{kind:"InlineFragment",selections:[{kind:"InlineFragment",selections:ee,type:"XFBGenAIMediaWithXPVDelivery",abstractKey:"__isXFBGenAIMediaWithXPVDelivery"},{kind:"InlineFragment",selections:[{alias:null,args:[{kind:"Literal",name:"width",value:300}],concreteType:"Image",kind:"LinkedField",name:"media_image",plural:!1,selections:q,storageKey:"media_image(width:300)"}],type:"XFBGenAIMediaWithImage",abstractKey:"__isXFBGenAIMediaWithImage"}],type:"XFBStoryPageMedia",abstractKey:"__isXFBStoryPageMedia"}],storageKey:null}]},G,j,Y,{condition:"__relay_internal__pv__kadabra_concord_remix_pivot_desktop_onlyrelayprovider",kind:"Condition",passingValue:!0,selections:ae},{condition:"__relay_internal__pv__kadabra_concord_remix_pivot_desktop_onlyrelayprovider",kind:"Condition",passingValue:!1,selections:ie}],type:"GenAIPostBase",abstractKey:"__isGenAIPostBase"}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ranking_request_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ranking_session_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"page_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"end_cursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"has_next_page",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:i,filters:["context","ranking_session_id","remix_params"],handle:"connection",key:"KadabraFeedContainer_xfb_genai_fetch_feed",kind:"LinkedHandle",name:"xfb_genai_fetch_feed"}]},params:{id:n("KadabraFeedContainerPaginationQuery_abraRelayOperation"),metadata:{},name:"KadabraFeedContainerPaginationQuery",operationKind:"query",text:null,providedVariables:{__relay_internal__pv__AbraIsLoggedOutrelayprovider:n("AbraIsLoggedOut.relayprovider"),__relay_internal__pv__KadabraTasteMakerFeedbackStatusInFeedrelayprovider:n("KadabraTasteMakerFeedbackStatusInFeed.relayprovider"),__relay_internal__pv__KadabraVideoDeliveryRequestrelayprovider:n("KadabraVideoDeliveryRequest.relayprovider"),__relay_internal__pv__kadabra_concord_remix_pivot_desktop_onlyrelayprovider:n("kadabra_concord_remix_pivot_desktop_only.relayprovider"),__relay_internal__pv__AbraDebugDevOnlyrelayprovider:n("AbraDebugDevOnly.relayprovider"),__relay_internal__pv__KadabraTasteMakerFeedbackrelayprovider:n("KadabraTasteMakerFeedback.relayprovider"),__relay_internal__pv__kadabra_storybooksrelayprovider:n("kadabra_storybooks.relayprovider"),__relay_internal__pv__enable_swap_me_on_kadabrarelayprovider:n("enable_swap_me_on_kadabra.relayprovider"),__relay_internal__pv__kadabra_story_builder_enabledrelayprovider:n("kadabra_story_builder_enabled.relayprovider")}}}})();a.exports=e}),null);
__d("KadabraFeedContainerPaginationQuery_data.graphql",["KadabraFeedContainerPaginationQuery.graphql","XFBAbraMediaLibraryCombinedAspectRatio-resolver"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=["xfb_genai_fetch_feed"],t=[{alias:null,args:null,kind:"ScalarField",name:"aspect_ratio",storageKey:null}],r={alias:null,args:null,kind:"ScalarField",name:"mute_state",storageKey:null};return{argumentDefinitions:[{kind:"RootArgument",name:"after"},{kind:"RootArgument",name:"first"},{defaultValue:null,kind:"LocalArgument",name:"ranking_session_id"},{kind:"RootArgument",name:"remix_params"}],kind:"Fragment",metadata:{connection:[{count:"first",cursor:"after",direction:"forward",path:e}],refetch:{connection:{forward:{count:"first",cursor:"after"},backward:null,path:e},fragmentPathInResult:[],operation:n("KadabraFeedContainerPaginationQuery.graphql")}},name:"KadabraFeedContainerPaginationQuery_data",selections:[{kind:"RequiredField",field:{alias:"xfb_genai_fetch_feed",args:[{kind:"Literal",name:"context",value:{media_context:{include_video:!0}}},{kind:"Variable",name:"ranking_session_id",variableName:"ranking_session_id"},{kind:"Variable",name:"remix_params",variableName:"remix_params"}],concreteType:"XFBGenaiFetchFeedConnection",kind:"LinkedField",name:"__KadabraFeedContainer_xfb_genai_fetch_feed_connection",plural:!1,selections:[{kind:"RequiredField",field:{alias:null,args:null,concreteType:"XFBGenaiFetchFeedEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{kind:"InlineDataFragmentSpread",name:"KadabraFeedContainerPaginationQuery_feedEdge",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"post_media",plural:!0,selections:[{kind:"InlineFragment",selections:t,type:"XFBGENAIVideoGen",abstractKey:null},{kind:"InlineFragment",selections:t,type:"XFBGENAIImagineComposedMedia",abstractKey:null}],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"genai_owner",plural:!1,selections:[{condition:"__relay_internal__pv__AbraIsLoggedOutrelayprovider",kind:"Condition",passingValue:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"has_block_relationship",storageKey:null},r],type:"XABSocialProfile",abstractKey:null}]}],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"remix_original_post",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"genai_owner",plural:!1,selections:[{kind:"InlineFragment",selections:[r],type:"XABSocialProfile",abstractKey:null}],storageKey:null}],type:"XFBGENAIPost",abstractKey:null}],storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"hide_on_feed",storageKey:null}]}],type:"XFBGENAIPost",abstractKey:null},{kind:"InlineFragment",selections:[{alias:"spark_video",args:null,concreteType:"XFBGENAIVideoGen",kind:"LinkedField",name:"video",plural:!1,selections:t,storageKey:null},{alias:"spark_image",args:null,concreteType:"XFBGENAIImagineImage",kind:"LinkedField",name:"image",plural:!1,selections:[{alias:null,args:null,fragment:{args:null,kind:"FragmentSpread",name:"XFBAbraMediaLibraryCombinedAspectRatioResolver"},kind:"RelayResolver",name:"combined_aspect_ratio",resolverModule:n("XFBAbraMediaLibraryCombinedAspectRatio-resolver").combined_aspect_ratio,path:"node.spark_image.combined_aspect_ratio"}],storageKey:null}],type:"XFBGENAIFeedSparkUnitData",abstractKey:null}],storageKey:null}],args:null,argumentDefinitions:[{kind:"RootArgument",name:"__relay_internal__pv__AbraIsLoggedOutrelayprovider"}]},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{fragment:{kind:"InlineFragment",selections:[{args:null,kind:"FragmentSpread",name:"KadabraFeedCard_data"}],type:"XFBGENAIPost",abstractKey:null},kind:"AliasedInlineFragmentSpread",name:"KadabraFeedCard_data"},{fragment:{kind:"InlineFragment",selections:[{args:null,kind:"FragmentSpread",name:"KadabraFeedSparkCard_data"}],type:"XFBGENAIFeedSparkUnitData",abstractKey:null},kind:"AliasedInlineFragmentSpread",name:"KadabraFeedSparkCard_data"},{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{fragment:{kind:"InlineFragment",selections:[{args:null,kind:"FragmentSpread",name:"KadabraFeedCard_rankingData"}],type:"XFBGenaiFetchFeedEdge",abstractKey:null},kind:"AliasedInlineFragmentSpread",name:"KadabraFeedCard_rankingData"},{args:null,kind:"FragmentSpread",name:"KadabraConcordFeedPostContainer_data"},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null}],storageKey:null},action:"THROW"},{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"page_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"end_cursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"has_next_page",storageKey:null}],storageKey:null}],storageKey:null},action:"THROW"}],type:"Query",abstractKey:null}})();a.exports=e}),null);
__d("KadabraFeedContainerPaginationQuery_feedEdge.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={kind:"InlineDataFragment",name:"KadabraFeedContainerPaginationQuery_feedEdge"};a.exports=e}),null);
__d("KadabraFeedContainer_pivotQuery.graphql",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},t=[{kind:"InlineFragment",selections:[e],type:"XFBGENAIPost",abstractKey:null}];return{argumentDefinitions:[{kind:"RootArgument",name:"remix_params"}],kind:"Fragment",metadata:null,name:"KadabraFeedContainer_pivotQuery",selections:[{alias:null,args:[{kind:"Variable",name:"remix_params",variableName:"remix_params"}],concreteType:null,kind:"LinkedField",name:"xab_kadabra_fetch_pivot_feed_focus_post",plural:!1,selections:[{kind:"InlineFragment",selections:[e,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"remix_original_post",plural:!1,selections:t,storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"remix_root_post",plural:!1,selections:t,storageKey:null}],type:"XFBGENAIPost",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null}})();a.exports=e}),null);
__d("KadabraFeedSparkCardContent_data.graphql",["XFBAbraMediaLibraryCombinedAspectRatio-resolver"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{argumentDefinitions:[{kind:"RootArgument",name:"__relay_internal__pv__AbraDebugDevOnlyrelayprovider"}],kind:"Fragment",metadata:null,name:"KadabraFeedSparkCardContent_data",selections:[{alias:null,args:null,kind:"ScalarField",name:"snapshot_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"source_imagine_prompt",storageKey:null},{alias:null,args:null,concreteType:"XFBGENAIVideoGen",kind:"LinkedField",name:"video",plural:!1,selections:[e,{alias:null,args:null,kind:"ScalarField",name:"aspect_ratio",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"XFBGENAIImagineImage",kind:"LinkedField",name:"image",plural:!1,selections:[e,{alias:null,args:null,fragment:{args:null,kind:"FragmentSpread",name:"XFBAbraMediaLibraryCombinedAspectRatioResolver"},kind:"RelayResolver",name:"combined_aspect_ratio",resolverModule:n("XFBAbraMediaLibraryCombinedAspectRatio-resolver").combined_aspect_ratio,path:"image.combined_aspect_ratio"}],storageKey:null},{args:null,kind:"FragmentSpread",name:"useKadabraFeedSparkMarkSeen_spark"},{args:null,kind:"FragmentSpread",name:"useKadabraFeedSparkMarkClicked_spark"},{args:null,kind:"FragmentSpread",name:"useKadabraFeedSparkVpvImpressionLogger_spark"},{args:null,kind:"FragmentSpread",name:"KadabraFeedSparkCardFeedbackButtons_data"},{kind:"Defer",selections:[{args:null,kind:"FragmentSpread",name:"KadabraFeedSparkCardMedia_data"}]},{condition:"__relay_internal__pv__AbraDebugDevOnlyrelayprovider",kind:"Condition",passingValue:!0,selections:[{fragment:{kind:"InlineFragment",selections:[{args:null,kind:"FragmentSpread",name:"KadabraFeedSparkCardDebugButton_spark"}],type:"XFBGENAIFeedSparkUnitData",abstractKey:null},kind:"AliasedInlineFragmentSpread",name:"KadabraFeedSparkCardDebugButton_spark"}]}],type:"XFBGENAIFeedSparkUnitData",abstractKey:null}})();a.exports=e}),null);
__d("KadabraFeedSparkCardFeedbackButtons_data.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"KadabraFeedSparkCardFeedbackButtons_data",selections:[{alias:null,args:null,kind:"ScalarField",name:"snapshot_id",storageKey:null}],type:"XFBGENAIFeedSparkUnitData",abstractKey:null};a.exports=e}),null);
__d("KadabraFeedSparkCardFeedbackButtons.react",["fbt","CometRelay","KDSButton.react","KDSFlexbox.react","KadabraFeedSparkCardFeedbackButtons_data.graphql","KadabraFeedbackUtils","MetaBrandHandThumbsDownFilled24Icon.react","MetaBrandHandThumbsDownOutline24Icon.react","MetaBrandHandThumbsUpFilled24Icon.react","MetaBrandHandThumbsUpOutline24Icon.react","react","react-compiler-runtime","useKadabraInteractionLogger"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=u||(u=o("react")),d=u.useState,m={button:{background:"x100d428",backgroundColor:"x1v911su",$$css:!0},root:{backdropFilter:"x152xckn",background:"xmypolv",backgroundColor:"x5as2we",borderStartStartRadius:"xum2pek",borderStartEndRadius:"x1p2znge",borderEndEndRadius:"xckx8r1",borderEndStartRadius:"x12qyh8a",boxShadow:"x1wofp9k",height:"x1qx5ct2",paddingTop:"x1y1aw1k",paddingInlineEnd:"x2vl965",paddingBottom:"xwib8y2",paddingInlineStart:"xe2zdcy",$$css:!0}};function p(t){var a=o("react-compiler-runtime").c(20),i=t.data,l=o("CometRelay").useFragment(e!==void 0?e:e=n("KadabraFeedSparkCardFeedbackButtons_data.graphql"),i),u=r("useKadabraInteractionLogger")(),p=d(null),_=p[0],f=p[1],g;a[0]!==u||a[1]!==l.snapshot_id?(g=function(t){f(t),u.log({action_target:"feed_spark_feedback",action_type:"click",event_name:"feed_spark_try_feedback_click",feedback:{feedback_click_item:t,feedback_reason:""},spark_snapshot_id:l.snapshot_id}),o("KadabraFeedbackUtils").pushFeedbackSuccessToast()},a[0]=u,a[1]=l.snapshot_id,a[2]=g):g=a[2];var h=g,y=_==="thumb_up",C=_==="thumb_down",b=_!=null,v=r(y?"MetaBrandHandThumbsUpFilled24Icon.react":"MetaBrandHandThumbsUpOutline24Icon.react"),S;a[3]===Symbol.for("react.memo_cache_sentinel")?(S=s._(/*BTDS*/"Good response"),a[3]=S):S=a[3];var R;a[4]!==h?(R=function(){return h("thumb_up")},a[4]=h,a[5]=R):R=a[5];var L;a[6]!==b||a[7]!==v||a[8]!==R?(L=c.jsx(r("KDSButton.react"),{icon:v,isDisabled:b,isLabelHidden:!0,isXMDSIcon:!1,label:S,onPress:R,size:"28",testid:void 0,xstyle:m.button}),a[6]=b,a[7]=v,a[8]=R,a[9]=L):L=a[9];var E=r(C?"MetaBrandHandThumbsDownFilled24Icon.react":"MetaBrandHandThumbsDownOutline24Icon.react"),k;a[10]===Symbol.for("react.memo_cache_sentinel")?(k=s._(/*BTDS*/"Bad response"),a[10]=k):k=a[10];var I;a[11]!==h?(I=function(){return h("thumb_down")},a[11]=h,a[12]=I):I=a[12];var T;a[13]!==b||a[14]!==E||a[15]!==I?(T=c.jsx(r("KDSButton.react"),{icon:E,isDisabled:b,isLabelHidden:!0,isXMDSIcon:!1,label:k,onPress:I,size:"28",testid:void 0,xstyle:m.button}),a[13]=b,a[14]=E,a[15]=I,a[16]=T):T=a[16];var D;return a[17]!==L||a[18]!==T?(D=c.jsxs(r("KDSFlexbox.react"),{alignItems:"center",direction:"row",gap:20,justifyContent:"center",shrink:0,testid:void 0,xstyle:m.root,children:[L,T]}),a[17]=L,a[18]=T,a[19]=D):D=a[19],D}l.default=p}),226);
__d("KadabraFeedSparkCardMedia_data.graphql",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"KadabraFeedSparkCardMedia_data",selections:[{alias:null,args:null,concreteType:"XFBGENAIVideoGen",kind:"LinkedField",name:"video",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},e],storageKey:null},{alias:null,args:null,concreteType:"XFBGENAIImagineImage",kind:"LinkedField",name:"image",plural:!1,selections:[e],storageKey:null}],type:"XFBGENAIFeedSparkUnitData",abstractKey:null}})();a.exports=e}),null);
__d("KadabraFeedSparkCardMedia.react",["CometRelay","FBLogger","KDSImage.react","KDSVideo.react","KDSVideoMediaID","KadabraFeedSparkCardMedia_data.graphql","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c={image:{height:"x5yr21d",objectFit:"xl1xv1r",width:"xh8yej3",$$css:!0}};function d(t){var a,i,l,s=o("react-compiler-runtime").c(8),d=t.data,m=o("CometRelay").useFragment(e!==void 0?e:e=n("KadabraFeedSparkCardMedia_data.graphql"),d),p=(a=m.video)==null?void 0:a.uri,_=(i=m.video)==null?void 0:i.id,f=(l=m.image)==null?void 0:l.uri;if(p!=null){var g;s[0]!==_?(g=o("KDSVideoMediaID").convertToKDSVideoMediaID(_),s[0]=_,s[1]=g):g=s[1];var h;s[2]===Symbol.for("react.memo_cache_sentinel")?(h={objectFit:"cover"},s[2]=h):h=s[2];var y;return s[3]!==g||s[4]!==p?(y=u.jsx(r("KDSVideo.react"),{autoPlay:!0,mediaFileUrlForProgressivePlayback:p,mediaId:g,videoPixelsFit:h}),s[3]=g,s[4]=p,s[5]=y):y=s[5],y}else if(f!=null){var C;return s[6]!==f?(C=u.jsx(r("KDSImage.react"),{src:f,xstyle:c.image}),s[6]=f,s[7]=C):C=s[7],C}return r("FBLogger")("kadabra_core").mustfix("Error getting media for spark card"),null}l.default=d}),98);
__d("KadabraTileFeedSparkCard.react",["fbt","KDSFlexbox.react","KDSSpinner.react","KDSText.react","KadabraFeedUtils","KadabraTileFeedCardWrapper.react","react","react-compiler-runtime","useKadabraImpressionLogger","useKadabraPageLayout"],(function(t,n,r,o,a,i,l,s){"use strict";var e=["aspectRatio","debugButton","description","feedbackButtons","footerButton","isLoading","media","ref","title"],u,c=u||(u=o("react")),d="transform .5s cubic-bezier(0.25, 0.46, 0.45, 0.94)",m="linear-gradient(to top, var(--always-black) 50%, transparent 90%)",p={WebkitMaskImage:"x1pj38yg",backdropFilter:"xvn2z4z",borderStartStartRadius:"x15mokao",borderStartEndRadius:"x1ga7v0g",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",bottom:"x1ey2m1c",height:"x16ye13r",maskImage:"xbh655r",position:"x10l6tqk",width:"xh8yej3",$$css:!0},_={feedbackButtonsContainer:{pointerEvents:"x67bb7w",$$css:!0},footerButtonContainer:{marginTop:"xw7yly9",pointerEvents:"x67bb7w",$$css:!0},footerUnderlay:function(t){return[p,{"--x-height":(function(e){return typeof e=="number"?e+"px":e!=null?e:void 0})(t+"%")}]},mediaHovered:{height:"x5yr21d",transform:"x1bao77f",transition:"x1dy6fjb",$$css:!0},mediaNotHovered:{height:"x5yr21d",transform:"x3oybdh",transition:"x1dy6fjb",$$css:!0},overlay:{height:"x534gh0",paddingTop:"x1cnzs8",paddingInlineEnd:"x1xnnf8n",paddingBottom:"x1i2zvha",paddingInlineStart:"x106a9eq",position:"x10l6tqk",width:"x19sv2k2",$$css:!0},overlayLoading:{backdropFilter:"xvn2z4z",$$css:!0},overlayLoadingContent:{height:"x5yr21d",width:"xh8yej3",$$css:!0},root:{backgroundColor:"x1seikjg",borderStartStartRadius:"x5uzrrg",borderStartEndRadius:"x632vos",borderEndEndRadius:"x1g00myu",borderEndStartRadius:"x191b7lb",boxShadow:"x1n86rs4",height:"x5yr21d",overflowX:"x6ikm8r",overflowY:"x10wlt62",position:"x1n2onr6",$$css:!0},rootAspectRatio:function(t){return[{aspectRatio:t!=null?"x10y9f9r":t,$$css:!0},{"--x-aspectRatio":t!=null?t:void 0}]}};function f(t){var n=o("react-compiler-runtime").c(31),a,i,l,u,d,m,p,f,h,y;n[0]!==t?(a=t.aspectRatio,i=t.debugButton,l=t.description,u=t.feedbackButtons,d=t.footerButton,f=t.isLoading,m=t.media,p=t.ref,h=t.title,y=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i,n[3]=l,n[4]=u,n[5]=d,n[6]=m,n[7]=p,n[8]=f,n[9]=h,n[10]=y):(a=n[1],i=n[2],l=n[3],u=n[4],d=n[5],m=n[6],p=n[7],f=n[8],h=n[9],y=n[10]);var C=f===void 0?!1:f,b=r("useKadabraPageLayout")(),v=b.isMobileLayout,S=r("useKadabraImpressionLogger")(),R;n[11]!==a?(R=o("KadabraFeedUtils").getSnappedAspectRatioForFeedCard(a),n[11]=a,n[12]=R):R=n[12];var L=R,E;n[13]!==S?(E=function(){S.log({action_target:"focus_on_spark_hover",event_name:"focus_on_spark_hover",target_area:"feed_post"})},n[13]=S,n[14]=E):E=n[14];var k;n[15]!==a||n[16]!==i||n[17]!==l||n[18]!==u||n[19]!==d||n[20]!==C||n[21]!==v||n[22]!==m||n[23]!==L||n[24]!==h?(k=function(t){var e=v||t;return c.jsxs(r("KDSFlexbox.react"),{direction:"column",justifyContent:"end",xstyle:[_.root,_.rootAspectRatio(L)],children:[c.jsx(r("KDSFlexbox.react"),{direction:"column",justifyContent:"end",xstyle:e?_.mediaHovered:_.mediaNotHovered,children:m}),c.jsx(r("KDSFlexbox.react"),{testid:void 0,xstyle:_.footerUnderlay(g(a,v))}),c.jsx(r("KDSFlexbox.react"),{direction:"column",justifyContent:"space-between",xstyle:[_.overlay,C&&_.overlayLoading],children:C?c.jsxs(r("KDSFlexbox.react"),{alignItems:"center",direction:"column",gap:12,justifyContent:"center",xstyle:_.overlayLoadingContent,children:[c.jsx(r("KDSSpinner.react"),{color:"white",size:48,strokeWidth:4}),c.jsx(r("KDSText.react"),{color:"white",textStyle:"newSubheadline",children:s._(/*BTDS*/"Generating video...")}),c.jsx(r("KDSText.react"),{color:"secondary",textStyle:"subtitleMedium",children:s._(/*BTDS*/"You\u2019ll be notified when your video is ready.")})]}):c.jsxs(c.Fragment,{children:[c.jsxs(r("KDSFlexbox.react"),{justifyContent:i?"space-between":"end",xstyle:_.feedbackButtonsContainer,children:[i,u]}),c.jsxs(r("KDSFlexbox.react"),{direction:"column",gap:6,justifyContent:"end",children:[c.jsx(r("KDSText.react"),{color:"white",textStyle:"newTitle2Emphasized",children:h}),c.jsx(r("KDSText.react"),{color:"sparkCardSecondary",testid:void 0,textStyle:"newTitle3",children:l}),c.jsx(r("KDSFlexbox.react"),{xstyle:_.footerButtonContainer,children:d})]})]})})]})},n[15]=a,n[16]=i,n[17]=l,n[18]=u,n[19]=d,n[20]=C,n[21]=v,n[22]=m,n[23]=L,n[24]=h,n[25]=k):k=n[25];var I;return n[26]!==p||n[27]!==E||n[28]!==k||n[29]!==y?(I=c.jsx(r("KadabraTileFeedCardWrapper.react"),babelHelpers.extends({},y,{onHover:E,ref:p,children:k})),n[26]=p,n[27]=E,n[28]=k,n[29]=y,n[30]=I):I=n[30],I}function g(e,t){if(t)return 0;var n=[{key:9/16,value:35},{key:1,value:50},{key:16/9,value:60}],r=[(n[0].key+n[1].key)/2,(n[1].key+n[2].key)/2];return e<r[0]?n[0].value:e<r[1]?n[1].value:n[2].value}l.default=f}),226);
__d("useKadabraFeedSparkMarkClickedMutation_abraRelayOperation",[],(function(t,n,r,o,a,i){a.exports="25417863751158654"}),null);
__d("useKadabraFeedSparkMarkClickedMutation.graphql",["useKadabraFeedSparkMarkClickedMutation_abraRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"snapshot_id"}],t=[{fields:[{kind:"Variable",name:"snapshot_id",variableName:"snapshot_id"}],kind:"ObjectValue",name:"input"}],r={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"useKadabraFeedSparkMarkClickedMutation",selections:[{alias:null,args:t,concreteType:"XFBGENAISparkUnitClickedMutationResponse",kind:"LinkedField",name:"xfb_genai_spark_unit_clicked",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"conversation",plural:!1,selections:[r],storageKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"useKadabraFeedSparkMarkClickedMutation",selections:[{alias:null,args:t,concreteType:"XFBGENAISparkUnitClickedMutationResponse",kind:"LinkedField",name:"xfb_genai_spark_unit_clicked",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"conversation",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},r],storageKey:null}],storageKey:null}]},params:{id:n("useKadabraFeedSparkMarkClickedMutation_abraRelayOperation"),metadata:{},name:"useKadabraFeedSparkMarkClickedMutation",operationKind:"mutation",text:null}}})();a.exports=e}),null);
__d("useKadabraFeedSparkMarkClicked_spark.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useKadabraFeedSparkMarkClicked_spark",selections:[{alias:null,args:null,kind:"ScalarField",name:"snapshot_id",storageKey:null}],type:"XFBGENAIFeedSparkUnitData",abstractKey:null};a.exports=e}),null);
__d("useKadabraFeedSparkMarkClicked",["CometRelay","FBLogger","react-compiler-runtime","useKadabraFeedSparkMarkClickedMutation.graphql","useKadabraFeedSparkMarkClicked_spark.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t){var a=o("react-compiler-runtime").c(4),i=o("CometRelay").useFragment(e!==void 0?e:e=n("useKadabraFeedSparkMarkClicked_spark.graphql"),t),l;a[0]===Symbol.for("react.memo_cache_sentinel")?(l=s!==void 0?s:s=n("useKadabraFeedSparkMarkClickedMutation.graphql"),a[0]=l):l=a[0];var u=o("CometRelay").useMutation(l),c=u[0],d;return a[1]!==c||a[2]!==i?(d=function(){if((i==null?void 0:i.snapshot_id)==null){r("FBLogger")("kadabra").mustfix("snapshot id for Spark Card is null for marking clicked");return}c({variables:{snapshot_id:i.snapshot_id}})},a[1]=c,a[2]=i,a[3]=d):d=a[3],d}l.default=u}),98);
__d("useKadabraFeedSparkLatestSeenSnapshotID",["react-compiler-runtime","refine","useSessionStorageJSON"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e=o("react-compiler-runtime").c(1),t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=o("refine").nullable(o("refine").string()),e[0]=t):t=e[0],r("useSessionStorageJSON")("kadabra_feed_spark_session_key",null,t)}l.default=e}),98);
__d("useKadabraFeedSparkMarkSeenMutation_abraRelayOperation",[],(function(t,n,r,o,a,i){a.exports="32086853384296491"}),null);
__d("useKadabraFeedSparkMarkSeenMutation.graphql",["useKadabraFeedSparkMarkSeenMutation_abraRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"snapshot_id"}],t=[{fields:[{kind:"Variable",name:"snapshot_id",variableName:"snapshot_id"}],kind:"ObjectValue",name:"input"}],r={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"useKadabraFeedSparkMarkSeenMutation",selections:[{alias:null,args:t,concreteType:"XFBGENAISparkUnitMarkSeenMutationResponse",kind:"LinkedField",name:"xfb_genai_spark_unit_mark_seen",plural:!1,selections:[{alias:null,args:null,concreteType:"XABAIGeneratedSparkSnapshot",kind:"LinkedField",name:"snapshot",plural:!1,selections:[r],storageKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"useKadabraFeedSparkMarkSeenMutation",selections:[{alias:null,args:t,concreteType:"XFBGENAISparkUnitMarkSeenMutationResponse",kind:"LinkedField",name:"xfb_genai_spark_unit_mark_seen",plural:!1,selections:[{alias:null,args:null,concreteType:"XABAIGeneratedSparkSnapshot",kind:"LinkedField",name:"snapshot",plural:!1,selections:[r,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:n("useKadabraFeedSparkMarkSeenMutation_abraRelayOperation"),metadata:{},name:"useKadabraFeedSparkMarkSeenMutation",operationKind:"mutation",text:null}}})();a.exports=e}),null);
__d("useKadabraFeedSparkMarkSeen_spark.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useKadabraFeedSparkMarkSeen_spark",selections:[{alias:null,args:null,kind:"ScalarField",name:"snapshot_id",storageKey:null}],type:"XFBGENAIFeedSparkUnitData",abstractKey:null};a.exports=e}),null);
__d("useSingleVPVDImpression",["react","react-compiler-runtime","useVPVDImpression","vpvdConstants"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useRef;function d(e){var t=o("react-compiler-runtime").c(10),n=e.isLite,a=e.minVisiblePx,i=e.minVisibleTimeMs,l=e.onVPVDEnd,s=e.onVPVDStart,u=a===void 0?o("vpvdConstants").DEFAULT_MIN_VISIBLE_PX:a,d=i===void 0?o("vpvdConstants").DEFAULT_MIN_VISIBLE_TIME_MS:i,m=c(!1),p=c(!1),_;t[0]!==l?(_=function(t){p.current!==!0&&(l&&l(t),p.current=!0)},t[0]=l,t[1]=_):_=t[1];var f=_,g;t[2]!==s?(g=function(t){m.current!==!0&&(s&&s(t),m.current=!0)},t[2]=s,t[3]=g):g=t[3];var h=g,y;return t[4]!==f||t[5]!==h||t[6]!==n||t[7]!==u||t[8]!==d?(y={isLite:n,minVisiblePx:u,minVisibleTimeMs:d,onVPVDEnd:f,onVPVDStart:h},t[4]=f,t[5]=h,t[6]=n,t[7]=u,t[8]=d,t[9]=y):y=t[9],r("useVPVDImpression")(y)}l.default=d}),98);
__d("useKadabraFeedSparkMarkSeen",["CometRelay","FBLogger","react-compiler-runtime","useKadabraFeedSparkLatestSeenSnapshotID","useKadabraFeedSparkMarkSeenMutation.graphql","useKadabraFeedSparkMarkSeen_spark.graphql","useSingleVPVDImpression"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t){var a=o("react-compiler-runtime").c(6),i=o("CometRelay").useFragment(e!==void 0?e:e=n("useKadabraFeedSparkMarkSeen_spark.graphql"),t),l;a[0]===Symbol.for("react.memo_cache_sentinel")?(l=s!==void 0?s:s=n("useKadabraFeedSparkMarkSeenMutation.graphql"),a[0]=l):l=a[0];var u=o("CometRelay").useMutation(l),d=u[0],m=i==null?void 0:i.snapshot_id,p=r("useKadabraFeedSparkLatestSeenSnapshotID")(),_=p[0],f=p[1],g;a[1]!==d||a[2]!==_||a[3]!==f||a[4]!==m?(g={minVisiblePct:.5,onVPVDEnd:c,onVPVDStart:function(){if(m==null){r("FBLogger")("kadabra").mustfix("snapshot id for Spark Card is null");return}m!==_&&d({onCompleted:function(){f(m)},variables:{snapshot_id:m}})}},a[1]=d,a[2]=_,a[3]=f,a[4]=m,a[5]=g):g=a[5];var h=r("useSingleVPVDImpression")(g),y=h[0];return y}function c(){}l.default=u}),98);
__d("useKadabraFeedSparkVpvImpressionLogger_spark.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useKadabraFeedSparkVpvImpressionLogger_spark",selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],type:"XFBGENAIFeedSparkUnitData",abstractKey:null};a.exports=e}),null);
__d("useKadabraFeedSparkVpvImpressionLogger",["CometRelay","react-compiler-runtime","useKadabraFeedSparkVpvImpressionLogger_spark.graphql","useKadabraVpvImpressionLogger","useVPVDImpression"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,a,i,l){var s=o("react-compiler-runtime").c(5);o("CometRelay").useFragment(e!==void 0?e:e=n("useKadabraFeedSparkVpvImpressionLogger_spark.graphql"),t);var u=r("useKadabraVpvImpressionLogger")(),c;s[0]!==u||s[1]!==i||s[2]!==a||s[3]!==l?(c={minVisiblePct:.5,onVPVDEnd:function(t){var e=t.visibleDuration;u.log({action_target:"feed_spark",event_name:"feed_spark_vpv_impression",ranking_request_id:i,ranking_session_id:a,spark_snapshot_id:l,vpv_duration_ms:e.toString()})}},s[0]=u,s[1]=i,s[2]=a,s[3]=l,s[4]=c):c=s[4];var d=r("useVPVDImpression")(c),m=d[0];return m}l.default=s}),98);
__d("KadabraFeedSparkCardContent.react",["fbt","AbraAttachmentUploadUtils","CometPlaceholder.react","CometRelay","KDSButton.react","KDSFlexbox.react","KDSSpinner.react","KadabraFeedSessionContext.react","KadabraFeedSparkCardContent_data.graphql","KadabraFeedSparkCardFeedbackButtons.react","KadabraFeedSparkCardMedia.react","KadabraFeedUtils","KadabraImagineVideoUtils","KadabraRouteUtils","KadabraTileFeedSparkCard.react","KadabraWandIconOutline.react","cr:27562","kdsPushToast","react","react-compiler-runtime","useAlakazamSendMessage","useCometRouterDispatcher","useKDSFileSelector","useKadabraFeedSparkMarkClicked","useKadabraFeedSparkMarkSeen","useKadabraFeedSparkVpvImpressionLogger","useKadabraInteractionLogger","useMergeRefs"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=u||(u=o("react")),d=u,m=d.useCallback,p=d.useEffect,_=d.useId,f=d.useRef,g=d.useState,h={backgroundColor:"xal61yo",height:"x5yr21d",width:"xh8yej3",$$css:!0},y={concordPost:{backgroundColor:null,borderStartStartRadius:"x1eps8hq",borderStartEndRadius:"x1wl3idq",borderEndEndRadius:"xmx59wx",borderEndStartRadius:"x1ba1ill",boxShadow:"x1ta6dxz",paddingTop:"xye1gum",paddingInlineEnd:"xrrkp5a",paddingBottom:"xvojnpq",paddingInlineStart:"xlhpewt",transition:"x1i6x7d5",width:"x1be37a",$$css:!0},concordWrapper:{borderStartStartRadius:"x1eps8hq",borderStartEndRadius:"x1wl3idq",borderEndEndRadius:"xmx59wx",borderEndStartRadius:"x1ba1ill",paddingTop:"xye1gum",paddingInlineEnd:"xrrkp5a",paddingBottom:"xvojnpq",paddingInlineStart:"xlhpewt",$$css:!0},glimmer:function(t){return[h,{aspectRatio:t!=null?"x10y9f9r":t,$$css:!0},{"--x-aspectRatio":t!=null?t:void 0}]},tryItButton:{backdropFilter:"x152xckn",background:"xmypolv",backgroundColor:"x5as2we",boxShadow:"x1wofp9k",$$css:!0}},C=["image/jpeg","image/png"];function b(t){var a,l,u,d,m=o("react-compiler-runtime").c(47),h=t.data,b=o("CometRelay").useFragment(e!==void 0?e:e=n("KadabraFeedSparkCardContent_data.graphql"),h),R=_(),L=b.description,E=b.snapshot_id,k=b.source_imagine_prompt,I=b.title,T;m[0]===Symbol.for("react.memo_cache_sentinel")?(T=[],m[0]=T):T=m[0];var D=g(T),x=D[0],$=D[1],P=r("useKadabraInteractionLogger")(),N=o("KadabraFeedSessionContext.react").useKadabraFeedSessionContext(),M=N.rankingRequestId,w=N.rankingSessionId,A=o("useAlakazamSendMessage").useAlakazamSendMessageObservable(),F=r("useKadabraFeedSparkVpvImpressionLogger")(b,w,M,E),O=r("useKadabraFeedSparkMarkSeen")(b),B=r("useMergeRefs")(F,O),W=r("useCometRouterDispatcher")(),q=f(null),U,V;m[1]===Symbol.for("react.memo_cache_sentinel")?(U=function(){return(function(){var e;(e=q.current)==null||e.unsubscribe()})},V=[q],m[1]=U,m[2]=V):(U=m[1],V=m[2]),p(U,V);var H;m[3]!==W||m[4]!==A||m[5]!==E||m[6]!==k?(H=function(t){if($([]),t==null||k==null){o("kdsPushToast").pushGenericErrorToast();return}var e=A({additionalAnnotations:{bool:{is_spark:!0},string:{spark_snapshot_id:E!=null?E:"null"}},conversationMode:"SPARK",entrypoint:"kadabra__spark__feed",imagineOperationRequest:{image_to_image_to_video_params:{file_upload_id:t,prompt:k},operation:"IMAGE_TO_IMAGE_TO_VIDEO"},isNewConversation:!0,message:k,sparkSnapshotId:E});q.current=e==null?void 0:e.subscribe({next:function(t){if(t.kind==="init"){var e=t.value.externalConversationId,n=o("KadabraRouteUtils").kadabraRoutePrompt({prompt_id:e});W==null||W.go(n,{replace:!0})}},start:v})},m[3]=W,m[4]=A,m[5]=E,m[6]=k,m[7]=H):H=m[7];var G=H,z=o("AbraAttachmentUploadUtils").useProcessSingleFileUploadWithCallback(),j=z.processSingleFileUploadWithCallback,K;m[8]!==P||m[9]!==j||m[10]!==G||m[11]!==E?(K={accept:C,multiple:!1,onFilesSelected:function(t){var e=t[0],n=o("AbraAttachmentUploadUtils").isImageAttachment(e),r=o("KadabraImagineVideoUtils").isImageFileEligibleForUpload(e,!0);P.log({action_target:"spark_upload",action_type:"click",attachment_size:e.size.toString(),attachment_type:e.type,event_name:"spark_upload_file",spark_snapshot_id:E,target_area:"composer"}),n&&r&&j(e,{},$,C,function(e){G(e)})}},m[8]=P,m[9]=j,m[10]=G,m[11]=E,m[12]=K):K=m[12];var Q=r("useKDSFileSelector")(K),X=r("useKadabraFeedSparkMarkClicked")(b),Y;m[13]!==P||m[14]!==X||m[15]!==Q||m[16]!==E?(Y=function(){P.log({action_target:"feed_spark",action_type:"click",event_name:"feed_spark_click",spark_snapshot_id:E,target_area:"feed_post"}),Q(),X()},m[13]=P,m[14]=X,m[15]=Q,m[16]=E,m[17]=Y):Y=m[17];var J=Y,Z;m[18]!==P||m[19]!==Q||m[20]!==E?(Z=function(){P.log({action_target:"feed_spark_try_button",action_type:"click",event_name:"feed_spark_try_button_click",spark_snapshot_id:E,target_area:"feed_post"}),Q()},m[18]=P,m[19]=Q,m[20]=E,m[21]=Z):Z=m[21];var ee=Z,te=x.length>0;if(I==null||L==null)return null;var ne=(a=(l=(u=b.video)==null?void 0:u.aspect_ratio)!=null?l:(d=b.image)==null?void 0:d.combined_aspect_ratio)!=null?a:o("KadabraFeedUtils").DEFAULT_FEED_CARD_ASPECT_RATIO,re;m[22]!==ne?(re=o("KadabraFeedUtils").getSnappedAspectRatioForFeedCard(ne),m[22]=ne,m[23]=re):re=m[23];var oe=re,ae;m[24]!==b.KadabraFeedSparkCardDebugButton_spark?(ae=n("cr:27562")!=null&&(b==null?void 0:b.KadabraFeedSparkCardDebugButton_spark)!=null?c.jsx(n("cr:27562"),{spark:b.KadabraFeedSparkCardDebugButton_spark}):void 0,m[24]=b.KadabraFeedSparkCardDebugButton_spark,m[25]=ae):ae=m[25];var ie=L!=null?L:"",le;m[26]!==b?(le=c.jsx(r("KadabraFeedSparkCardFeedbackButtons.react"),{data:b}),m[26]=b,m[27]=le):le=m[27];var se;m[28]===Symbol.for("react.memo_cache_sentinel")?(se=s._(/*BTDS*/"Try it now"),m[28]=se):se=m[28];var ue;m[29]!==te||m[30]!==ee?(ue=c.jsx(r("KDSButton.react"),{icon:r("KadabraWandIconOutline.react"),isLoading:te,isXMDSIcon:!1,label:se,onPress:ee,testid:void 0,xstyle:y.tryItButton}),m[29]=te,m[30]=ee,m[31]=ue):ue=m[31];var ce;m[32]===Symbol.for("react.memo_cache_sentinel")?(ce=c.jsx(S,{}),m[32]=ce):ce=m[32];var de;m[33]!==b?(de=c.jsx(r("CometPlaceholder.react"),{fallback:ce,name:i.id,children:c.jsx(r("KadabraFeedSparkCardMedia.react"),{data:b})}),m[33]=b,m[34]=de):de=m[34];var me=I!=null?I:"",pe;return m[35]!==oe||m[36]!==te||m[37]!==B||m[38]!==J||m[39]!==ae||m[40]!==ie||m[41]!==le||m[42]!==ue||m[43]!==de||m[44]!==me||m[45]!==R?(pe=c.jsx(r("KadabraTileFeedSparkCard.react"),{"aria-labelledby":R,aspectRatio:oe,debugButton:ae,description:ie,feedbackButtons:le,footerButton:ue,isLoading:te,media:de,onPress:J,ref:B,testid:void 0,title:me,wrapperXStyle:y.concordWrapper,xstyle:y.concordPost}),m[35]=oe,m[36]=te,m[37]=B,m[38]=J,m[39]=ae,m[40]=ie,m[41]=le,m[42]=ue,m[43]=de,m[44]=me,m[45]=R,m[46]=pe):pe=m[46],pe}function v(){}function S(){var e=o("react-compiler-runtime").c(1),t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=c.jsx(r("KDSFlexbox.react"),{alignItems:"center",justifyContent:"center",xstyle:y.glimmer(1),children:c.jsx(r("KDSSpinner.react"),{color:"white",size:48})}),e[0]=t):t=e[0],t}l.default=b}),226);
__d("KadabraFeedSparkCard_data.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"KadabraFeedSparkCard_data",selections:[{args:null,kind:"FragmentSpread",name:"KadabraFeedSparkCardContent_data"}],type:"XFBGENAIFeedSparkUnitData",abstractKey:null};a.exports=e}),null);
__d("KadabraFeedSparkCard.react",["CometRelay","FocusWithinHandler.react","KadabraFeedItem.react","KadabraFeedSparkCardContent.react","KadabraFeedSparkCard_data.graphql","KadabraMaybeVirtualizedMasonryItem.react","KadabraPlaceholderErrorBoundary.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c={feedColumn:{maxWidth:"x193iq5w",$$css:!0},focus:{borderStartStartRadius:"xbjudin",borderStartEndRadius:"xnlwouz",borderEndEndRadius:"xpp8er5",borderEndStartRadius:"xs9wviy",boxShadow:"xpbwql5",outline:"x1a2a7pz xvetz19",$$css:!0}};function d(t){var a=o("react-compiler-runtime").c(2),i=t.data,l=o("CometRelay").useFragment(e!==void 0?e:e=n("KadabraFeedSparkCard_data.graphql"),i),s;return a[0]!==l?(s=u.jsx(r("KadabraPlaceholderErrorBoundary.react"),{children:u.jsx(r("FocusWithinHandler.react"),{children:function(t,n){return u.jsx(r("KadabraFeedItem.react"),{testid:void 0,xstyle:[t&&n&&c.focus,c.feedColumn],children:u.jsx("div",{role:"article",children:u.jsx(o("KadabraMaybeVirtualizedMasonryItem.react").KadabraMaybeVirtualizedMasonryItem,{children:u.jsx(r("KadabraFeedSparkCardContent.react"),{data:l})})})})}})}),a[0]=l,a[1]=s):s=a[1],s}l.default=d}),98);
__d("useKadabraPerfLoggingHomeForPage",["InteractionTracing","KadabraHomeContext.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.use,c=s.useEffect;function d(e,t){var n=o("react-compiler-runtime").c(3),a=u(o("KadabraHomeContext.react").KadabraHomeContext),i=a.scrollSnapState,l,s;n[0]!==i?(l=function(){r("InteractionTracing").getPendingInteractions().forEach(function(e){var t=e.getTrace();(t==null?void 0:t.tracePolicy)==="kadabra.home"&&(t==null?void 0:t.type)==="INITIAL_LOAD"&&e.addAnnotationBoolean("isFeedFocused",i===o("KadabraHomeContext.react").KadabraHomeScrollSnapState.Feed)})},s=[i],n[0]=i,n[1]=l,n[2]=s):(l=n[1],s=n[2]),c(l,s),r("InteractionTracing").getPendingInteractions().forEach(function(n){var r=n.getTrace();(r==null?void 0:r.tracePolicy)==="kadabra.home"&&(r==null?void 0:r.type)==="INITIAL_LOAD"&&(n.addAnnotationInt("numOfHomeFeedUnitsInitiallyLoaded",e),n.addAnnotationInt("numOfHomeFeedUnitsInitiallyRequested",t))})}l.default=d}),98);
__d("useKadabraResponsiveFeedPageSize",["KadabraFeedUtils","react-compiler-runtime","useMatchViewport"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e,t=o("react-compiler-runtime").c(3),n=r("useMatchViewport")("min","width",o("KadabraFeedUtils").FEED_DESKTOP_BREAKPOINT),a=r("useMatchViewport")("min","width",o("KadabraFeedUtils").FEED_TABLET_BREAKPOINT),i;t[0]!==n||t[1]!==a?(i=o("KadabraFeedUtils").FEED_BREAKPOINTS.find(function(e){return e.minWidth===o("KadabraFeedUtils").FEED_DESKTOP_BREAKPOINT?n:e.minWidth===o("KadabraFeedUtils").FEED_TABLET_BREAKPOINT?a:e.minWidth===0}),t[0]=n,t[1]=a,t[2]=i):i=t[2];var l=i;return(e=l==null?void 0:l.pageSize)!=null?e:o("KadabraFeedUtils").FEED_FALLBACK_PAGE_SIZE}l.default=e}),98);
__d("KadabraFeedContainer.react",["fbt","CometRelay","ExecutionEnvironment","FBLogger","KDSVideoSharedAudioStateManager.react","KadabraActionTargetAreaContext","KadabraFeedCard.react","KadabraFeedCardLabelContext","KadabraFeedContainerPaginationQuery_data.graphql","KadabraFeedContainerPaginationQuery_feedEdge.graphql","KadabraFeedContainer_pivotQuery.graphql","KadabraFeedContext","KadabraFeedPaginationContext","KadabraFeedSparkCard.react","KadabraFeedUtils","KadabraMasonryFeedSSRSafe.react","KadabraWebConfig","react","react-compiler-runtime","useKadabraPageLayout","useKadabraPerfLoggingHomeForPage","useKadabraResponsiveFeedPageSize"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d,m,p=m||(m=o("react")),_=m,f=_.startTransition,g=_.useEffect,h=e!==void 0?e:e=n("KadabraFeedContainerPaginationQuery_data.graphql");u!==void 0||(u=n("KadabraFeedContainer_pivotQuery.graphql")),c!==void 0||(c=n("KadabraFeedContainerPaginationQuery_feedEdge.graphql"));function y(e){var t,n,a=o("react-compiler-runtime").c(45),i=e.data,l=e.firstPageSize,u=e.pivot,c=r("useKadabraResponsiveFeedPageSize")(),m=o("CometRelay").usePaginationFragment(h,i),_=m.data,y=m.hasNext,b=m.isLoadingNext,v=m.loadNext,S=m.refetch,R=o("CometRelay").useFragment(r("KadabraFeedContainer_pivotQuery.graphql"),u),L=o("CometRelay").useIsParentQueryActive(h,i),E=_==null||(t=_.xfb_genai_fetch_feed)==null?void 0:t.edges,k=r("useKadabraPageLayout")(),I=k.isMobileLayout,T;a[0]!==l||a[1]!==I||a[2]!==v||a[3]!==c?(T=function(){if(!r("KadabraWebConfig").is_crawler_request){l===1&&(d||(d=r("ExecutionEnvironment"))).canUseDOM&&!I&&(r("FBLogger")("kadabra_core").warn("browser width guess incorrect, tail load on initial load. Expect Late Mutations"),v(c));return}},a[0]=l,a[1]=I,a[2]=v,a[3]=c,a[4]=T):T=a[4];var D;a[5]===Symbol.for("react.memo_cache_sentinel")?(D=[],a[5]=D):D=a[5],g(T,D);var x;a[6]!==E||a[7]!==l||a[8]!==y||a[9]!==b||a[10]!==v?(x=function(){r("KadabraWebConfig").is_crawler_request&&(E==null?void 0:E.length)!=null&&!b&&y&&E.length<l+r("KadabraWebConfig").number_of_client_loaded_posts_in_feed&&v(r("KadabraWebConfig").number_of_client_loaded_posts_in_feed)},a[6]=E,a[7]=l,a[8]=y,a[9]=b,a[10]=v,a[11]=x):x=a[11];var $=E==null?void 0:E.length,P;a[12]!==l||a[13]!==y||a[14]!==b||a[15]!==v||a[16]!==$?(P=[$,l,y,b,v],a[12]=l,a[13]=y,a[14]=b,a[15]=v,a[16]=$,a[17]=P):P=a[17],g(x,P),r("useKadabraPerfLoggingHomeForPage")((n=E==null?void 0:E.length)!=null?n:0,l);var N;a[18]!==S?(N=function(t){t&&f(function(){S({},{fetchPolicy:"network-only"})})},a[18]=S,a[19]=N):N=a[19],o("KadabraFeedContext").useKadabraOnFeedNavigate(N);var M=R==null?void 0:R.xab_kadabra_fetch_pivot_feed_focus_post,w;a[20]!==E||a[21]!==M?(w=E==null?void 0:E.filter(C).map(function(e,t){var n,a,i=o("CometRelay").readInlineData(r("KadabraFeedContainerPaginationQuery_feedEdge.graphql"),e),l=i==null?void 0:i.node,u=e==null?void 0:e.node,c=u==null?void 0:u.KadabraFeedSparkCard_data;if(c!=null){var d,m,_,f;return u&&{aspectRatio:o("KadabraFeedUtils").getSnappedAspectRatioForFeedCard((d=(m=l==null||(_=l.spark_video)==null?void 0:_.aspect_ratio)!=null?m:l==null||(f=l.spark_image)==null?void 0:f.combined_aspect_ratio)!=null?d:o("KadabraFeedUtils").DEFAULT_FEED_CARD_ASPECT_RATIO),card:p.jsx(r("KadabraFeedSparkCard.react"),{data:c,index:t},l==null?void 0:l.id)}}var g=null;if(M!=null)if((M==null?void 0:M.id)===(l==null?void 0:l.id))g=s._(/*BTDS*/"This vibe");else{var h;if((M==null||(h=M.remix_original_post)==null?void 0:h.id)===(l==null?void 0:l.id))g=s._(/*BTDS*/"Original");else{var y;(M==null||(y=M.remix_root_post)==null?void 0:y.id)===(l==null?void 0:l.id)&&(g=s._(/*BTDS*/"Remixed from"))}}var C=u==null?void 0:u.KadabraFeedCard_data;return u&&C&&{aspectRatio:o("KadabraFeedUtils").getSnappedAspectRatioForFeedCard((n=l==null||(a=l.post_media)==null||(a=a.at(0))==null?void 0:a.aspect_ratio)!=null?n:o("KadabraFeedUtils").DEFAULT_FEED_CARD_ASPECT_RATIO),card:p.jsx(r("KadabraFeedCardLabelContext"),{value:{pivotLabel:g},children:p.jsx(r("KadabraFeedCard.react"),{data:C,index:t,rankingData:e.KadabraFeedCard_rankingData})},l==null?void 0:l.id)}}).filter(Boolean),a[20]=E,a[21]=M,a[22]=w):w=a[22];var A=w,F;a[23]!==(E==null?void 0:E.length)||a[24]!==(A==null?void 0:A.length)?(F=function(){(A==null?void 0:A.length)!==(E==null?void 0:E.length)&&r("FBLogger")("kadabra_core").warn("Unexpected number of feed cards - %s %s",A==null?void 0:A.length,E==null?void 0:E.length)},a[23]=E==null?void 0:E.length,a[24]=A==null?void 0:A.length,a[25]=F):F=a[25];var O=A==null?void 0:A.length,B=E==null?void 0:E.length,W;if(a[26]!==B||a[27]!==O?(W=[O,B],a[26]=B,a[27]=O,a[28]=W):W=a[28],g(F,W),E==null||A==null)return null;var q;a[29]!==A||a[30]!==y||a[31]!==b||a[32]!==L||a[33]!==v||a[34]!==c||a[35]!==M?(q=A&&p.jsx(o("KadabraActionTargetAreaContext").KadabraActionTargetAreaContextProvider,{value:"feed_post",children:p.jsx(r("KadabraMasonryFeedSSRSafe.react"),{breakpoints:o("KadabraFeedUtils").FEED_BREAKPOINTS,description:"KadabraFeed",hasNext:y,isLoadingNext:b,isParentQueryActive:L,loadNext:v,maxColumns:o("KadabraFeedUtils").MAX_COLUMNS,numResults:A.length,numToLoad:c,policy:"kadabra.paginateFeed",preserveOrderCount:M!=null?4:0,children:A})}),a[29]=A,a[30]=y,a[31]=b,a[32]=L,a[33]=v,a[34]=c,a[35]=M,a[36]=q):q=a[36];var U=q,V;a[37]===Symbol.for("react.memo_cache_sentinel")?(V={mutedSyncPolicy:"always_muted"},a[37]=V):V=a[37];var H;a[38]!==U?(H=p.jsx(o("KDSVideoSharedAudioStateManager.react").KDSVideoSharedAudioStateManagerProvider,{configForNewStateManager:V,children:U}),a[38]=U,a[39]=H):H=a[39];var G=H,z;a[40]!==i?(z={paginationFragment:h,paginationFragmentKey:i},a[40]=i,a[41]=z):z=a[41];var j;return a[42]!==G||a[43]!==z?(j=p.jsx(o("KadabraFeedPaginationContext").KadabraFeedPaginationContext,{value:z,children:G}),a[42]=G,a[43]=z,a[44]=j):j=a[44],j}function C(e){var t,n,a,i=o("CometRelay").readInlineData(r("KadabraFeedContainerPaginationQuery_feedEdge.graphql"),e),l=i==null?void 0:i.node,s=e==null?void 0:e.node;return s==null||l==null?!1:s!=null&&((t=l.genai_owner)==null?void 0:t.mute_state)!=="MUTED"&&(l==null||(n=l.remix_original_post)==null||(n=n.genai_owner)==null?void 0:n.mute_state)!=="MUTED"&&l.hide_on_feed!==!0&&((a=l.genai_owner)==null?void 0:a.has_block_relationship)!==!0&&(s.KadabraFeedCard_data!=null||(s==null?void 0:s.KadabraFeedSparkCard_data)!=null)}l.default=y}),226);
__d("KadabraHomeFeed_data.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[{defaultValue:null,kind:"LocalArgument",name:"ranking_session_id"},{kind:"RootArgument",name:"should_include_pivot_query"}],kind:"Fragment",metadata:null,name:"KadabraHomeFeed_data",selections:[{args:[{kind:"Variable",name:"ranking_session_id",variableName:"ranking_session_id"}],kind:"FragmentSpread",name:"KadabraFeedContainerPaginationQuery_data"},{condition:"should_include_pivot_query",kind:"Condition",passingValue:!0,selections:[{fragment:{kind:"InlineFragment",selections:[{args:null,kind:"FragmentSpread",name:"KadabraFeedContainer_pivotQuery"}],type:"Query",abstractKey:null},kind:"AliasedInlineFragmentSpread",name:"pivot"}]}],type:"Query",abstractKey:null};a.exports=e}),null);
__d("KadabraHomeFeed.react",["CometRelay","CometRouteParams","KDSFlexbox.react","KadabraFallbackFeed.react","KadabraFeedContainer.react","KadabraFeedLoadingGlimmer.react","KadabraFooter.react","KadabraHomeContext.react","KadabraHomeFeed_data.graphql","KadabraPlaceholderErrorBoundary.react","cr:10597","cr:3756","react","react-compiler-runtime","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=s,d=c.use,m=c.useEffect;function p(t){var a=o("react-compiler-runtime").c(32),i=t.data,l=t.firstPageSize,s=t.scrollSnapState,c=t.shouldAnimateFeedLoaded,p=c===void 0?!1:c,_=o("CometRelay").useFragment(e!==void 0?e:e=n("KadabraHomeFeed_data.graphql"),i),f=o("CometRouteParams").useRouteParams(),g=d(o("KadabraHomeContext.react").KadabraHomeContext),h=g.feedRef,y=g.scrollIntoView,C=f.remix_post_id,b=n("cr:10597")!=null&&C!=null,v;a[0]!==h||a[1]!==b?(v=function(){b&&n("cr:10597")!=null&&r("setTimeout")(function(){var e;h==null||(e=h.current)==null||e.scrollIntoView==null||e.scrollIntoView({behavior:"instant"})})},a[0]=h,a[1]=b,a[2]=v):v=a[2];var S;a[3]!==h||a[4]!==y||a[5]!==b?(S=[h,y,b],a[3]=h,a[4]=y,a[5]=b,a[6]=S):S=a[6],m(v,S);var R=s===o("KadabraHomeContext.react").KadabraHomeScrollSnapState.Home?"0 0 0 1px var(--line-separator)":void 0,L;a[7]!==R?(L={"--kds-feed-card-wrapper-box-shadow":R,display:"flex",flexDirection:"row"},a[7]=R,a[8]=L):L=a[8];var E,k,I;a[9]===Symbol.for("react.memo_cache_sentinel")?(E=u.jsx("div",{className:"x1i1rx1s"}),k={className:"x1iyjqo2"},I=n("cr:3756")&&u.jsx(r("KDSFlexbox.react"),{children:u.jsx(n("cr:3756"),{})}),a[9]=E,a[10]=k,a[11]=I):(E=a[9],k=a[10],I=a[11]);var T=b?void 0:h,D;a[12]===Symbol.for("react.memo_cache_sentinel")?(D=u.jsx(r("KadabraFallbackFeed.react"),{}),a[12]=D):D=a[12];var x=_==null?void 0:_.pivot,$;a[13]!==_||a[14]!==l||a[15]!==x?($=u.jsx(r("KadabraPlaceholderErrorBoundary.react"),{placeholderFallback:D,children:u.jsx(r("KadabraFeedContainer.react"),{data:_,firstPageSize:l,pivot:x})}),a[13]=_,a[14]=l,a[15]=x,a[16]=$):$=a[16];var P;a[17]!==p||a[18]!==$||a[19]!==T?(P=u.jsx(r("KadabraFeedLoadingGlimmer.react"),{feedRef:T,shouldAnimateFeedLoaded:p,children:$}),a[17]=p,a[18]=$,a[19]=T,a[20]=P):P=a[20];var N;a[21]===Symbol.for("react.memo_cache_sentinel")?(N=u.jsx(r("KadabraFooter.react"),{}),a[21]=N):N=a[21];var M;a[22]!==P?(M=u.jsxs("div",babelHelpers.extends({},k,{children:[I,P,N]})),a[22]=P,a[23]=M):M=a[23];var w;a[24]!==M||a[25]!==L?(w=u.jsxs("div",{"data-testid":void 0,style:L,children:[E,M]}),a[24]=M,a[25]=L,a[26]=w):w=a[26];var A=w;if(b&&n("cr:10597")!=null){var F;a[27]!==h?(F=u.jsx(n("cr:10597"),{ref:h}),a[27]=h,a[28]=F):F=a[28];var O;return a[29]!==A||a[30]!==F?(O=u.jsxs(r("KDSFlexbox.react"),{direction:"column",children:[F,A]}),a[29]=A,a[30]=F,a[31]=O):O=a[31],O}return A}l.default=p}),98);
__d("KadabraHomeFeedFilterPill.react",["fbt","ABRAXKadabraDiscoverControllerRouteBuilder","CometPressable.react","KDSFlexbox.react","KDSIcon.react","KDSText.react","MetaBrandXOutline16Icon.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c={pressable:{alignItems:"x6s0dn4",display:"x78zum5",height:"xmix8c7",justifyContent:"xl56j7k",width:"x1xp8n7a",$$css:!0},root:{alignSelf:"x1y8v6su",backdropFilter:"xrefnyo",backgroundColor:"x1xugty7",borderStartStartRadius:"x1142k65",borderStartEndRadius:"x9okykr",borderEndEndRadius:"x3hdh8v",borderEndStartRadius:"xr0m5pc",boxShadow:"x1dris2x",maxWidth:"x7sx7my",paddingTop:"x1yrsyyn",paddingBottom:"x10b6aqq",paddingInlineStart:"x1onr9mi",paddingInlineEnd:"x1pic42t",paddingLeft:null,paddingRight:null,$$css:!0}};function d(e){var t=o("react-compiler-runtime").c(8),n=e.ref,a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a=r("ABRAXKadabraDiscoverControllerRouteBuilder").buildURL({}).toString(),t[0]=a):a=t[0];var i=a,l;t[1]===Symbol.for("react.memo_cache_sentinel")?(l={className:"xamitd3 x78zum5 x7sx7my xyamay9 xh8yej3"},t[1]=l):l=t[1];var d;t[2]===Symbol.for("react.memo_cache_sentinel")?(d=u.jsx(r("KDSText.react"),{color:"currentColor",maxLines:1,textStyle:"bodyEmphasized",children:s._(/*BTDS*/"Remixes")}),t[2]=d):d=t[2];var m,p;t[3]===Symbol.for("react.memo_cache_sentinel")?(m=s._(/*BTDS*/"Remove filter"),p={url:i},t[3]=m,t[4]=p):(m=t[3],p=t[4]);var _;t[5]===Symbol.for("react.memo_cache_sentinel")?(_=u.jsxs(r("KDSFlexbox.react"),{alignItems:"center",gap:6,xstyle:c.root,children:[d,u.jsx(r("CometPressable.react"),{"aria-label":m,linkProps:p,xstyle:c.pressable,children:u.jsx(r("KDSIcon.react"),{icon:r("MetaBrandXOutline16Icon.react"),size:10})})]}),t[5]=_):_=t[5];var f;return t[6]!==n?(f=u.jsx("div",babelHelpers.extends({},l,{ref:n,children:_})),t[6]=n,t[7]=f):f=t[7],f}l.default=d}),226);
__d("KadabraTileFeedPostFooterUFIUsePromptButton_post.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"KadabraTileFeedPostFooterUFIUsePromptButton_post",selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"feed_remix_count",storageKey:null}],type:"XFBGenAIPublicPost",abstractKey:"__isXFBGenAIPublicPost"},{args:null,kind:"FragmentSpread",name:"useKadabraConcordPostRemix_post"}],type:"GenAIPostBase",abstractKey:"__isGenAIPostBase"};a.exports=e}),null);
__d("KadabraTileFeedPostFooterUFIUsePromptButton.react",["fbt","CometRelay","KadabraRemixIconOutline.react","KadabraTileFeedPostFooterUFIUsePromptButton_post.graphql","KadabraTileFeedUFIButton.react","react","react-compiler-runtime","useKadabraConcordPostRemix"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=u||(u=o("react"));function d(t){var a,i=o("react-compiler-runtime").c(8),l=t.post,u=o("CometRelay").useFragment(e!==void 0?e:e=n("KadabraTileFeedPostFooterUFIUsePromptButton_post.graphql"),l),d=r("useKadabraConcordPostRemix")(u),m=d.onHoverIn,p=d.onHoverOut,_=d.onPress,f;i[0]===Symbol.for("react.memo_cache_sentinel")?(f=s._(/*BTDS*/"Remix"),i[0]=f):f=i[0];var g=f,h=(a=u==null?void 0:u.feed_remix_count)!=null?a:0,y=h<=0,C=h.toString(),b;i[1]===Symbol.for("react.memo_cache_sentinel")?(b={position:"below",tooltipOverride:g},i[1]=b):b=i[1];var v;return i[2]!==m||i[3]!==p||i[4]!==_||i[5]!==y||i[6]!==C?(v=c.jsx(r("KadabraTileFeedUFIButton.react"),{icon:r("KadabraRemixIconOutline.react"),isLabelHidden:y,isXMDSIcon:!1,label:C,onHoverIn:m,onHoverOut:p,onPress:_,testid:void 0,tooltip:b}),i[2]=m,i[3]=p,i[4]=_,i[5]=y,i[6]=C,i[7]=v):v=i[7],v}l.default=d}),226);
__d("LatencySensitiveType",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({NORMAL:0,LOW:1,ULTRA_LOW:2}),l=e;i.default=l}),66);
__d("OzActiveActiveFailoverNetworkRequestStreamHandler",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(e){this.$1=e}var t=e.prototype;return t.onResponse=function(t,n){var e=t.headers;return e&&e.has("x-fb-video-replica")&&this.$1(t,n),null},t.onError=function(t,n){return null},e})();i.default=e}),66);
__d("OzBufferVTTCaptionsVisibleStrategy",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(e){this.$1=e}var t=e.prototype;return t.isActive=function(){return!this.$1()},t.getBufferTarget=function(){return 0},e})();i.default=e}),66);
__d("OzCDNSignedQueryParams",["ConstUriUtils"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(){this.$1={}}var t=e.prototype;return t.$2=function(t,n,r){this.$1[t]==null&&(this.$1[t]={}),this.$1[t][n]=r},t.get=function(t){var e=this.$1[t];return e==null?null:e},t.update=function(t){var e=o("ConstUriUtils").getUri(t);if(e!=null){var n=e.getQueryParams(),r=e.getDomain()+e.getPath(),a=n.get("oe");a!=null&&this.$2(r,"oe",String(n.get("oe"))),n.get("oh")!=null&&this.$2(r,"oh",String(n.get("oh")))}},e})();l.default=e}),98);
__d("OzCustomParsers",[],(function(t,n,r,o,a,i){function e(){return new Map([["fbProjection",function(e){try{return e.Period[0].AdaptationSet[0].$.FBProjection||null}catch(e){return null}}],["hasInbandCaptionsFromAccessibility",function(e){var t=e.Period[0],n=t&&t.AdaptationSet[0].Accessibility;return n&&n[0]?n[0].$.schemeIdUri==="urn:scte:dash:cc:cea-608:2015":!1}],["hasInbandCaptionsFromUsingASRCaptions",function(e){var t=Number.parseInt(e.$.usingASRCaptions,0);return!isNaN(t)&&t!=0}],["hasInbandCaptionsFromIsUsingAsrCaptionsEmployeeDogfooding",function(e){var t=Number.parseInt(e.$.isUsingAsrCaptionsEmployeeDogfooding,0);return!isNaN(t)&&t!=0}],["hasVTTRepresentationCaptions",function(e){return e.Period[0].AdaptationSet.find(function(e){var t;return((t=e.$.mimeType)==null?void 0:t.startsWith("application"))&&e.$.lang!=null})!=null}],["isLiveTemplated",function(e){return e.$.FBIsLiveTemplated==="true"}],["isFBMS",function(e){return e.$.FBMS==="true"}],["isFBWasLive",function(e){return e.$.FBWasLive==="true"}],["loapStreamType",function(e){return e.$.loapStreamType?parseInt(e.$.loapStreamType,10):0}],["fbManifestIdentifier",function(e){var t;return(t=e.$.FBManifestIdentifier)!=null?t:""}],["lastVideoFrameTs",function(e){return e.$.lastVideoFrameTs?Number.parseInt(e.$.lastVideoFrameTs,10):null}],["currentServerTimeMs",function(e){return e.$.currentServerTimeMs?Number.parseInt(e.$.currentServerTimeMs,10):null}],["validationErrors",function(e){var t;return(t=e.$.validationErrors)!=null?t:""}]])}i.createOzCustomParser=e}),66);
__d("oz-player/manifests/OzSegmentOptions",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(){this.$1=!1,this.$2=null}var t=e.prototype;return t.setSegmentNumDecisionTime=function(t){this.$2=t},t.getSegmentNumDecisionTime=function(){return this.$2},t.setIsDVLEnabled=function(t){this.$1=t},t.isDVLEnabled=function(){return this.$1},e})();i.default=e}),66);
__d("oz-player/shims/www/OzURIWWWImplConstUri",["ConstUriUtils","err"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.getQueryParams(),n={};return t.forEach(function(e,t){typeof e=="string"||typeof e=="number"?n[t]=e:n[t]=String(e)}),n}var s=(function(){function t(t){if(this.$1=o("ConstUriUtils").getUri(t),this.$1==null)throw r("err")("Invalid URI passed to OzURI");this.$2=e(this.$1)}var n=t.prototype;return n.addQueryData=function(n,r){var t=this.$1;if(typeof n=="string"){var o;t=(o=t)==null?void 0:o.addQueryParam(n,r===void 0?"":r)}else{var a,i=new Map;Object.keys(n).forEach(function(e){i.set(e,n[e])}),t=(a=t)==null?void 0:a.addQueryParams(i)}t!=null&&(this.$1=t,this.$2=e(this.$1))},n.getQueryData=function(){return this.$2},n.getDomain=function(){var e,t;return(e=(t=this.$1)==null?void 0:t.getDomain())!=null?e:""},n.toString=function(){var e,t;return(e=(t=this.$1)==null?void 0:t.toString())!=null?e:""},n.getPath=function(){var e,t;return(e=(t=this.$1)==null?void 0:t.getPath())!=null?e:""},t})();l.default=s}),98);
__d("oz-player/shims/www/OzURIWWW",["oz-player/shims/www/OzURIWWWImplConstUri"],(function(t,n,r,o,a,i,l){"use strict";l.default=r("oz-player/shims/www/OzURIWWWImplConstUri")}),98);
__d("oz-player/shims/OzURI",["oz-player/shims/www/OzURIWWW"],(function(t,n,r,o,a,i,l){"use strict";l.default=r("oz-player/shims/www/OzURIWWW")}),98);
__d("oz-player/utils/ozConcatUint8Arrays",["oz-player/utils/OzErrorUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){for(var t=0,n=0;n<e.length;++n)t+=e[n].byteLength;var r,a;try{r=new ArrayBuffer(t),a=new Uint8Array(r)}catch(e){throw o("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_ALLOCATION_FAILURE",description:e.name+": "+e.message})}for(var i=0,l=0;l<e.length;++l){var s=e[l];a.set(s,i),i+=s.byteLength}return{buffer:r,view:a}}l.default=e}),98);
__d("oz-player/utils/OzReadableStreamUtils",["oz-player/utils/ozConcatUint8Arrays"],(function(t,n,r,o,a,i,l){"use strict";var e=typeof TextDecoder!="undefined"?function(e){return new TextDecoder("utf-8").decode(new Uint8Array(e))}:function(e){return String.fromCharCode.apply(null,e)};function s(e){var t=[],n=function(){return e.read().then(function(e){var r=e.value,o=e.done;return o||!r?null:(t.push(r),n())})};return n().then(function(){var e=r("oz-player/utils/ozConcatUint8Arrays")(t),n=e.view;return n})}function u(t){return s(t).then(function(t){return e(t)})}function c(e){var t=new Uint8Array(e.length);return t.map(function(t,n){return e.charCodeAt(n)})}l.pumpAllData=s,l.pumpString=u,l.stringToUint8Array=c}),98);
__d("OzCustomRepresentationParsers",["oz-player/manifests/OzSegmentOptions","oz-player/shims/OzURI","oz-player/utils/OzReadableStreamUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=e.ozConfig,n=e.startTimestamp,a={timescale:function(t){var e=t.SegmentTemplate;if(e&&e.length>0){var n=e[0].$;if(n)return Number.parseInt(n.timescale,0)||null}return null}};return t.getBool("parse_initialization_binary",!1)&&(a.initializationBinary=function(e){try{var t=window.atob(e.FBInitializationBinary[0]._);return o("oz-player/utils/OzReadableStreamUtils").stringToUint8Array(t)}catch(e){return null}}),a.playbackResolutionMos=function(e){try{return e.$.FBPlaybackResolutionMos}catch(e){return null}},a.playbackResolutionCsvqm=function(e){try{return e.$.FBPlaybackResolutionCsvqm}catch(e){return null}},a.qualityLabel=function(e){try{return e.$.FBQualityLabel}catch(e){return null}},t.getBool("parse_first_segment",!1)&&(a.firstSegmentParser=function(e){if(n!=null&&n>0)return null;try{var t=e.SegmentBase[0].$.FBFirstSegmentRange.split("-").map(Number),o={startByte:t[0],endByte:t[1]},a=e.BaseURL[0]._,i=new(r("oz-player/shims/OzURI"))(a),l=new(r("oz-player/manifests/OzSegmentOptions"));return{getData:function(){return null},getURI:function(){return i},getByteRange:function(){return o},getTimeRange:function(){return{startTime:0,endTime:2}},getSequenceNumber:function(){return null},getOptions:function(){return l}}}catch(e){return null}}),a}l.createOzCustomRepresentationParsers=e}),98);
__d("OzDOMEventListenerImpl",["CometEventListener"],(function(t,n,r,o,a,i,l){"use strict";var e={listenDOMEvent:r("CometEventListener").listen,captureDOMEvent:r("CometEventListener").capture,suppressDOMEvent:r("CometEventListener").suppress},s=e;l.default=s}),98);
__d("OzMinimumSmallestDimensionRestriction",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(e){this.$1=e}var t=e.prototype;return t.applyRestriction=function(t){var e=this;if(t.length===0)return[];var n=t.filter(function(t){var n=t.getWidth(),r=t.getHeight(),o=n<r?n:r;return o>=e.$1});return n.length>0?n:[t[t.length-1]]},e})();i.default=e}),66);
__d("OzMosThresholdRestriction",["MosUtils"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){this.$3=new Map,this.$4=e,this.$1=e.getNumber("mos_upper_threshold",0),this.$2=e.getNumber("mos_lower_threshold",0)}var t=e.prototype;return t.$5=function(){return this.$4.getBool("cache_mos_threshold",!1)?{mosUpperThreshold:this.$1,mosLowerThreshold:this.$2}:{mosUpperThreshold:this.$4.getNumber("mos_upper_threshold",0),mosLowerThreshold:this.$4.getNumber("mos_lower_threshold",0)}},t.$6=function(t,n){var e=null;if(this.$3.get(t))e=this.$3.get(t);else{var r=t.getCustomField("playbackResolutionMos");r!=null&&(e=o("MosUtils").parsePlaybackMos(String(r)),e&&this.$3.set(t,e))}return e!=null?o("MosUtils").getMosValue(e,o("MosUtils").getQualityLabel(n.width,n.height)):null},t.$7=function(t,n){var e=this,r=null,o=this.$5(),a=o.mosUpperThreshold;return t.forEach(function(t){var o=e.$6(t,n);o!=null&&o>a&&(r==null||r>o)&&(r=o)}),r==null?t.slice():t.filter(function(t){var o=e.$6(t,n);return o==null?!0:o<=a||o===r})},t.$8=function(t,n){var e=this,r=[],o=this.$5(),a=o.mosLowerThreshold;return t.forEach(function(t){var o=e.$6(t,n);o!=null&&o>a&&r.push(t)}),r.length===0&&r.push(t[t.length-1]),r},t.applyRestriction=function(t,n){if(t.length===0)return[];var e=this.$5(),r=e.mosLowerThreshold,o=e.mosUpperThreshold,a=void 0;return o>0&&(a=this.$7(a!=null?a:t,n)),r>0&&(a=this.$8(a!=null?a:t,n)),a!=null?a:t.slice()},e})();l.default=e}),98);
__d("OzOneSemanticHandlerUtils",["ConstUriUtils","FBLogger","qex"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){t!=null&&t.indexOf("+RE")>=0&&e.retry(),n!=null&&n()}function s(t,n){var o=n.error,a=o.getExtra(),i=a.code,l=a.headers,s=null;if(i==null&&r("FBLogger")("comet_video_player").mustfix("A ONE Semantic error response must have an error code."),l==null&&r("FBLogger")("comet_video_player").mustfix("A ONE Semantic error response must contain response Headers."),l!=null){var u=l.get("x-fb-one-variant");s=u!=null?u:null}var c=JSON.parse(t.getString("network_retry_intervals_json","{}")),d=c[i];switch(i){case"410":n.endStream();break;case"404":e(n,s,function(){n.retry({behavior:"recover_failed_request"})});break;case"429":n.retry(d);break;case"403":default:}}function u(e){if(e!=null){var t=parseInt(e,10);return!isNaN(t)&&t>0&&t<=3}return!1}function c(e,t){if(e!=null&&t!=null){var n=parseInt(e,10),r=parseInt(t,10);return!isNaN(n)&&!isNaN(r)&&n>0&&n<=r}return!1}function d(e){if(e!=null){var t=o("ConstUriUtils").getUri(e);if(t){var n=t.getQueryParam("os_param");return n?String(n).toString():null}}return null}function m(e,t){var n=e!=null;return u(t)||(n||!!r("qex")._("1636"))&&c(t,e)}function p(e){var t=e.getExtra(),n=t.headers,o=_(n),a=e.getExtra(),i=a.code,l=a.url;if(o!=null&&i==null)return r("FBLogger")("comet_video_player").mustfix("A ONE Semantic error response must have an error code."),!1;var s=d(l);return m(s,o)}function _(e){if(e){var t=e.get("x-fb-one");if(t!=null)return parseInt(t,10)>0?t:null}return null}function f(e,t,n){var r=null,o=null;t!=null&&(r=d(t),r!=null&&e.setOneReqWave(parseInt(r,10)));var a=n==null?void 0:n.headers;a&&(o=_(a),o!=null&&e.setOneResWave(parseInt(o,10))),e.setOneObserved(m(r,o))}l.maybeRetryForVariant=e,l.evaluateOneSemanticsResponse=s,l.isOneSemanticsForcedForResponseWave=u,l.isOneSemanticsEnabledForWave=c,l.getOneSemanticRequestWave=d,l.shouldRespondWithOneSemantics=p,l.getOneSemanticResponseWave=_,l.setOneSemanticFetchStreamLoggingAttributes=f}),98);
__d("handleOzManifestFetchErrorEvent",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){var n=e.getNumber("initial_manifest_request_retry_count",0),r=JSON.parse(e.getString("network_retry_intervals_json","{}")),o=e.getNumber("live_max_try_attempts_on_404",1),a=["404","503"];e.getBool("live_gracefully_handle_no_network",!1)&&a.push("0"),e.getBool("live_gracefully_handle_410",!1)&&a.push("410"),e.getBool("live_gracefully_handle_502",!1)&&a.push("502"),e.getBool("live_gracefully_handle_429",!1)&&a.push("429"),e.getBool("live_gracefully_handle_504",!1)&&a.push("504"),e.getBool("normalize_mpd_fetch_errors",!1)&&a.push("20");var i=t.error.getExtra().code;if(!(e.getBool("no_retry_on_empty_string_error_code",!1)&&i==="")){e.getBool("handle_mpd_null_error_codes",!1)&&(i=i!=null?i:null);var l=r[i];if(t.isInitialRequest)typeof l=="number"&&l>0&&t.retryAttemptCount<n&&t.retry({waitMs:l});else if(i!=null&&a.indexOf(i)>-1)switch(i){case"410":t.endStream();break;case"404":o<t.consecutiveFailuresForErrorCode&&t.retry();break;case"504":case"502":case"503":case"20":case"0":t.retry();break;case"429":typeof l=="number"&&l>0&&t.retry({waitMs:l});break;default:break}else i===null&&e.getBool("handle_mpd_null_error_codes",!1)&&t.retry()}}i.default=e}),66);
__d("handleOzStreamErrorEvent",[],(function(t,n,r,o,a,i){"use strict";var e=[0,1,1,2,3,5,8,13,21,34];function l(t,n){var r=n.error.getExtra().code;if(!(t.getBool("no_retry_on_empty_string_error_code",!1)&&r==="")){if(t.getBool("retry_null_error_code_in_stream",!1)&&r==null){n.retry();return}var o=JSON.parse(t.getString("network_end_broadcasts_json","[]"));if(o.includes(r)){n.endStream();return}var a=JSON.parse(t.getString("network_skip_json","[]"));if(a.includes(r)){n.retry();return}var i=t.getBool("back_off_pdash_504_retry",!0)?e[n.retryAttemptCount]:0,l=JSON.parse(t.getString("network_reload_mpd_json","[]")),s=t.getBool("fix_reload_manifest_retry",!1);if(!(t.getBool("back_off_pdash_504_retry",!0)&&i==null&&(!s||l.includes(r)))){if(i!=null&&l.includes(r)){t.getBool("network_reload_mpd_json_retry",!1)?n.retry({behavior:"recover_failed_request",waitMs:i*1e3}):n.retry({waitMs:i*1e3});return}var u=JSON.parse(t.getString("network_retry_intervals_json",'{"0": 1000, "404": 2000, "502": 1000, "503": 1000, "504": 1000}')),c=r!=null?u[r]:null;if(c!=null){t.getBool("network_retry_intervals_json_retry",!1)?n.retry({behavior:"retry_failed_request",waitMs:c}):n.retry({waitMs:c});return}}}}i.default=l}),66);
__d("OzOneSemanticHandler",["OzOneSemanticHandlerUtils","handleOzManifestFetchErrorEvent","handleOzStreamErrorEvent"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=t.error;o("OzOneSemanticHandlerUtils").shouldRespondWithOneSemantics(n)?o("OzOneSemanticHandlerUtils").evaluateOneSemanticsResponse(e,t):r("handleOzManifestFetchErrorEvent")(e,t)}function s(e,t){var n=t.error;o("OzOneSemanticHandlerUtils").shouldRespondWithOneSemantics(n)?o("OzOneSemanticHandlerUtils").evaluateOneSemanticsResponse(e,t):r("handleOzStreamErrorEvent")(e,t)}l.handleManifestFetchErrorEvent=e,l.handleStreamErrorEvent=s}),98);
__d("oz-player/shims/www/ozvariantWWW",["invariant"],(function(t,n,r,o,a,i,l,s){var e=s;l.default=e}),98);
__d("oz-player/shims/ozvariant",["oz-player/shims/www/ozvariantWWW"],(function(t,n,r,o,a,i,l){l.default=r("oz-player/shims/www/ozvariantWWW")}),98);
__d("oz-player/utils/OzNumericalHelper",[],(function(t,n,r,o,a,i){"use strict";var e=1e-5;function l(t,n,r){return r===void 0&&(r=e),Math.abs(n-t)<=r}function s(t,n,r){return r===void 0&&(r=e),t>n&&!l(t,n,r)}function u(t,n,r){return r===void 0&&(r=e),t<n&&!l(t,n,r)}function c(t,n,r){return r===void 0&&(r=e),u(t,n,r)||l(t,n,r)}function d(t,n,r){return r===void 0&&(r=e),s(t,n,r)||l(t,n,r)}i.equalTo=l,i.greaterThan=s,i.lessThan=u,i.lessThanOrEqual=c,i.greaterThanOrEqual=d}),66);
__d("oz-player/utils/OzNumericalRangeUtil",["oz-player/utils/OzNumericalHelper"],(function(t,n,r,o,a,i,l){"use strict";var e=.01;function s(t,n){var r=n.rangeEnd;return r==null?!1:Math.abs(t.rangeStart-r)>e&&t.rangeStart>r}function u(t,n){var r=t.rangeEnd,o=n.rangeEnd;return r==null?!0:o==null?!1:Math.abs(r-o)>e&&r>o}function c(t,n,r,o){var a=r.rangeEnd;return a==null?!1:n===a||Math.abs(n-a)>(o!=null?o:e)&&n>a}function d(t,n,r){var o=n.rangeEnd;if(o==null)return!1;var a=r!=null?r:e;return t-n.rangeStart>=a&&o-t>=a}function m(t,n){return t>n-e}function p(e){if(!e.length)return[];var t=[],n=e[0];t.push(n);for(var r=1;r<e.length;r++){var o=e[r];if(u(o,n))s(o,n)?(n={rangeStart:o.rangeStart,rangeEnd:o.rangeEnd},t.push(n)):n.rangeEnd=o.rangeEnd;else continue}return t}function _(e,t,n){return t.reduceRight(function(t,r){if(c(e,r.rangeStart,n)||c(e,n.rangeStart,r))t.push(r);else{var o=n.rangeEnd;o!=null&&(r.rangeEnd==null||c(e,r.rangeEnd,n))&&t.push({rangeStart:o,rangeEnd:r.rangeEnd}),m(n.rangeStart,r.rangeStart)&&t.push({rangeStart:r.rangeStart,rangeEnd:n.rangeStart})}return t},[]).filter(function(e){return e.rangeEnd==null||e.rangeStart<e.rangeEnd}).reverse()}function f(t,n,r,o){o===void 0&&(o=e);for(var a=0;a<r.length;a++){var i=r[a],l=i.rangeStart;if(m(n,l)&&!c(t,n,i,o))return a}return-1}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n],o=r.rangeStart;if(!m(e,o))return n}return-1}function h(e,t,n){return e>=t?0:n.reduceRight(function(n,r){var o=r.rangeStart,a=r.rangeEnd;return t<o||a!=null&&e>a?n:a==null||t<=a?Math.min(t-o,t-e)+n:e>=o?Math.min(a-e,t-e)+n:a-o+n},0)}function y(e,t){for(var n,r=e.length==0&&(n=t[t.length-1])!=null?n:null,a=0;a<e.length;a++){for(var i=e[a],l=a;l<t.length;l++){var s=t[l];if(o("oz-player/utils/OzNumericalHelper").equalTo(i.rangeStart,s.rangeStart)&&i.rangeEnd!=null&&s.rangeEnd!=null&&o("oz-player/utils/OzNumericalHelper").equalTo(i.rangeEnd,s.rangeEnd))break;if(s.rangeEnd!=null&&i.rangeEnd!=null&&!o("oz-player/utils/OzNumericalHelper").equalTo(i.rangeStart,s.rangeStart)){r={rangeStart:s.rangeStart,rangeEnd:s.rangeEnd};break}else if(s.rangeEnd!=null&&i.rangeEnd!=null&&o("oz-player/utils/OzNumericalHelper").equalTo(i.rangeStart,s.rangeStart)&&!o("oz-player/utils/OzNumericalHelper").equalTo(i.rangeEnd,s.rangeEnd)){r={rangeStart:i.rangeEnd,rangeEnd:s.rangeEnd};break}}if(r!==null)break}return r}function C(e){for(var t=[],n=0;n<e.length;n++)t.push({rangeStart:e[n].startTime,rangeEnd:e[n].endTime});return t}l.isAfter=c,l.isWithin=d,l.isLargerThan=m,l.mergeSortedRanges=p,l.diffSortedRanges=_,l.findCurrentRangeIndex=f,l.findNextRangeIndex=g,l.findDiffCoveredByRanges=h,l.firstAddedInSortedRanges=y,l.convertFromTimeRanges=C}),98);
__d("oz-player/manifests/SegmentTemplateSegmentsContainer",["oz-player/manifests/OzSegmentOptions","oz-player/shims/OzEventEmitter","oz-player/shims/OzURI","oz-player/shims/ozvariant","oz-player/utils/OzNumericalHelper","oz-player/utils/OzNumericalRangeUtil"],(function(t,n,r,o,a,i,l){"use strict";var e=1e-4,s=(function(){function t(e,t,n,o,a,i){i===void 0&&(i=!1),this.$7=new(r("oz-player/shims/OzEventEmitter")),this.$10=null,this.$8=e,this.$2=t,this.$3=n,this.$1=a,this.$4=o,this.$5=this.$11(this.$4),this.$6=i,this.$9=this.$8.getNumber("live_numerical_error_epsilon")}var n=t.prototype;return n.getSegmentByTime=function(t){for(var e=this.$12(t),n=e*this.$3,r=null,a=this.$4.length-1;a>=0;a--){var i=this.$4[a];if(o("oz-player/utils/OzNumericalHelper").lessThanOrEqual(i.t+i.d*(i.r+1),n,this.$9))break;r=i}if(r===null||o("oz-player/utils/OzNumericalHelper").greaterThan(r.t,n,this.$9))return null;var l=Math.max(0,Math.floor((n-r.t+this.$9)/r.d));return this.$13(r,l)},n.getSegment=function(t){for(var e=0,n=t;n>=0&&e<this.$4.length;){var r=this.$4[e],o=r.r,a=o+1;if(n>=a){n-=a,e++;continue}break}var i=this.$4[e];return i?this.$13(i,n):null},n.getSegmentAfter=function(t){var e=t.getTimeRange().endTime;return this.getSegmentByTime(e)},n.getPredictedSegmentAfter=function(t){return null},n.canPredict=function(){return!1},n.canApproximateId=function(){return!1},n.isEndingSegment=function(n){if(!this.$4||!this.$4.length||!this.$6)return!1;var t=this.$4[this.$4.length-1],r=t.r,o=this.$13(t,r);return Math.abs(o.getTimeRange().startTime-n.getTimeRange().startTime)+Math.abs(o.getTimeRange().endTime-n.getTimeRange().endTime)<e},n.updateWith=function(n){n instanceof t||r("oz-player/shims/ozvariant")(0,646),this.$6=n.$6,this.$14(n.$4),this.$15(n.$4),this.$7.emit("segment_updated")},n.getTimeRanges=function(){return this.$10?this.$16(this.$5,this.$10):this.$5},n.blockTimeRange=function(t){this.$10=t},n.$16=function(t,n){return o("oz-player/utils/OzNumericalRangeUtil").diffSortedRanges(this.$8,t.map(function(e){return{rangeStart:e.startTime,rangeEnd:e.endTime}}),{rangeStart:n.startTime,rangeEnd:n.endTime}).map(function(e){return{startTime:e.rangeStart,endTime:e.rangeEnd==null?1/0:e.rangeEnd}})},n.addUpdateListener=function(t){return this.$7.addListener("segment_updated",t)},n.$12=function(t){var e=t,n=o("oz-player/utils/OzNumericalRangeUtil").findCurrentRangeIndex(this.$8,t,this.getTimeRanges().map(function(e){return{rangeStart:e.startTime,rangeEnd:e.endTime}}));if(n===-1){var r=o("oz-player/utils/OzNumericalRangeUtil").findNextRangeIndex(t,this.getTimeRanges().map(function(e){return{rangeStart:e.startTime,rangeEnd:e.endTime}}));r!==-1&&(e=this.getTimeRanges()[r].startTime)}return e},n.$14=function(t){var e;(e=this.$4).splice.apply(e,[0,this.$4.length].concat(t))},n.$15=function(t){var e=this.$11(t),n=o("oz-player/utils/OzNumericalRangeUtil").mergeSortedRanges(this.$5.map(function(e){return{rangeStart:e.startTime,rangeEnd:e.endTime}}).concat(e.map(function(e){return{rangeStart:e.startTime,rangeEnd:e.endTime}})));this.$5=n.map(function(e){return{startTime:e.rangeStart,endTime:e.rangeEnd==null?1/0:e.rangeEnd}})},n.$11=function(t){var e=this,n=o("oz-player/utils/OzNumericalRangeUtil").mergeSortedRanges(this.$4.map(function(t){var n=e.$13(t,0).getTimeRange().startTime,r=e.$13(t,t.r).getTimeRange().endTime;return{rangeStart:n,rangeEnd:r}}));return n.map(function(e){var t=e.rangeStart,n=e.rangeEnd;return n=n==null?1/0:n,{startTime:t,endTime:n}})},n.$13=function(t,n){var e=this;n===void 0&&(n=0);var o=t.t,a=t.d,i=t.r,l=t.id,s=o+a*n,u=this.$8.getBool("use_scf_timebased_segments"),c=l!=null?l-(i-n):null,d=new(r("oz-player/manifests/OzSegmentOptions"));return{getData:function(){return null},getURI:function(){var t="";e.$1!=null&&c!=null?t=e.$1.replace("$Number$",c.toString()):c!=null&&e.$2.indexOf("$Number$")!==-1&&e.$8.getBool("parse_number_templated_uri")?t=e.$2.replace("$Number$",c.toString()):t=e.$2.replace("$Time$",s.toString());var n=new(r("oz-player/shims/OzURI"))(t);return u&&n.addQueryData("_nc_scf",1),n},getTimeRange:function(){return{startTime:s/e.$3,endTime:(s+a)/e.$3}},getByteRange:function(){return null},getSequenceNumber:function(){return null},getOptions:function(){return d}}},n.getSegmentGroups=function(){return this.$4},n.getEndingSegment=function(){if(this.$4.length==0)return null;var e=this.$4[this.$4.length-1],t=e.r;return this.$13(e,t)},n.forceParseIfNotParsed=function(){},n.getMaxGopSec=function(){return null},t})();l.default=s}),98);
__d("oz-player/utils/OzUrlHelper",[],(function(t,n,r,o,a,i){"use strict";function e(e){var t=e,n=t.indexOf("://"),r=t.indexOf("/",n+3);return r>n&&(t=t.substring(r)),t}function l(e){var t=e,n=t.lastIndexOf("/"),r=t.lastIndexOf("://");return n>r+2&&(t=t.substring(0,n+1)),t}function s(e){var t=e;return t=l(t),t.endsWith("/")?l(t.substring(0,t.length-1)):t}function u(e,t){for(var n=l(e),r=t;r.length;)if(r.startsWith("./"))r=r.substring(2);else if(r.startsWith("../"))r=r.substring(3),n=s(n),n.endsWith("/")&&(n=n.substring(0,n.length-1));else if(r.startsWith(".."))r=r.substring(2),n=s(n);else if(r.startsWith("."))r=r.substring(1);else break;return r&&r.length&&(n.endsWith("/")||(n+="/"),n+=r),n}function c(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!t||!t.length)return"";if(t.length===1)return t[0];for(var r=t.shift();t.length>0;)r=u(r,t.shift());return r}function d(e,t){return m(t)?t:c(e,t)}function m(e){var t=/^https?:\/\//i;return t.test(e)}i.stripToPathAndQueryOnly=e,i.joinRelativeUrlPaths=c,i.joinUrlPaths=d}),66);
__d("PredictedSegmentTemplateSegmentsContainer",["oz-player/manifests/OzSegmentOptions","oz-player/manifests/SegmentTemplateSegmentsContainer","oz-player/shims/OzURI","oz-player/shims/ozvariant","oz-player/utils/OzNumericalHelper","oz-player/utils/OzNumericalRangeUtil","oz-player/utils/OzUrlHelper"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t,n,r,o,a,i,l,s,u,c){var d;c===void 0&&(c=!1),d=e.call(this,t,n,o,a,null,c)||this,d.$PredictedSegmentTemplateSegmentsContainer$p_9=0,d.$PredictedSegmentTemplateSegmentsContainer$p_11=null,d.$PredictedSegmentTemplateSegmentsContainer$p_10=r,d.$PredictedSegmentTemplateSegmentsContainer$p_8=c,d.$PredictedSegmentTemplateSegmentsContainer$p_12=a,d.$PredictedSegmentTemplateSegmentsContainer$p_7=t,d.$PredictedSegmentTemplateSegmentsContainer$p_5=o,d.$PredictedSegmentTemplateSegmentsContainer$p_1=i,d.$PredictedSegmentTemplateSegmentsContainer$p_3=s,d.$PredictedSegmentTemplateSegmentsContainer$p_2=l,d.$PredictedSegmentTemplateSegmentsContainer$p_4=u,d.$PredictedSegmentTemplateSegmentsContainer$p_6=t.getNumber("live_numerical_error_epsilon");for(var m=0;m<d.$PredictedSegmentTemplateSegmentsContainer$p_12.length;m++)d.$PredictedSegmentTemplateSegmentsContainer$p_9=Math.max(d.$PredictedSegmentTemplateSegmentsContainer$p_12[m].d,d.$PredictedSegmentTemplateSegmentsContainer$p_9);return d}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.$PredictedSegmentTemplateSegmentsContainer$p_13=function(){return this.$PredictedSegmentTemplateSegmentsContainer$p_2!=null&&this.$PredictedSegmentTemplateSegmentsContainer$p_4!=null?{predictedAverageDuration:this.$PredictedSegmentTemplateSegmentsContainer$p_4,predictedMediaStartNumber:this.$PredictedSegmentTemplateSegmentsContainer$p_2}:null},n.$PredictedSegmentTemplateSegmentsContainer$p_14=function(t,n,a){var e=this;!Number.isNaN(a)||r("oz-player/shims/ozvariant")(0,54238);var i=this.$PredictedSegmentTemplateSegmentsContainer$p_1.indexOf("%24Number%24")===-1?this.$PredictedSegmentTemplateSegmentsContainer$p_1.replace("$Number$",a.toString()):this.$PredictedSegmentTemplateSegmentsContainer$p_1.replace("%24Number%24",a.toString()),l=this.$PredictedSegmentTemplateSegmentsContainer$p_7.getLegacyConfig().getString("cdn_experiment_id",""),s=this.$PredictedSegmentTemplateSegmentsContainer$p_7.getLegacyConfig().getNumber("use_dvl_with_timeout_ms",0),u=new(r("oz-player/manifests/OzSegmentOptions"));return{getByteRange:function(){return null},getData:function(){return null},getOptions:function(){return u},getSequenceNumber:function(){return a},getTimeRange:function(){return{endTime:n,startTime:t}},getURI:function(){var t=new(r("oz-player/shims/OzURI"))(i);l.length!==0&&t.addQueryData("_nc_expid",l);var n=u.isDVLEnabled();return n&&s>0&&e.$PredictedSegmentTemplateSegmentsContainer$p_10!=null&&(t.addQueryData("_nc_dinfo-manifest-url",o("oz-player/utils/OzUrlHelper").stripToPathAndQueryOnly(e.$PredictedSegmentTemplateSegmentsContainer$p_10)),t.addQueryData("_nc_dinfo-timeout",s)),t}}},n.updateWith=function(o){o instanceof t||r("oz-player/shims/ozvariant")(0,646),this.$PredictedSegmentTemplateSegmentsContainer$p_3=o.$PredictedSegmentTemplateSegmentsContainer$p_3,this.$PredictedSegmentTemplateSegmentsContainer$p_1=o.$PredictedSegmentTemplateSegmentsContainer$p_1,e.prototype.updateWith.call(this,o),this.$PredictedSegmentTemplateSegmentsContainer$p_12=o.$PredictedSegmentTemplateSegmentsContainer$p_12,this.$PredictedSegmentTemplateSegmentsContainer$p_8=o.$PredictedSegmentTemplateSegmentsContainer$p_8;for(var n=0;n<this.$PredictedSegmentTemplateSegmentsContainer$p_12.length;n++)this.$PredictedSegmentTemplateSegmentsContainer$p_9=Math.max(this.$PredictedSegmentTemplateSegmentsContainer$p_12[n].d,this.$PredictedSegmentTemplateSegmentsContainer$p_9)},n.getSegmentByTime=function(t){return this.canApproximateId()?this.$PredictedSegmentTemplateSegmentsContainer$p_15(t):this.$PredictedSegmentTemplateSegmentsContainer$p_16(t)},n.getPredictedSegmentAfter=function(t){var e=t!=null?t.getSequenceNumber():null;return e!=null&&this.canPredict()?this.$PredictedSegmentTemplateSegmentsContainer$p_14(0,0,e+1):null},n.blockTimeRange=function(n){this.$PredictedSegmentTemplateSegmentsContainer$p_11=n,e.prototype.blockTimeRange.call(this,n)},n.getTimeRanges=function(){var t=this.$PredictedSegmentTemplateSegmentsContainer$p_13();if(t){var n=[{endTime:(this.$PredictedSegmentTemplateSegmentsContainer$p_12[this.$PredictedSegmentTemplateSegmentsContainer$p_12.length-1].t+this.$PredictedSegmentTemplateSegmentsContainer$p_12[this.$PredictedSegmentTemplateSegmentsContainer$p_12.length-1].d)/this.$PredictedSegmentTemplateSegmentsContainer$p_5,startTime:(this.$PredictedSegmentTemplateSegmentsContainer$p_12[0].t-t.predictedAverageDuration-(this.$PredictedSegmentTemplateSegmentsContainer$p_3-this.$PredictedSegmentTemplateSegmentsContainer$p_12.length-Number(this.$PredictedSegmentTemplateSegmentsContainer$p_2))*Number(t.predictedAverageDuration))/this.$PredictedSegmentTemplateSegmentsContainer$p_5}],r=this.$PredictedSegmentTemplateSegmentsContainer$p_11;return r==null?n:o("oz-player/utils/OzNumericalRangeUtil").diffSortedRanges(this.$PredictedSegmentTemplateSegmentsContainer$p_7,n.map(function(e){return{rangeEnd:e.endTime,rangeStart:e.startTime}}),{rangeEnd:r.endTime,rangeStart:r.startTime}).map(function(e){return{endTime:e.rangeEnd==null?1/0:e.rangeEnd,startTime:e.rangeStart}})}else return e.prototype.getTimeRanges.call(this)},n.canPredict=function(){return!0},n.canApproximateId=function(){var e=this.$PredictedSegmentTemplateSegmentsContainer$p_13();return e!=null},n.$PredictedSegmentTemplateSegmentsContainer$p_16=function(t){var e=null,n=t*this.$PredictedSegmentTemplateSegmentsContainer$p_5,a=this.$PredictedSegmentTemplateSegmentsContainer$p_12.length>0?this.$PredictedSegmentTemplateSegmentsContainer$p_12[this.$PredictedSegmentTemplateSegmentsContainer$p_12.length-1].t+this.$PredictedSegmentTemplateSegmentsContainer$p_12[this.$PredictedSegmentTemplateSegmentsContainer$p_12.length-1].d:null,i=this.$PredictedSegmentTemplateSegmentsContainer$p_7.getLegacyConfig().getNumber("pdash_future_edgelatency_gops",0);if(a!=null&&a<=n&&i!==0&&n<a+this.$PredictedSegmentTemplateSegmentsContainer$p_9*i){var l=n-(this.$PredictedSegmentTemplateSegmentsContainer$p_12[this.$PredictedSegmentTemplateSegmentsContainer$p_12.length-1].t+this.$PredictedSegmentTemplateSegmentsContainer$p_12[this.$PredictedSegmentTemplateSegmentsContainer$p_12.length-1].d),s=this.$PredictedSegmentTemplateSegmentsContainer$p_9?0:Math.floor(l/this.$PredictedSegmentTemplateSegmentsContainer$p_9);return this.$PredictedSegmentTemplateSegmentsContainer$p_14(0,0,this.$PredictedSegmentTemplateSegmentsContainer$p_3+1+s)}for(var u=0,c=0;this.$PredictedSegmentTemplateSegmentsContainer$p_12.length-1-c>=0;c++){var d=this.$PredictedSegmentTemplateSegmentsContainer$p_12[this.$PredictedSegmentTemplateSegmentsContainer$p_12.length-1-c];if(d.r===0||r("oz-player/shims/ozvariant")(0,18769),o("oz-player/utils/OzNumericalHelper").lessThanOrEqual(d.t+d.d*(d.r+1),n,this.$PredictedSegmentTemplateSegmentsContainer$p_6))break;e=d,u=c}return e===null||i>0&&n<e.t?null:this.$PredictedSegmentTemplateSegmentsContainer$p_14(e.t/this.$PredictedSegmentTemplateSegmentsContainer$p_5,(e.t+e.d)/this.$PredictedSegmentTemplateSegmentsContainer$p_5,this.$PredictedSegmentTemplateSegmentsContainer$p_3-u)},n.$PredictedSegmentTemplateSegmentsContainer$p_15=function(t){var e=t*this.$PredictedSegmentTemplateSegmentsContainer$p_5,n=this.getTimeRanges();if(o("oz-player/utils/OzNumericalHelper").greaterThan(n[0].startTime,t))return null;if(o("oz-player/utils/OzNumericalHelper").lessThanOrEqual(this.$PredictedSegmentTemplateSegmentsContainer$p_12[0].t,e))return this.$PredictedSegmentTemplateSegmentsContainer$p_16(t);var r=Math.ceil((this.$PredictedSegmentTemplateSegmentsContainer$p_12[0].t-e)/Number(this.$PredictedSegmentTemplateSegmentsContainer$p_4)),a=Math.max(Number(this.$PredictedSegmentTemplateSegmentsContainer$p_2),this.$PredictedSegmentTemplateSegmentsContainer$p_3-this.$PredictedSegmentTemplateSegmentsContainer$p_12.length+1-r);return this.$PredictedSegmentTemplateSegmentsContainer$p_14(t,t+Number(this.$PredictedSegmentTemplateSegmentsContainer$p_4)/this.$PredictedSegmentTemplateSegmentsContainer$p_5,a)},n.isEndingSegment=function(n){if(!this.$PredictedSegmentTemplateSegmentsContainer$p_8)return!1;var t=n.getSequenceNumber();return t!=null?t>=this.$PredictedSegmentTemplateSegmentsContainer$p_3:e.prototype.isEndingSegment.call(this,n)},n.getEndingSegment=function(){if(this.$PredictedSegmentTemplateSegmentsContainer$p_12.length===0)return null;var e=this.$PredictedSegmentTemplateSegmentsContainer$p_12[this.$PredictedSegmentTemplateSegmentsContainer$p_12.length-1];return this.$PredictedSegmentTemplateSegmentsContainer$p_14(e.t/this.$PredictedSegmentTemplateSegmentsContainer$p_5,(e.t+e.d)/this.$PredictedSegmentTemplateSegmentsContainer$p_5,this.$PredictedSegmentTemplateSegmentsContainer$p_3)},n.getMaxGopSec=function(){return this.$PredictedSegmentTemplateSegmentsContainer$p_9/this.$PredictedSegmentTemplateSegmentsContainer$p_5},t})(r("oz-player/manifests/SegmentTemplateSegmentsContainer"));l.default=e}),98);
__d("oz-player/parsers/OzDefaultSegmentTimelineParser",["oz-player/manifests/SegmentTemplateSegmentsContainer","oz-player/utils/OzUrlHelper"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(){}e.parseSegments=function(t,n){var e=[];return n.SegmentTimeline[0].S&&(e=n.SegmentTimeline[0].S.map(function(e){return{t:Number.parseInt(e.$.t,10),d:Number.parseInt(e.$.d,10),r:Number.parseInt(e.$.r||"0",10),id:e.$.id?Number.parseInt(e.$.id,10):void 0}})),e};var t=e.prototype;return t.parseSegmentsContainer=function(n,a,i){return new(r("oz-player/manifests/SegmentTemplateSegmentsContainer"))(n,o("oz-player/utils/OzUrlHelper").joinUrlPaths(a.baseUrl,i.$.media),Number.parseInt(i.$.timescale,10),e.parseSegments(n,i),null,a.isStaticMpd)},e})();l.default=e}),98);
__d("OzPredictedSegmentTimelineParser",["PredictedSegmentTemplateSegmentsContainer","oz-player/manifests/SegmentTemplateSegmentsContainer","oz-player/parsers/OzDefaultSegmentTimelineParser","oz-player/shims/OzURI","oz-player/utils/OzUrlHelper"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(){}var t=e.prototype;return t.parseSegmentsContainer=function(t,n,a){var e;if(a.SegmentTimeline[0].$.FBPredictedMedia){e=o("oz-player/utils/OzUrlHelper").joinUrlPaths(n.baseUrl,a.SegmentTimeline[0].$.FBPredictedMedia);var i=new(r("oz-player/shims/OzURI"))(e);i.addQueryData("_nc_sc",1),e=i.toString()}var l;a.SegmentTimeline[0].$.FBPredictedMediaStartNumber&&(l=Number.parseInt(a.SegmentTimeline[0].$.FBPredictedMediaStartNumber,0));var s;a.SegmentTimeline[0].$.FBPredictedMediaEndNumber&&(s=Number.parseInt(a.SegmentTimeline[0].$.FBPredictedMediaEndNumber,0));var u;a.SegmentTimeline[0].$.FBAverageDuration&&(u=Number.parseInt(a.SegmentTimeline[0].$.FBAverageDuration,0));var c=r("oz-player/parsers/OzDefaultSegmentTimelineParser").parseSegments(t,a);return(n.isTemplatedMpd&&l!=null&&u!=null||!n.isTemplatedMpd)&&e!=null&&s!=null?new(r("PredictedSegmentTemplateSegmentsContainer"))(t,o("oz-player/utils/OzUrlHelper").joinUrlPaths(n.baseUrl,a.$.media),n.mpdUrl,Number.parseInt(a.$.timescale,10),c,e,l,s,u,n.isStaticMpd):new(r("oz-player/manifests/SegmentTemplateSegmentsContainer"))(t,o("oz-player/utils/OzUrlHelper").joinUrlPaths(n.baseUrl,a.$.media),Number.parseInt(a.$.timescale,10),c,e,n.isStaticMpd)},e})();l.default=e}),98);
__d("oz-player/utils/OzAbrUtils",[],(function(t,n,r,o,a,i){"use strict";function e(e,t,n,r){if(r.resolutionConstraintFactor===0)return e.slice();var o=e.filter(function(e){var o=e.getWidth()<=t.width*n*r.resolutionConstraintFactor,a=e.getHeight()<=t.height*n*r.resolutionConstraintFactor;return o&&a});return o.length?o:[e[0]]}function l(e,t,n,r,o,a){var i=t?e.getNumber("min_switch_interval"):e.getNumber("initial_switch_interval"),l=r>=e.getNumber("abr_min_bandwidth_samples"),s=e.getNumber("abr_eval_buffer_threshold"),u=!s||n>=s,c=null;return o+e.getNumber("min_eval_interval")>Date.now()?c="min_eval_interval":a+i>Date.now()?c="min_switch_interval":l?u||(c="buffer_threshold_not_satisfied"):c="min_bandwidth_samples",c}i.excludeLargeRepresentations=e,i.getReasonToPreventEvaluation=l}),66);
__d("oz-player/utils/OzBufferingUtils",[],(function(t,n,r,o,a,i){"use strict";var e=.1,l=1,s=.2;function u(e,t,n){if(c(e,n))return!0;for(var r=e.currentTime,o=0,a=0;a<e.buffered.length;a++){var i=e.buffered.start(a),l=e.buffered.end(a);if(i<=r&&l>=r){o=l;break}}return o-r>t}function c(e,t){for(var n=e.currentTime,r=0,o=0;o<e.buffered.length;o++){var a=e.buffered.start(o),i=e.buffered.end(o);if(a<=n&&i>=n){r=i;break}}return Math.abs(r-t)<=s||Math.abs(n-t)<=s}function d(e,t){if(!t)return 0;var n=null;for(var r of t)r.startTime<=e&&r.endTime>e&&(n=r);return n?n.endTime-e:0}function m(e){for(var t=[],n=0;n<e.buffered.length;n++)t.push({rangeStart:e.buffered.start(n),rangeEnd:e.buffered.end(n)});return t}function p(e,t,n,r){if(n.length===0||t.size===0)return!1;for(var o=null,a=0;a<n.length;a++){var i=n[a],l=t.get(i);if(f(e,0,l)){o=i;break}}if(o==null)return!1;var s=!0;return t.forEach(function(t,n){if(o!==n){var a=t.getBufferedRanges();a.forEach(function(t){s=_(e,t,r,s)})}}),!s}function _(e,t,n,r){return e>=t.startTime&&e<t.endTime+n?!1:r}function f(e,t,n){if(t===void 0&&(t=0),n){for(var r=n.getBufferedRanges(),o=0;o<r.length;o++)if(r[o].startTime<=e&&r[o].endTime>e&&r[o].endTime-e>t)return!0}return!1}i.BUFFER_UNDERFLOW_THRESHOLD=e,i.BUFFER_OVERFLOW_THRESHOLD=l,i.BUFFER_FUDGE_FACTOR=s,i.hasEnoughBuffer=u,i.hasBufferedToOrReachedEnd=c,i.getBufferAheadFromCurrentTime=d,i.getNumericalRangesFromSourceBuffer=m,i.hasEnoughPartialBuffer=p,i.hasBuffer=f}),66);
__d("oz-player/utils/OzPlaybackRestrictionsUtils",[],(function(t,n,r,o,a,i){"use strict";function e(e,t,n){if(n.length===0)return[];var r=e.reduce(function(e,n){return n.applyRestriction(e,t)},n);return r}i.applyVideoPlaybackRestrictions=e}),66);
__d("OzSystemicRiskABRUtils",["OzSystemicRiskUtils","QualityScoreUtils","oz-player/utils/OzAbrUtils","oz-player/utils/OzBufferingUtils","oz-player/utils/OzPlaybackRestrictionsUtils"],(function(t,n,r,o,a,i,l){"use strict";var e=30,s=5e3;function u(e,t,n){var r=t.getQualityScoreCurveString(e),a=o("QualityScoreUtils").parseQualityScoreCurve(String(r));return a!=null?o("QualityScoreUtils").calculateQualityScore(a,n,!0):null}function c(e){var t=s;if(e!=null&&e.length>0){var n=e[0].getTimeRange().startTime,r=e[e.length-1].getTimeRange().endTime;r-n>0&&(t=(r-n)*1e3)}return t}function d(e,t,n,r,a){if(!r.shouldApplyRepresentationRestrictions)return a.slice();var i,l=function(){i=o("oz-player/utils/OzAbrUtils").excludeLargeRepresentations(i!=null?i:a,t,n,{resolutionConstraintFactor:r.resolutionConstraintFactor})},s=function(){i=o("oz-player/utils/OzPlaybackRestrictionsUtils").applyVideoPlaybackRestrictions(e,t,i!=null?i:a)};return r.excludeLargeRepresentationsAfterRestrictions||(l(),s()),r.excludeLargeRepresentationsAfterRestrictions&&(s(),l()),i!=null?i:a.slice()}var m={BANDWIDTH:"br",BUFFER:"vb",ENCODING:"er",LOW_MOS:"lm",MULTIPLIER:"m",PREVIOUS_MOS:"pm",PREVIOUS_RESOLUTION:"pr"};function p(e,t,n){if(t==null)return e;var r=n.isSystemicRiskABREnabled,o=n.noRepresentationSelected,a=n.representationCount,i=[[m.LOW_MOS,t.lowMos],[m.ENCODING,t.encoding],[m.BANDWIDTH,t.bandwidth],[m.MULTIPLIER,t.multiplier],[m.BUFFER,t.buffer],[m.PREVIOUS_MOS,t.previousMos],[m.PREVIOUS_RESOLUTION,t.previousResolution]].reduce(function(e,t){var n=t[1],r="";switch(typeof n){case"number":r=n.toFixed(1);break;case"boolean":r=n?"1":"0";break;default:r="null"}return e+(t[0]+": "+r+";")},"");return r||(i+="disabled;"),o&&(i+="none-selected-of-"+a+";"),i}function _(t){var n=t.videoRepresentations;if(n.length===0)return babelHelpers.extends({},t.abrState,{lastEvaluationReason:"no available representations"});var r=o("oz-player/utils/OzBufferingUtils").getBufferAheadFromCurrentTime(t.playheadMediaTimeSec,t.sourceBufferBufferedRangesSec),a=t.mediaDurationSec;a=isNaN(a)||!isFinite(a)?e:a;var i=t.durationMode==="static"?(a-t.playheadMediaTimeSec)*1e3:e*1e3,l=t.systemicRiskConfig.segmentFetchRangeDurationEnabled?c(t.segments):s,m=t.bandwidthDiagnostics;if(m==null)return babelHelpers.extends({},t.abrState,{lastEvaluationReason:"missing bandwidth diagnostics"});var _=d(t.videoRepresentationRestrictions,t.playerDimensions,t.devicePixelRatio,t.systemicRiskConfig,n).slice().sort(function(e,t){return e.getBandwidth()-t.getBandwidth()});if(_.length===0)return babelHelpers.extends({},t.abrState,{lastEvaluationReason:"no representations after applying restrictions"});for(var f=null,g=null,h=null,y=0;y<_.length;y++){var C,b,v=_[Math.max(y-1,0)],S=_[y],R=(C=u(t.qualityScoreType,S,t.playerDimensions))!=null?C:0,L=(b=u(t.qualityScoreType,v,t.playerDimensions))!=null?b:0,E=Math.min(v.getHeight(),v.getWidth()),k=E*t.devicePixelRatio;g=o("OzSystemicRiskUtils").getRiskFactorsForRepresentation({bandwidthDiagnostics:m,bitrate:S.getBandwidth(),bufferAheadSec:r,defaultRiskFactor:t.systemicRiskConfig.defaultRiskFactor,documentHiddenRiskFactor:t.systemicRiskConfig.documentHiddenRiskFactor,hasMadeInitialDecision:t.abrState.hasMadeInitialDecision,highEstimateConfidence:t.systemicRiskConfig.highEstimateConfidence,initialRiskFactor:t.systemicRiskConfig.initialRiskFactor,isDocumentHidden:t.isDocumentHidden,lowMosResolution:t.systemicRiskConfig.lowMosResolution,lowMosRiskFactor:t.systemicRiskConfig.lowMosRiskFactor,minWatchableMos:t.systemicRiskConfig.minWatchableMos,previousMos:L,previousResolution:k,remainingVideoDurationMs:i,segmentFetchRangeDurationMs:l});var I=g,T=I.multiplier;if(isNaN(T)){h=g,f=t.abrState.bestRepresentation;break}var D=o("OzSystemicRiskUtils").isEffectiveBitrateBelowBandwidthEstimate(S.getBandwidth(),g.multiplier,l,m);if(D&&R>=L)h=g,f=S;else continue}var x;f==null?x=t.systemicRiskConfig.respectPlaybackRestrictionsInABRFallback&&_.length>0?_[0]:n[0]:x=f;var $=p(t.abrState.lastEvaluationReason,h!=null?h:g,{isSystemicRiskABREnabled:t.systemicRiskConfig.isSystemicRiskABREnabled,noRepresentationSelected:f==null,representationCount:_.length});return{bestRepresentation:x,hasMadeInitialDecision:!0,lastEvaluationReason:$}}l.evaluateSystemicRiskABR=_}),98);
__d("OzSystemicRiskABRManager",["OzSystemicRiskABRUtils","OzSystemicRiskUtils","VideoPlayerOzWWWConfig","oz-player/networks/OzBandwidthEstimator"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t,n,r,o,a,i,l,s){this.$1=e,this.$2=n,this.$3=r,this.$4=o,this.$6=a,this.$7=i,this.$8=l,this.$9={bestRepresentation:t,hasMadeInitialDecision:!1,lastEvaluationReason:void 0},this.$10=s,this.$1.getBool("enable_abr_logging")&&this.$10.getOperationLogger("abr_initialized").setResult("success").setUserInfo({codecs:n.map(function(e){return e.getCodecs()}).join("|"),displayLabels:n.map(function(e){return e.getDisplayLabel()}).join(","),representationIds:n.map(function(e){return e.getID()}).join(",")}).setRepresentationID(t.getID()).setType("video").setInitiator("OzSystemicRiskABRManager").log()}var t=e.prototype;return t.setSourceBuffer=function(t){this.$5=t},t.updateRepresentations=function(t){var e=this,n=this.$2;this.$2=t;var r=this.$9.bestRepresentation,o=this.$2.find(function(t){return t.getDisplayLabel()===e.$9.bestRepresentation.getDisplayLabel()});this.$9=babelHelpers.extends({},this.$9,{bestRepresentation:o!=null?o:this.$2[0]}),this.$1.getBool("enable_abr_logging")&&this.$10.getOperationLogger("abr_representations_updated").setResult("success").setRepresentationID(this.$9.bestRepresentation.getID()).setPreviousRepresentationID(r.getID()).setUserInfo({newCodecs:t.map(function(e){return e.getCodecs()}).join("|"),newDisplayLabels:t.map(function(e){return e.getDisplayLabel()}).join(","),previousRepresentationIds:n.map(function(e){return e.getID()}).join(",")}).setType("video").setInitiator("OzSystemicRiskABRManager").log()},t.getBestRepresentation=function(t){var e,n,a=this.$1.getLegacyConfig(),i="mos";if(a instanceof r("VideoPlayerOzWWWConfig")){var l=a.getAllContexts(),s=String(l.quality_score_type);i=s==="csvqm"?"csvqm":"mos"}var u=(e=(n=this.$5)==null?void 0:n.getSourceBufferState().getBufferedRanges())!=null?e:null,c=this.$4.getCurrentTime(),d=this.$4.getDuration(),m=this.$9.bestRepresentation,p=a.getBool("use_bandwidth_estimate_from_headers_in_abr",!1)?r("oz-player/networks/OzBandwidthEstimator").getBandwidthDiagnosticsFromHeaders(a):r("oz-player/networks/OzBandwidthEstimator").getBandwidthDiagnostics(a);return this.$9=o("OzSystemicRiskABRUtils").evaluateSystemicRiskABR({abrState:this.$9,bandwidthDiagnostics:p,devicePixelRatio:this.$6,durationMode:this.$8,isDocumentHidden:document.hidden,mediaDurationSec:d,playerDimensions:this.$7(),playheadMediaTimeSec:c,qualityScoreType:i,segments:t,sourceBufferBufferedRangesSec:u,systemicRiskConfig:o("OzSystemicRiskUtils").getSystemicRiskConfigFromOzPlayerConfig(a),videoRepresentationRestrictions:this.$3,videoRepresentations:this.$2}),this.$1.getBool("enable_abr_logging")&&this.$9.bestRepresentation!==m&&this.$10.getOperationLogger("abr_best_representation_selected").setResult("success").setReason(this.$9.lastEvaluationReason).setRepresentationID(this.$9.bestRepresentation.getID()).setPreviousRepresentationID(m==null?void 0:m.getID()).setUserInfo({bandwidthEstimate:String(p==null?void 0:p.bandwidthEstimate),qualityScoreType:i}).setType("video").setInitiator("OzSystemicRiskABRManager").log(),this.$9.bestRepresentation},t.getLastEvaluationReason=function(){return this.$9.lastEvaluationReason},e})();l.default=e}),98);
__d("oz-player/shims/www/OzStreamsWWW",["cr:927622","cr:927623"],(function(t,n,r,o,a,i,l){"use strict";var e=!!n("cr:927622"),s=!!n("cr:927623"),u=n("cr:927622")?n("cr:927622").ReadableStream:t.ReadableStream,c=n("cr:927623")?n("cr:927623").WritableStream:t.WritableStream;l.OzReadableStream=u,l.OzReadableStreamIsPolyfilled=e,l.OzWritableStream=c,l.OzWritableStreamIsPolyfilled=s}),98);
__d("oz-player/shims/OzStreams",["oz-player/shims/www/OzStreamsWWW"],(function(t,n,r,o,a,i,l){"use strict";var e;l.OzReadableStream=(e=o("oz-player/shims/www/OzStreamsWWW")).OzReadableStream,l.OzReadableStreamIsPolyfilled=e.OzReadableStreamIsPolyfilled,l.OzWritableStream=e.OzWritableStream,l.OzWritableStreamIsPolyfilled=e.OzWritableStreamIsPolyfilled}),98);
__d("oz-player/networks/OzTransformStream",["oz-player/shims/OzEventEmitter","oz-player/shims/OzStreams","oz-player/utils/OzErrorUtils"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t){var n,r;r=e.call(this)||this;var a=(n=t==null?void 0:t.errorTransform)!=null?n:function(e){return e},i,l;return r.writable=new(o("oz-player/shims/OzStreams")).OzWritableStream({start:function(t){l=t},write:function(t){r.emit("writableWrite",t);try{r.onDataWritten(t)}catch(e){i.error(o("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_STREAM",description:"Error from write handler: "+r.constructor.name,extra:{code:"OZ_S-0",originalError:e}}))}i.enqueue(t)},close:function(){r.emit("writableClose");try{r.onClose()}catch(e){i.error(o("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_STREAM",description:"Error from close handler: "+r.constructor.name,extra:{code:"OZ_S-1",originalError:e}}))}i.close()},abort:function(t){var e=a(t);i.error(e)}}),r.readable=new(o("oz-player/shims/OzStreams")).OzReadableStream({start:function(t){i=t},cancel:function(t){r.emit("readableCancel",t),l.error(t)}}),r}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.onDataWritten=function(t){},n.onClose=function(){},t})(r("oz-player/shims/OzEventEmitter"));l.default=e}),98);
__d("oz-player/shims/www/OzPerformanceWWW",["performance","performanceNow"],(function(t,n,r,o,a,i,l){var e,s,u={now:function(){return(e||(e=r("performanceNow")))()},getEntriesByName:function(t,n){return typeof(s||(s=r("performance"))).getEntriesByName=="function"?(s||(s=r("performance"))).getEntriesByName(t,n):[]}},c=u;l.default=c}),98);
__d("oz-player/shims/OzPerformance",["oz-player/shims/www/OzPerformanceWWW"],(function(t,n,r,o,a,i,l){l.default=r("oz-player/shims/www/OzPerformanceWWW")}),98);
__d("oz-player/utils/OzResourceTimingUtils",["oz-player/shims/OzPerformance"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t){var e=r("oz-player/shims/OzPerformance").getEntriesByName(t,"resource");return e.reduce(function(e,t){return e==null?t:t.responseEnd<e.responseEnd?e:t},null)};l.getLatestResourceTimingEntry=e}),98);
__d("OzVideoLiveTraceNetworkRequestStreamHandler",["oz-player/networks/OzTransformStream","oz-player/utils/OzResourceTimingUtils"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t){t===void 0&&(t=!1),this.$2=!1,this.$1=e,this.$2=t}var t=e.prototype;return t.onResponse=function(t,n){var e=this,a=t.headers,i=null;if(!this.$1)return null;var l=new(r("oz-player/networks/OzTransformStream"));return l.addListener("writableClose",function(){var t={},r=o("oz-player/utils/OzResourceTimingUtils").getLatestResourceTimingEntry(n);r&&(t.lat=Math.round(r.responseStart-r.requestStart).toString()),e.$1&&a&&e.$1(a,i,t)}),this.$2&&l.addListener("writableWrite",function(e){i===null?i=[e]:i.push(e)}),l},t.onError=function(t,n){return null},e})();l.default=e}),98);
__d("oz-player/drm/OzDrmUtils",[],(function(t,n,r,o,a,i){"use strict";var e=function(t){return Uint8Array.from(window.atob(t),function(e){return e.charCodeAt(0)})},l=function(t){return window.btoa(String.fromCharCode.apply(null,new Uint8Array(t)))};i.base64ToUint8Array=e,i.arrayBufferToBase64=l}),66);
__d("OzWidevineDrmProvider",["ConstUriUtils","FBLogger","getErrorSafe","oz-player/drm/OzDrmUtils"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t,n,a,i){if(this.$2=[],this.$4=!0,this.$5=!1,i!=null&&i!==""&&(this.$1=o("oz-player/drm/OzDrmUtils").base64ToUint8Array(i)),t!=null&&a!=null){var l,s=(l=o("ConstUriUtils").getUri(t))==null?void 0:l.addQueryParam("access_token",a);if(s==null)throw r("FBLogger")("comet_video_player").mustfixThrow("Invalid Graph API license uri for video: %s",e);this.$3=s.toString(),this.$5=!0,this.$4=!1}else{var u=n[0];if(u==null){var c;u="/video/drm/getlicense";var d=(c=o("ConstUriUtils").getUri(u))==null?void 0:c.addQueryParam("video_id",e);if(d==null)throw r("FBLogger")("comet_video_player").mustfixThrow("Invalid server license uri for video: %s",e);this.$3=d.toString()}else this.$3=u}}var t=e.prototype;return t.getKeySystem=function(){return"com.widevine.alpha"},t.getSchemeId=function(){return"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"},t.getInitDatas=function(){return this.$2},t.setInitDatas=function(t){this.$2=t},t.getRequireDistinctiveIdentifier=function(){return"optional"},t.getRequirePersistentState=function(){return"optional"},t.getInitDataTypes=function(){},t.getDrmSessionTypes=function(){return["temporary"]},t.getAudioRobustness=function(){return""},t.getVideoRobustness=function(){return""},t.getServerCertificate=function(){return this.$1},t.getLicenseRequestInfo=function(t){var e={url:this.$3,method:"POST",body:"",headers:{},credentials:void 0};this.$4&&(e.credentials="include");var n=o("oz-player/drm/OzDrmUtils").arrayBufferToBase64(t);if(this.$5){var r={request:n};e.body=JSON.stringify(r),e.headers["Content-Type"]="application/json"}else e.body=n,e.headers["Content-Type"]="application/text";return e},t.parseLicenseResponse=function(t){var e=String.fromCharCode.apply(null,t),n;try{n=JSON.parse(e)}catch(e){n=void 0}var a;if(n!==void 0&&n.data!==void 0&&n.data.length===1){var i=n.data[0];i.error!=null||(a=i.license)}else a=e;if(a!=null&&a!=="")try{return o("oz-player/drm/OzDrmUtils").base64ToUint8Array(a)}catch(e){var l=r("getErrorSafe")(e);throw l.name==="InvalidCharacterError"?new Error("Endpoint returned error: "+a):l}return null},e})();l.default=e}),98);
__d("Qe2JsExposureFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1837559"),s=o("FalcoLoggerInternal").create("qe2_js_exposure",e),u=s;l.default=u}),98);
__d("QE2Logger",["Qe2JsExposureFalcoEvent"],(function(t,n,r,o,a,i,l){"use strict";var e={};function s(e,t,n){V(e,t!=null?t:"",9,n)}function u(e,t){V(e,t!=null?t:"",9,null,"immediate")}function c(e){V(e,"",32)}function d(e){V(e,"",32,null,"immediate")}function m(e){V(e,"",54)}function p(e,t){V(e,t,126)}function _(e,t){V(e,"",54,t,"immediate")}function f(e,t){V(e,"",54,t,"critical")}function g(e,t){V(e,t,3)}function h(e){V(e,"",5)}function y(e){V(e,"",5,null,"immediate")}function C(e,t){t===void 0&&(t=null),V(e,"",5,t,"critical")}function b(e){V(e,"",31)}function v(e){V(e,"",98)}function S(e,t){V(e,t,7)}function R(e,t){V(e,t,7,null,"immediate")}function L(e,t){V(e,t,7,null,"critical")}function E(e,t){V(e,t,55)}function k(e,t){V(e,t,17)}function I(e,t){V(e,t,25)}function T(e,t){V(e,t,115)}function D(e,t){V(e,t,8)}function x(e,t){V(e,t,22)}function $(e,t){V(e,t,27)}function P(e,t){V(e,t,0)}function N(e,t){V(e,t,0,null,"immediate")}function M(e,t){V(e,t,0,null,"critical")}function w(e,t,n){V(e,t!=null?t:"",89,n)}function A(e,t){V(e,t!=null?t:"",89,null,"immediate")}function F(e,t){V(e,t!=null?t:"",89,null,"critical")}function O(e,t){V(e,t,60)}function B(e,t){V(e,t,90)}function W(e,t){V(e,t,144)}function q(e,t,n){V(e,t,n)}function U(e,t,n){V(e,t,n,null,"immediate")}function V(t,n,o,a,i){var l=t+"|"+n;a!=null&&(l=l+"|"+a),!e[l]&&(i==="immediate"?r("Qe2JsExposureFalcoEvent").logImmediately(function(){return{universe:t,unit_id:n,unit_type:o,param:a}}):i==="critical"?r("Qe2JsExposureFalcoEvent").logCritical(function(){return{universe:t,unit_id:n,unit_type:o,param:a}}):r("Qe2JsExposureFalcoEvent").log(function(){return{universe:t,unit_id:n,unit_type:o,param:a}}),e[l]=!0)}l.logExposureForUser=s,l.logExposureForUserImmediately=u,l.logExposureForIGUser=c,l.logExposureForIGUserImmediately=d,l.logExposureForIGWebCookie=m,l.logExposureForIGAccountFBIDV2=p,l.logExposureForIGWebCookieImmediately=_,l.logExposureForIGWebCookieCritical=f,l.logExposureForEmail=g,l.logExposureForDatr=h,l.logExposureForDatrImmediately=y,l.logExposureForDatrCritical=C,l.logExposureForOculusLoggedOut=b,l.logExposureForOculusLoggedOutCookieID=v,l.logExposureForPage=S,l.logExposureForPageImmediately=R,l.logExposureForPageCritical=L,l.logExposureForPaymentAccountID=E,l.logExposureForBusiness=k,l.logExposureForGroup=I,l.logExposureForPhabricatorDiff=T,l.logExposureForPhoneNumber=D,l.logExposureForScimCompanyID=x,l.logExposureForAnalyticsEntityID=$,l.logExposureForAdAccountID=P,l.logExposureForAdAccountIDImmediately=N,l.logExposureForAdAccountIDCritical=M,l.logExposureForActingAccount=w,l.logExposureForActingAccountImmediately=A,l.logExposureForActingAccountCritical=F,l.logExposureForMixedUserAndPage=O,l.logExposureForCommerceMerchantSettings=B,l.logExposureForShopifyApplicationInstallationID=W,l.logExposure=q,l.logExposureImmediately=U}),98);
__d("TimeRanges",["invariant"],(function(t,n,r,o,a,i,l,s){var e=(function(){function e(e){this.$1=[],this.$1=e}var t=e.prototype;return t.start=function(t){return this.$1[t]||s(0,2205),this.$1[t].startTime},t.end=function(t){return this.$1[t]||s(0,2205),this.$1[t].endTime},t.length=function(){return this.$1.length},e})();l.default=e}),98);
__d("VideoPlayerCaptionsDisplayConfigContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext({liveCaptionsTextAlignment:null,textSizeMapping:null});l.default=u}),98);
__d("VideoPlayerControlsBottomRowAddOnContext",["react","react-compiler-runtime","useStable"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useContext,d=u.useEffect,m=u.useState,p=s.createContext(null);function _(e){var t=o("react-compiler-runtime").c(3),n=e.children,a=r("useStable")(f),i;return t[0]!==n||t[1]!==a?(i=s.jsx(p.Provider,{value:a,children:n}),t[0]=n,t[1]=a,t[2]=i):i=t[2],i}function f(){var e=null,t=null,n=null;return{getBottomRowAddOn:function(){return t},initialize:function(o){n=function(n){t=n,o(n)},e!=null&&(n(e),e=null)},setBottomRowAddOn:function(r){if(n==null){e=r;return}n(r)}}}function g(e){var t=o("react-compiler-runtime").c(3),n=c(p),r=m(e),a=r[0],i=r[1],l,s;return t[0]!==n?(l=function(){n!=null&&n.initialize(i)},s=[n],t[0]=n,t[1]=l,t[2]=s):(l=t[1],s=t[2]),d(l,s),a}function h(e){var t=o("react-compiler-runtime").c(4),n=c(p),r,a;t[0]!==e||t[1]!==n?(r=function(){n!=null&&n.setBottomRowAddOn(e)},a=[e,n],t[0]=e,t[1]=n,t[2]=r,t[3]=a):(r=t[2],a=t[3]),d(r,a)}l.VideoPlayerControlsBottomRowAddOnContext=p,l.VideoPlayerControlsBottomRowAddOnContextProvider=_,l.useVideoPlayerControlsBottomRowAddOn=g,l.useSetVideoPlayerControlsBottomRowAddOn=h}),98);
__d("VideoPlayerCaptionsDisplay.react",["FBLogger","VideoPlayerCaptionsDisplayConfigContext","VideoPlayerControlsBottomRowAddOnContext","VideoPlayerHooks","react","react-compiler-runtime","stylex"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=s||(s=o("react")),d=s.useContext,m={captionsCenterAlign:{justifyContent:"xl56j7k",textAlign:"x2b8uid",$$css:!0},captionsContainer:{bottom:"xfqi8uc",boxSizing:"x9f619",display:"x78zum5",justifyContent:"xl56j7k",position:"x10l6tqk",textAlign:"x2b8uid",transitionDuration:"xu6gjpd",transitionProperty:"x11xpdln",transitionTimingFunction:"x1r7x56h",width:"xh8yej3",$$css:!0},captionsLeftAlign:{justifyContent:"x1nhvcw1",textAlign:"x1yc453h",$$css:!0},captionsRightAlign:{justifyContent:"x13a6bvl",textAlign:"xp4054r",$$css:!0}},p={BIG:"25px",BIGGER:"30px",BIGGEST:"34px",DEFAULT:"17px",MEDIUM:"21px",SMALL:"13px",SMALLEST:"8px"},_={DARK:.75,DEFAULT:.45,LIGHT:.25,OPAQUE:1,TRANSPARENT:0},f={BLACK:"20, 22, 26",BLUE:"0, 0, 255",CYAN:"0, 255, 255",GREEN:"0, 255, 0",MAGENTA:"255, 0, 255",RED:"255, 0, 0",WHITE:"255, 255, 255",YELLOW:"255, 255, 0"};function g(e){switch(e){case"center":return m.captionsCenterAlign;case"left":return m.captionsLeftAlign;case"right":return m.captionsRightAlign;default:r("FBLogger")("comet_video_player").mustfix("Unsupported captions text alignment: %s",e)}}function h(e,t,n){var r={},o=e.captionsBackgroundColor,a=e.captionsBackgroundOpacity,i=e.captionsTextColor,l=e.captionsTextSize;if(o!==null){var s=a!==null?_[a]:1;r.backgroundColor="rgba("+f[o]+","+s+")"}return i!==null&&(r.color="rgba("+f[i]+")"),l!==null&&(r.fontSize=t!=null?babelHelpers.extends({},p,t)[l]:p[l]),n&&(r.marginBottom=35),r}function y(t){var n,a,i=o("react-compiler-runtime").c(14),l=t.activeCaptions,s=t.adjustments,p=t.captionDisplayStyle,_=l==null?void 0:l.rows,f=d(r("VideoPlayerCaptionsDisplayConfigContext")),y=f.liveCaptionsTextAlignment,S=f.textSizeMapping,R=d(o("VideoPlayerControlsBottomRowAddOnContext").VideoPlayerControlsBottomRowAddOnContext),L;i[0]!==R?(L=R==null?void 0:R.getBottomRowAddOn(),i[0]=R,i[1]=L):L=i[1];var E=L!=null,k;i[2]===Symbol.for("react.memo_cache_sentinel")?(k={},i[2]=k):k=i[2];var I=k;if(p){var T;i[3]!==p||i[4]!==E||i[5]!==S?(T=h(p,S,E),i[3]=p,i[4]=E,i[5]=S,i[6]=T):T=i[6],I=T}var D=(u||(u=o("VideoPlayerHooks"))).useIsLive(),x=(n=l==null||(a=l.styles)==null?void 0:a.textAlignment)!=null?n:"center";if(_!=null&&_.length>0){var $;if(i[7]!==s||i[8]!==I||i[9]!==x||i[10]!==D||i[11]!==y||i[12]!==_){var P=_.map(v).filter(b);$=P.length>0?c.jsx("div",{className:(e||(e=r("stylex")))(m.captionsContainer,g(D&&y!=null?y:x)),style:{paddingLeft:s.left,paddingRight:s.right,transform:"translateY("+-s.bottom+"px)"},children:c.jsx("div",{className:"x18l40ae x14ctfv x1lkfr7t xk50ysn x37zpob xdj266r x32vodv xat24cr x1v6o4qg xulzisn xoge9qh x1uwfbks xytt9sc",style:I,children:P.map(C)})}):null,i[7]=s,i[8]=I,i[9]=x,i[10]=D,i[11]=y,i[12]=_,i[13]=$}else $=i[13];return $}return null}function C(e,t){return c.jsxs("span",{children:[e,c.jsx("br",{})]},t)}C.displayName=C.name+" [from "+i.id+"]";function b(e){return!!e}function v(e){return e.trim()}var S=c.memo(y),R=S;l.default=R}),98);
__d("useVideoPlayerCaptionsDisplayAdjustments",["VideoPlayerHooks","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(e||(e=o("react"))).useMemo;function c(){var e=o("react-compiler-runtime").c(2),t=(s||(s=o("VideoPlayerHooks"))).useVideoPlayerCaptionsReservations(),n;return e[0]!==t?(n={bottom:0,left:0,right:0,top:0},t.length>0&&t.forEach(function(e){n[e.location]=n[e.location]+e.size}),e[0]=t,e[1]=n):n=e[1],n}l.default=c}),98);
__d("VideoPlayerCaptions.react",["VideoPlayerCaptionsDisplay.react","VideoPlayerHooks","react","react-compiler-runtime","useVideoPlayerCaptionsDisplayAdjustments"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react"));function c(){var e=o("react-compiler-runtime").c(4),t=(s||(s=o("VideoPlayerHooks"))).useActiveCaptions(),n=r("useVideoPlayerCaptionsDisplayAdjustments")(),a=s.useCaptionDisplayStyle(),i;return e[0]!==t||e[1]!==n||e[2]!==a?(i=u.jsx(r("VideoPlayerCaptionsDisplay.react"),{activeCaptions:t,adjustments:n,captionDisplayStyle:a}),e[0]=t,e[1]=n,e[2]=a,e[3]=i):i=e[3],i}l.default=c}),98);
__d("VideoPlayerCaptionsArea.react",["VideoPlayerCaptions.react","VideoPlayerContexts","VideoPlayerHooks","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=e||(e=o("react")),d=e,m=d.useReducer,p=d.useState;function _(e,t){switch(t.type){case"reserve":return e.concat(t.reservation);case"release":return e.filter(function(e){return e!==t.reservation});default:return e}}function f(e){var t=o("react-compiler-runtime").c(11),n=e.children,a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a=[],t[0]=a):a=t[0];var i=m(_,a),l=i[0],d=i[1],f;t[1]===Symbol.for("react.memo_cache_sentinel")?(f={release:function(t){d({reservation:t,type:"release"})},reserve:function(t){return d({reservation:t,type:"reserve"}),t}},t[1]=f):f=t[1];var g=p(f),h=g[0],y=(s||(s=o("VideoPlayerHooks"))).useCaptionsVisible(),C;t[2]!==y?(C=y?c.jsx(r("VideoPlayerCaptions.react"),{}):null,t[2]=y,t[3]=C):C=t[3];var b;t[4]!==n||t[5]!==l||t[6]!==C?(b=c.jsxs((u||(u=o("VideoPlayerContexts"))).VideoPlayerCaptionsReservationsContext.Provider,{value:l,children:[C,n]}),t[4]=n,t[5]=l,t[6]=C,t[7]=b):b=t[7];var v;return t[8]!==h||t[9]!==b?(v=c.jsx((u||(u=o("VideoPlayerContexts"))).VideoPlayerCaptionsReservationActionsContext.Provider,{value:h,children:b}),t[8]=h,t[9]=b,t[10]=v):v=t[10],v}l.default=f}),98);
__d("VideoPlayerImplementationLoadSequenceManager",["setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(){this.$1=[],this.$2=[]}var t=e.prototype;return t.schedule=function(t,n,o){var e=this,a={load:o,maximumBlockTimeMs:t.getNumber("load_sequence_max_delay_ms",0),sequence:n},i=!1,l=t.getNumber("load_sequence_only_prioritize_first_count",0);return l>0?i=!this.$2.find(function(e){return e.sequence<l}):i=!this.$2.find(function(e){return e.sequence<n}),i?this.$3(a):(this.$1.push(a),r("setTimeout")(function(){return e.$4(a)},a.maximumBlockTimeMs)),function(){return e.$5(a)}},t.$4=function(t){var e=this.$1.find(function(e){return e===t});e&&(this.$1=this.$1.filter(function(e){return e!==t}),this.$3(e))},t.$3=function(t){var e=this;this.$2.push(t),t.load().then(function(){return e.$6(t)}).catch(function(n){throw e.$6(t),n}),r("setTimeout")(function(){return e.$6(t)},t.maximumBlockTimeMs)},t.$7=function(){var e=this,t=Math.min.apply(Math,this.$1.map(function(e){return e.sequence})),n=this.$1.filter(function(e){return e.sequence===t});n.forEach(function(t){return e.$4(t)})},t.$5=function(t){this.$1=this.$1.filter(function(e){return e!==t})},t.$6=function(t){if(this.$2.find(function(e){return e===t})){this.$2=this.$2.filter(function(e){return e!==t});var e=!!this.$2.find(function(e){return e.sequence===t.sequence});e&&this.$7()}},e})(),s=new e,u=s;l.default=u}),98);
__d("VideoPlayerNextgendashNetworkDiagnosticsUtils",["oz-player/networks/OzBandwidthUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return e==null?function(e,t){return 0}:function(t,n){var r=o("oz-player/networks/OzBandwidthUtils").getEstimatedRequestTimeToLastByteMs(e,t,n);return t/r*8e3}}var s=2e5,u=2e5,c=10,d=1e8;function m(e,t,n){var r=e.bytes+s,o=n>=r?{bytes:n,clock:t}:e,a=t.perfMs-e.clock.perfMs,i=n-e.bytes,l=null;return _(i,a)||(l={bandwidthSample:{bytes:i,timeInMs:a},clock:t,navigationTimingSample:void 0}),{networkDiagnosticsSample:l,nextBandwidthSamplingState:o}}function p(e,t,n,r,o){var a=f(e.host.getPerformanceResourceTimingByName(t)),i=void 0;if(a){var l=a.responseStart-a.requestStart,s=a.responseEnd-a.requestStart;i={bytes:o,timeToFirstByteMs:l,timeToLastByteMs:s}}var c=r.perfMs-n.clock.perfMs,d=o-n.bytes,m=void 0;if(n.bytes===0&&o>=u&&!_(d,c)&&(m={bytes:d,timeInMs:c}),i||m){var p={bandwidthSample:m,clock:r,navigationTimingSample:i};return p}return null}function _(e,t){var n=e*8/(t/1e3);return t<c&&n>d}function f(e){return e.reduce(function(e,t){return e==null?t:t.responseEnd<e.responseEnd?e:t},null)}l.getBandwidthEstimateFn=e,l.computeNetworkDiagnosticsSampleOnChunk=m,l.computeNetworkDiagnosticsSampleOnDone=p}),98);
__d("VideoPlayerNextgendashABR",["QualityScoreUtils","SidneeAbrAlgorithm","VideoPlayerNextgendashNetworkDiagnosticsUtils","gkx","oz-player/utils/OzBufferingUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,a,i){var l=i==="csvqm",s=r("gkx")("8123");return e.map(function(e){var r,i;if(s)i=l?e.playbackResolutionCsvqmScoreCurveParsed:e.playbackResolutionMosScoreCurveParsed;else{var u=l?e.playbackResolutionCsvqmScoreCurve:e.playbackResolutionMosScoreCurve;i=o("QualityScoreUtils").parseQualityScoreCurve(String(u))}var c=i!=null?o("QualityScoreUtils").calculateQualityScore(i,t,n,a):0;return{bandwidth:e.bandwidth,displayLabel:(r=e.qualityLabel)!=null?r:"",height:e.height,id:e.representationId,qualityScore:c,uploadQuality:66,width:e.width}})}function s(e,t){var n=e.videoPreferredMinimumSmallestDimension,r=t;if(t.length>0&&n>0){var o=t[0];r=t.filter(function(e){var t=Math.min(e.width,e.height),r=Math.min(o.width,o.height);return t>r&&(o=e),t>=n}),r.length===0&&(r=[o])}return r}function u(t,n){var r,a,i,l,u=n.abrConfig,c=n.bandwidthDiagnostics,d=n.devicePixelRatio,m=n.isDocumentHidden,p=n.mediaDurationSec,_=n.playerDimensions,f=n.playheadMediaTimeSec,g=n.prefetchResult,h=n.sourceBufferBufferedRangesSec,y=s(u,t),C=u.sidneeConfig,b=y.every(function(e){return e.playbackResolutionCsvqmScoreCurve!=null})?"csvqm":"mos",v=e(y,_,C.useDpr,d,b),S=p==="NOT_A_NUMBER"||isNaN(p)||!isFinite(p)?C.defaultVideoDurationMs:p*1e3,R=o("oz-player/utils/OzBufferingUtils").getBufferAheadFromCurrentTime(f,(r=h.map(function(e){var t=e[0],n=e[1];return{endTime:n,startTime:t}}))!=null?r:[])*1e3,L=R+f*1e3,E=C.lookAheadMs-L,k={isAudioTrack:!1,playbackDurationInfo:{bufferDurationMs:L,playbackPositionMs:f*1e3,videoDurationMs:S},totalWindowDurationMs:C.lookAheadMs,unbufferedWindowDurationMs:E},I=o("SidneeAbrAlgorithm").sidneeAbrSelectQualityImpl(v,C,k,o("VideoPlayerNextgendashNetworkDiagnosticsUtils").getBandwidthEstimateFn(c)),T=(a=y.find(function(e){return e.representationId===I.chosenRepresentation.id}))!=null?a:null,D={bestRepresentationId:(i=T==null?void 0:T.representationId)!=null?i:null,bestRepresentationIsPrefetched:(l=g==null?void 0:g.prefetchedRepresentationIds.includes(I.chosenRepresentation.id))!=null?l:!1,hasMadeInitialDecision:!0,lastEvaluationReason:I.decisionReasonDetails};return{bestRepresentation:T,nextABRState:D}}l.filterVideoRepresentationsByVideoPreferredMinimumSmallestDimension=s,l.evaluateVideoPlayerNextgendashABRForVideo=u}),98);
__d("VideoPlayerNextgendashBatcher",[],(function(t,n,r,o,a,i){"use strict";function e(e,t,n,r){var o=[],a=null;function i(){var e,t=o;o=[],(e=a)==null||e.cancel(),a=null,r(t)}function s(r){o.push(r),a==null&&(a=l(e,i,n)),o.length>=t&&a.run()}return{push:s}}function l(e,t,n){var r=!1,o=t,a=e.setTimeout(function(){r=!0,l()},n);function i(){a!=null&&e.clearTimeout(a),a=null}function l(){if(i(),o!=null){var e=o;o=null,e(r)}}return{cancel:i,run:l}}i.createBatcher=e}),66);
__d("VideoPlayerNextgendashWorkQueue",[],(function(t,n,r,o,a,i){"use strict";function e(e){var t=e,n=null,r=[],o=null,a=!1,i=!1,l=!1;function s(){if(i){i=!1;var e=o;if(e!=null)try{n=[],e()}catch(e){throw l=!0,e}finally{o=null;var t=n;t!=null&&t.length>0&&r.unshift.apply(r,t),n=null,a=!0,u()}}}function u(){a&&(a=!1,!(l||o!=null||r.length<=0||i)&&(o=r.shift(),i=!0,s()))}function c(){l||a||(a=!0,t(u))}var d=function(){if(!(arguments.length<=0))if(n!=null){var e;(e=n).push.apply(e,arguments)}else r.push.apply(r,arguments),c()};return{enqueueWork:d,getHalted:function(){return l},getQueueLength:function(){var e,t;return r.length+((e=(t=n)==null?void 0:t.length)!=null?e:0)},setHalted:function(t){t?l=!0:(l=!1,c())},setScheduleToRun:function(n){t=n}}}i.createVideoPlayerNextgendashWorkQueue=e}),66);
__d("VideoPlayerNextgendashStateMachine",["VideoPlayerNextgendashWorkQueue","nextgendasherr"],(function(t,n,r,o,a,i,l){"use strict";var e={},s={},u="$$nextgendashSkipAutoDisposeSymbol";function c(e){return e!=null&&typeof e=="object"&&Object.defineProperty(e,u,{configurable:!1,enumerable:!1,value:s,writable:!1}),e}function d(e,t,n,r,o){var a,i=(a=r.options)==null?void 0:a.augmentEnv,l=i?i(t.env,o):t.env,s=r.createSM(t.displayName+"."+n,babelHelpers.extends({},l,{workQueue:e}),t,o);return s}function m(e,t,n,r,o,a){t.env.logging.log(t.env,{event:n,eventClock:r,fromSm:o,sendReason:a,sm:t,type:"state_machine_send_event"}),e.enqueueWork(function(){if(p(t,n,r,o,a),t.$$nextgendashEventsReceivedBeforeInit!=null&&n.type==="__init"&&t.state.state!=="__null__"&&t.state.state!=="__disposed__"){var i=t.$$nextgendashEventsReceivedBeforeInit;t.$$nextgendashEventsReceivedBeforeInit=null;for(var l=0,s=i.length;l<s;++l)m(e,t,i[l],r,o,"sendAfterInit:"+(a!=null?a:""))}})}function p(e,t,n,r,a){var i=e.state;if(!(i.state==="__disposed__"&&t.type!=="__enter")){if(i.state==="__null__"&&t.type!=="__init"){e.$$nextgendashEventsReceivedBeforeInit==null&&(e.$$nextgendashEventsReceivedBeforeInit=[]),e.$$nextgendashEventsReceivedBeforeInit.push(t);return}var l=new Set;e.$$nextgendashEverCalledMakeChildSm===!0&&y(e,i,l,!1);try{e.env.logging.log(e.env,{event:t,eventClock:n,fromSm:r,sendReason:a,sm:e,type:"state_machine_receive_event_begin"});try{var s,u=!0,c=[],p=function(t){c.push(t)},_=e.env.workQueue.enqueueWork,f=o("VideoPlayerNextgendashWorkQueue").createVideoPlayerNextgendashWorkQueue(p),g={args:e.args,env:e.env,eventClock:n,fromSm:r,makeChildSm:function(n,r){if(e.$$nextgendashEverCalledMakeChildSm=!0,!u){var t;throw o("nextgendasherr").nextgendasherr(e.env,"VideoPlayerNextgendashStateMachineChildSMOutsideTransition["+e.displayName+"]@"+((t=i.state)!=null?t:"?")+">["+n+"]")}for(var a=arguments.length,s=new Array(a>2?a-2:0),c=2;c<a;c++)s[c-2]=arguments[c];var m=d.apply(void 0,[f,e,n,r].concat(s));return l.add(m),m},sendReason:a,sendToOther:function(n,r,o){var t=e.env.host.clock();m(f,n,r,t,e,o!=null?o:"sendToOther")},sendToSelf:function(n,r){var t=e.env.host.clock();m(f,e,n,t,e,r!=null?r:"sendToSelf")},stateClock:e.stateClock,thisName:e.displayName,thisSm:e,unexpectedEvent:function(r,a){for(var n,l=arguments.length,s=new Array(l>2?l-2:0),u=2;u<l;u++)s[u-2]=arguments[u];var c=o("nextgendasherr").nextgendasherr.apply(void 0,[e.env,"VideoPlayerNextgendashStateMachineUnexpectedEvent["+e.displayName+"]@"+((n=i.state)!=null?n:"?")+"<--"+t.type,a].concat(s));if(r==="log")e.env.logging.log(e.env,{error:c,type:"generic_error_as_warning"});else throw c}},h=void 0;if(i.state==="__null__"){if(t.type!=="__dispose")if(t.type==="__init")h=e.initialTransition(g);else throw g.unexpectedEvent("throw")}else h=e.transition(babelHelpers.extends({},g,{event:t,state:i}));if(t.type==="__exception"&&h===void 0||t.type==="__dispose"){var C=t.exception,b=t.reason;h!=null&&e.$$nextgendashEverCalledMakeChildSm&&y(e,h,l,!1),h={exception:C,reason:b!=null?b:t.type,state:"__disposed__"}}if(e.stateClock=e.env.host.clock(),h!==void 0&&(e.$$nextgendashEverCalledMakeChildSm&&y(e,e.state,l,!1),e.state=h),h!==void 0&&h.state!==i.state&&t.type!=="__enter"){var v,S;m(e.env.workQueue,e,{prevState:i,type:"__enter"},e.env.host.clock(),e,"from:"+((v=i.state)!=null?v:"?")+":to:"+((S=e.state.state)!=null?S:"?"))}if(u=!1,f.setScheduleToRun(_),(s=e.env.workQueue).enqueueWork.apply(s,c),h!==void 0){var R=e.args,L=R.onDisposed,E=R.onTransitioned;if(E){var k,I,T=e.state,D="#"+e.sequentialId+"#"+e.displayName+":from:"+((k=i.state)!=null?k:"?")+":to:"+((I=e.state.state)!=null?I:"?")+":event:"+t.type;e.env.workQueue.enqueueWork(function(){E(i,T,D)})}if(L&&e.state.state==="__disposed__"){var x,$,P=e.state,N="#"+e.sequentialId+"#"+e.displayName+":from:"+((x=i.state)!=null?x:"?")+":to:"+(($=e.state.state)!=null?$:"?")+":event:"+t.type;e.env.workQueue.enqueueWork(function(){L(i,P,N)})}}e.env.logging.log(e.env,{event:t,eventClock:n,fromSm:r,sendReason:a,sm:e,smPrevState:i,type:"state_machine_receive_event_success"})}catch(l){var M,w=o("nextgendasherr").nextgendasherrFromNextgendasherr(l),A=w!=null&&w.name.startsWith("VideoPlayerNextgendashStateMachineUnexpectedEvent")?w:o("nextgendasherr").nextgendasherrFromCause(e.env,l,"VideoPlayerNextgendashStateMachineException["+e.displayName+"]@"+((M=i.state)!=null?M:"?")+"<--"+t.type);if(e.env.logging.log(e.env,{event:t,eventClock:n,exception:A,fromSm:r,sendReason:a,sm:e,smPrevState:i,type:"state_machine_receive_event_exception"}),t.type!=="__exception"){var F;m(e.env.workQueue,e,{exception:A,type:"__exception"},e.env.host.clock(),e,"in:"+((F=i.state)!=null?F:"?")+":event:"+t.type+":exception:"+A.name)}else throw l}}catch(n){var O,B=o("nextgendasherr").nextgendasherrFromCause(e.env,n,"VideoPlayerNextgendashStateMachineFatalException["+e.displayName+"]@"+((O=i.state)!=null?O:"?")+"<--"+t.type);if(e.$$nextgendashEverCalledMakeChildSm&&y(e,e.state,l,!1),e.state={exception:B,reason:"state_machine_fatal_exception",state:"__disposed__"},e.env.logging.log(e.env,{exception:B,sm:e,smPrevState:i,type:"state_machine_fatal_exception"}),i.state!=="__disposed__"&&t.type!=="__enter"){var W,q;m(e.env.workQueue,e,{prevState:i,type:"__enter"},e.env.host.clock(),e,"from:"+((W=i.state)!=null?W:"?")+":to:"+((q=e.state.state)!=null?q:"?"))}{var U=e.parentSm;if(U){var V,H;m(e.env.workQueue,U,{exception:B,type:"__exception"},e.env.host.clock(),e,"child:#"+e.sequentialId+"#"+e.displayName+":from:"+((V=i.state)!=null?V:"?")+":to:"+((H=e.state.state)!=null?H:"?")+":event:"+t.type)}}}finally{if(l.size>0){y(e,e.state,l,!0);for(var G of l){var z,j;m(G.env.workQueue,G,{reason:"__released_by_parent",type:"__dispose"},e.env.host.clock(),e,"parent:#"+e.sequentialId+"#"+e.displayName+":from:"+((z=i.state)!=null?z:"?")+":to:"+((j=e.state.state)!=null?j:"?")+":event:"+t.type)}}}}}var _={}.constructor,f=[].constructor,g=new Map().constructor,h=new Set().constructor;function y(t,n,r,o){if(o===void 0&&(o=!1),!(o&&r.size<=0)&&n[u]!==s){var a=[],i=new Set;i.add(n);for(var l=n;l!=null;){if(l.$$nextgendashBaseSymbol===e){if(l.parentSm===t)if(o){if(r.delete(l),r.size<=0)break}else r.add(l)}else{var c=l.constructor;if(c===_)for(var d in l){var m=l[d];m!=null&&typeof m=="object"&&l[u]!==s&&!i.has(m)&&(i.add(m),a.push(m))}else if(c===f||c===g||c===h)for(var p of l)p!=null&&typeof p=="object"&&l[u]!==s&&!i.has(p)&&(i.add(p),a.push(p))}l=a.pop()}}}var C=1;function b(e){return v(e)}function v(t){return typeof t=="object"&&t!=null&&t.$$nextgendashBaseSymbol===e}function S(t,n,r){var o={};return{createSM:function(a,i,l,s){var t=i.host.clock(),u={$$nextgendashBaseSymbol:e,$$nextgendashDefinitionSymbol:o,$$nextgendashEventsReceivedBeforeInit:null,$$nextgendashEverCalledMakeChildSm:!1,args:s,displayName:a,env:i,initialTransition:n,parentSm:l,sendEvent:function(t,n,r,o){m(u.env.workQueue,u,t,o!=null?o:u.env.host.clock(),n,r)},sequentialId:C++,state:{state:"__null__"},stateClock:t,transition:r};return u.env.logging.log(u.env,{fromSm:l,sm:u,type:"state_machine_created"}),m(u.env.workQueue,u,{type:"__init"},u.env.host.clock(),l),u},didDefineThisSM:function(t){return v(t)&&t.$$nextgendashDefinitionSymbol===o},options:t}}l.skipAutoDisposeInsideThisObject=c,l.isStateMachine=b,l.defineStateMachine=S}),98);
__d("nextgendasherr",["VideoPlayerNextgendashStateMachine","fb-error","getMoreGranularErrorNameFromHTMLVideoElementErrorMessage"],(function(t,n,r,o,a,i,l){"use strict";var e="nextgendashClock";function s(t,n,a){for(var i=arguments.length,l=new Array(i>3?i-3:0),s=3;s<i;s++)l[s-3]=arguments[s];var u=r("fb-error").err.apply(r("fb-error"),[a!=null?a:l.length>0?l.map(function(){return"%s"}).join(" "):""].concat(l));u.name=n,u.project="comet_video_player_nextgendash";var c=new(r("fb-error")).ErrorMetadata;C(t,c),u.metadata=c;var d="Error: ";return u.stack=u.stack.replace(/^[^\n]+/,d),r("fb-error").TAAL.blameToPreviousFrame(u),u[e]=t.host.clock(),o("VideoPlayerNextgendashStateMachine").skipAutoDisposeInsideThisObject(u)}function u(e,t){return(e===""||t.startsWith(e+"/")?"":e+"/")+(e.startsWith("VideoPlayerNextgendash")?t.replace(/VideoPlayerNextgendash/g,""):t)}function c(t,n,o,a){var i=void 0,l=void 0,c="",d=[],m=[];try{var p,_=typeof n=="object"&&n!=null?n:null;l=_!=null&&typeof _.code=="number"?_.code:void 0,m=_!=null&&typeof _.stack=="string"?_.stack.split("\n").slice(1):[],i=_!=null&&typeof _.name=="string"&&_.name!==""?_.name:void 0;var f=r("fb-error").getErrorSafe(n);if(c=(p=f.messageFormat)!=null?p:f.message,d=f.messageFormat!=null&&Array.isArray(f.messageParams)?f.messageParams:[],i!=null&&m.length>0&&["TypeError","ReferenceError","RangeError"].includes(i)){var g=m.slice(0,2).map(function(e){return e.trim()});c+=" - stack: %s",d=d.concat([g.join("\n")])}}catch(e){}i==null&&(l!=null?i="NotAnErrorWithCode":i="NotAnError");for(var h=u(o,i+(l!=null?"#"+l:"")),y=arguments.length,C=new Array(y>4?y-4:0),b=4;b<y;b++)C[b-4]=arguments[b];var v=s.apply(void 0,[t,h,(a!=null?a:"")+(a!=null&&a!==""&&c!==""?" / ":"")+c].concat((a!=null?C:[]).concat(c!=null?d:[])));return typeof n=="object"&&n!=null&&typeof n[e]=="object"&&n[e]!=null&&typeof n[e].unixMs=="number"&&typeof n[e].perfMs=="number"&&(v[e]=n[e]),m.length>0&&(v.stack+="\n    at <cause_stack_below>\n"+m.join("\n")),r("fb-error").TAAL.blameToPreviousFrame(v),v}function d(t,n,o,a){for(var i=n.filter(Boolean).map(function(e){var n=e[0],r=e[1];return[n,c(t,r,"")]}).sort(function(e,t){return e[1].nextgendashClock.perfMs-t[1].nextgendashClock.perfMs}),l=arguments.length,d=new Array(l>4?l-4:0),m=4;m<l;m++)d[m-4]=arguments[m];if(i.length<=0)return s.apply(void 0,[t,o,"No causes."+(a!=null?" :: "+a:"")].concat(a!=null?d:[]));var p=i.map(function(e,t){var n=e[0],r=e[1];return[t+1+">"+n+">"+r.name+": "+r.messageFormat,r.messageParams]}),_=p.map(function(e){var t=e[0];return t}).join(" ++ "),f=p.reduce(function(e,t){var n=t[1];return e.concat(n)},[]),g=i[0],h=u(o,g[0]+">"+g[1].name),y=s.apply(void 0,[t,h,p.length+" causes: "+_+(a!=null?" :: "+a:"")].concat(f,a!=null?d:[]));return y[e]=g[1].nextgendashClock,r("fb-error").TAAL.blameToPreviousFrame(y),y}function m(e,t,n,o){for(var a=arguments.length,i=new Array(a>4?a-4:0),l=4;l<a;l++)i[l-4]=arguments[l];var u=typeof t=="object"&&t!=null&&t.name==="TypeError"&&typeof t.message=="string"?s.apply(void 0,[e,n,o!=null&&o!==""?o+" / "+t.name+": "+t.message:t.name+": "+t.message].concat(i)):c.apply(void 0,[e,t,n,o].concat(i));return r("fb-error").TAAL.blameToPreviousFrame(u),u}function p(e){return typeof e=="object"&&e!=null&&"name"in e&&typeof e.name=="string"&&"message"in e&&typeof e.message=="string"&&"messageFormat"in e&&typeof e.messageFormat=="string"&&"messageParams"in e&&Array.isArray(e.messageParams)&&"project"in e&&e.project==="comet_video_player_nextgendash"&&"metadata"in e&&e.metadata instanceof r("fb-error").ErrorMetadata?e:null}function _(e){return{messageFormat:e.messageFormat,messageParams:e.messageParams,metadataSnapshot:e.metadata.getAll(),name:e.name,nextgendashClock:e.nextgendashClock,project:e.project}}function f(t){var n=r("fb-error").err.apply(r("fb-error"),[t.messageFormat].concat(t.messageParams));n.name=t.name,n.project="comet_video_player_nextgendash";var o=new(r("fb-error")).ErrorMetadata;return o.addEntries.apply(o,t.metadataSnapshot),n.metadata=o,n[e]=t.nextgendashClock,n}function g(e){var t,n=typeof e=="object"&&e!=null&&typeof e.code=="number"?e.code:void 0,o=typeof e=="object"&&e!=null&&typeof e.message=="string"?e.message:void 0,a=(t={"":"MEDIA_ERR_UNKNOWN",1:"MEDIA_ERR_ABORTED",2:"MEDIA_ERR_NETWORK",3:"MEDIA_ERR_DECODE",4:"MEDIA_ERR_SRC_NOT_SUPPORTED"}[String(n!=null?n:"")])!=null?t:"MEDIA_ERR_UNKNOWN",i=o!=null?r("getMoreGranularErrorNameFromHTMLVideoElementErrorMessage")(o):null,l="VideoPlayerNextgendashMediaError/"+a+(n!=null?"#"+n:"")+(i!=null?"/"+i:"");return[l,o]}function h(e,t,n){for(var o=g(t),a=o[0],i=o[1],l=arguments.length,u=new Array(l>3?l-3:0),c=3;c<l;c++)u[c-3]=arguments[c];var d=s.apply(void 0,[e,a,(n!=null?n:"MediaError")+(i!=null?": %s":"")].concat(u.concat(i!=null?[i]:[])));return r("fb-error").TAAL.blameToPreviousFrame(d),d}function y(e){var t=new(r("fb-error")).ErrorMetadata;C(e,t);var n=r("fb-error").FBLogger("comet_video_player_nextgendash");return t.getAll().forEach(function(e){n=n.addMetadata(e[0],e[1],e[2])}),n}function C(e,t){var n=e.loggingState.metadata;"videoFBID"in n&&n.videoFBID!=null&&t.addEntry("COMET_VIDEO","VIDEO_ID",n.videoFBID),t.addEntry("COMET_VIDEO","VIDEO_IMPLEMENTATION_DEBUG_DATA",JSON.stringify({nextgendash_metadata:n}))}function b(e){return e.replace(/(?:[0-9a-f]+[a-f][0-9][0-9a-f]*)|(?:[0-9a-f]*[0-9][a-f][0-9a-f]+)|(?:[0-9]+[a-f]+)|(?:[a-f]+[0-9]+)/g,"{NHEX}").replace(/[0-9]+,[0-9]+(?:,[0-9]+)*/g,"{NLIST}").replace(/(HTTP(?:(?:0)|(?:[1-9][0-9]{1,5}))(?:[^0-9]|\b))|(#[0-9]+)|([0-9]+)/g,function(e,t,n){return t||n?e:"{N}"})}l.nextgendasherr=s,l.nextgendasherrFromCause=c,l.nextgendasherrFromMultipleCauses=d,l.nextgendasherrFromFetchRejection=m,l.nextgendasherrFromNextgendasherr=p,l.nextgendasherrToSnapshot=_,l.nextgendasherrFromSnapshot=f,l.nextgendasherrNameAndMessageFromMediaError=g,l.nextgendasherrFromMediaError=h,l.nextgendasherrFBLogger=y,l.reduceCardinalityOfNextgendashErrorName=b}),98);
__d("VideoPlayerNextgendashConnectionUtils",["Promise","nextgendasherr"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,r,a,i,l,s,u,c,d){var m=[],p=!1,_=null,f=[],g=[],h=0,y=0,C=0,b=0,v=0,S={clock:t.host.clock(),disconnectedReason:_,displayInstanceKey:a,displayName:r,fullyConnected:p,inboundEventsReceivedCount:y,inboundMessagesReceivedCount:h,inboundMessagesReceivedPerMs:0,inboundQueueLength:f.length,outboundEventsQueuedCount:C,outboundEventsSentCount:b,outboundMessagesSentCount:v,outboundMessagesSentPerMs:0,outboundQueueLength:g.length};function R(){var e={clock:t.host.clock(),disconnectedReason:_,displayInstanceKey:a,displayName:r,fullyConnected:p,inboundEventsReceivedCount:y,inboundMessagesReceivedCount:h,inboundMessagesReceivedPerMs:0,inboundQueueLength:f.length,outboundEventsQueuedCount:C,outboundEventsSentCount:b,outboundMessagesSentCount:v,outboundMessagesSentPerMs:0,outboundQueueLength:g.length},n=Math.max(1,e.clock.perfMs-S.clock.perfMs);return e.outboundMessagesSentPerMs=e.outboundMessagesSentCount/n,e.inboundMessagesReceivedPerMs=e.inboundMessagesReceivedCount/n,e}var L=function(){for(var e;_==null&&(e=f.shift(),e!=null);)e.type==="__exception"&&T(e.exception),l(e)},E=t.host.timers.throttle(L,0,{leading:!0,trailing:!0}),k=function(){if(!(!p||g.length<=0)){if(i.hasErrored()){x(o("nextgendasherr").nextgendasherr(t,r+"/FlushToErroredPort"));return}var e=g.length,n=u(g),a=n.message,l=n.transferList;g.length=0,i.postMessage(a,l),v+=1,b+=e}},I=t.host.timers.throttle(k,0,{leading:!0,trailing:!0}),T=function(n){k(),_=n,p=!1,m.forEach(function(e){return e()}),(g.length>0||f.length>0)&&t.logging.log(t,{error:n,format:"["+r+"][%s] disconnected ("+n.name+"); dropped outbound: %s %s; dropped inbound: %s %s; stats=%s",params:[a,g.length,g.map(s).join(","),f.length,f.map(function(e){return e.type}).join(","),JSON.stringify(R())],type:"generic_error_as_warning"}),g.length=0,f.length=0};function D(e){if(_==null){if(e.canSendOnlyLatestOfTypeIfThrottled===!0)for(var t=0;t<g.length;++t)s(g[t])===s(e)&&(g.splice(t,1),C-=1,--t);g.push(e),C+=1,I()}}function x(e){f.push({exception:e,type:"__exception"}),L()}try{i.hasErrored()?x(o("nextgendasherr").nextgendasherr(t,r+"/CreateQueuesOnErroredPort")):t.config.isInWorkerType==="RealWorkerV2"?(p=!0,k()):i.fullyConnected.then(function(){_==null&&(p=!0,k())}).catch(function(e){_==null&&(p=!1,x(o("nextgendasherr").nextgendasherrFromCause(t,e,r+"/FullyConnectedRejection")))});var $=i.onError.add(function(e){x(o("nextgendasherr").nextgendasherrFromCause(t,e,r+"/ErrorFromPort"))});m.push(function(){i.onError.remove($)}),c(m,function(e){h+=1,y+=e.events.length,e.events.forEach(function(e){f.push(e)}),E()}),d(m)}catch(a){(e||(e=n("Promise"))).reject(a).catch(function(){x(o("nextgendasherr").nextgendasherrFromCause(t,a,r+"/InitException"))})}return{disconnect:T,getStats:R,send:D}}l.createInboundOutboundQueues=s}),98);
__d("VideoPlayerNextgendashConnectionMainToWorker",["VideoPlayerNextgendashConnectionUtils","VideoPlayerNextgendashStateMachine","nextgendasherr"],(function(t,n,r,o,a,i,l){"use strict";var e={RealWorker:null,RealWorkerV2:null,VirtualWorker:null};function s(e){var t=e.envForErrors,n=e.virtualWorkerHostAPI,r=e.workerEnvConfig,o=e.workerPortFactories,a=e.workerType;try{u(o,a,r,t,n)}catch(e){}}function u(t,n,r,a,i){var l=e[n];if(l!=null){if(l.port!=null)return l.port;throw l.exception}var s="VideoPlayerNextgendashConnectionMainToWorker_"+n,u=t[n];if(u==null)throw o("nextgendasherr").nextgendasherr(a,s+"/PortFactoryMissing");try{var c=u(s,babelHelpers.extends({},r,{isInWorkerType:n}),i);return e[n]={port:c},c}catch(t){var d=o("nextgendasherr").nextgendasherrFromCause(a,t,s+"/PortFactoryException");throw e[n]={exception:d},d}}function c(e,t,n,r,a){var i="VideoPlayerNextgendashConnectionMainToWorker_"+n,l=String(r),s=u(t,n,e.config,e,e.host),c=o("VideoPlayerNextgendashConnectionUtils").createInboundOutboundQueues(e,i,l,s,function(e){(e.type==="__exception"||e.workerType===n&&(e.playerInstanceKey==null||e.playerInstanceKey===r))&&a(e)},function(e){return e.eventToWorker.type},function(e){return{message:{events:e.map(function(e){return e.eventToWorker}),type:"comet_video_player_nextgendash__main_to_worker"},transferList:e.reduce(function(e,t){var n;return e.concat((n=t.transferList)!=null?n:[])},[])}},function(e,t){var n=s.addMessageListener("comet_video_player_nextgendash__worker_to_main",t);e.push(function(){s.removeMessageListener("comet_video_player_nextgendash__worker_to_main",n)})},function(t){var n=s.addMessageListener("comet_video_player_nextgendash__worker_to_main_qpl_calls",function(t){t.calls.forEach(function(t){e.logging.log(e,{qplCall:t,type:"qpl_call"})})});t.push(function(){s.removeMessageListener("comet_video_player_nextgendash__worker_to_main_qpl_calls",n)});var r=s.addMessageListener("comet_video_player_nextgendash__worker_to_main_ods_calls",function(t){t.calls.forEach(function(t){e.logging.log(e,{odsCall:t,type:"ods_call"})})});if(t.push(function(){s.removeMessageListener("comet_video_player_nextgendash__worker_to_main_ods_calls",r)}),e.config.debugViz){var o=s.addMessageListener("comet_video_player_nextgendash__worker_to_main_debug_snapshot",function(t){e.logging.log(e,{snapshot:t.snapshot,type:"state_machine_debug_snapshot_from_worker"})});t.push(function(){s.removeMessageListener("comet_video_player_nextgendash__worker_to_main_debug_snapshot",o)});var a=s.addMessageListener("comet_video_player_nextgendash__worker_to_main_debug_events",function(t){e.logging.log(e,{events:t.events,type:"state_machine_debug_events_from_worker"})});t.push(function(){s.removeMessageListener("comet_video_player_nextgendash__worker_to_main_debug_events",a)})}}),d=c.disconnect,m=c.getStats,p=c.send;function _(e){s.postMessage({haltReason:e,type:"comet_video_player_nextgendash__main_to_worker_debug_halt"},[])}return o("VideoPlayerNextgendashStateMachine").skipAutoDisposeInsideThisObject({disconnectFromWorker:d,getStats:m,sendHaltedToWorker:_,sendToWorker:p})}l.preloadWorker=s,l.connectToWorker=c}),98);
__d("WorkerSyncedMessagePortWithErrored",["WorkerMessagePort"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t,n){var r;r=e.call(this,t,n)||this,r.$WorkerSyncedMessagePortWithErrored$p_1=!1;var o=function(){r.$WorkerSyncedMessagePortWithErrored$p_1=!0};return r.onError.add(o),r.fullyConnected.catch(o),r}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.hasErrored=function(){return this.$WorkerSyncedMessagePortWithErrored$p_1},t})(o("WorkerMessagePort").WorkerSyncedMessagePort);l.WorkerSyncedMessagePortWithErrored=e}),98);
__d("VideoPlayerNextgendashConnectionPortToRealWorker",["CometVideoPlayerNextgendashWorkerResource","CometVideoPlayerNextgendashWorkerWithDebugResource","WorkerSyncedMessagePortWithErrored","cr:9583","cr:9584","fb-error"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t,a){if(n("cr:9583")==null){var e=r("fb-error").err("WorkerBundleResource is missing");throw e.name="WorkerBundleResourceMissing",e}if(n("cr:9584")==null){var i=r("fb-error").err("WorkerClient is missing");throw i.name="WorkerClientMissing",i}var l=a.debugLog||a.debugViz?r("CometVideoPlayerNextgendashWorkerWithDebugResource"):r("CometVideoPlayerNextgendashWorkerResource"),s=l===r("CometVideoPlayerNextgendashWorkerWithDebugResource")?"CometVideoPlayerNextgendashWorkerWithDebug":"CometVideoPlayerNextgendashWorker",u=n("cr:9583").createDedicatedWebWorker(l,{logImportScriptsErrors:!0,name:s},{workerEnvConfig:a}),c=new(o("WorkerSyncedMessagePortWithErrored")).WorkerSyncedMessagePortWithErrored(u,t);return n("cr:9584").init(c),c};l.createVideoPlayerNextgendashConnectionPortToRealWorker=e}),98);
__d("VideoPlayerNextgendashConnectionPortToRealWorkerV2",["VideoPlayerNextgendashWorkerV2EntrypointWorkerResource","WorkerSyncedMessagePortWithErrored","cr:1020","cr:6193","fb-error"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t,a){if(n("cr:6193")==null){var e=r("fb-error").err("WebWorkerV2Resource is missing");throw e.name="WebWorkerV2ResourceMissing",e}if(n("cr:1020")==null){var i=r("fb-error").err("WorkerClient is missing");throw i.name="WorkerClientMissing",i}var l="CometVideoPlayerNextgendashWorkerV2",s=n("cr:6193").createDedicatedV2WebWorker(r("VideoPlayerNextgendashWorkerV2EntrypointWorkerResource"),l).worker,u=new(o("WorkerSyncedMessagePortWithErrored")).WorkerSyncedMessagePortWithErrored(s,t);return n("cr:1020").init(u),u.fullyConnected.then(function(){u.postMessage({type:"comet_video_player_nextgendash__main_to_worker_init",workerEnvConfig:a})}).catch(function(e){}),u};l.createVideoPlayerNextgendashConnectionPortToRealWorkerV2=e}),98);
__d("VideoPlayerNextgendashConnectionPortToVirtualWorker",["JSResourceForInteraction","VirtualMessageChannel","WorkerSyncedMessagePortWithErrored","cr:9585","cr:9712","cr:9719","fb-error"],(function(t,n,r,o,a,i,l){"use strict";var e=r("JSResourceForInteraction")("VideoPlayerNextgendashWorkerEnvironment").__setRef("VideoPlayerNextgendashConnectionPortToVirtualWorker");function s(){n("cr:9585")==null&&e.preload()}var u=function(a,i,l){var t=!0,s=new(o("VirtualMessageChannel")).VirtualMessageChannel(t,t),u=s.port1,c=s.port2,d=new(o("WorkerSyncedMessagePortWithErrored")).WorkerSyncedMessagePortWithErrored(c,"VideoPlayerNextgendashConnectionWorkerToMain_VirtualWorker"),m=new(o("WorkerSyncedMessagePortWithErrored")).WorkerSyncedMessagePortWithErrored(u,a),p=n("cr:9585")!=null?n("cr:9585"):e.getModuleIfRequireable();return p!=null?p.createVideoPlayerNextgendashWorkerEnvironment(i,l,d,n("cr:9712"),n("cr:9719")):e.load().then(function(e){e.createVideoPlayerNextgendashWorkerEnvironment(i,l,d,n("cr:9712"),n("cr:9719"))}).catch(function(e){var t=r("fb-error").getErrorSafe(e);r("fb-error").FBLogger("comet_video_player_nextgendash","WorkerEnvironmentJSResourceLoadRejection").catching(t).fatal('Failed to load module "VideoPlayerNextgendashWorkerEnvironment" / '+String(t))}),m};l.preloadWorkerEnvironmentJSResourceWhenVirtualWorkerOnly=s,l.createVideoPlayerNextgendashConnectionPortToVirtualWorker=u}),98);
__d("VideoPlayerNextgendashConnectionWorkerToMain",["VideoPlayerNextgendashConnectionUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,r,a){var i="VideoPlayerNextgendashConnectionWorkerToMain_"+t,l="",s=o("VideoPlayerNextgendashConnectionUtils").createInboundOutboundQueues(e,i,l,n,a,function(e){return e.eventToMain.type},function(e){return{message:{events:e.map(function(e){return e.eventToMain}),type:"comet_video_player_nextgendash__worker_to_main"},transferList:e.reduce(function(e,t){var n;return e.concat((n=t.transferList)!=null?n:[])},[])}},function(e,t){var r=n.addMessageListener("comet_video_player_nextgendash__main_to_worker",t);e.push(function(){n.removeMessageListener("comet_video_player_nextgendash__main_to_worker",t),e.push(function(){n.removeMessageListener("comet_video_player_nextgendash__main_to_worker",r)})})},function(t){r&&t.push(r(e,n))}),u=s.disconnect,c=s.getStats,d=s.send;return{disconnectFromMain:u,getStats:c,sendToMain:d}}l.connectToMain=e}),98);
__d("VideoPlayerNextgendashEngineConfig",["SidneeAbrConfigUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.videoPreferredMinimumSmallestDimension;return{sidneeConfig:o("SidneeAbrConfigUtils").createSidneeAbrConfig(),videoPreferredMinimumSmallestDimension:t}}l.createVideoPlayerNextgendashABRConfig=e}),98);
__d("VideoPlayerNextgendashEngineErrors",["nextgendasherr"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,r,a){var i;return{createdTimestamp:Date.now(),errorLocation:n,errorMessageFormat:(r!=null&&r!==""?r+" :: ":a!=null&&a.length>0?a.map(function(){return"%s"}).join(" ")+" :: ":"")+t.messageFormat,errorMessageParams:((i=a==null?void 0:a.map(function(e){return String(e)}))!=null?i:[]).concat(t.messageParams),errorName:o("nextgendasherr").reduceCardinalityOfNextgendashErrorName(t.name)}}l.createVideoPlayerErrorFromNextgendashEngine=e}),98);
__d("VideoPlayerNextgendashQPL",["emptyFunction","nextgendasherr","performance"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e){return e==null?{}:{string:{error:o("nextgendasherr").reduceCardinalityOfNextgendashErrorName(e.name),errorMessageFormat:e.messageFormat},string_array:{errorMessageParams:e.messageParams}}}var c=["bool","bool_array","double","double_array","int","int_array","string","string_array"];function d(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.filter(Boolean);if(r.length!==0){for(var o={},a=0;a<r.length;++a){var i=r[a];if(i!=null)for(var l=0;l<c.length;++l){var s=c[l];(o[s]!=null||i[s]!=null)&&(o[s]=Object.assign({},o[s],i[s]))}}return o}}var m=0;function p(e,t){return e+"."+(t!=null?t:"")}function _(e){var t=e.loggingState.metadata.nextgendashInstanceIndex;t==null&&(++m,t=Number.MAX_SAFE_INTEGER-m,e.logging.log(e,{error:o("nextgendasherr").nextgendasherr(e,"VideoPlayerNextgendashQPLStartPlayingWithFallbackInstanceKey","START_PLAYING QPL API created with fallback instance key (%s).",t),type:"generic_error_as_warning"}));var n=h(e,"START_PLAYING",t);return n}var f=new Map,g={endWithAbort:s=r("emptyFunction"),endWithError:s,endWithSuccess:s,point:s,start:s,subspan:s.thatReturns(s)};function h(t,n,a){var i,l=p(n,a),s=f.get(l);if(s!=null)return s;var c=!1,m=!1,_=new Map,h=new Set,y="nextgendash:"+((i=t.loggingState.metadata.playerInstanceKey)!=null?i:a),b=y+":start",v=y+":end";function S(e){return e!=null?e:C(t)}function R(o){if(!(c||m)){c=!0,t.logging.log(t,{qplCall:{event:n,instanceKey:a,method:"markerStart",timestamp:S(o)},type:"qpl_call"}),t.config.isInWorkerType==null&&t.logging.log(t,{qplCall:{annotations:{int:{clientRev:t.loggingState.metadata.clientRev,cometEnv:t.loggingState.metadata.cometEnv,dev:void 0,nextgendashInstanceIndex:t.loggingState.metadata.nextgendashInstanceIndex},string:{playerInstanceKey:t.loggingState.metadata.playerInstanceKey,playerSubOrigin:t.loggingState.metadata.playerSubOrigin,videoFBID:t.loggingState.metadata.videoFBID}},event:n,instanceKey:a,method:"markerAnnotate"},type:"qpl_call"});try{(e||(e=r("performance"))).mark(b)}catch(e){}}}function L(e){t.config.isInWorkerType==null?R(e):m||(c=!0)}function E(){return t.config.qplMarkersEnded.includes(l)?(k(),!0):!1}function k(){m=!0,_.clear(),h.clear(),f.set(l,g)}var I=/(_(?:(?:start)|(?:begin)|(?:finish)|(?:end)|(?:success)))$/;function T(e,t){var n=e+":"+t,r=t,o=_.get(n);if(o!=null){I.lastIndex=0,r=r.replace(I,"_"+o+"$1"),r===t&&(r=t+"_"+o);var a=5;o>a&&(r=t+"_"+a+"_more"),o+=1}else o=1;return _.set(n,o),r}function D(o,i,l){if(!(m||E())){Array.from(h).reverse().forEach(function(e){e({bool:{markerEnd:!0}})}),i!=null&&t.logging.log(t,{qplCall:{annotations:i,event:n,instanceKey:a,method:"markerAnnotate"},type:"qpl_call"}),t.logging.log(t,{qplCall:{action:o!=null?o:"END",event:n,instanceKey:a,method:"markerEnd",timestamp:S(l)},type:"qpl_call"});try{(e||(e=r("performance"))).mark(v),e.measure(y,b,v)}catch(e){}k()}}function x(e,t){D("SUCCESS",e,t)}function $(e,t){D("ABORTED",e,t)}function P(e,t,n){D("FAIL",d(u(e),t),n)}function N(o,i,l){t.logging.log(t,{qplCall:{annotations:i,event:n,instanceKey:a,method:"markerPoint",point:o,timestamp:S(l)},type:"qpl_call"});try{(e||(e=r("performance"))).mark(y+":"+o)}catch(e){}}function M(e,n,r){var a;if(!(m||E())){I.lastIndex=0;var i=(a=I.exec(e))!=null?a:[],l=i[1];if(l!=null)throw o("nextgendasherr").nextgendasherr(t,"VideoPlayerNextgendashQPLUseSubspanAPI",'QPL point "'+e+'" suffix "'+l+'" reserved for subspans.');var s=S(r);L(s),N(T("point",e),n,s)}}function w(t,n,o){if(m||E())return r("emptyFunction");var a=S(o);L(a);var i=T("subspan",t+"_start");N(i,n,a);var l=!1,s=function(o,a){if(h.delete(s),!(!c||m||l||E())){N(i.replace(/_start$/,"_end"),d(n,o),S(a));try{(e||(e=r("performance"))).measure(y+":"+i.replace(/_start$/,""),y+":"+i,y+":"+i.replace(/_start$/,"_end"))}catch(e){}l=!0}};return h.add(s),s}var A={endWithAbort:$,endWithError:P,endWithSuccess:x,point:M,start:R,subspan:w};return f.set(l,A),A}function y(e,t){return e.host.clockPerfOriginMs+t.perfMs}function C(e){return e.host.clockPerfOriginMs+e.host.clock().perfMs}l.qplAnnotationsForError=u,l.qplAnnotationsMerge=d,l.qplCacheKey=p,l.qplStartPlayingApi=_,l.qplEventApi=h,l.qplTimestampFromClockstamp=y,l.qplTimestampFromNow=C}),98);
__d("VideoPlayerNextgendashRetryLogic",["VideoPlayerNextgendashStateMachine"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=e.initialDelayMs*Math.pow(e.backoffMultiplier,t),r=Math.min(n,e.maxDelayMs),o=(Math.random()*2-1)*e.jitterPercent,a=r*(1+o);return Math.max(0,Math.round(a))}var s=o("VideoPlayerNextgendashStateMachine").defineStateMachine(null,function(e){var t=e.args,n=t.retryConfig,r=t.retryReason;return babelHelpers.extends({},n,{retryReason:r,state:"waiting_schedule_retry"})},function(t){var n=t.args,r=n.onAttempt,o=n.onExhausted,a=n.retryConfig,i=n.retryReason,l=t.env,s=t.event,u=t.eventClock,c=t.sendToSelf,d=t.state,m=t.unexpectedEvent;switch(d.state){case"waiting_schedule_retry":switch(s.type){case"schedule_retry":switch(d.retryBehavior){case"linear":{var p=d.retryState,_=p!=null?p:{retryCountRemaining:d.retryCount,retryIndex:-1,retryLastAttemptedClock:void 0,retryLastScheduledClock:void 0,retryTimerID:void 0};if(l.host.timers.clearTimeout(_.retryTimerID),_.retryCountRemaining>0){var f=l.host.timers.setTimeout(function(){c({type:"_attempt"})},d.retryDelayMs),g=babelHelpers.extends({},_,{retryCountRemaining:_.retryCountRemaining-1,retryIndex:_.retryIndex+1,retryLastScheduledClock:u,retryTimerID:f});return babelHelpers.extends({},d,{retryState:g,state:"waiting_attempt"})}else return babelHelpers.extends({},d,{retryState:babelHelpers.extends({},_,{retryTimerID:void 0}),state:"exhausted"})}case"exponential":{var h=d.retryState,y=h!=null?h:{retryCountRemaining:d.retryCount,retryIndex:-1,retryLastAttemptedClock:void 0,retryLastScheduledClock:void 0,retryTimerID:void 0};if(l.host.timers.clearTimeout(y.retryTimerID),y.retryCountRemaining>0){var C=y.retryIndex+1,b={backoffMultiplier:d.backoffMultiplier,initialDelayMs:d.initialDelayMs,jitterPercent:d.jitterPercent,maxDelayMs:d.maxDelayMs,retryBehavior:"exponential",retryCount:d.retryCount},v=e(b,C),S=l.host.timers.setTimeout(function(){c({type:"_attempt"})},v),R=babelHelpers.extends({},y,{retryCountRemaining:y.retryCountRemaining-1,retryIndex:C,retryLastScheduledClock:u,retryTimerID:S});return babelHelpers.extends({},d,{retryState:R,state:"waiting_attempt"})}else return babelHelpers.extends({},d,{retryState:babelHelpers.extends({},y,{retryTimerID:void 0}),state:"exhausted"})}default:d.retryBehavior;return}case"_attempt":throw m("throw","Unexpected retry attempt");default:{s.type;return}}case"waiting_attempt":switch(s.type){case"schedule_retry":throw m();case"_attempt":switch(d.retryBehavior){case"linear":{var L=d.retryState;if(L!=null&&L.retryTimerID!=null){l.host.timers.clearTimeout(L.retryTimerID);var E=babelHelpers.extends({},L,{retryLastAttemptedClock:u,retryTimerID:void 0});return r({retryConfig:a,retryReason:i,retryState:E}),L.retryCountRemaining>0?babelHelpers.extends({},d,{retryState:E,state:"waiting_schedule_retry"}):babelHelpers.extends({},d,{retryState:E,state:"exhausted"})}else throw m("throw","Missing retryTimerID")}case"exponential":{var k=d.retryState;if(k!=null&&k.retryTimerID!=null){l.host.timers.clearTimeout(k.retryTimerID);var I=babelHelpers.extends({},k,{retryLastAttemptedClock:u,retryTimerID:void 0});return r({retryConfig:a,retryReason:i,retryState:I}),k.retryCountRemaining>0?babelHelpers.extends({},d,{retryState:I,state:"waiting_schedule_retry"}):babelHelpers.extends({},d,{retryState:I,state:"exhausted"})}else throw m("throw","Missing retryTimerID")}default:d.retryBehavior;return}default:{s.type;return}}case"exhausted":switch(s.type){case"__enter":{c({reason:"exhausted",type:"__dispose"});return}case"__exception":return;case"__dispose":return;default:throw m()}case"__disposed__":{switch(s.type){case"__enter":{var T=s.prevState;switch(T.retryBehavior){case"linear":{var D;l.host.timers.clearTimeout((D=T.retryState)==null?void 0:D.retryTimerID);break}case"exponential":{var x;l.host.timers.clearTimeout((x=T.retryState)==null?void 0:x.retryTimerID);break}default:T.retryBehavior;break}o()}}return}default:d.state}});l.calculateExponentialDelayWithJitter=e,l.VideoPlayerNextgendashRetryLogicSM=s}),98);
__d("VideoPlayerNextgendashMediaUtils",["nextgendasherr"],(function(t,n,r,o,a,i,l){"use strict";var e={byteLength:null,byteOffset:0};function s(e,t,n){if(t<0)throw o("nextgendasherr").nextgendasherr(e,"VideoPlayerNextgendashStartEndByteIndexInvalid","startByteIndex < 0 %s",JSON.stringify([t,n]));if(n<t)throw o("nextgendasherr").nextgendasherr(e,"VideoPlayerNextgendashStartEndByteIndexInvalid","endByteIndex < startByteIndex %s",JSON.stringify([t,n]));return{byteLength:n-t+1,byteOffset:t}}function u(e,t){if(t.byteOffset<0)throw o("nextgendasherr").nextgendasherr(e,"VideoPlayerNextgendashByteRangeInvalid","byteOffset < 0 %s",JSON.stringify(t));if(t.byteLength!=null&&t.byteLength<=0)throw o("nextgendasherr").nextgendasherr(e,"VideoPlayerNextgendashByteRangeInvalid","byteLength <= 0 %s",JSON.stringify(t));return[t.byteOffset,t.byteLength!=null?t.byteOffset+t.byteLength-1:null]}function c(e){var t=[];try{var n=e();if(n)for(var r=0,o=n.length;r<o;r++)t.push([n.start(r),n.end(r)])}catch(e){}return t}function d(e){return e.length>0?e.map(function(e){return m(e)}).join(","):"[]"}function m(e,t){return"["+e[0]+"s.."+e[1]+"s"+(t==null?"":t?"X":"~")+"]"}function p(e,t,n){return n===void 0&&(n=0),e[0]-n<=t&&t<=e[1]+n}function _(e,t,n){var r,o;return e!=null&&t!=null?(r=(o=t.findLast(function(t){var n=t[0],r=t[1];return n<=e&&e<=r}))==null?void 0:o[2])!=null?r:n:void 0}function f(e,t){return(e||"unknown")+'; codecs="'+t+'"'}function g(e){var t,n,r,o=/^([^;]+)(?:;\s*codecs=(?:(?:\"([^\"]*?)\")|([^;]*)))?.*$/i,a=(t=o.exec(e))!=null?t:[],i=a[1],l=a[2],s=a[3],u=i||"",c=l||s||"",d=c.split(",").map(function(e){return e.trim()}).filter(function(e){return e!==""}),m=(n=d[0])!=null?n:"",p=(r=m.split(".")[0])!=null?r:"",_=u.split("/"),f=_[0],g=_[1];return{codecFamily:p,codecs:c,containerType:g!=null?g:"",contentType:f!=null?f:"",mimeCodecs:e,mimeType:u}}function h(e){return e.mimeType+"/"+e.codecs}function y(e){var t=e.buffered,n=e.duration;return n!=="NOT_A_NUMBER"&&n>0&&Number.isFinite(n)&&t.length===1&&t[0][0]===0&&t[0][1]===n}l.ZERO_TO_EOF_OPEN_ENDED_BYTE_RANGE=e,l.makeByteRangeFromStartEndByteIndex=s,l.makeStartEndByteIndexFromByteRangeMaybeOpenEnded=u,l.snapshotTimeRanges=c,l.debugStringifyTimeRanges=d,l.debugStringifyTimeRange=m,l.isWithinRange=p,l.findTimeRangeAnnotationAtMediaTime=_,l.combineMimeTypeAndCodecs=f,l.parseMimeCodecs=g,l.debugStringifyMimeCodecs=h,l.isFullyBuffered=y}),98);
__d("VideoPlayerNextgendashManifestParser",["QualityScoreUtils","VideoPlayerNextgendashMediaUtils","fb-error","gkx","nextgendasherr"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return e}function s(e){return e}function u(e,t,n,a){for(var i=arguments.length,l=new Array(i>4?i-4:0),s=4;s<i;s++)l[s-4]=arguments[s];var u=o("nextgendasherr").nextgendasherr.apply(void 0,[e,"VideoPlayerNextgendashManifestParser/"+n,a+" :: MPD=%s"].concat(l,[JSON.stringify(t)]));return r("fb-error").TAAL.blameToPreviousFrame(u),u}function c(e,t,n){var a,i,l,s,c=n.audioOnly,m=n.baseURLFallback,C=(a=t.MPD)==null?void 0:a[0];if(!C)throw u(e,t,"NoMPD","Missing MPD root");var b=(i=C.Period)==null?void 0:i[0];if(!b)throw u(e,t,"NoPeriod","Missing MPD>Period[1]");var v=b.AdaptationSet;if(!v||v.length<=0)throw u(e,t,"NoAdaptationSet","Missing MPD>Period[1]>AdaptationSet");if(v.some(function(e){return e.Representation==null||e.Representation.length===0}))throw u(e,t,"SomeEmptyAdaptationSets","Some AdaptationSets contain no Representations");var S=function(a){var n,i,l,s,c,y,C,b,v,S,R,L,E,k,I,T,D=a.adaptationSetId,x=a.adaptationSetMimeType,$=a.adaptationSetXml,P=a.representationIndex,N=a.representationXml,M=(n=N.$.id)!=null?n:D+"-#"+P,w=(i=(l=N.$.mimeType)!=null?l:$.$.mimeType)!=null?i:"";if(w===""||w!==x){var A,F;throw u(e,t,"MimeTypeMismatch",'Representation id="%s" Representation>@mimeType="%s" and AdaptationSet>@mimeType="%s" mismatch',M,(A=N.$.mimeType)!=null?A:"",(F=$.$.mimeType)!=null?F:"")}var O=(s=(c=N.$.codecs)!=null?c:$.$.codecs)!=null?s:"";if(O===""){var B,W;e.logging.log(e,{error:u(e,t,"CodecsMissingOrEmpty",'Representation id="%s" Representation>@codecs="%s" and AdaptationSet>@codecs="%s" is missing or empty',M,(B=N.$.codecs)!=null?B:"",(W=$.$.codecs)!=null?W:""),type:"generic_error_as_warning"})}var q=o("VideoPlayerNextgendashMediaUtils").parseMimeCodecs(h(w,O));if(q.contentType===""||q.contentType==="unknown"||q.containerType===""){var U,V,H,G;throw u(e,t,"MimeCodecsParsedUnexpected",'Representation id="%s" missing contentType or containerType: %s; AdaptationSet>@mimeType="%s", AdaptationSet>@codecs="%s", Representation>@mimeType="%s", Representation>@codecs="%s"',M,JSON.stringify(q),(U=$.$.mimeType)!=null?U:"",(V=$.$.codecs)!=null?V:"",(H=N.$.mimeType)!=null?H:"",(G=N.$.codecs)!=null?G:"")}var z=$.$.FBVariantKey==="und"?null:(y=$.$.FBVariantKey)!=null?y:null,j=$.$.lang==="und"?null:(C=$.$.lang)!=null?C:null,K=(b=(v=$.Role)==null||(v=v[0])==null?void 0:v.$.value)!=null?b:null,Q=Number(N.$.bandwidth);if(!Number.isFinite(Q)||Q<=0)throw u(e,t,"RepresentationBandwidthInvalid",'Representation id="%s" Representation>@bandwidth is missing or invalid: %s',M,N.$.bandwidth);var X=N.$.FBPlaybackResolutionMos,Y=N.$.FBPlaybackResolutionCsvqm,J=r("gkx")("8123"),Z=J&&X!=null?o("QualityScoreUtils").parseQualityScoreCurve(X):null,ee=J&&Y!=null?o("QualityScoreUtils").parseQualityScoreCurve(Y):null,te=N.$.FBQualityLabel,ne=((S=N.$.FBAbrPolicyTags)!=null?S:"").split(",").map(function(e){return e.trim()}).filter(function(e){return e!==""}),re=(R=N.ContentProtection)!=null?R:$.ContentProtection,oe=re==null||(L=re.map(function(e){var t,n=e.$.schemeIdUri;return n==null?null:{cencPsshBase64:(t=e["cenc:pssh"])==null||(t=t[0])==null||(t=t._)==null?void 0:t.replace(/-/g,"+").replace(/_/g,"/"),schemeIdUri:n}}))==null?void 0:L.filter(Boolean),ae=(E=(k=N.BaseURL)==null||(k=k[0])==null?void 0:k._)!=null?E:m;if(ae==null)throw u(e,t,"RepresentationBaseURLMissingAndNoFallback",'Representation id="%s" Representation>BaseURL is missing and no fallback was provided',M);var ie,le=(I=N.SegmentBase)==null?void 0:I[0],se=(T=N.SegmentTemplate)==null?void 0:T[0];if(le!=null){var ue,ce=(ue=le.Initialization)==null?void 0:ue[0];if(ce==null)throw u(e,t,"SegmentBaseInitializationMissing",'Representation id="%s" SegmentBase>Initialization is missing',M);var de=g(e,t,M,"SegmentBase>Initialization>@range",ce.$.range),me=g(e,t,M,"SegmentBase>@indexRange",le.$.indexRange);if(le.$.indexRangeExact==="false")throw u(e,t,"SegmentBaseIndexRangeExactFalseUnsupported",'Representation id="%s" SegmentBase>@indexRangeExact="false" is unsupported',M);ie={baseURL:ae,indexByteRange:o("VideoPlayerNextgendashMediaUtils").makeByteRangeFromStartEndByteIndex(e,me[0],me[1]),initByteRange:o("VideoPlayerNextgendashMediaUtils").makeByteRangeFromStartEndByteIndex(e,de[0],de[1]),type:"SegmentBase"}}else if(se!=null){var pe,_e=se.$.media;if(_e==null)throw u(e,t,"SegmentTemplateMediaMissing",'Representation id="%s" SegmentTemplate>@media is missing',M);var fe=se.$.initialization;if(fe==null)throw u(e,t,"SegmentTemplateInitializationMissing",'Representation id="%s" SegmentTemplate>@initialization is missing',M);var ge=f(e,t,M,"SegmentTemplate>@timescale",se.$.timescale,p),he=se.$.startNumber!=null?f(e,t,M,"SegmentTemplate>@startNumber",se.$.startNumber,_):null,ye=(pe=se.SegmentTimeline)==null?void 0:pe[0];if(ye==null)throw u(e,t,"SegmentTimelineMissing",'Representation id="%s" SegmentTemplate>SegmentTimeline is missing',M);var Ce=d(e,t,M,ye);ie={baseURL:ae,initURL:fe,segmentTimeline:Ce,segmentURLTemplate:_e,startNumber:he,timescale:ge,type:"SegmentTemplate"}}else throw u(e,t,"SegmentsInfoInvalid",'Representation id="%s" SegmentBase and SegmentTemplate are missing',M);return{abrPolicyTags:ne,bandwidth:Q,contentProtections:oe,lang:j,mimeCodecsParsed:q,playbackResolutionCsvqmScoreCurve:Y,playbackResolutionCsvqmScoreCurveParsed:ee,playbackResolutionMosScoreCurve:X,playbackResolutionMosScoreCurveParsed:Z,qualityLabel:te,representationId:M,role:K,segmentsInfo:ie,variantKey:z}},R=function(t,n){var e=Number.parseInt(t!=null?t:"",10),r=Number.parseInt(n!=null?n:"",10);return Number.isSafeInteger(e)&&Number.isSafeInteger(r)&&e>0&&r>0?{height:r,width:e}:null},L=function(r){var n=S(r),o=r.adaptationSetXml,a=r.representationXml,i=R(a.$.width,a.$.height),l=R(o.$.width,o.$.height),s=i!=null?i:l;if(s==null)throw u(e,t,"InvalidWidthHeight",'Representation width and/or height attributes are invalid: Representation id="%s" width=%s height=%s, AdaptationSet id="%s" width=%s height=%s',n.representationId,String(a.$.width),String(a.$.height),String(o.$.id),String(o.$.width),String(o.$.height));return babelHelpers.extends({},n,{height:s.height,type:"video",width:s.width})},E=function(t){return babelHelpers.extends({},S(t),{type:"audio"})},k=function(t){return babelHelpers.extends({},S(t),{type:"application"})},I=function(t){if(t.$.mimeType!=null)return t.$.mimeType;var e=t.Representation;return e&&e.length>0&&e[0].$.mimeType!=null?e[0].$.mimeType:null},T=v.findLast(function(e){return e.Representation!=null&&e.Representation.length>0}),D=v.map(function(e){return e.$.id}),x=new Set(D).size===D.length,$=v.reduce(function(n,r,o){var a,i,l,s=(a=x?r.$.id:void 0)!=null?a:"id-mpdas-"+o,d=r===T,m=(i=I(r))!=null?i:"",p=((l=r.Representation)!=null?l:[]).map(function(e,t){return{adaptationSetId:s,adaptationSetMimeType:m,adaptationSetXml:r,representationIndex:t,representationXml:e}}),_={adaptationSetId:s,adaptationSetIsLastNonEmpty:d,adaptationSetMimeType:m},f;return m.indexOf("video")===0?c||(f=babelHelpers.extends({},_,{representations:p.map(L),type:"video"})):m.indexOf("audio")===0?f=babelHelpers.extends({},_,{representations:p.map(E),type:"audio"}):m.indexOf("application")===0?f=babelHelpers.extends({},_,{representations:p.map(k),type:"application"}):e.logging.log(e,{error:u(e,t,"UnsupportedAdaptationSet",'Unsupported mimeType="%s" resolved for AdaptationSet id="%s" at index %s',s,m,String(o)),type:"generic_error_as_warning"}),f&&n.push(f),n},[]),P=$.map(function(e){var t=e.representations;return t}).flat();if(P.length===0)throw u(e,t,"NoRepresentations","Not found any Representations in any of %s AdaptationSets",String($.length));var N=$.map(function(e){return e.adaptationSetId});if(new Set(N).size<N.length)throw u(e,t,"NonUniqueAdaptationSetID","AdaptationSet ids are required to be unique within the manifest: %s",N.join(","));var M=P.map(function(e){return e.representationId});if(new Set(M).size<M.length)throw u(e,t,"NonUniqueRepresentationID","Representation ids are required to be unique within the manifest: %s",M.join(","));var w=c?null:y(e,$.map(function(e){return e.type==="video"?e:null}).filter(Boolean)),A=y(e,$.map(function(e){return e.type==="audio"?e:null}).filter(Boolean)),F=$.map(function(e){return e.type==="application"?e.representations:null}).filter(Boolean).flat();if(w!=null){if(w.selected.length===0)throw w.ignored.size>0?u(e,t,"AllVideoRepresentationsIgnored","All video representations ignored: %s",Array.from(w.ignored.entries()).map(function(e){var t=e[0],n=e[1];return t.representationId+":"+n}).join("; ")):u(e,t,"NoVideoRepresentations","Not found any video representations, found: %s",P.map(function(e){return e.representationId+":"+o("VideoPlayerNextgendashMediaUtils").debugStringifyMimeCodecs(e.mimeCodecsParsed)}).join("; "));w.ignored.size>0&&e.logging.log(e,{error:u(e,t,"IgnoredVideoRepresentations","Some video representations ignored: %s",Array.from(w.ignored.entries()).map(function(e){var t=e[0],n=e[1];return t.representationId+":"+n}).join("; ")),type:"generic_error_as_warning"})}function O(e){return new Set(e.map(function(e){return[e.mimeCodecsParsed.contentType,e.mimeCodecsParsed.containerType,e.mimeCodecsParsed.codecFamily].join("/")})).size>1}var B=O((l=w==null?void 0:w.selected)!=null?l:[]),W=O(A.selected);return{audioOnly:c,createdAt:e.host.clock(),debugXml:e.config.debugViz||e.config.debugLog?C:void 0,manifestRepresentations:{application:F,audio:A.selected,video:(s=w==null?void 0:w.selected)!=null?s:[]},metadata:{manifestIsLiveTemplated:C.$.FBIsLiveTemplated==="true",manifestIsMixedCodecAudio:W,manifestIsMixedCodecVideo:B,manifestType:C.$.type==="dynamic"?"dynamic":"static"}}}function d(e,t,n,r){var o,a=((o=r.S)!=null?o:[]).map(function(r,o){return{d:f(e,t,n,"SegmentTimeline>S["+(o+1)+"]>@d",r.$.d,p),id:r.$.id==null?void 0:f(e,t,n,"SegmentTimeline>S["+(o+1)+"]>@id",r.$.id,_),r:r.$.r==null?0:f(e,t,n,"SegmentTimeline>S["+(o+1)+"]>@r",r.$.r,_),t:f(e,t,n,"SegmentTimeline>S["+(o+1)+"]>@t",r.$.t,_)}}),i=a.filter(function(e){return e.id!=null});if(i.length>0&&i.length<a.length)throw u(e,t,"SegmentTimelineMissingSomeIds",'Representation id="%s" SegmentTimeline should either have or not have @id on every S tag; found on %s out of %s tags',n,i.length,a.length);return a}function m(e){return Number.isFinite(e)?null:'not a finite integer, expected format: "123"'}function p(e){return e>0?null:"not a positive integer"}function _(e){return e>=0?null:"not a positive integer or zero"}function f(e,t,n,r,o,a){var i=parseInt(o,10),l=m(i);if(l==null&&a!=null&&(l=a(i)),l!=null)throw u(e,t,"VideoPlayerNextgendashManifestParserInvalidNumberInteger["+r+"]",'Representation id="%s" %s "%s" is missing or invalid ('+l+")",n,r,o);return i}function g(e,t,n,r,o){var a=o==null?void 0:o.split("-").map(Number);if(a==null||a.length!==2)throw u(e,t,"InvalidRange["+r+"]",'Representation id="%s" %s "%s" is missing or invalid (expected format: "start-end")',n,r,o);return[a[0],a[1]]}function h(e,t){return e+'; codecs="'+t+'"'}function y(e,t){var n=[],r=new Map;return t.forEach(function(t){for(var o of t.representations){if(o.abrPolicyTags.includes("avoid_on_abr")&&!t.adaptationSetIsLastNonEmpty){r.set(o,"avoid_on_abr");continue}if(!e.host.mediaSourceIsTypeSupported(e,o.mimeCodecsParsed.mimeCodecs)){r.set(o,"codec_not_supported");continue}n.push(o)}}),{ignored:r,selected:n}}function C(e){var t=e.height,n=e.qualityLabel;return n==null||n===""?String(t)+"p":n!=null?n:""}function b(e){var t=e.lang,n=e.role,r=t!=null?t:"Default";return n!=null?r+" - "+n:r}l.makeVideoPlayerNextgendashOpaqueManifestRepresentationId=e,l.unopaqueVideoPlayerNextgendashManifestRepresentationId=s,l.parseMPD=c,l.getDisplayLabelFromVideoRepresentation=C,l.getDisplayLabelFromAudioRepresentation=b}),98);
__d("VideoPlayerNextgendashURLUtils",["VideoPlayerNextgendashMediaUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return m(t)?t:d(e,t)}function s(e,t,n){var r=o("VideoPlayerNextgendashMediaUtils").makeStartEndByteIndexFromByteRangeMaybeOpenEnded(e,n),a=r[0],i=r[1];return t+(t.indexOf("?")===-1?"?":"&")+"bytestart="+a+(i!=null?"&byteend="+i:"")}function u(e){var t=e,n=t.lastIndexOf("/"),r=t.lastIndexOf("://");return n>r+2&&(t=t.substring(0,n+1)),t}function c(e){var t=e;return t=u(t),t.endsWith("/")?u(t.substring(0,t.length-1)):t}function d(e,t){for(var n=u(e),r=t;r.length;)if(r.startsWith("./"))r=r.substring(2);else if(r.startsWith("../"))r=r.substring(3),n=c(n),n.endsWith("/")&&(n=n.substring(0,n.length-1));else if(r.startsWith(".."))r=r.substring(2),n=c(n);else if(r.startsWith("."))r=r.substring(1);else break;return r&&r.length&&(n.endsWith("/")||(n+="/"),n+=r),n}function m(e){var t=/^https?:\/\//i;return t.test(e)}l.combineSegmentTemplateURL=e,l.addByteRangeParamsToURL=s}),98);
__d("VideoPlayerNextgendashWorkerPrefetchCache",["Promise","QualityScoreUtils","VideoPlayerNextgendashABR","VideoPlayerNextgendashManifestParser","VideoPlayerNextgendashMediaUtils","VideoPlayerNextgendashURLUtils","gkx","nextgendasherr"],(function(t,n,r,o,a,i,l){"use strict";var e,s=new Map;function u(e){var t=s.get(e);return t||(t=new Map,s.set(e,t)),t}function c(e,t,n){try{var r=u(t.prefetchKey);if(r.size>0)return;var a=e.host.networkDiagnosticsReadBandwidth();h(e,r,t.representations,n.devicePixelRatio,n.isDocumentHidden,n.prefetchResolutionThreshold,a!=null?a:n.bandwidthDiagnostics,n.abrConfig),_(e,r,t.representations)}catch(t){e.logging.log(e,{error:o("nextgendasherr").nextgendasherrFromCause(e,t,"VideoPlayerNextgendashInitiatePrefetchException"),type:"generic_error_as_warning"})}}function d(e,t,n){try{var r=u(t.prefetchKey);if(r.size>0)return[];var a=[],i=f(e,t.representations,n.devicePixelRatio,n.prefetchResolutionThreshold),l=p(t.representations),s={audio:l!=null?{audioRepresentation:l}:null,prefetchKey:t.prefetchKey,video:i.length>0?{abrConfig:n.abrConfig,devicePixelRatio:n.devicePixelRatio,initialBandwidthDiagnostics:n.bandwidthDiagnostics,isDocumentHidden:n.isDocumentHidden,videoRepresentationsByBandwidthAsc:i}:null};return(s.video!=null||s.audio!=null)&&a.push(s),a}catch(t){return e.logging.log(e,{error:o("nextgendasherr").nextgendasherrFromCause(e,t,"VideoPlayerNextgendashGetPrefetchTasksException"),type:"generic_error_as_warning"}),[]}}function m(t){var r=t.env,a=t.task;try{var i=u(a.prefetchKey),l=r.host.networkDiagnosticsReadBandwidth(),s=[];if(a.video!=null){var c=g(a.video.videoRepresentationsByBandwidthAsc,a.video.devicePixelRatio,a.video.isDocumentHidden,l!=null?l:a.video.initialBandwidthDiagnostics,a.video.abrConfig);c!=null&&s.push(E(r,i,c))}return a.audio!=null&&s.push(E(r,i,a.audio.audioRepresentation)),s.length===0?null:{abort:function(){s.forEach(function(e){e.abort()})},promise:(e||(e=n("Promise"))).all(s.map(function(e){return e.promise})).then(function(e){return e.flat()})}}catch(e){return r.logging.log(r,{error:o("nextgendasherr").nextgendasherrFromCause(r,e,"VideoPlayerNextgendashProcessPrefetchTaskException"),type:"generic_error_as_warning"}),null}}function p(e){var t=e.find(function(e){return e.mimeType.indexOf("audio")>-1});return t}function _(e,t,n){var r=p(n);r!=null&&E(e,t,r)}function f(e,t,n,r){var o=t.filter(function(e){return e.mimeType.indexOf("video")>-1}),a=S(e,o,n,r);return a.sort(function(e,t){return e.bandwidth-t.bandwidth}),a}function g(e,t,n,r,o){if(e.length===0)return null;var a=e[0],i=b(e,t,n,r,o),l=i!=null?i:a;return l}function h(e,t,n,r,o,a,i,l){var s=f(e,n,r,a),u=g(s,r,o,i,l);u!=null&&E(e,t,u)}var y=500,C=400;function b(e,t,n,r,a){var i=e.map(function(e){return v(e)}),l={height:y,width:C},s=o("VideoPlayerNextgendashABR").evaluateVideoPlayerNextgendashABRForVideo(i,{abrConfig:a,bandwidthDiagnostics:r,devicePixelRatio:t,isDocumentHidden:n,mediaDurationSec:NaN,playerDimensions:l,playheadMediaTimeSec:0,prefetchResult:null,sourceBufferBufferedRangesSec:[]});if(s.bestRepresentation==null)return null;var u=o("VideoPlayerNextgendashManifestParser").unopaqueVideoPlayerNextgendashManifestRepresentationId(s.bestRepresentation.representationId),c=e.find(function(e){return e.representationID===u});return c}function v(e){var t=r("gkx")("8789");return{abrPolicyTags:[],bandwidth:e.bandwidth,contentProtections:void 0,height:e.height,lang:null,mimeCodecsParsed:o("VideoPlayerNextgendashMediaUtils").parseMimeCodecs(o("VideoPlayerNextgendashMediaUtils").combineMimeTypeAndCodecs(e.mimeType,e.codecs)),playbackResolutionCsvqmScoreCurve:e.playbackResolutionCSVQM,playbackResolutionCsvqmScoreCurveParsed:t&&e.playbackResolutionCSVQM!=null?o("QualityScoreUtils").parseQualityScoreCurve(e.playbackResolutionCSVQM):null,playbackResolutionMosScoreCurve:e.playbackResolutionMOS,playbackResolutionMosScoreCurveParsed:t&&e.playbackResolutionMOS!=null?o("QualityScoreUtils").parseQualityScoreCurve(e.playbackResolutionMOS):null,qualityLabel:null,representationId:o("VideoPlayerNextgendashManifestParser").makeVideoPlayerNextgendashOpaqueManifestRepresentationId(e.representationID),role:null,segmentsInfo:{baseURL:e.baseURL,indexByteRange:{byteLength:1,byteOffset:0},initByteRange:{byteLength:1,byteOffset:1},type:"SegmentBase"},type:"video",variantKey:null,width:e.width}}function S(e,t,n,r){var a=t.filter(function(t){return e.host.mediaSourceIsTypeSupported(e,o("VideoPlayerNextgendashMediaUtils").combineMimeTypeAndCodecs(t.mimeType,t.codecs))}),i=a.filter(function(e){var t=Math.min(e.width,e.height);return t/n<=r});return i.length>0?i:a.length>0?[a[0]]:[]}function R(e,t,n){var r=e.get(t);r&&e.set(t,babelHelpers.extends({},r,{resultState:n}))}function L(t,r,a,i){var l=new AbortController,s=new(e||(e=n("Promise")))(function(e){t.host.fetch(t,a,{signal:l.signal}).then(function(t){var n={response:t,resultState:"has_response"};R(r,a,n),e(n)}).catch(function(n){var i={error:o("nextgendasherr").nextgendasherrFromFetchRejection(t,n,"VideoPlayerNextgendashPrefetchRejection"),resultState:"errored"};R(r,a,i),e(i)})}),u={abortController:l,representationID:i,resultState:{resultPromise:s,resultState:"pending"}};return r.set(a,u),u}function E(t,r,a){var i=[].concat(a.segments),l=[],s=[];if(t.config.enableCombinedInitSidxFetch&&i.length>=2){var u=i[0],c=i[1];if(u!=null&&c!=null&&c.start===u.end+1){var d=o("VideoPlayerNextgendashURLUtils").addByteRangeParamsToURL(t,a.baseURL,o("VideoPlayerNextgendashMediaUtils").makeByteRangeFromStartEndByteIndex(t,u.start,c.end)),m=L(t,r,d,a.representationID);l.push(m.resultState.resultPromise),s.push(m.abortController),i.shift(),i.shift()}else t.logging.log(t,{error:o("nextgendasherr").nextgendasherr(t,"VideoPlayerNextgendashPrefetchUnableToCombineInitAndSidx","Byte ranges: %s",JSON.stringify(i)),type:"generic_error_as_warning"})}return i.forEach(function(e){var n=o("VideoPlayerNextgendashURLUtils").addByteRangeParamsToURL(t,a.baseURL,o("VideoPlayerNextgendashMediaUtils").makeByteRangeFromStartEndByteIndex(t,e.start,e.end)),i=L(t,r,n,a.representationID);l.push(i.resultState.resultPromise),s.push(i.abortController)}),{abort:function(){s.forEach(function(e){e.abort()})},promise:(e||(e=n("Promise"))).allSettled(l)}}function k(e,t){var n=s.get(t),r=[];return n==null||n.forEach(function(e){var t=e.representationID;r.indexOf(t)===-1&&r.push(t)}),r.length>0?{prefetchedRepresentationIds:r,prefetchStartedAt:e.host.clock()}:null}function I(e,t,n){var o=s.get(t),a=null;return o&&(a=o.get(n),a&&(o.delete(n),r("gkx")("8806")&&o.size===0&&s.delete(t))),a!=null?e.logging.log(e,{odsCall:{entity:"comet_video_player",key:"NextgendashPrefetchCache.hit",sampleRate:1},type:"ods_call"}):e.logging.log(e,{odsCall:{entity:"comet_video_player",key:"NextgendashPrefetchCache.miss",sampleRate:1},type:"ods_call"}),a}l.internal_getOrAddPrefetchCacheEntry=u,l.initiatePrefetch=c,l.getPrefetchTasks=d,l.processPrefetchTask=m,l.internal_startFetchForPrefetch=L,l.getCachedRepresentationsForPrefetchKey=k,l.getCachedValueForPrefetchKeyAndURL=I}),98);
__d("VideoPlayerNextgendashFetchedResource",["Promise","VideoPlayerNextgendashNetworkDiagnosticsUtils","VideoPlayerNextgendashQPL","VideoPlayerNextgendashRetryLogic","VideoPlayerNextgendashStateMachine","VideoPlayerNextgendashWorkerPrefetchCache","gkx","nextgendasherr"],(function(t,n,r,o,a,i,l){"use strict";var e=["retryLogic"],s=["retryLogic"],u=["dataBytesLengthFlushed","streamReader","streamReaderDone","streamReaderFlushIntervalID"],c=["name"],d,m=new Set([404]);function p(){var e=r("gkx")("8495");return e?{fetchRejection:{backoffMultiplier:2,initialDelayMs:200,jitterPercent:.2,maxDelayMs:8e3,retryBehavior:"exponential",retryCount:20},httpNotOk:{backoffMultiplier:2,initialDelayMs:200,jitterPercent:.2,maxDelayMs:8e3,retryBehavior:"exponential",retryCount:20},httpNotOkUnrecoverable:{backoffMultiplier:2,initialDelayMs:200,jitterPercent:.2,maxDelayMs:2e3,retryBehavior:"exponential",retryCount:2},offline:{backoffMultiplier:1.5,initialDelayMs:1e3,jitterPercent:.3,maxDelayMs:3e4,retryBehavior:"exponential",retryCount:Number.POSITIVE_INFINITY},responseDataFailed:{backoffMultiplier:2,initialDelayMs:200,jitterPercent:.2,maxDelayMs:8e3,retryBehavior:"exponential",retryCount:20}}:{fetchRejection:{retryBehavior:"linear",retryCount:20,retryDelayMs:2e3},httpNotOk:{retryBehavior:"linear",retryCount:20,retryDelayMs:2e3},httpNotOkUnrecoverable:{retryBehavior:"linear",retryCount:2,retryDelayMs:2e3},offline:{retryBehavior:"linear",retryCount:Number.POSITIVE_INFINITY,retryDelayMs:5e3},responseDataFailed:{retryBehavior:"linear",retryCount:20,retryDelayMs:2e3}}}var _=p(),f=o("VideoPlayerNextgendashStateMachine").defineStateMachine(null,function(e){var t=e.args.request,n=e.env;return t.responseMode==="text"&&t.reportToBandwidthEstimator===!0&&n.logging.log(n,{error:o("nextgendasherr").nextgendasherr(n,"VideoPlayerNextgendashFetchedResourceReportToBandwidthEstimatorUnsupportedForTextResponses"),type:"generic_error_as_warning"}),{request:t,retryLogic:null,state:"waiting_start"}},function(t){var n=t.env,r=t.event,a=t.eventClock,i=t.makeChildSm,l=t.sendToOther,u=t.sendToSelf,c=t.state,d=t.unexpectedEvent;function p(e,t,r){var a=c.retryLogic,l=t+(r?"-"+r:"");if(a!=null&&(l===a.state.retryReason||a.state.state==="__disposed__"))return a;var s=_[t],d=s!=null?i("retryLogic-"+l,o("VideoPlayerNextgendashRetryLogic").VideoPlayerNextgendashRetryLogicSM,{onAttempt:function(r){u({request:babelHelpers.extends({},e,{attemptInfo:r,requestCreatedClock:n.host.clock()}),type:"_start_from_retry"})},onExhausted:function(){},onTransitioned:function(t,n,r){u({type:"_retry_logic_transitioned"},r)},retryConfig:s,retryReason:l}):null;return d}function f(e){var t,r,a,i=e.abortController;i!=null&&i.abort();var l=(t=(r=c.error)!=null?r:c.abortReason)!=null?t:c.exception,s=(a=e.requestAbortedClock)!=null?a:e.requestCompletedClock,u=e.state==="waiting_headers"?e.qplSubspanForHeadersEnd:void 0;u&&u(o("VideoPlayerNextgendashQPL").qplAnnotationsForError(l),s!=null?o("VideoPlayerNextgendashQPL").qplTimestampFromClockstamp(n,s):void 0);var d=e.state==="waiting_headers"||e.state==="waiting_data"?e.qplSubspanForRequestEnd:void 0;d&&d(o("VideoPlayerNextgendashQPL").qplAnnotationsForError(l),s!=null?o("VideoPlayerNextgendashQPL").qplTimestampFromClockstamp(n,s):void 0)}function y(){switch(r.type){case"__enter":{f(r.prevState);return}default:return}}switch(c.state){case"waiting_start":switch(r.type){case"__enter":return;case"__exception":return;case"__dispose":return;case"_retry_logic_transitioned":return;case"start":return g(n,c,u);case"abort_and_clear":return;default:throw r.type,d()}case"waiting_retry_or_failed":{var C=function(){var t=c.retryLogic,r=babelHelpers.objectWithoutPropertiesLoose(c,e),a=r.request.attemptInfo;return t!=null?t.state.state==="waiting_schedule_retry"?(l(t,{type:"schedule_retry"}),babelHelpers.extends({},c,{requestCompletedClock:null,requestStartedClock:null,responseData:null,responseHeader:null,state:"waiting_start_from_retry"})):t.state.state==="__disposed__"?babelHelpers.extends({},r,{error:a!=null?o("nextgendasherr").nextgendasherrFromCause(n,r.error,"VideoPlayerNextgendashFetchedResourceLastAttempt","Last attempt: %s",JSON.stringify(a,function(e,t){return typeof t=="number"&&!Number.isFinite(t)?String(t):t})):r.error,state:"failed"}):void 0:babelHelpers.extends({},r,{error:a!=null?o("nextgendasherr").nextgendasherrFromCause(n,r.error,"VideoPlayerNextgendashFetchedResourceLastAttempt","Last attempt: %s",JSON.stringify(a)):r.error,state:"failed"})};switch(r.type){case"__enter":return f(r.prevState),C();case"__exception":return;case"__dispose":return;case"_retry_logic_transitioned":return C();case"abort_and_clear":return{abortReason:r.abortReason,prefetchResultState:c.prefetchResultState,request:c.request,requestAbortedClock:a,requestCompletedClock:c.requestCompletedClock,requestStartedClock:c.requestStartedClock,responseData:null,responseHeader:null,state:"aborted"};default:throw r.type,d()}}case"waiting_start_from_retry":switch(r.type){case"__enter":return;case"__exception":return;case"__dispose":return;case"_retry_logic_transitioned":return;case"abort_and_clear":return{abortReason:r.abortReason,prefetchResultState:c.prefetchResultState,request:c.request,requestAbortedClock:a,requestCompletedClock:c.requestCompletedClock,requestStartedClock:c.requestStartedClock,responseData:null,responseHeader:null,state:"aborted"};case"_start_from_retry":{if(r.request.requestID!==c.request.requestID)throw d("throw","Request mismatch: %s !== %s",r.request.requestID,c.request.requestID);var b=c.retryLogic,v=babelHelpers.objectWithoutPropertiesLoose(c,s);return b==null||b.state.state==="__disposed__"?babelHelpers.extends({},v,{state:"failed"}):b.state.retryReason==="offline"&&!n.host.networkIsOnline()?(l(b,{type:"schedule_retry"}),babelHelpers.extends({},c,{state:"waiting_start_from_retry"})):(u({type:"start"}),{request:r.request,retryLogic:c.retryLogic,state:"waiting_start"})}default:throw r.type,d()}case"waiting_headers":switch(r.type){case"__enter":return;case"__exception":return{error:r.exception,prefetchResultState:c.prefetchResultState,request:c.request,requestCompletedClock:null,requestStartedClock:c.requestStartedClock,responseData:null,responseHeader:null,state:"failed"};case"__dispose":return;case"_retry_logic_transitioned":return;case"start":throw d("throw","Please 'abort_and_clear' first.");case"abort_and_clear":return{abortReason:r.abortReason,prefetchResultState:c.prefetchResultState,request:c.request,requestAbortedClock:a,requestCompletedClock:null,requestStartedClock:c.requestStartedClock,responseData:null,responseHeader:null,state:"aborted"};case"_aborted":return{abortReason:r.abortReason,prefetchResultState:c.prefetchResultState,request:c.request,requestAbortedClock:r.requestAbortedClock,requestCompletedClock:null,requestStartedClock:c.requestStartedClock,responseData:null,responseHeader:null,state:"aborted"};case"_fetch_rejection":return{error:r.error,prefetchResultState:c.prefetchResultState,request:c.request,requestCompletedClock:null,requestStartedClock:c.requestStartedClock,responseData:null,responseHeader:null,retryLogic:p(c.request,r.isOnline?"fetchRejection":"offline",r.isOnline?r.error.name:""),state:"waiting_retry_or_failed"};case"_headers":{var S=c.request;if(S===r.request){var R=r.fetchResponse,L={httpHeaders:R.headers,httpHeadersReceivedClock:r.httpHeadersReceivedClock,httpStatus:R.status,httpStatusOk:R.ok,httpStatusText:R.statusText},E=c.qplSubspanForHeadersEnd,k=E?{bool:{fetchResponseOK:R.ok},string:{fetchResponseStatus:String(R.status),fetchResponseStatusText:R.ok?void 0:String(R.statusText)}}:void 0;if(L.httpStatusOk){var I=h(n,a,S,R,u);return E&&E(k,o("VideoPlayerNextgendashQPL").qplTimestampFromClockstamp(n,r.httpHeadersReceivedClock)),{abortController:c.abortController,prefetchResultState:c.prefetchResultState,qplSubspanForRequestEnd:c.qplSubspanForRequestEnd,request:c.request,requestStartedClock:c.requestStartedClock,responseData:I,responseHeader:L,retryLogic:c.retryLogic,state:"waiting_data"}}else{var T=o("nextgendasherr").nextgendasherr(n,"VideoPlayerNextgendashFetchHTTP"+L.httpStatus,"Request "+c.request.qplName+" (%s) HTTP "+L.httpStatus+" "+L.httpStatusText+".",c.request.requestID);return E&&E(o("VideoPlayerNextgendashQPL").qplAnnotationsMerge(k,o("VideoPlayerNextgendashQPL").qplAnnotationsForError(T)),o("VideoPlayerNextgendashQPL").qplTimestampFromClockstamp(n,r.httpHeadersReceivedClock)),{error:T,prefetchResultState:c.prefetchResultState,request:c.request,requestCompletedClock:null,requestStartedClock:c.requestStartedClock,responseData:null,responseHeader:L,retryLogic:p(c.request,n.config.retryShorterForUnrecoverableHTTP&&m.has(L.httpStatus)?"httpNotOkUnrecoverable":"httpNotOk",String(L.httpStatus)),state:"waiting_retry_or_failed"}}}else{n.logging.log(n,{error:o("nextgendasherr").nextgendasherr(n,"VideoPlayerNextgendashFetchedResourceIrrelevantCompletion","Request "+r.request.qplName+" (%s) irrelevant "+r.type+" %sms after created, now running "+c.request.qplName+" (%s).",r.request.requestID,String(a.perfMs-r.request.requestCreatedClock.perfMs),c.request.requestID),type:"generic_error_as_warning"});return}}default:throw r.type,d()}case"waiting_data":switch(r.type){case"__enter":return;case"__exception":{var D=r.exception.name.startsWith("VideoPlayerNextgendashFetchResponseStreamReaderOffline");return{error:r.exception,prefetchResultState:c.prefetchResultState,request:c.request,requestCompletedClock:a,requestStartedClock:c.requestStartedClock,responseData:c.responseData,responseHeader:c.responseHeader,retryLogic:p(c.request,D?"offline":"responseDataFailed",D?"":r.exception.name),state:"waiting_retry_or_failed"}}case"__dispose":return;case"_done_text":{var x=c.responseData.state;if(x.state!=="reading_text")throw d();return{prefetchResultState:c.prefetchResultState,request:c.request,requestCompletedClock:a,requestStartedClock:c.requestStartedClock,responseData:{state:babelHelpers.extends({},x,{state:"done_text",text:r.text})},responseHeader:c.responseHeader,state:"completed"}}case"_done_buffer":{var $=c.responseData.state;if($.state!=="reading_buffer")throw d();var P=null;return c.request.reportToBandwidthEstimator===!0&&(P=o("VideoPlayerNextgendashNetworkDiagnosticsUtils").computeNetworkDiagnosticsSampleOnDone(n,c.request.requestInfo,{bytes:0,clock:$.startedReadingClock},a,r.buffer.byteLength),P&&n.host.networkDiagnosticsUpdate(P)),{prefetchResultState:c.prefetchResultState,request:c.request,requestCompletedClock:a,requestStartedClock:c.requestStartedClock,responseData:{state:babelHelpers.extends({},$,{buffer:r.buffer,networkDiagnosticsSample:P,state:"done_buffer"})},responseHeader:c.responseHeader,state:"completed"}}case"_done_chunks":return c;case"_done_stream":{var N=c.responseData.state;if(N.state!=="reading_stream"&&N.state!=="done_stream")throw d("throw",'responseData state is "'+N.state+'", not "reading_stream" or "done_stream".');return{prefetchResultState:c.prefetchResultState,request:c.request,requestCompletedClock:a,requestStartedClock:c.requestStartedClock,responseData:c.responseData,responseHeader:c.responseHeader,state:"completed"}}case"_retry_logic_transitioned":return;case"abort_and_clear":return{abortReason:r.abortReason,prefetchResultState:c.prefetchResultState,request:c.request,requestAbortedClock:a,requestCompletedClock:null,requestStartedClock:c.requestStartedClock,responseData:null,responseHeader:c.responseHeader,state:"aborted"};default:throw r.type,d()}case"completed":switch(r.type){case"abort_and_clear":return{abortReason:r.abortReason,prefetchResultState:c.prefetchResultState,request:c.request,requestAbortedClock:a,requestCompletedClock:c.requestCompletedClock,requestStartedClock:c.requestStartedClock,responseData:null,responseHeader:c.responseHeader,state:"aborted"};default:return y()}case"failed":return y();case"aborted":return y();case"__disposed__":return y();default:{c.state;return}}});function g(e,t,r){var a=e.host.clock(),i=t.request,l=e.loggingState.metadata.prefetchKey!=null?o("VideoPlayerNextgendashWorkerPrefetchCache").getCachedValueForPrefetchKeyAndURL(e,e.loggingState.metadata.prefetchKey,i.requestInfo):null,s=e.config.qplEnabled?o("VideoPlayerNextgendashQPL").qplStartPlayingApi(e):null,u=null,c=null;if(s){var m="fetch_"+i.qplName.replace(/:/g,"_")+(i.attemptInfo!=null?"_retry":"");u=s.subspan(m,{string:{fetchRequestID:i.requestID,fetchRetry:i.attemptInfo!=null?JSON.stringify({retryBehavior:i.attemptInfo.retryConfig.retryBehavior,retryCount:i.attemptInfo.retryConfig.retryCount,retryCountRemaining:i.attemptInfo.retryState.retryCountRemaining,retryIndex:i.attemptInfo.retryState.retryIndex,retryReason:i.attemptInfo.retryReason},function(e,t){return t===Number.POSITIVE_INFINITY?"Infinity":t}):void 0,prefetch:l!=null?l.resultState.resultState:"miss"}},o("VideoPlayerNextgendashQPL").qplTimestampFromClockstamp(e,a)),c=s.subspan(m+"_headers",{string:{fetchRequestID:i.requestID}},o("VideoPlayerNextgendashQPL").qplTimestampFromClockstamp(e,a))}var p=l?l.abortController:new AbortController;function _(e){switch(e.resultState){case"has_response":return(d||(d=n("Promise"))).resolve(e.response);case"errored":return(d||(d=n("Promise"))).reject(e.error)}}var f=l?l.resultState:null,g=f?"[prefetch:"+f.resultState+"]":"";return(d||(d=n("Promise"))).resolve().then(function(){return(f?f.resultState==="pending"?f.resultPromise.then(_):_(f):e.host.fetch(e,i.requestInfo,{priority:e.config.fetchHighPri?"high":"auto",signal:p.signal})).then(function(t){var n=e.host.clock();r({fetchResponse:t,httpHeadersReceivedClock:n,request:i,type:"_headers"})},function(t){var n=typeof t=="object"&&t!=null&&typeof t.name=="string"&&(t.name==="AbortError"||t.name.endsWith("/AbortError"));if(n){var a=e.host.clock(),l=o("nextgendasherr").nextgendasherrFromCause(e,t,"VideoPlayerNextgendashFetchedResourceAborted","Request "+i.qplName+" (%s) is aborted.",i.requestID);c&&c(o("VideoPlayerNextgendashQPL").qplAnnotationsForError(l),o("VideoPlayerNextgendashQPL").qplTimestampFromClockstamp(e,a)),r({abortReason:l,request:i,requestAbortedClock:a,type:"_aborted"})}else{var s=e.host.clock(),u=e.host.networkIsOnline(),d=u?"VideoPlayerNextgendashFetchedResourceFetchFailure"+g:"VideoPlayerNextgendashFetchedResourceOffline"+g,m=u?"Request "+i.qplName+" (%s) failed to start. %s":"Request "+i.qplName+" (%s) failed to start while offline. %s",p=o("nextgendasherr").nextgendasherrFromFetchRejection(e,t,d,m,i.requestID,y(e,i));c&&c(o("VideoPlayerNextgendashQPL").qplAnnotationsForError(p),o("VideoPlayerNextgendashQPL").qplTimestampFromClockstamp(e,s)),r({error:p,isOnline:u,request:i,requestFetchFailedClock:s,type:"_fetch_rejection"})}})}).catch(function(t){var n=e.host.clock(),a=o("nextgendasherr").nextgendasherrFromCause(e,t,"VideoPlayerNextgendashFetchedResourceFetchException"+g,"Request "+i.qplName+" (%s) failed to start. %s",i.requestID,y(e,i));c&&c(o("VideoPlayerNextgendashQPL").qplAnnotationsForError(a),o("VideoPlayerNextgendashQPL").qplTimestampFromClockstamp(e,n)),r({exception:a,type:"__exception"})}),{abortController:p,prefetchResultState:f==null?void 0:f.resultState,qplSubspanForHeadersEnd:c,qplSubspanForRequestEnd:u,request:i,requestStartedClock:a,retryLogic:t.retryLogic,state:"waiting_headers"}}function h(e,t,n,r,a){switch(n.responseMode){case"text":return r.text().then(function(e){a({text:e,type:"_done_text"})},function(t){var r=e.host.networkIsOnline(),i=r?"VideoPlayerNextgendashFetchResponseTextRejection":"VideoPlayerNextgendashFetchResponseTextOffline",l=r?"Request "+n.qplName+" (%s) failed to read text.":"Request "+n.qplName+" (%s) failed to read text while offline.";a({exception:o("nextgendasherr").nextgendasherrFromFetchRejection(e,t,i,l,n.requestID),type:"__exception"})}).catch(function(t){a({exception:o("nextgendasherr").nextgendasherrFromCause(e,t,"VideoPlayerNextgendashFetchResponseTextException","Request "+n.qplName+" (%s) failed to read text.",n.requestID),type:"__exception"})}),{state:{startedReadingClock:t,state:"reading_text"}};case"buffer":return r.arrayBuffer().then(function(e){a({buffer:new Uint8Array(e),type:"_done_buffer"})},function(t){var r=e.host.networkIsOnline(),i=r?"VideoPlayerNextgendashFetchResponseBufferRejection":"VideoPlayerNextgendashFetchResponseBufferOffline",l=r?"Request "+n.qplName+" (%s) failed to read buffer.":"Request "+n.qplName+" (%s) failed to read buffer while offline.";a({exception:o("nextgendasherr").nextgendasherrFromFetchRejection(e,t,i,l,n.requestID),type:"__exception"})}).catch(function(t){a({exception:o("nextgendasherr").nextgendasherrFromCause(e,t,"VideoPlayerNextgendashFetchResponseBufferException","Request "+n.qplName+" (%s) failed to read buffer.",n.requestID),type:"__exception"})}),{state:{startedReadingClock:t,state:"reading_buffer"}};case"stream":{var i=function(r){var t=r.dataBytesLengthTotal;if(!(t<r.dataBytesLengthFlushed)){var i=e.host.clock(),l=null,s=r.bandwidthSamplingState;if(n.reportToBandwidthEstimator===!0){if(r.streamReaderDone){var c=o("VideoPlayerNextgendashNetworkDiagnosticsUtils").computeNetworkDiagnosticsSampleOnChunk(r.bandwidthSamplingState,i,t);l=c.networkDiagnosticsSample,s=c.nextBandwidthSamplingState}l&&e.host.networkDiagnosticsUpdate(l),l=o("VideoPlayerNextgendashNetworkDiagnosticsUtils").computeNetworkDiagnosticsSampleOnDone(e,n.requestInfo,s,i,t),l&&e.host.networkDiagnosticsUpdate(l)}if(r.streamReaderDone){var d=r.dataBytesLengthFlushed,m=r.streamReader,p=r.streamReaderDone,_=r.streamReaderFlushIntervalID,f=babelHelpers.objectWithoutPropertiesLoose(r,u);e.host.timers.clearInterval(_),g.state=babelHelpers.extends({},f,{networkDiagnosticsSample:l,state:"done_stream"}),a({type:"_done_stream"})}else r.bandwidthSamplingState=s,r.networkDiagnosticsSample=l,r.dataBytesLengthFlushed=t,a({type:"_done_chunks"})}},l=function(){var e=g.state;e.state==="reading_stream"&&i(e)},s=function(t){var e=g.state;if(e.state==="reading_stream")if(t.done)e.streamReaderDone=!0,i(e);else{var n=t.value;n.byteLength>0&&(e.chunks.push(n),e.dataBytesLengthTotal+=n.byteLength),m()}},c=function(r){var t=g.state;if(t.state==="reading_stream"){t.streamReaderDone=!0,i(t);var l=e.host.networkIsOnline(),s=l?"VideoPlayerNextgendashFetchResponseStreamReaderRejection":"VideoPlayerNextgendashFetchResponseStreamReaderOffline",u=l?"Request "+n.qplName+" (%s) failed to read chunk#%s.":"Request "+n.qplName+" (%s) failed to read chunk#%s while offline.";a({exception:o("nextgendasherr").nextgendasherrFromFetchRejection(e,r,s,u,n.requestID,t.chunks.length),type:"__exception"})}},d=function(r){var t=g.state;t.state==="reading_stream"&&(t.streamReaderDone=!0,i(t),a({exception:o("nextgendasherr").nextgendasherrFromCause(e,r,"VideoPlayerNextgendashFetchResponseStreamReaderException","Request "+n.qplName+" (%s) failed to read chunk#%s.",n.requestID,t.chunks.length),type:"__exception"}))},m=function(){var e=g.state;e.state==="reading_stream"&&e.streamReader.read().then(s,c).catch(d)},p=r.body;if(p==null)throw o("nextgendasherr").nextgendasherr(e,"VideoPlayerNextgendashFetchResponseStreamMissingBody");var _=500,f=e.host.clock(),g={state:{bandwidthSamplingState:{bytes:0,clock:f},chunks:o("VideoPlayerNextgendashStateMachine").skipAutoDisposeInsideThisObject([]),dataBytesLengthFlushed:0,dataBytesLengthTotal:0,networkDiagnosticsSample:null,startedReadingClock:f,state:"reading_stream",streamReader:p.getReader(),streamReaderDone:!1,streamReaderFlushIntervalID:e.host.timers.setInterval(l,_)}};return m(),g}default:throw n.responseMode,o("nextgendasherr").nextgendasherr(e,"VideoPlayerNextgendashFetchedResourceUnexpectedResponseMode","Request "+n.qplName+" (%s) unexpected responseMode="+n.responseMode+".",n.requestID,String(t.perfMs-n.requestCreatedClock.perfMs))}}function y(e,t){var n;try{var r=e.host.getPerformanceResourceTimingByName(t.requestInfo);n=JSON.stringify(r.map(function(e){var t=e.toJSON(),n=t.name,r=babelHelpers.objectWithoutPropertiesLoose(t,c);return r}))}catch(e){n="exception:"+String(e)}return"timings="+n}l.getFetchedResourceRetryConfig=p,l.fetchedResourceDefaultRetryConfig=_,l.VideoPlayerNextgendashFetchedResourceSM=f}),98);
__d("VideoPlayerNextgendashMediaElement",["VideoPlayerNextgendashMediaUtils","VideoPlayerNextgendashStateMachine","deepEquals","nextgendasherr"],(function(t,n,r,o,a,i,l){"use strict";var e=["currentTime","seeking"],s=["currentTime","seeking"],u=o("VideoPlayerNextgendashStateMachine").defineStateMachine(null,function(){return{isBuffering:!1,isBufferingInitial:!0,lastNonZeroNonErrorCurrentTimeSec:null,mediaElement:null,mediaElementSnapshot:null,mediaElementSnapshotBeforeErrorOccurred:null,mediaElementSnapshotClock:null,mediaElementUnsubscribe:null,mediaSource:null,mediaSourceHandle:null,mediaSourceIndex:null,playheadLastMovedClock:null,playheadWatchdogTimer:null,state:"idle"}},function(t){var n=t.args,a=n.getWorkaroundForSegmentBufferedInsufficientlyMediaTimeRanges,i=n.logPlayerWarning,l=n.onBufferingChanged,u=n.onMediaSourceAttachedChanged,m=n.onRequestRecoveryFromSourceReset,p=t.env,_=t.event,f=t.eventClock,g=t.sendToSelf,h=t.state,y=t.thisName,C=t.thisSm,b=function(){g({type:"_playhead_watchdog"})},v=function(t,n,r){var e=h.mediaElement;e!=null&&(p.host.mediaElementSetPlayhead(p,e,t),i(o("nextgendasherr").nextgendasherr(p,"VideoPlayerNextgendashMediaElementSkippedBufferGap","Buffers: %s, playhead: %s, skipped to: %s, reason: %s",JSON.stringify(n.buffered),n.currentTime,t,r)))};switch(h.state){case"idle":switch(_.type){case"__enter":return;case"__exception":return;case"__dispose":return;case"update_media_element":{var S,R=h.mediaElement,L=h.mediaElementUnsubscribe,E=(S=_.mediaElement)!=null?S:null;if(E===R){var k=h.mediaSourceIndex;if(E!==null&&p.config.recoverFromSrcReset&&k!==null&&(h.mediaSourceHandle!==null||h.mediaSource!==null)){var I=p.host.mediaElementCollectSnapshot(p,E);if(!I.mediaSourceAttached){i(o("nextgendasherr").nextgendasherr(p,"VideoPlayerNextgendashMediaElementRequestingSourceRecoveryFromSourceReset")),m(k);return}}p.logging.log(p,{format:"["+y+"] Ignored "+_.type+" with the same mediaElement=%s",params:[R],type:"generic_info"});return}else{L&&L(),R!=null&&p.host.mediaElementSetSource(p,R,null);var T=null;E!=null&&(T=p.host.mediaElementSubscribe(p,E,["durationchange","ended","error","pause","play","playing","progress","ratechange","seeked","seeking","timeupdate","volumechange","waiting"],function(t){var n=t.domEventAdjustedClock,a=t.domEventType,i=t.eventTarget,l=p.host.mediaElementCollectSnapshot(p,i);if(p.config.mediaElementSkipUpdateIfFullyBufferedAndOnlyPlayheadMoving){var u,c=l!=null?l:{},d=c.currentTime,m=c.seeking,_=babelHelpers.objectWithoutPropertiesLoose(c,e),f=(u=C.state.mediaElementSnapshot)!=null?u:{},h=f.currentTime,y=f.seeking,b=babelHelpers.objectWithoutPropertiesLoose(f,s);if(r("deepEquals")(_,b)&&o("VideoPlayerNextgendashMediaUtils").isFullyBuffered(l))return}g({domEventAdjustedClock:n,domEventType:a,mediaElementSnapshot:l,type:"_media_element_event"})}),h.mediaSourceHandle?p.host.mediaElementSetSource(p,E,{mediaSourceHandle:h.mediaSourceHandle},h.lastNonZeroNonErrorCurrentTimeSec!=null&&h.lastNonZeroNonErrorCurrentTimeSec!==0?{playheadMediaTimeSec:h.lastNonZeroNonErrorCurrentTimeSec}:void 0):h.mediaSource?p.host.mediaElementSetSource(p,E,{mediaSource:h.mediaSource},h.lastNonZeroNonErrorCurrentTimeSec!=null&&h.lastNonZeroNonErrorCurrentTimeSec!==0?{playheadMediaTimeSec:h.lastNonZeroNonErrorCurrentTimeSec}:void 0):p.host.mediaElementSetSource(p,E,null));var D=E!=null?p.host.mediaElementCollectSnapshot(p,E):null,x=f;return babelHelpers.extends({},d(p.config,h,f,D,null,l),c(p,h,b,a,v,u,D,x,_.type),{mediaElement:E,mediaElementUnsubscribe:T})}}case"update_media_source":{var $,P,N,M=h.mediaElement;M!=null&&(_.mediaSourceHandle?p.host.mediaElementSetSource(p,M,{mediaSourceHandle:_.mediaSourceHandle},h.lastNonZeroNonErrorCurrentTimeSec!=null&&h.lastNonZeroNonErrorCurrentTimeSec!==0?{playheadMediaTimeSec:h.lastNonZeroNonErrorCurrentTimeSec}:void 0):_.mediaSource?p.host.mediaElementSetSource(p,M,{mediaSource:_.mediaSource},h.lastNonZeroNonErrorCurrentTimeSec!=null&&h.lastNonZeroNonErrorCurrentTimeSec!==0?{playheadMediaTimeSec:h.lastNonZeroNonErrorCurrentTimeSec}:void 0):p.host.mediaElementSetSource(p,M,null));var w=h.mediaElement!=null?p.host.mediaElementCollectSnapshot(p,h.mediaElement):null,A=f;return babelHelpers.extends({},d(p.config,h,f,w,null,l),c(p,h,b,a,v,u,w,A,_.type),{mediaSource:($=_.mediaSource)!=null?$:null,mediaSourceHandle:(P=_.mediaSourceHandle)!=null?P:null,mediaSourceIndex:(N=_.mediaSourceIndex)!=null?N:null})}case"_media_element_event":{if(h.mediaElementSnapshotClock!=null&&_.domEventAdjustedClock.unixMs<=h.mediaElementSnapshotClock.unixMs)return;var F=_.mediaElementSnapshot,O=_.domEventAdjustedClock;return babelHelpers.extends({},d(p.config,h,f,F,_,l),c(p,h,b,a,v,u,F,O,_.type+":"+_.domEventType))}case"_playhead_watchdog":{var B=h.mediaElement!=null?p.host.mediaElementCollectSnapshot(p,h.mediaElement):null,W=f;return babelHelpers.extends({},d(p.config,h,f,B,null,l),c(p,h,b,a,v,u,B,W,_.type))}default:_.type;return}case"__disposed__":switch(_.type){case"__enter":{var q=_.prevState,U=q.mediaElement,V=q.mediaElementUnsubscribe;V&&V(),U!=null&&p.host.mediaElementSetSource(p,U,null);return}default:return}default:h.state}});function c(e,t,n,r,a,i,l,s,u){var c,d,m,p,_,f=t.mediaElement,g=t.mediaElementSnapshot,h=t.playheadLastMovedClock,y=t.playheadWatchdogTimer;y!=null&&e.host.timers.clearTimeout(y);var C=(c=l==null?void 0:l.currentTime)!=null?c:0,b=(d=g==null?void 0:g.currentTime)!=null?d:0,v=200,S=C===b,R=l!=null&&l.error==null&&!l.seeking&&!l.paused&&!l.ended&&l.buffered.length>0,L=C!==b||l!=null&&g==null?s:null,E=r();if(f!=null&&l!=null&&E!=null&&S&&h!=null&&s.perfMs-h.perfMs>=v&&R&&E.some(function(e){return o("VideoPlayerNextgendashMediaUtils").isWithinRange(e,C,0)})&&!l.buffered.some(function(e){return o("VideoPlayerNextgendashMediaUtils").isWithinRange(e,C,0)})){var k,I=(k=l.buffered.find(function(e){return e[0]>C}))==null?void 0:k[0];I!=null&&a(I,l,u+":SegmentBufferedInsufficiently")}var T=200,D=S&&(R||(l==null?void 0:l.seeking)===!0||(l==null?void 0:l.buffered.length)===0)?e.host.timers.setTimeout(n,T):null,x=(m=L!=null?L:h)!=null?m:null,$=(p=l==null?void 0:l.mediaSourceAttached)!=null?p:!1,P=(_=g==null?void 0:g.mediaSourceAttached)!=null?_:!1;return $!==P&&e.workQueue.enqueueWork(function(){i(s,$)}),{lastNonZeroNonErrorCurrentTimeSec:l!=null&&l.error==null&&l.currentTime!=null&&l.currentTime!==0?l.currentTime:t.lastNonZeroNonErrorCurrentTimeSec,mediaElementSnapshot:l,mediaElementSnapshotBeforeErrorOccurred:l==null||g==null?t.mediaElementSnapshotBeforeErrorOccurred:g.error==null&&l.error!=null?g:g.error!=null&&l.error==null?null:t.mediaElementSnapshotBeforeErrorOccurred,mediaElementSnapshotClock:s,playheadLastMovedClock:x,playheadWatchdogTimer:D}}function d(e,t,n,r,o,a){var i=t.isBuffering,l=t.isBufferingInitial&&((o==null?void 0:o.domEventType)==="play"||(o==null?void 0:o.domEventType)==="playing"||(r==null?void 0:r.paused)===!1)?!1:t.isBufferingInitial;if(t.isBuffering?(r==null||r.paused||m(r,e.bufferingEndBufferAheadSec))&&(i=!1):r!=null&&!r.paused&&!m(r,e.bufferingBeginBufferAheadSec)&&(i=!0),!t.isBuffering&&i||t.isBuffering&&!i){var s;a((s=o==null?void 0:o.domEventAdjustedClock)!=null?s:n,i,l)}return babelHelpers.extends({},t,{isBuffering:i,isBufferingInitial:l})}function m(e,t){for(var n=.2,r=e.currentTime,o=e.duration,a=null,i=0;i<e.buffered.length;i++){var l=e.buffered[i];if(l[0]<=r&&r<=l[1]){a=l;break}}var s=o!=="NOT_A_NUMBER"&&(a!=null&&Math.abs(a[1]-o)<=n||Math.abs(r-o)<=n);return s||a!=null&&a[1]-r>t}l.VideoPlayerNextgendashMediaElementSM=u}),98);
__d("VideoPlayerNextgendashParsedManifest",["VideoPlayerNextgendashManifestParser","VideoPlayerNextgendashStateMachine","nextgendasherr","videoUrlUtils"],(function(t,n,r,o,a,i,l){"use strict";var e=o("VideoPlayerNextgendashStateMachine").defineStateMachine(null,function(e){var t=e.args;return{dashManifestXmlString:null,expiredVideoUrlRefreshHandlerState:t.initialExpiredVideoUrlRefreshHandlerState,state:"not_parsed"}},function(e){var t=e.args.audioOnly,n=e.env,r=e.event,a=e.sendToSelf,i=e.state;if(i.state!=="__disposed__")switch(r.type){case"__enter":return;case"__exception":return;case"__dispose":return;case"parse_dash_manifest_xml":{var l=r.baseURLFallback,s=r.dashManifestXmlString;if(s==null)return{dashManifestXmlString:null,expiredVideoUrlRefreshHandlerState:i.expiredVideoUrlRefreshHandlerState,state:"not_parsed"};if(i.dashManifestXmlString!==s){try{var c=n.host.parseXML(n,s),d,m;try{d=o("VideoPlayerNextgendashManifestParser").parseMPD(n,c,{audioOnly:t,baseURLFallback:l})}catch(e){m=e}d!=null?a({dashManifestXml:c,data:d,type:"_parse_succeeded"}):a({dashManifestXml:c,error:o("nextgendasherr").nextgendasherrFromCause(n,m,"VideoPlayerNextgendashParsedManifestMPDParseError"),type:"_parse_failed"})}catch(e){a({dashManifestXml:null,error:o("nextgendasherr").nextgendasherrFromCause(n,e,"VideoPlayerNextgendashParsedManifestXMLParseError"),type:"_parse_failed"})}return babelHelpers.extends({},i,{dashManifestXmlString:s})}else return}case"_parse_succeeded":return{dashManifestXml:r.dashManifestXml,dashManifestXmlString:i.dashManifestXmlString,data:r.data,expiredVideoUrlRefreshHandlerState:i.expiredVideoUrlRefreshHandlerState,state:"parsed"};case"_parse_failed":return{dashManifestXml:r.dashManifestXml,dashManifestXmlString:i.dashManifestXmlString,error:r.error,expiredVideoUrlRefreshHandlerState:i.expiredVideoUrlRefreshHandlerState,state:"failed_to_parse"};case"handle_worker_url_refresh_request":{var p,_;if(i.state!=="parsed"){n.logging.log(n,{error:o("nextgendasherr").nextgendasherr(n,"VideoPlayerNextgendashParsedManifestUrlRefreshWhenNotParsed"),type:"generic_error_as_warning"});return}var f=(p=i.expiredVideoUrlRefreshHandlerState)==null?void 0:p.handler;if(f==null)return;var g=(_=i.manifestUrlRefreshPromises)!=null?_:new Map;return u({env:n,expiredVideoUrlRefreshHandler:f,refreshUrlInfos:new Set(r.urls),sendToSelf:a,urlToPromiseMap:g}),babelHelpers.extends({},i,{manifestUrlRefreshPromises:g})}case"_manifest_url_refresh_failed":{if(i.state!=="parsed"){n.logging.log(n,{error:o("nextgendasherr").nextgendasherr(n,"VideoPlayerNextgendashParsedManifestUrlRefreshWhenNotParsed"),type:"generic_error_as_warning"});return}return i.manifestUrlRefreshPromises&&i.manifestUrlRefreshPromises.delete(r.expiredURL),i}case"_manifest_url_refreshed":{var h=function(t){var e=babelHelpers.extends({},t);return e.baseURL=r.expiredURL===t.baseURL?r.refreshedURL:t.baseURL,t.type==="SegmentTemplate"&&e.type==="SegmentTemplate"&&(e.initURL=r.expiredURL===t.initURL?r.refreshedURL:t.initURL),e};if(i.state!=="parsed"){n.logging.log(n,{error:o("nextgendasherr").nextgendasherr(n,"VideoPlayerNextgendashParsedManifestUrlRefreshWhenNotParsed"),type:"generic_error_as_warning"});return}var y=i.data,C=babelHelpers.extends({},y,{createdAt:n.host.clock(),manifestRepresentations:{application:y.manifestRepresentations.application.map(function(e){return babelHelpers.extends({},e,{segmentsInfo:h(e.segmentsInfo)})}),audio:y.manifestRepresentations.audio.map(function(e){return babelHelpers.extends({},e,{segmentsInfo:h(e.segmentsInfo)})}),video:y.manifestRepresentations.video.map(function(e){return babelHelpers.extends({},e,{segmentsInfo:h(e.segmentsInfo)})})}});return i.manifestUrlRefreshPromises&&i.manifestUrlRefreshPromises.delete(r.expiredURL),babelHelpers.extends({},i,{data:C})}case"update_expired_video_url_refresh_handler":return babelHelpers.extends({},i,{expiredVideoUrlRefreshHandlerState:r.expiredVideoUrlRefreshHandlerState});default:r.type;return}}),s=30*6e4;function u(e){var t=e.env,n=e.expiredVideoUrlRefreshHandler,r=e.refreshUrlInfos,a=e.sendToSelf,i=e.urlToPromiseMap,l=t.host.clock(),u=new Set;for(var c of r){var d=o("videoUrlUtils").parseCdnUrlParams(c.url).expirationDate;if(d){var m=d.getTime();m-l.unixMs<=s&&u.add(c.url)}}if(u.size!==0){var p=function(r){if(i.has(r))return 1;var e=n({url:r});i.set(r,e),e.then(function(e){e.ok?a({expiredURL:r,refreshedURL:e.refreshedUrl,type:"_manifest_url_refreshed"}):(a({expiredURL:r,type:"_manifest_url_refresh_failed"}),t.logging.log(t,{error:o("nextgendasherr").nextgendasherr(t,"VideoPlayerNextgendashParsedManifestUrlRefreshReturnedNotOk","expiredURL: %s, reason: %s",r,e.failureReason),type:"generic_error"}))}).catch(function(e){a({expiredURL:r,type:"_manifest_url_refresh_failed"}),t.logging.log(t,{error:o("nextgendasherr").nextgendasherrFromCause(t,e,"VideoPlayerNextgendashParsedManifestUrlRefreshFailed","expiredURL: %s",r),type:"generic_error"})})};for(var _ of u)p(_)}}l.VideoPlayerNextgendashParsedManifestSM=e,l.URL_REFRESH_THRESHOLD_MS=s,l.startRefreshIfApplicable=u}),98);
__d("VideoPlayerNextgendashMain",["VideoPlayerNextgendashConnectionMainToWorker","VideoPlayerNextgendashFetchedResource","VideoPlayerNextgendashMediaElement","VideoPlayerNextgendashMediaUtils","VideoPlayerNextgendashParsedManifest","VideoPlayerNextgendashStateMachine","deepEquals","emptyFunction","nextgendasherr"],(function(t,n,r,o,a,i,l){"use strict";var e=["playerStateForDebug","playerStateFromMainSent","playerStateFromWorker","workerConnection"],s=["pendingEvents"];function u(e,t){var n,r,a,i=e.mediaElement.state.mediaElementSnapshot,l=i!=null?t.debugOverlay?{bufferedForDebug:i.buffered,bufferedFully:o("VideoPlayerNextgendashMediaUtils").isFullyBuffered(i),currentTime:i.currentTime,duration:i.duration,error:i.error,paused:i.paused,readyState:i.readyState}:{bufferedFully:o("VideoPlayerNextgendashMediaUtils").isFullyBuffered(i),currentTime:i.currentTime,duration:i.duration,error:i.error,paused:i.paused,readyState:i.readyState}:null,s=(n=e.scrollPositionAPI)==null?void 0:n.getCurrent();return{abrConfig:e.abrConfig,configFromMain:t,dashManifestData:e.state==="linked_to_worker"&&e.dashManifestParsed.state.state==="parsed"?e.dashManifestParsed.state.data:null,devicePixelRatio:(r=window.devicePixelRatio)!=null?r:1,isDocumentHidden:document.hidden,mediaElementSnapshot:l,mediaSourceIndexApplied:(a=e.mediaElement.state.mediaSourceIndex)!=null?a:null,playerViewportDimensions:e.playerViewportDimensions,scrollPositionInfo:s,selectedMediaVariant:e.selectedMediaVariant,selectedVideoQualityDisplayLabel:e.selectedVideoQualityDisplayLabel,shouldSendPlayerStateForDebug:e.shouldSendPlayerStateForDebug}}var c=o("VideoPlayerNextgendashStateMachine").defineStateMachine(null,function(e){var t=e.args,n=t.abrConfig,r=t.audioOnly,a=t.initialExpiredVideoUrlRefreshHandlerState,i=t.initialMediaVariantIfLangExistsInManifest,l=t.onBufferingChanged,s=t.onMediaSourceAttachedChanged,u=t.playerViewportDimensionsInitial,c=t.workerTypeInitial,d=e.makeChildSm,m=e.sendToSelf,p=e.thisSm;return{abrConfig:n,audioOnly:r,dashManifestFromUrl:null,dashManifestFromUrlRequestIndex:0,dashManifestParsed:d("dashManifestParsed",o("VideoPlayerNextgendashParsedManifest").VideoPlayerNextgendashParsedManifestSM,{audioOnly:r,initialExpiredVideoUrlRefreshHandlerState:a,onTransitioned:function(t,n,r){m({fromState:t,toState:n,type:"_dash_manifest_parsed_transitioned"},r)}}),initialMediaVariantIfLangExistsInManifest:i,mediaElement:d("mediaElement",o("VideoPlayerNextgendashMediaElement").VideoPlayerNextgendashMediaElementSM,{getWorkaroundForSegmentBufferedInsufficientlyMediaTimeRanges:function(){var e;return(e=p.state.playerStateFromWorker)==null?void 0:e.workaroundForSegmentBufferedInsufficientlyMediaTimeRanges},logPlayerWarning:function(t){m({type:"_log_player_warning",warning:t})},onBufferingChanged:l,onMediaSourceAttachedChanged:s,onRequestRecoveryFromSourceReset:function(t){m({mediaSourceIndex:t,type:"_request_recovery_from_source_reset"})},onTransitioned:function(t,n,r){m({type:"_media_element_transitioned"},r)}}),pendingEvents:o("VideoPlayerNextgendashStateMachine").skipAutoDisposeInsideThisObject([]),playerViewportDimensions:u,scrollPositionAPI:null,scrollPositionSubscription:null,selectedMediaVariant:null,selectedVideoQualityDisplayLabel:null,shouldSendPlayerStateForDebug:!1,state:"waiting_worker_connection",workerType:c}},function(t){var n=t.args,a=n.nextgendashInstanceIndex,i=n.onError,l=n.onManifestUpdated,c=n.onSendHaltedToWorkerChanged,f=n.onVideoRepresentationChanged,g=n.playerInstanceKey,h=n.playerSubOrigin,y=n.prefetchResultInitial,C=n.videoFBID,b=n.workerPortFactories,v=t.env,S=t.event,R=t.makeChildSm,L=t.sendToOther,E=t.sendToSelf,k=t.state,I=t.unexpectedEvent;if(k.state!=="__disposed__"&&S.type==="debug_config")return k.state==="linked_to_worker"?m(v,g,babelHelpers.extends({},k,{shouldSendPlayerStateForDebug:S.shouldSendPlayerStateForDebug}),S.type):babelHelpers.extends({},k,{shouldSendPlayerStateForDebug:S.shouldSendPlayerStateForDebug});if(k.state!=="__disposed__"&&S.type==="_log_player_warning")return D(S.warning),k;if(k.state!=="__disposed__"&&S.type==="update_player_viewport_dimensions")return babelHelpers.extends({},k,{playerViewportDimensions:S.playerViewportDimensions});if(k.state!=="__disposed__"&&S.type==="update_expired_video_url_refresh_handler"){L(k.dashManifestParsed,{expiredVideoUrlRefreshHandlerState:S.expiredVideoUrlRefreshHandlerState,type:"update_expired_video_url_refresh_handler"});return}if(k.state!=="__disposed__"&&S.type==="update_scroll_position_api"){k.scrollPositionSubscription!=null&&k.scrollPositionSubscription.remove();var T=null;return T=S.scrollPositionAPI.subscribe(function(){E({type:"_send_state_to_worker"})}),k.state==="linked_to_worker"?m(v,g,babelHelpers.extends({},k,{scrollPositionAPI:S.scrollPositionAPI,scrollPositionSubscription:T}),S.type):babelHelpers.extends({},k,{scrollPositionAPI:S.scrollPositionAPI,scrollPositionSubscription:T})}function D(e){k.state!=="__disposed__"&&v.logging.log(v,{error:o("nextgendasherr").nextgendasherrFromCause(v,e,"VideoPlayerNextgendashMainWith"+k.workerType),type:"generic_error_as_warning"})}function x(e){var t=o("VideoPlayerNextgendashConnectionMainToWorker").connectToWorker(v,b,e,g,function(e){E(e)});return c==null||c(t.sendHaltedToWorker),t}function $(e,t){c==null||c(null),e.sendToWorker({eventToWorker:{playerInstanceKey:g,type:"from_main_to_worker_unlink_player"},type:"send_to_worker"}),e.disconnectFromWorker(t)}function P(t){if(k.state!=="__disposed__"&&(k.workerType==="RealWorker"||k.workerType==="RealWorkerV2")){var n,r=o("nextgendasherr").nextgendasherrFromCause(v,t,"VideoPlayerNextgendashMainWith"+k.workerType+"/FallbackToVirtualWorker","Fallback to VirtualWorker from "+k.workerType);v.logging.log(v,{error:r,type:"generic_error"});var a=k.playerStateForDebug,i=k.playerStateFromMainSent,l=k.playerStateFromWorker,s=k.workerConnection,u=babelHelpers.objectWithoutPropertiesLoose(k,e);return s!=null&&$(s,r),babelHelpers.extends({},u,{pendingEvents:(n=u.pendingEvents)!=null?n:[],state:"waiting_worker_connection",workerType:"VirtualWorker"})}else throw t}function N(e,t,n,r){var o=r!=null?{mediaSourceHandle:r,mediaSourceIndex:t,type:"update_media_source"}:n!=null?{mediaSource:n,mediaSourceIndex:t,type:"update_media_source"}:null;if(o==null)throw I("throw","Expected either mediaSourceHandle or mediaSource from Worker.");L(e,o)}function M(e,t){var n,r,o=(n=e==null?void 0:e.targetRepresentationId.video)!=null?n:null,a=(r=t==null?void 0:t.targetRepresentationId.video)!=null?r:null;a!==o&&v.workQueue.enqueueWork(function(){f(o,a)})}function w(e,t){var n=t.dashManifestUrl,a=t.dashManifestXmlString;if(a!=null)return L(e.dashManifestParsed,{baseURLFallback:n,dashManifestXmlString:a,type:"parse_dash_manifest_xml"}),babelHelpers.extends({},e,{dashManifestFromUrl:null});var i=e.dashManifestFromUrlRequestIndex,l=null;if(n!=null){i+=1;var s={qplName:"dash_manifest_from_url",requestCreatedClock:v.host.clock(),requestID:"dash_manifest_from_url_"+i,requestInfo:n,responseMode:"text"};l=R("dashManifestFromUrl",o("VideoPlayerNextgendashFetchedResource").VideoPlayerNextgendashFetchedResourceSM,{onNetworkDiagnostics:r("emptyFunction"),onTransitioned:function(t,n,r){E({fromState:t,toState:n,type:"_dash_manifest_from_url_transitioned"},r)},request:s}),L(l,{type:"start"})}return babelHelpers.extends({},e,{dashManifestFromUrl:l,dashManifestFromUrlRequestIndex:i})}switch(k.state){case"waiting_worker_connection":switch(S.type){case"__enter":{var A=x(k.workerType);return A.sendToWorker({eventToWorker:{nextgendashInstanceIndex:a,playerInstanceKey:g,playerStateFromMain:u(k,v.config),playerSubOrigin:h,prefetchKey:C,prefetchResultInitial:y,type:"from_main_to_worker_link_player",videoFBID:C},type:"send_to_worker"}),babelHelpers.extends({},k,{state:"waiting_linked_to_worker",workerConnection:A})}case"__exception":return P(S.exception);case"__dispose":return;case"debug_config":return;case"update_expired_video_url_refresh_handler":return;case"update_player_viewport_dimensions":return;case"update_dash_manifest":return v.config.handleUpdateDashManifestInWaitingStates?w(k,S):(k.pendingEvents.push(S),k);case"update_scroll_position_api":return;default:return S.type,k.pendingEvents.push(S),k}case"waiting_linked_to_worker":switch(S.type){case"__enter":{var F=k.pendingEvents.reduce(function(e,t){return t.type==="from_worker_to_main_player_new_media_source"||t.type==="from_worker_to_main_player_unlinked"||t.type==="from_worker_to_main_player_warning"||t.type==="from_worker_to_main_player_fatal_error"||t.type==="debug_config"||t.type==="update_player_viewport_dimensions"?e.thisStatePendingEvents.push(t):e.nextStatePendingEvents.push(t),e},{nextStatePendingEvents:o("VideoPlayerNextgendashStateMachine").skipAutoDisposeInsideThisObject([]),thisStatePendingEvents:[]}),O=F.nextStatePendingEvents,B=F.thisStatePendingEvents;return B.forEach(function(e){E(e)}),babelHelpers.extends({},k,{pendingEvents:O})}case"__exception":return P(S.exception);case"__dispose":return;case"debug_config":return;case"update_expired_video_url_refresh_handler":return;case"update_player_viewport_dimensions":return;case"from_worker_to_main_player_new_media_source":{if(S.workerType!==k.workerType||S.playerInstanceKey!==g)return;N(k.mediaElement,S.mediaSourceIndex,S.mediaSource,S.mediaSourceHandle);var W=k.pendingEvents,q=babelHelpers.objectWithoutPropertiesLoose(k,s);return W.forEach(function(e){E(e)}),babelHelpers.extends({},q,{playerStateForDebug:d(S.playerStateForDebug,k.mediaElement.state.mediaElementSnapshot),playerStateFromMainSent:null,playerStateFromWorker:o("VideoPlayerNextgendashStateMachine").skipAutoDisposeInsideThisObject(S.playerStateFromWorker),state:"linked_to_worker"})}case"from_worker_to_main_player_unlinked":{if(S.workerType!==k.workerType||S.playerInstanceKey!==g)return;E({exception:S.exceptionSnapshot!=null?o("nextgendasherr").nextgendasherrFromCause(v,o("nextgendasherr").nextgendasherrFromSnapshot(S.exceptionSnapshot),"VideoPlayerNextgendashMainUnexpectedUnlinkedBeforeLinked"):o("nextgendasherr").nextgendasherr(v,"VideoPlayerNextgendashMainUnexpectedUnlinkedBeforeLinked"),type:"__exception"});return}case"from_worker_to_main_player_warning":{if(S.workerType!==k.workerType||S.playerInstanceKey!==g)return;D(o("nextgendasherr").nextgendasherrFromSnapshot(S.warningErrorSnapshot));return}case"from_worker_to_main_player_fatal_error":{if(S.workerType!==k.workerType||S.playerInstanceKey!==g)return;E({exception:o("nextgendasherr").nextgendasherrFromCause(v,o("nextgendasherr").nextgendasherrFromSnapshot(S.errorSnapshot),"VideoPlayerNextgendashMainFatalFromWorkerPlayerBeforeLinked"),type:"__exception"});return}case"update_dash_manifest":return v.config.handleUpdateDashManifestInWaitingStates?w(k,S):(k.pendingEvents.push(S),k);case"update_scroll_position_api":return;default:return S.type,k.pendingEvents.push(S),k}case"linked_to_worker":switch(S.type){case"__enter":{M(S.prevState.playerStateFromWorker,k.playerStateFromWorker);return}case"__exception":return;case"__dispose":return;case"_dash_manifest_from_url_transitioned":return p(v,S.fromState,S.toState,k.dashManifestParsed,E,L);case"_dash_manifest_parsed_transitioned":return _(v,k,S.fromState,S.toState,E,l);case"_media_element_transitioned":return m(v,g,k,S.type);case"_request_recovery_from_source_reset":{k.workerConnection.sendToWorker({eventToWorker:{mediaSourceIndex:S.mediaSourceIndex,playerInstanceKey:g,type:"from_main_to_worker_request_recovery_from_source_reset"},type:"send_to_worker"});return}case"debug_config":return;case"update_player_viewport_dimensions":return;case"update_dash_manifest":return w(k,S);case"_send_state_to_worker":return m(v,g,k,S.type);case"update_media_element":{L(k.mediaElement,{mediaElement:S.mediaElement,type:"update_media_element"});return}case"update_config_from_env":return m(v,g,k,S.type);case"select_video_quality":return m(v,g,babelHelpers.extends({},k,{selectedVideoQualityDisplayLabel:S.videoQualityDisplayLabel}),S.type);case"select_media_variant":return m(v,g,babelHelpers.extends({},k,{selectedMediaVariant:S.mediaVariant}),S.type);case"debug_log_stall_details":{k.workerConnection.sendToWorker({eventToWorker:{mediaElementSnapshotFromMain:k.mediaElement.state.mediaElementSnapshot,playerInstanceKey:g,stallStartClock:S.stallStartClock,type:"from_main_to_worker_debug_log_stall_details"},type:"send_to_worker"});return}case"from_worker_to_main_player_new_media_source":{if(S.workerType!==k.workerType||S.playerInstanceKey!==g)return;N(k.mediaElement,S.mediaSourceIndex,S.mediaSource,S.mediaSourceHandle);var U=o("VideoPlayerNextgendashStateMachine").skipAutoDisposeInsideThisObject(S.playerStateFromWorker);return M(k.playerStateFromWorker,U),babelHelpers.extends({},k,{playerStateForDebug:d(S.playerStateForDebug,k.mediaElement.state.mediaElementSnapshot),playerStateFromWorker:U})}case"from_worker_to_main_player_unlinked":{if(S.workerType!==k.workerType||S.playerInstanceKey!==g)return;var V=S.exceptionSnapshot!=null?o("nextgendasherr").nextgendasherrFromCause(v,o("nextgendasherr").nextgendasherrFromSnapshot(S.exceptionSnapshot),"VideoPlayerNextgendashMainUnexpectedUnlinkedFromWorker","Reason: "+S.reason):o("nextgendasherr").nextgendasherr(v,"VideoPlayerNextgendashMainUnexpectedUnlinkedFromWorker","Reason: "+S.reason);if((k.workerType==="RealWorker"||k.workerType==="RealWorkerV2")&&!v.config.disableFallbackFromRealWorkerAfterLinked)return P(V);E({exception:V,type:"__exception"});return}case"from_worker_to_main_player_warning":{if(S.workerType!==k.workerType||S.playerInstanceKey!==g)return;D(o("nextgendasherr").nextgendasherrFromSnapshot(S.warningErrorSnapshot));var H=o("VideoPlayerNextgendashStateMachine").skipAutoDisposeInsideThisObject(S.playerStateFromWorker);return M(k.playerStateFromWorker,H),babelHelpers.extends({},k,{playerStateForDebug:d(S.playerStateForDebug,k.mediaElement.state.mediaElementSnapshot),playerStateFromWorker:H})}case"from_worker_to_main_player_fatal_error":{if(S.workerType!==k.workerType||S.playerInstanceKey!==g)return;E({exception:o("nextgendasherr").nextgendasherrFromCause(v,o("nextgendasherr").nextgendasherrFromSnapshot(S.errorSnapshot),"VideoPlayerNextgendashMainFatalFromWorkerPlayer"),type:"__exception"});var G=o("VideoPlayerNextgendashStateMachine").skipAutoDisposeInsideThisObject(S.playerStateFromWorker);return M(k.playerStateFromWorker,G),babelHelpers.extends({},k,{playerStateForDebug:d(S.playerStateForDebug,k.mediaElement.state.mediaElementSnapshot),playerStateFromWorker:G})}case"from_worker_to_main_playback_loop_state":{if(S.workerType!==k.workerType||S.playerInstanceKey!==g)return;var z=o("VideoPlayerNextgendashStateMachine").skipAutoDisposeInsideThisObject(S.playerStateFromWorker);return M(k.playerStateFromWorker,z),babelHelpers.extends({},k,{playerStateFromWorker:z})}case"from_worker_to_main_player_state_for_debug":return S.workerType!==k.workerType||S.playerInstanceKey!==g?void 0:babelHelpers.extends({},k,{playerStateForDebug:d(S.playerStateForDebug,k.mediaElement.state.mediaElementSnapshot)});case"from_worker_to_main_refresh_urls":{k.dashManifestParsed.sendEvent({type:"handle_worker_url_refresh_request",urls:S.urls});return}case"update_scroll_position_api":return;default:S.type;return}case"__disposed__":switch(S.type){case"__enter":{var j,K=S.prevState,Q="VideoPlayerNextgendashMainWith"+K.workerType+"/Disposed["+k.reason+"@"+K.state+"]",X="Disposed: "+k.reason+"@"+K.state+"; playerStateFromWorker=%s",Y=[(j=JSON.stringify(K.playerStateFromWorker))!=null?j:"undefined"],J=k.exception!=null?o("nextgendasherr").nextgendasherrFromCause.apply(void 0,[v,k.exception,Q,X].concat(Y)):null;K.workerConnection!=null&&$(K.workerConnection,J!=null?J:o("nextgendasherr").nextgendasherr.apply(void 0,[v,Q,X].concat(Y))),K.scrollPositionSubscription!=null&&K.scrollPositionSubscription.remove(),J!=null&&i(J);return}default:return}default:k.state;return}});function d(e,t){return e==null||t==null?e:o("VideoPlayerNextgendashStateMachine").skipAutoDisposeInsideThisObject(babelHelpers.extends({},e,{bufferedRanges:babelHelpers.extends({},e.bufferedRanges,{combo:t.buffered.map(function(e){return{endTime:e[1],startTime:e[0]}})})}))}function m(e,t,n,o){var a=u(n,e.config);return r("deepEquals")(a,n.playerStateFromMainSent)?n:(n.workerConnection.sendToWorker({canSendOnlyLatestOfTypeIfThrottled:!0,eventToWorker:{playerInstanceKey:t,playerStateFromMain:a,reason:o,type:"from_main_to_worker_sync_state"},type:"send_to_worker"}),babelHelpers.extends({},n,{playerStateFromMainSent:a}))}function p(e,t,n,r,a,i){if(n.state!==t.state)switch(n.state){case"completed":{var l=n.responseData.state;switch(l.state){case"done_text":{i(r,{baseURLFallback:n.request.requestInfo,dashManifestXmlString:l.text,type:"parse_dash_manifest_xml"});return}default:a({exception:o("nextgendasherr").nextgendasherr(e,"VideoPlayerNextgendashMainDashManifestFetchUnexpectedState",'Unexpected response data state "'+l.state+'" when DASH manifest request is completed.'),type:"__exception"});return}}case"failed":{a({exception:o("nextgendasherr").nextgendasherrFromCause(e,n.error,"VideoPlayerNextgendashMainDashManifestFetchFailed"),type:"__exception"});return}case"aborted":{a({exception:o("nextgendasherr").nextgendasherr(e,"VideoPlayerNextgendashMainDashManifestFetchAborted"),type:"__exception"});return}default:{n.state;return}}}function _(e,t,n,r,a,i){if(r.state!==n.state||e.config.enableCdnUrlRefresh&&n.state==="parsed"&&r.state==="parsed"&&n.data.createdAt.perfMs!==r.data.createdAt.perfMs)switch(r.state){case"failed_to_parse":{a({exception:o("nextgendasherr").nextgendasherrFromCause(e,r.error,"VideoPlayerNextgendashMainDashManifestParseFailed"),type:"__exception"});return}case"parsed":{i();var l=t.initialMediaVariantIfLangExistsInManifest;return t.selectedMediaVariant==null&&l!=null&&r.data.manifestRepresentations.audio.some(function(e){return e.lang===l.audioLang})?babelHelpers.extends({},t,{initialMediaVariantIfLangExistsInManifest:null,selectedMediaVariant:l}):void 0}default:r.state;return}}function f(e){var t=e.state;if(t.state==="__null__"||t.state==="__disposed__")return null;var n=t.dashManifestParsed.state;return n.state!=="parsed"?null:n}function g(e){var t=f(e);return t==null?null:t.data.metadata.manifestIsMixedCodecVideo||t.data.metadata.manifestIsMixedCodecAudio}function h(e){var t=e.state;return t.state==="linked_to_worker"?t.playerStateFromWorker:null}function y(e){var t=e.state;return t.state!=="__null__"&&t.state!=="__disposed__"&&t.mediaElement.state.state!=="__null__"&&t.mediaElement.state.state!=="__disposed__"&&t.mediaElement.state.mediaElement!=null?t.mediaElement.env.host.mediaElementCollectOnlyPlayheadMediaTimeSec(t.mediaElement.env,t.mediaElement.state.mediaElement):null}function C(e){var t,n=f(e);return(t=n==null?void 0:n.data.manifestRepresentations.video)!=null?t:[]}function b(e){var t,n=f(e);return(t=n==null?void 0:n.data.manifestRepresentations.audio)!=null?t:[]}function v(e,t){var n,r,o=h(e),a=new Set((n=o==null||(r=o.blockedRepresentationIds)==null?void 0:r.video)!=null?n:[]);return t.filter(function(e){return!a.has(e.representationId)})}function S(e){return v(e,C(e))}function R(e,t){var n,r,o=h(e),a=new Set((n=o==null||(r=o.blockedRepresentationIds)==null?void 0:r.audio)!=null?n:[]);return t.filter(function(e){return!a.has(e.representationId)})}function L(e){return R(e,b(e))}function E(e,t){var n,r,o=h(e),a=new Set((n=o==null||(r=o.targetVariantRepresentationIds)==null?void 0:r.video)!=null?n:[]);return t.filter(function(e){return a.has(e.representationId)})}function k(e,t,n){return o("VideoPlayerNextgendashMediaUtils").findTimeRangeAnnotationAtMediaTime(e,t,n)}function I(e){var t,n=h(e),r=y(e),o=k(r,n==null||(t=n.bufferedRangesWithRepIds)==null?void 0:t.audio,n==null?void 0:n.targetRepresentationId.audio),a=b(e).find(function(e){return e.representationId===o});return a}function T(e){var t,n=h(e),r=y(e),o=k(r,n==null||(t=n.bufferedRangesWithRepIds)==null?void 0:t.video,n==null?void 0:n.targetRepresentationId.video),a=C(e).find(function(e){return e.representationId===o});return a}function D(e){var t=h(e),n=t==null?void 0:t.targetRepresentationId.audio,r=b(e).find(function(e){return e.representationId===n});return r}function x(e){var t=h(e),n=t==null?void 0:t.targetRepresentationId.video,r=C(e).find(function(e){return e.representationId===n});return r}function $(e){var t=e.state,n=t.state==="__null__"||t.state==="__disposed__"?null:t.selectedMediaVariant;return n}function P(e){var t=e.state,n=t.state==="__null__"||t.state==="__disposed__"?null:t.selectedVideoQualityDisplayLabel;return n}l.VideoPlayerNextgendashMainSM=c,l.getIsMixedCodecManifest=g,l.getPlayerStateFromWorker=h,l.getMediaElementPlayheadMediaTimeSec=y,l.getManifestVideoRepresentations=C,l.getManifestAudioRepresentations=b,l.getAvailableVideoRepresentations=S,l.getAvailableAudioRepresentations=L,l.filterVideoRepresentationsByTargetVariant=E,l.findCurrentPlayingRepresentationID=k,l.getCurrentPlayingAudioRepresentation=I,l.getCurrentPlayingVideoRepresentation=T,l.getCurrentTargetAudioRepresentation=D,l.getCurrentTargetVideoRepresentation=x,l.getSelectedMediaVariant=$,l.getSelectedVideoQualityDisplayLabel=P}),98);
__d("VideoPlayerNextgendashEngineExtrasAPI",["VideoPlayerNextgendashMain","VideoPlayerNextgendashManifestParser","VideoPlayerOzWWWGlobalConfig","emptyFunction","gkx","oz-player/networks/OzBandwidthEstimator"],(function(t,n,r,o,a,i,l){"use strict";var e=r("emptyFunction");function s(e){return{displayLabel:o("VideoPlayerNextgendashManifestParser").getDisplayLabelFromAudioRepresentation(e),id:e.representationId,lang:e.lang,mimeCodecs:e.mimeCodecsParsed.mimeCodecs,role:e.role,variantKey:e.variantKey}}function u(e){return{codec:e.mimeCodecsParsed.codecs,codecFamily:e.mimeCodecsParsed.codecFamily,displayLabel:o("VideoPlayerNextgendashManifestParser").getDisplayLabelFromVideoRepresentation(e),height:e.height,id:e.representationId,lang:e.lang,mimeCodecs:e.mimeCodecsParsed.mimeCodecs,qualityLabel:e.qualityLabel,role:e.role,variantKey:e.variantKey,width:e.width}}function c(e){var t=e.getVideoElementAPI,n=e.mainSm,a={getApproximateFBLSToPlayerDisplayLatency:function(){return null},getAvailableAudioTracks:function(){return o("VideoPlayerNextgendashMain").getAvailableAudioRepresentations(n).map(function(e){return s(e)})},getAvailableVideoQualities:function(){return Array.from(new Set(o("VideoPlayerNextgendashMain").filterVideoRepresentationsByTargetVariant(n,o("VideoPlayerNextgendashMain").getAvailableVideoRepresentations(n)).sort(function(e,t){return e.bandwidth-t.bandwidth}).map(o("VideoPlayerNextgendashManifestParser").getDisplayLabelFromVideoRepresentation)))},getAvailableVideoTracks:function(){return o("VideoPlayerNextgendashMain").getAvailableVideoRepresentations(n).map(function(e){return u(e)})},getCurrentAudioRepresentation:function(){var e=o("VideoPlayerNextgendashMain").getCurrentPlayingAudioRepresentation(n);return e==null?null:{getBandwidth:function(){return e.bandwidth},getDisplayLabel:function(){return o("VideoPlayerNextgendashManifestParser").getDisplayLabelFromAudioRepresentation(e)},getID:function(){return e.representationId},getMimeCodecs:function(){return e.mimeCodecsParsed.mimeCodecs}}},getCurrentPlayingAudioRepresentationID:function(){var e=o("VideoPlayerNextgendashMain").getCurrentPlayingAudioRepresentation(n);return e!=null?e.representationId:null},getCurrentPlayingAudioTrackID:function(){var e=o("VideoPlayerNextgendashMain").getCurrentPlayingAudioRepresentation(n);return e!=null?e.representationId:null},getCurrentPlayingVideoQuality:function(){var e=o("VideoPlayerNextgendashMain").getCurrentPlayingVideoRepresentation(n);return e!=null?o("VideoPlayerNextgendashManifestParser").getDisplayLabelFromVideoRepresentation(e):""},getCurrentPlayingVideoRepresentationID:function(){var e=o("VideoPlayerNextgendashMain").getCurrentPlayingVideoRepresentation(n);return e!=null?e.representationId:null},getCurrentTargetVideoQuality:function(){var e=o("VideoPlayerNextgendashMain").getCurrentTargetVideoRepresentation(n);return e!=null?o("VideoPlayerNextgendashManifestParser").getDisplayLabelFromVideoRepresentation(e):""},getCurrentVideoRepresentation:function(){var e=o("VideoPlayerNextgendashMain").getCurrentPlayingVideoRepresentation(n);return e==null?null:{canPredict:function(){return!1},getBandwidth:function(){return e.bandwidth},getDisplayLabel:function(){return o("VideoPlayerNextgendashManifestParser").getDisplayLabelFromVideoRepresentation(e)},getID:function(){return e.representationId},getMimeCodecs:function(){return e.mimeCodecsParsed.mimeCodecs},getQualityScoreCurveString:function(n){return n==="csvqm"?e.playbackResolutionCsvqmScoreCurve:e.playbackResolutionMosScoreCurve},getTimeRanges:function(){return[]}}},getEstimatedBandwidth:function(){return r("oz-player/networks/OzBandwidthEstimator").getBandwidth(r("VideoPlayerOzWWWGlobalConfig"))},getInbandCaptionsAutogeneratedFromManifest:function(){return!1},getInbandCaptionsExpectedFromManifest:function(){return!1},getManifestIdentifier:function(){return null},getMpdValidationErrors:function(){return null},getPerfLoggerProvider:function(){return null},getRepresentationCaptionsExpectedFromManifest:function(){return!1},getStreamType:function(){return"dash"},getTargetAudioTrack:function(){var e=o("VideoPlayerNextgendashMain").getCurrentTargetAudioRepresentation(n);return e==null?null:s(e)},getUserSelectedVideoQuality:function(){var e=o("VideoPlayerNextgendashMain").getSelectedVideoQualityDisplayLabel(n);return e!=null?e:"auto"},getUserSelectedVideoVariant:function(){var e,t,r,a,i=o("VideoPlayerNextgendashMain").getSelectedMediaVariant(n);return i==null?null:{lang:(e=(t=i.audioLang)!=null?t:i.videoLang)!=null?e:null,role:(r=(a=i.audioRole)!=null?a:i.videoRole)!=null?r:null}},getVideoProjectionType:function(){return null},getVideoRepresentations:function(){return null},isDrm:function(){return!1},isFBIsLiveTemplated:function(){return!1},isFBMS:function(){return!1},isFBWasLive:function(){return!1},isLiveRewindAvailable:function(){return!1},isMixedCodecManifest:function(){return o("VideoPlayerNextgendashMain").getIsMixedCodecManifest(n)},isPredictiveDash:function(){return!1},setDimensions:function(t){},setEnableLiveheadCatchup:function(t){},setLatencyLevel:function(t){},setUserSelectedVideoQuality:function(t){var e=t==="auto"||t==="notselected"?null:t;n.sendEvent({type:"select_video_quality",videoQualityDisplayLabel:e})},setUserSelectedVideoVariant:function(t){var e,r,a,i;if(t!=null){var l=o("VideoPlayerNextgendashMain").getSelectedMediaVariant(n);n.sendEvent({mediaVariant:babelHelpers.extends({},l!=null?l:{audioLang:null,audioRole:null,videoLang:null,videoRole:null},{audioLang:(e=t==null?void 0:t.lang)!=null?e:null,audioRole:(r=t==null?void 0:t.role)!=null?r:null,videoLang:n.env.config.enableLipSync&&(a=t==null?void 0:t.lang)!=null?a:null,videoRole:n.env.config.enableLipSync&&(i=t==null?void 0:t.role)!=null?i:null}),type:"select_media_variant"})}}};return a}l.createVideoPlayerNextgendashEngineExtrasAPI=c}),98);
__d("VideoPlayerNextgendashEnvironment",[],(function(t,n,r,o,a,i){"use strict";function e(){return{bufferingBeginBufferAheadSec:.1,bufferingEndBufferAheadSec:1,dataAppendOperationMinBytes:"ozplayer-like",debugLog:!1,debugOverlay:!1,debugViz:!1,disableFallbackFromRealWorkerAfterLinked:!1,disablePlaybackLoopSchedulingOnTimer:!1,enableAdaptiveConcurrentSegmentFetching:!1,enableCdnUrlRefresh:!1,enableCombinedInitSidxFetch:!1,enableLipSync:!1,fetchHighPri:!1,fetchInitSidxOfAllRepresentations:!1,handleUpdateDashManifestInWaitingStates:!1,isInWorkerType:null,logStallDetailsAsPlayerWarning:!1,maxConcurrentPrefetchTasks:-1,mediaElementSkipUpdateIfFullyBufferedAndOnlyPlayheadMoving:!1,preferredMediaSourceAPIType:"MediaSource",qplEnabled:!1,qplMarkersEnded:[],recoverFromSrcReset:!1,resetTargetRepresentationWhenItGetsBlocked:!1,retryShorterForUnrecoverableHTTP:!1,sidxDisableShiftingMediaTimeRangesByEarliestPresentationTime:!1,trackScrollPosition:!1}}i.createDefaultConfig=e}),66);
__d("VideoPlayerNextgendashHostAPI",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){return{perfMs:e.perfMs-t.perfMs,unixMs:e.unixMs-t.unixMs}}function l(e){return e}function s(e){return e}function u(e){return e}function c(e){return e}function d(e){return e}function m(e){return e}function p(e){return e}function _(e){return e}function f(e){return e}i.diffVideoPlayerNextgendashClockstamp=e,i.opaqueVideoPlayerNextgendashHostMediaElement=l,i.unopaqueVideoPlayerNextgendashHostMediaElement=s,i.opaqueVideoPlayerNextgendashHostMediaSource=u,i.unopaqueVideoPlayerNextgendashHostMediaSource=c,i.opaqueVideoPlayerNextgendashHostSourceBuffer=d,i.unopaqueVideoPlayerNextgendashHostSourceBuffer=m,i.opaqueVideoPlayerNextgendashHostMediaSourceHandle=p,i.unopaqueVideoPlayerNextgendashHostMediaSourceHandle=_,i.unopaqueVideoPlayerNextgendashHostEventTarget=f}),66);
__d("oz-player/shims/www/OzXmlParserTrustedTypesHTMLPolicyWWW",["TrustedTypes","fb-error"],(function(t,n,r,o,a,i,l){"use strict";var e={createHTML:function(t){if(t.startsWith('<?xml version="1.0"?>\n<')||t.startsWith('<?xml version="1.0" encoding="UTF-8"?>\n<')||t.startsWith('\n<MPD xmlns="urn:mpeg:dash:schema:mpd:2011"'))return t;throw r("fb-error").err("Violating Trusted Type policies. Only works for XML.")}},s=r("TrustedTypes").createPolicy("oz-player-xml",e);function u(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return s.createHTML.apply(s,[e].concat(n))}l.createTrustedHTMLForDOMParser=u}),98);
__d("VideoPlayerNextgendashHostXMLDOMParser",["nextgendasherr","oz-player/shims/www/OzXmlParserTrustedTypesHTMLPolicyWWW"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){try{var n=o("oz-player/shims/www/OzXmlParserTrustedTypesHTMLPolicyWWW").createTrustedHTMLForDOMParser(t),r=new DOMParser,a=r.parseFromString(n,"application/xml"),i=a.querySelector("parsererror"),l=i==null?void 0:i.firstChild,u=l==null?void 0:l.nextSibling,c=l!=null&&l.nodeName.toLowerCase()==="h3"&&u!=null&&u.nodeName.toLowerCase()==="div"?u.innerText:i==null?void 0:i.innerText;if(i!=null){c=c!=null?c:i.innerHTML;var d=new Error(c);throw d.name="parsererror",d}return s(a.documentElement)}catch(n){var m=typeof n=="object"&&n!=null&&typeof n.name=="string"?n.name:"NotAnError",p=typeof n=="object"&&n!=null&&typeof n.message=="string"?n.message:String(n),_=1e3;throw o("nextgendasherr").nextgendasherr(e,"VideoPlayerNextgendashHostXMLDOMParserException","parseXMLViaDOMParser exception: "+m+": "+p+"; (%s/%s): %s",Math.min(_,t.length),t.length,t.substr(0,_))}}function s(e){var t={$:{}};return e!=null&&(t[e.nodeName]=[u(e)]),t}function u(e){for(var t={$:{}},n=e.attributes,r=0;r<n.length;++r){var o=n[r];t.$[o.name]=o.value}for(var a=e.childNodes,i=0;i<a.length;++i){var l=a[i];if(l.nodeName==="#text"){var s=l.nodeValue.trim();s&&(t._=s)}else{var c,d=l.nodeName,m=(c=t[d])!=null?c:[];t[d]=m,m.push(u(l))}}return t}l.parseXMLViaDOMParser=e}),98);
__d("VideoPlayerNextgendashHostAPIDefault",["NetworkStatus","Promise","VideoPlayerNextgendashHostAPI","VideoPlayerNextgendashHostXMLDOMParser","VideoPlayerNextgendashMediaUtils","VideoPlayerNextgendashStateMachine","fb-error","nextgendasherr","oz-player/configs/OzGlobalConfig","oz-player/networks/OzBandwidthEstimator","performance","performanceAbsoluteNow","performanceNow"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m=new Set,p=(e=(u||(u=r("performance"))).timeOrigin)!=null?e:(c||(c=r("performanceAbsoluteNow")))()-(d||(d=r("performanceNow")))();function _(e){m.has(e)&&(URL.revokeObjectURL(e),m.delete(e))}var f={clock:function(){return o("VideoPlayerNextgendashStateMachine").skipAutoDisposeInsideThisObject({perfMs:(d||(d=r("performanceNow")))(),unixMs:Date.now()})},clockPerfOriginMs:p,fetch:typeof window.fetch=="function"?function(e,t,n){return window.fetch(t,n?babelHelpers.extends({},n):void 0)}:function(e){var t=o("nextgendasherr").nextgendasherr(e,"VideoPlayerNextgendashBrowserHostAPIFetchUnsupported","VideoPlayerNextgendashBrowserHostAPI.fetch: Missing global.fetch");return(s||(s=n("Promise"))).reject(t)},getPerformanceResourceTimingByName:typeof(u||(u=r("performance"))).getEntriesByName=="function"?function(e){return(u||(u=r("performance"))).getEntriesByName(e,"resource")}:function(){return[]},mediaElementCollectOnlyPlayheadMediaTimeSec:function(t,n){var e=o("VideoPlayerNextgendashHostAPI").unopaqueVideoPlayerNextgendashHostMediaElement(n);return e.currentTime},mediaElementCollectSnapshot:function(t,n){var e=o("VideoPlayerNextgendashHostAPI").unopaqueVideoPlayerNextgendashHostMediaElement(n),r=e.getAttribute("src"),a=e.srcObject!=null||r!=null&&r.startsWith("blob:"),i=e.duration,l=o("VideoPlayerNextgendashStateMachine").skipAutoDisposeInsideThisObject({buffered:o("VideoPlayerNextgendashMediaUtils").snapshotTimeRanges(function(){return e.buffered}),currentTime:e.currentTime,duration:Number.isNaN(i)?"NOT_A_NUMBER":i,ended:e.ended,error:e.error!=null?{code:e.error.code,message:e.error.message}:null,mediaSourceAttached:a,networkState:e.networkState,paused:e.paused,playbackRate:e.playbackRate,readyState:e.readyState,seeking:e.seeking});return l},mediaElementSetPlayhead:function(t,n,r){var e=o("VideoPlayerNextgendashHostAPI").unopaqueVideoPlayerNextgendashHostMediaElement(n);if(!Number.isFinite(r)||r<0)throw o("nextgendasherr").nextgendasherr(t,"VideoPlayerNextgendashBrowserHostAPIMediaElementSetPlayheadInvalid","VideoPlayerNextgendashBrowserHostAPI.mediaElementSetPlayhead: Invalid playheadMediaTimeSec: %s",r);e.currentTime=r},mediaElementSetSource:function(t,n,r,a){var e=o("VideoPlayerNextgendashHostAPI").unopaqueVideoPlayerNextgendashHostMediaElement(n),i=e.paused===!1;"srcObject"in e&&e.srcObject!=null&&(e.srcObject=null);var l=e.getAttribute("src");if(l!=null&&l!==""&&(e.removeAttribute("src"),_(l)),r!=null){if(r.mediaSourceHandle!=null)if("srcObject"in e)t.config.preferredMediaSourceAPIType==="ManagedMediaSource"&&(e.disableRemotePlayback=!0),e.srcObject=o("VideoPlayerNextgendashHostAPI").unopaqueVideoPlayerNextgendashHostMediaSourceHandle(r.mediaSourceHandle);else throw o("nextgendasherr").nextgendasherr(t,"VideoPlayerNextgendashBrowserHostAPIMediaElementSrcObjectMissing","VideoPlayerNextgendashBrowserHostAPI.mediaElementSetSource: Unable to set mediaSourceHandle because HTMLMediaElement.srcObject is missing");else if(r.mediaSource!=null){var s=o("VideoPlayerNextgendashHostAPI").unopaqueVideoPlayerNextgendashHostMediaSource(r.mediaSource),u=URL.createObjectURL(s);m.add(u),t.config.preferredMediaSourceAPIType==="ManagedMediaSource"&&(e.disableRemotePlayback=!0),e.setAttribute("src",u),s.addEventListener("sourceopen",function(){_(u)},{once:!0})}else if(r.url!=null)if(r.url!=="")e.setAttribute("src",r.url);else throw o("nextgendasherr").nextgendasherr(t,"VideoPlayerNextgendashBrowserHostAPIMediaElementUrlEmpty","VideoPlayerNextgendashBrowserHostAPI.mediaElementSetSource: Unable to set url because it is empty; use null source instead of empty source.url to clear the media element source");else throw o("nextgendasherr").nextgendasherr(t,"VideoPlayerNextgendashBrowserHostAPIMediaElementInvalidSource","VideoPlayerNextgendashBrowserHostAPI.mediaElementSetSource: Invalid source provided");(a==null?void 0:a.playheadMediaTimeSec)!=null&&(e.currentTime=a.playheadMediaTimeSec),i&&e.play().catch(function(){})}},mediaElementSubscribe:function(t,n,r,a){return h(t,n,o("VideoPlayerNextgendashHostAPI").unopaqueVideoPlayerNextgendashHostEventTarget(n),r,a)},mediaSourceAddSourceBuffer:function(t,n,r,a){var e=r.mimeCodecsParsed,i=r.representationId,l=r.type,s=o("VideoPlayerNextgendashHostAPI").unopaqueVideoPlayerNextgendashHostMediaSource(n),u=s.readyState;if(u!=="open")throw o("nextgendasherr").nextgendasherr(t,"VideoPlayerNextgendashHostAPIAddSourceBufferMediaSourceNotOpen","Unable to addSourceBuffer for "+l+" representation %s: mediaSource.readyState='"+u+"'.",i);var c=t.host.mediaSourceIsTypeSupported(t,e.mimeCodecs);if(!c)throw o("nextgendasherr").nextgendasherr(t,"VideoPlayerNextgendashHostAPIAddSourceBufferCodecNotSupported","Unable to addSourceBuffer for "+l+" representation %s: mimeCodecs (%s) is not supported by the browser.",i,e.mimeCodecs);var d=s.addSourceBuffer(e.mimeCodecs),m=h(t,o("VideoPlayerNextgendashHostAPI").opaqueVideoPlayerNextgendashHostSourceBuffer(d),d,["updateend","abort","error"],a),p=!1,_=function(){if(!p){m(),p=!0;try{s.removeSourceBuffer(d)}catch(r){if(!(typeof r=="object"&&r!=null&&r.name==="NotFoundError")){var n=o("nextgendasherr").nextgendasherrFromCause(t,r,"VideoPlayerNextgendashHostAPIAddSourceBufferUnableToCleanup","Unable to removeSourceBuffer originally added for "+l+" representation %s: mimeCodecs (%s)",i,e.mimeCodecs);throw n}}}};return[o("VideoPlayerNextgendashHostAPI").opaqueVideoPlayerNextgendashHostSourceBuffer(d),_]},mediaSourceCanConstructInDedicatedWorker:function(t){try{if(t==="ManagedMediaSource"&&typeof ManagedMediaSource=="function")return ManagedMediaSource.canConstructInDedicatedWorker===!0;if(typeof MediaSource=="function")return MediaSource.canConstructInDedicatedWorker===!0}catch(e){}return!1},mediaSourceCollectSnapshot:function(t,n){var e="unknown",r="unknown",a=null,i=null;try{var l=[],s=o("VideoPlayerNextgendashHostAPI").unopaqueVideoPlayerNextgendashHostMediaSource(n);e=s.duration,r=s.readyState;for(var u=0;u<s.sourceBuffers.length;u++)l.push(s.sourceBuffers[u].updating);a=l}catch(e){i=o("nextgendasherr").nextgendasherrFromCause(t,e,"VideoPlayerNextgendashHostAPIMediaSourceCollectSnapshotError")}return o("VideoPlayerNextgendashStateMachine").skipAutoDisposeInsideThisObject({duration:Number.isNaN(e)?"NOT_A_NUMBER":e,exception:i,readyState:r,sourceBuffersUpdating:a})},mediaSourceCreate:function(t,n){var e=null,r=null;if(t.config.preferredMediaSourceAPIType==="ManagedMediaSource")try{typeof ManagedMediaSource=="function"?e=new ManagedMediaSource:r=o("nextgendasherr").nextgendasherr(t,"VideoPlayerNextgendashHostAPIManagedMediaSourceClassMissing")}catch(e){r=o("nextgendasherr").nextgendasherrFromCause(t,e,"VideoPlayerNextgendashHostAPIManagedMediaSourceConstructorException")}if(e==null)try{typeof MediaSource=="function"?e=new MediaSource:r=o("nextgendasherr").nextgendasherr(t,"VideoPlayerNextgendashHostAPIMediaSourceClassMissing")}catch(e){r=o("nextgendasherr").nextgendasherrFromCause(t,e,"VideoPlayerNextgendashHostAPIMediaSourceConstructorException")}if(e==null)throw o("nextgendasherr").nextgendasherrFromCause(t,r,"VideoPlayerNextgendashHostAPIMediaSourceCreateException","preferredMediaSourceAPIType='"+t.config.preferredMediaSourceAPIType+"'");var a=h(t,o("VideoPlayerNextgendashHostAPI").opaqueVideoPlayerNextgendashHostMediaSource(e),e,["sourceopen","sourceended","sourceclose"],n);return[o("VideoPlayerNextgendashHostAPI").opaqueVideoPlayerNextgendashHostMediaSource(e),a]},mediaSourceEndOfStream:function(t,n,r){var e=o("VideoPlayerNextgendashHostAPI").unopaqueVideoPlayerNextgendashHostMediaSource(n);if(t.host.mediaSourceEndOfStreamCallIsExpectedToBeSafeAndNotNoop(t,n,r))try{e.endOfStream()}catch(e){}},mediaSourceEndOfStreamCallIsExpectedToBeSafeAndNotNoop:function(t,n,r){var e,a=o("VideoPlayerNextgendashHostAPI").unopaqueVideoPlayerNextgendashHostMediaSource(n);return a.readyState==="open"&&((e=r==null?void 0:r.readyState)!=null?e:0)>=1},mediaSourceGetDuration:function(t,n){var e=o("VideoPlayerNextgendashHostAPI").unopaqueVideoPlayerNextgendashHostMediaSource(n),r=e.duration;return Number.isNaN(r)?"NOT_A_NUMBER":r},mediaSourceGetHandleInWorker:function(t,n){var e=o("VideoPlayerNextgendashHostAPI").unopaqueVideoPlayerNextgendashHostMediaSource(n),r=e.handle;if(r==null)throw o("nextgendasherr").nextgendasherr(t,"VideoPlayerNextgendashHostAPIMissingMediaSourceHandle");return o("VideoPlayerNextgendashHostAPI").opaqueVideoPlayerNextgendashHostMediaSourceHandle(r)},mediaSourceIsTypeSupported:function(t,n){try{if(t.config.preferredMediaSourceAPIType==="ManagedMediaSource"&&typeof ManagedMediaSource=="function")return ManagedMediaSource.isTypeSupported(n);if(typeof MediaSource=="function")return MediaSource.isTypeSupported(n)}catch(e){}return!1},networkDiagnosticsReadBandwidth:function(){return r("oz-player/networks/OzBandwidthEstimator").getBandwidthDiagnostics(r("oz-player/configs/OzGlobalConfig"))},networkDiagnosticsUpdate:function(t){t.navigationTimingSample&&r("oz-player/networks/OzBandwidthEstimator").addNavigationTimingSample(t.navigationTimingSample.timeToFirstByteMs,t.navigationTimingSample.timeToLastByteMs,t.navigationTimingSample.bytes,t.clock.unixMs),t.bandwidthSample&&r("oz-player/networks/OzBandwidthEstimator").addBandwidthSample(t.bandwidthSample.bytes,t.bandwidthSample.timeInMs,t.clock.unixMs)},networkIsOnline:function(){var e=r("NetworkStatus").isOnline();return e&&navigator.onLine},parseXML:o("VideoPlayerNextgendashHostXMLDOMParser").parseXMLViaDOMParser,scheduleToRun:function(t){try{t()}catch(e){r("fb-error").FBLogger("comet_video_player_nextgendash").catching(r("fb-error").getErrorSafe(e)).mustfix("VideoPlayerNextgendashHostAPIWorkException")}},sourceBufferAbort:function(t,n,r){var e=r.mimeCodecsParsed,a=r.representationId,i=r.type,l=o("VideoPlayerNextgendashHostAPI").unopaqueVideoPlayerNextgendashHostSourceBuffer(n);try{l.abort()}catch(n){var s=o("nextgendasherr").nextgendasherrFromCause(t,n,"VideoPlayerNextgendashHostAPISourceBufferAbortException","Unable to abort for "+i+" representation %s: mimeCodecs (%s)",a,e.mimeCodecs);if(typeof n=="object"&&n!=null&&n.name==="InvalidStateError"){t.logging.log(t,{error:s,type:"generic_error_as_warning"});return}throw s}},sourceBufferAppendBuffer:function(t,n,r,a,i){var e=i.mimeCodecsParsed,l=i.representationId,s=i.type,u=o("VideoPlayerNextgendashHostAPI").unopaqueVideoPlayerNextgendashHostSourceBuffer(r);if(u.updating)throw o("nextgendasherr").nextgendasherr(t,"VideoPlayerNextgendashHostAPISourceBufferAppendBufferIsUpdating","Unable to appendBuffer for "+s+" representation %s: mimeCodecs (%s) - updating is true.",l,e.mimeCodecs);try{u.appendBuffer(a)}catch(r){var c=o("nextgendasherr").nextgendasherrFromCause(t,r,""),d=t.host.mediaSourceCollectSnapshot(t,n);throw o("nextgendasherr").nextgendasherrFromMultipleCauses(t,[["appendBuffer",c],d.exception?["snapshot",d.exception]:null].filter(Boolean),"VideoPlayerNextgendashHostAPISourceBufferAppendBufferException","Unable to appendBuffer for "+s+" representation %s: mimeCodecs (%s) "+(d.exception?"snapshotError:partialResults:":"")+" %s %s %s %s",l,e.mimeCodecs,"mediaSource readyState="+d.readyState,"mediaSource duration="+d.duration,"sourceBuffersUpdating=["+(d.sourceBuffersUpdating?d.sourceBuffersUpdating.join(","):"unknown")+"]","target sourceBuffer updating="+(u.updating?"true":"false"))}},sourceBufferChangeType:function(t,n,r){var e=r.mimeCodecsParsed,a=r.mimeCodecsParsedBeforeChangeType,i=r.representationId,l=r.type,s=o("VideoPlayerNextgendashHostAPI").unopaqueVideoPlayerNextgendashHostSourceBuffer(n);if(s.updating)throw o("nextgendasherr").nextgendasherr(t,"VideoPlayerNextgendashHostAPISourceBufferChangeTypeIsUpdating","Unable to sourceBuffer.changeType(%s) for "+l+" representation %s: mimeCodecs (%s) - updating is true.",e.mimeCodecs,i,a.mimeCodecs);try{s.changeType(e.mimeCodecs)}catch(n){throw o("nextgendasherr").nextgendasherrFromCause(t,n,"VideoPlayerNextgendashHostAPISourceBufferChangeTypeException","Unable to sourceBuffer.changeType(%s) for "+l+" representation %s: mimeCodecs (%s)",e.mimeCodecs,i,a.mimeCodecs)}},sourceBufferRemove:function(t,n,r){var e=r.mimeCodecsParsed,a=r.removeRange,i=r.representationId,l=r.type,s=o("VideoPlayerNextgendashHostAPI").unopaqueVideoPlayerNextgendashHostSourceBuffer(n);if(s.updating)throw o("nextgendasherr").nextgendasherr(t,"VideoPlayerNextgendashHostAPISourceBufferRemoveIsUpdating","Unable to sourceBuffer.remove() for "+l+" representation %s: mimeCodecs (%s) - updating is true.",i,e.mimeCodecs);if(s.buffered.length===0)throw o("nextgendasherr").nextgendasherr(t,"VideoPlayerNextgendashHostAPISourceBufferRemoveNoopNothingBuffered","Unable to sourceBuffer.remove(%s,%s) for "+l+" representation %s: mimeCodecs (%s) - nothing is buffered.",a[0],a[1],i,e.mimeCodecs);try{s.remove(a[0],a[1])}catch(n){throw o("nextgendasherr").nextgendasherrFromCause(t,n,"VideoPlayerNextgendashHostAPISourceBufferRemoveException","Unable to sourceBuffer.remove(%s,%s) for "+l+" representation %s: mimeCodecs (%s) - buffered: %s",a[0],a[1],i,e.mimeCodecs,o("VideoPlayerNextgendashMediaUtils").debugStringifyTimeRanges(o("VideoPlayerNextgendashMediaUtils").snapshotTimeRanges(function(){return s.buffered})))}},sourceBufferSnapshotBuffered:function(t,n){var e=o("VideoPlayerNextgendashHostAPI").unopaqueVideoPlayerNextgendashHostSourceBuffer(n);return o("VideoPlayerNextgendashMediaUtils").snapshotTimeRanges(function(){return e.buffered})},timers:{clearInterval:window.clearInterval,clearTimeout:window.clearTimeout,setInterval:window.setInterval,setTimeout:window.setTimeout,throttle:function(t,n,o){var e=o===void 0?{}:o,a=e.leading,i=e.trailing,l,s,u,c=null,d=0,m=function(){var e=l;l=null;var n=s;if(s=null,e==null)throw r("fb-error").FBLogger("comet_video_player_nextgendash","VideoPlayerNextgendashHostAPIThrottleBug").mustfixThrow("VideoPlayerNextgendashHostAPIThrottleBug");return t.apply(n,e)},p=function(){d=a===!1?0:new Date,c=null,u=m()},_=function(){l=s=null,c!=null&&(window.clearTimeout(c),c=null)};function f(){var e=new Date;!d&&a===!1&&(d=e);var t=n-(e-d);return t<=0?(window.clearTimeout(c),c=null,d=e,l=arguments,s=this,u=m()):i!==!1&&(l=arguments,s=this,c==null&&(c=window.setTimeout(p,t))),u}return f.cancel=_,f}}};f.networkIsOnline();var g=f;function h(e,t,n,r,o){var a=[];return new Set(r).forEach(function(r){var i=function(a){var n=e.host.clock(),i=a.timeStamp,l=n.perfMs-i,s={perfMs:i,unixMs:n.unixMs-l};o({domEventAdjustedClock:s,domEventClock:n,domEventType:r,eventTarget:t})};a.push([r,i]),n.addEventListener(r,i)}),function(){a.forEach(function(e){var t=e[0],r=e[1];n.removeEventListener(t,r)})}}l.default=g}),98);
__d("VideoPlayerNextgendashHostAPIComet",["CometThrottle","VideoPlayerNextgendashHostAPIDefault","clearInterval","clearTimeout","setInterval","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e=babelHelpers.extends({},r("VideoPlayerNextgendashHostAPIDefault"),{timers:{clearInterval:r("clearInterval"),clearTimeout:r("clearTimeout"),setInterval:r("setInterval"),setTimeout:r("setTimeout"),throttle:r("CometThrottle")}}),s=e;l.default=s}),98);
__d("VideoPlayerNextgendashLoggingAPI",["VideoPlayerNextgendashStateMachine","emptyFunction","nextgendasherr"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n=e.loggingState.prevLogstamp,r={clock:e.host.clock(),sequence:((t=n==null?void 0:n.sequence)!=null?t:0)+1};return e.loggingState.prevLogstamp=r,[n,r]}function s(e,t){for(var n,r=(n=t==null?void 0:t.slice())!=null?n:[],o=r.slice(),a=0,i=e!=null?e:"",l=/(?!\\)%[sidfoOc]/g,s=l.exec(i);s!=null;)++a,o.shift(),s=l.exec(i);for(;o.length>0;)o.shift(),i+=" %s",++a;for(;r.length<a;)r.push("NOPARAM");return[i,r]}function u(e,t,n,r){var o=s(e,t),a=o[0],i=o[1],l=s(n,r),u=l[0],c=l[1],d=a!==""&&u!==""?a+" :: "+u:a+u;return[d,i.concat(c)]}var c={displayName:"VideoPlayerNextgendashLoggingDestinationNull",log:r("emptyFunction")};function d(e){var t=new Set(e.filter(Boolean));return t.size<1?c:{displayName:"VideoPlayerNextgendashLoggingDestinationCombined:"+Array.from(t).map(function(e){return e.displayName}).join(":"),log:function(n,r){t.forEach(function(e){try{e.log(n,r)}catch(l){var a;t.delete(e);var i=o("nextgendasherr").nextgendasherrFromCause(n,l,"VideoPlayerNextgendashLoggingDestinationError","Caught exception from "+e.displayName+" when calling log with "+r.type);(a=o("nextgendasherr").nextgendasherrFBLogger(n).catching(i)).mustfix.apply(a,[i.messageFormat].concat(i.messageParams))}})}}}function m(e,t){return{_:"#"+e.sequentialId+"#"+e.displayName,state:t===!0?babelHelpers.extends({state:e.state.state},e.state.state==="__disposed__"&&e.state.exception!=null?{exception:e.state.exception}:{}):e.state}}var p=t.Element,_=t.HTMLVideoElement,f=t.HTMLAudioElement,g=Object.prototype.toString;function h(e,t){return y(e,function(n){if(typeof n=="function")return t.shouldSnapshotFunctions?"[Function "+n.toString()+"]":n;if(n instanceof Error){if(!t.shouldSnapshotErrors)return n;var r=n,a={message:r.message!==r.messageFormat?r.message:void 0,messageFormat:r.messageFormat,messageParams:r.messageParams,metadata:r.metadata?r.metadata.getAll():void 0,name:r.name,nextgendashClock:n.nextgendashClock,project:r.project,stack:t.shouldSnapshotIncludeErrorStackTrace?r.stack:void 0};return Object.keys(a).forEach(function(e){a[e]==null&&e!=="name"&&delete a[e]}),a}else if(typeof n=="object"&&n!=null){var i=function(n){if(!t.shouldSnapshotIncludeObjectProperties)return new Map;var e=[];if(p!=null&&n instanceof p){var r,o;for(var a of n.attributes)e.push([a.name==="class"?"className":a.name==="for"?"htmlFor":a.name,a.value]);e.push.apply(e,[].concat(_!=null&&n instanceof _||f!=null&&n instanceof f?Object.getOwnPropertyNames((r=Object.getPrototypeOf(Object.getPrototypeOf(n)))!=null?r:{}):[],Object.getOwnPropertyNames((o=Object.getPrototypeOf(n))!=null?o:{}),Object.getOwnPropertyNames(n)).map(function(e){try{return[e,n[e]]}catch(t){return[e,"<exception:"+String(t)+">"]}}))}else if(n instanceof Map){var i=[];for(var l of n.entries())i.push(l);e.push(["$Map.entries",i])}else if(n instanceof Set){var s=[];for(var u of n.values())s.push(u);e.push(["$Set.values",s])}else if(n instanceof Uint8Array){for(var c=[],d=5,m=0;m<d&&m<n.length;++m)c.push(n[m]);for(n.length>d+d&&c.push("..."),m=Math.max(m,n.length-d);m<n.length;++m)c.push(n[m]);e.push(["$Uint8Array.length",n.length]),e.push(["$Uint8Array.byteOffset",n.byteOffset]),e.push(["$Uint8Array.byteLength",n.byteLength]),e.push(["$Uint8Array.bytes",c])}else if(n instanceof ArrayBuffer){for(var g=new Uint8Array(n),h=[],y=5,C=0;C<y&&C<g.length;++C)h.push(g[C]);for(g.length>y+y&&h.push("..."),C=Math.max(C,g.length-y);C<g.length;++C)h.push(g[C]);e.push(["$ArrayBuffer.byteLength",n.byteLength]),e.push(["$ArrayBuffer.bytes",h])}return new Map(e.filter(function(e){var t=e[0],n=e[1];return t.startsWith("$Map.")||t.startsWith("$Set.")||t.startsWith("$Uint8Array.")||t.startsWith("$ArrayBuffer.")||!(typeof n=="object"||typeof n=="function"||t.startsWith("on")&&n===null||t.toUpperCase()===t)}))};if(o("VideoPlayerNextgendashStateMachine").isStateMachine(n))return m(n,n!==e&&t.shouldOmitChildStateMachineState);if(p!=null&&n instanceof p){var l=n,s=i(l),u={$_:"<"+l.nodeName.toLowerCase()+">"};t.shouldSnapshotIncludeOriginalReference&&(u.$$=l);for(var c of s.entries()){var d=c[0],h=c[1];u[d]=h}return u}else{var y=g.call(n);if(typeof n=="object"&&n!==null&&!(n instanceof Boolean)&&!(n instanceof Date)&&!(n instanceof Number)&&!(n instanceof RegExp)&&!(n instanceof String)&&y!=="[object Object]"&&y!=="[object Array]"){var C=i(n),b={$_:y};t.shouldSnapshotIncludeOriginalReference&&(b.$$=n);for(var v of C.entries()){var S=v[0],R=v[1];b[S]=R}return b}else return n}}else return n})}function y(e,t){var n=new WeakMap;return(function e(r,o){var a,i,l=t!==void 0?t(r):r;if(typeof l=="object"&&l!==null&&!(l instanceof Boolean)&&!(l instanceof Date)&&!(l instanceof Number)&&!(l instanceof RegExp)&&!(l instanceof String)){if(a=n.get(l),a!==void 0)return{$ref:a};if(n.set(l,o),Array.isArray(l)){for(var s=[],u=l,c=0,d=u.length;c<d;++c)s[c]=e(u[c],o+"["+c+"]");i=s}else{for(var m={},p=Object.keys(l),_=0,f=p.length;_<f;++_){var g=p[_];g==="$$"?m[g]=l[g]:m[g]=e(l[g],o+"["+JSON.stringify(g)+"]")}i=m}return i}return l})(e,"$")}l.getLogstamps=e,l.normalizeFormatAndParams=s,l.combineFormatAndParams=u,l.VideoPlayerNextgendashLoggingDestinationNull=c,l.combineLoggingDestinations=d,l.formatStateMachineForLogging=m,l.snapshotObjectForLogging=h}),98);
__d("VideoPlayerNextgendashLoggingDestinationEngineWarning",["VideoPlayerNextgendashEngineErrors","nextgendasherr"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return{displayName:"VideoPlayerNextgendashLoggingDestinationEngineWarning",log:function(n,r){switch(r.type){case"generic_error":{e(o("VideoPlayerNextgendashEngineErrors").createVideoPlayerErrorFromNextgendashEngine(n,o("nextgendasherr").nextgendasherrFromCause(n,r.error,"VideoPlayerNextgendashLogError"),"nextgendash_warning_from_"+r.type,r.format,r.params));break}case"generic_error_as_warning":{e(o("VideoPlayerNextgendashEngineErrors").createVideoPlayerErrorFromNextgendashEngine(n,o("nextgendasherr").nextgendasherrFromCause(n,r.error,"VideoPlayerNextgendashLogErrorAsWarning"),"nextgendash_warning_from_"+r.type,r.format,r.params));break}case"generic_warning":{var t;e(o("VideoPlayerNextgendashEngineErrors").createVideoPlayerErrorFromNextgendashEngine(n,o("nextgendasherr").nextgendasherr.apply(void 0,[n,"VideoPlayerNextgendashLogWarning",r.format].concat((t=r.params)!=null?t:[])),"nextgendash_warning_from_"+r.type));break}}}}}l.createVideoPlayerNextgendashLoggingDestinationEngineWarning=e}),98);
__d("VideoPlayerNextgendashLoggingDestinationODSFromEngine",["VideoPlayerODS"],(function(t,n,r,o,a,i,l){"use strict";function e(){return{displayName:"VideoPlayerNextgendashLoggingDestinationODSFromEngine",log:function(t,n){n.type==="ods_call"&&o("VideoPlayerODS").bumpEntityKey(n.odsCall.entity,n.odsCall.key,n.odsCall.sampleRate)}}}l.createVideoPlayerNextgendashLoggingDestinationODSFromEngine=e}),98);
__d("VideoPlayerNextgendashQPLFromMain",["QuickLogActionType","QuickPerformanceLogger","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n){var o,a=n.event==="START_PLAYING"?r("qpl")._(424476673,"93"):(function(){throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+n.event)})();if(!(n.method!=="markerStart"&&!(e||(e=r("QuickPerformanceLogger"))).isMarkerOn(a,(o=n.instanceKey)!=null?o:0)))switch(n.method){case"markerStart":{(e||(e=r("QuickPerformanceLogger"))).markerStart(a,n.instanceKey,n.timestamp,{cancelExisting:!0,cancelOnUnload:!0});return}case"markerAnnotate":{(e||(e=r("QuickPerformanceLogger"))).markerAnnotate(a,n.annotations,{instanceKey:n.instanceKey});return}case"markerPoint":{(e||(e=r("QuickPerformanceLogger"))).markerPoint(a,n.point,{data:n.annotations,instanceKey:n.instanceKey,timestamp:n.timestamp});return}case"markerEnd":{(e||(e=r("QuickPerformanceLogger"))).markerEnd(a,r("QuickLogActionType")[n.action],n.instanceKey,n.timestamp);return}default:n.method;return}}l.qplCallFromMain=s}),98);
__d("VideoPlayerNextgendashLoggingDestinationQPLFromEngine",["VideoPlayerNextgendashQPL","VideoPlayerNextgendashQPLFromMain","removeFromArray"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=null,a=null,i=void 0,l=void 0;return{displayName:"VideoPlayerNextgendashLoggingDestinationQPLFromEngine",log:function(u,c){var s=e.current,d=t.current;if(s!=null&&d!=null&&(c.type==="state_machine_fatal_exception"||c.type==="state_machine_receive_event_success"||c.type==="state_machine_receive_event_exception")&&c.sm===s){var m=s.state,p=m.workerType;p!==i&&(n!=null&&(n(),n=null),p!=null&&(n=d.subspan("selected_worker_"+p)),i=p);var _=m.state==="linked_to_worker"?m.workerType:void 0;_!==l&&(a!=null&&(a(),a=null),_!=null&&(a=d.subspan("linked_worker_"+_)),l=_)}if(c.type==="qpl_call"){o("VideoPlayerNextgendashQPLFromMain").qplCallFromMain(u,c.qplCall);var f=!1;if(c.qplCall.method==="markerStart"){var g=o("VideoPlayerNextgendashQPL").qplCacheKey(c.qplCall.event,c.qplCall.instanceKey);u.config.qplMarkersEnded.includes(g)&&(r("removeFromArray")(u.config.qplMarkersEnded,g),f=!0)}else if(c.qplCall.method==="markerEnd"){var h=o("VideoPlayerNextgendashQPL").qplCacheKey(c.qplCall.event,c.qplCall.instanceKey);u.config.qplMarkersEnded.includes(h)||(u.config.qplMarkersEnded.push(h),f=!0)}f&&s!=null&&s.sendEvent({type:"update_config_from_env"})}}}}l.createVideoPlayerNextgendashLoggingDestinationQPLFromEngine=e}),98);
__d("VideoPlayerNextgendashEngine",["Promise","SiteData","VideoPlayerImplementationEngineAPI","VideoPlayerImplementationEngineVideoElementAPI","VideoPlayerImplementationErrors","VideoPlayerNextgendashConnectionMainToWorker","VideoPlayerNextgendashConnectionPortToRealWorker","VideoPlayerNextgendashConnectionPortToRealWorkerV2","VideoPlayerNextgendashConnectionPortToVirtualWorker","VideoPlayerNextgendashEngineConfig","VideoPlayerNextgendashEngineErrors","VideoPlayerNextgendashEngineExtrasAPI","VideoPlayerNextgendashEnvironment","VideoPlayerNextgendashHostAPI","VideoPlayerNextgendashHostAPIComet","VideoPlayerNextgendashLoggingAPI","VideoPlayerNextgendashLoggingDestinationEngineWarning","VideoPlayerNextgendashLoggingDestinationODSFromEngine","VideoPlayerNextgendashLoggingDestinationQPLFromEngine","VideoPlayerNextgendashMain","VideoPlayerNextgendashQPL","VideoPlayerNextgendashWorkQueue","clearTimeout","cr:5732","cr:9712","cr:9718","gkx","guid","nextgendasherr","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){if(r("gkx")("9512")){var e=r("gkx")("7137")?"ManagedMediaSource":"MediaSource";if(r("VideoPlayerNextgendashHostAPIComet").mediaSourceCanConstructInDedicatedWorker(e))return r("gkx")("4484")?"RealWorkerV2":"RealWorker"}return"VirtualWorker"}var u=s();u==="VirtualWorker"&&o("VideoPlayerNextgendashConnectionPortToVirtualWorker").preloadWorkerEnvironmentJSResourceWhenVirtualWorkerOnly();var c={RealWorker:o("VideoPlayerNextgendashConnectionPortToRealWorker").createVideoPlayerNextgendashConnectionPortToRealWorker,RealWorkerV2:o("VideoPlayerNextgendashConnectionPortToRealWorkerV2").createVideoPlayerNextgendashConnectionPortToRealWorkerV2,VirtualWorker:o("VideoPlayerNextgendashConnectionPortToVirtualWorker").createVideoPlayerNextgendashConnectionPortToVirtualWorker},d={clientRev:r("SiteData").client_revision,cometEnv:r("SiteData").comet_env};function m(){o("VideoPlayerNextgendashConnectionMainToWorker").preloadWorker({envForErrors:{host:{clock:r("VideoPlayerNextgendashHostAPIComet").clock},loggingState:{metadata:babelHelpers.extends({},d)}},virtualWorkerHostAPI:r("VideoPlayerNextgendashHostAPIComet"),workerEnvConfig:C(),workerPortFactories:c,workerType:u})}var p=null,_="ngdprefetch-"+r("guid")();function f(){if(p!=null)return p;m();var e=_,t=o("VideoPlayerNextgendashWorkQueue").createVideoPlayerNextgendashWorkQueue(r("VideoPlayerNextgendashHostAPIComet").scheduleToRun),a=n("cr:9718")==null?void 0:n("cr:9718")(e,t),i={config:C(),host:r("VideoPlayerNextgendashHostAPIComet"),logging:o("VideoPlayerNextgendashLoggingAPI").combineLoggingDestinations([n("cr:9712"),a==null?void 0:a.loggingDestination]),loggingState:{logstampPrefix:e,logstampTint:.5,metadata:babelHelpers.extends({},d,{nextgendashCreatedAt:r("VideoPlayerNextgendashHostAPIComet").clock(),playerInstanceKey:_})},workQueue:t};return p={connection:o("VideoPlayerNextgendashConnectionMainToWorker").connectToWorker(i,c,u,_,function(e){var t=typeof e=="object"&&e!=null&&typeof e.type=="string"?e.type:"[unknown]",n;try{n=JSON.stringify(e)}catch(e){n="[serialization failed]"}throw o("nextgendasherr").nextgendasherr(i,"VideoPlayerNextgendashUnexpectedEventFromWorkerPrefetcher","Unexpected event received: type=%s, event=%s",t,n)}),env:i,workerType:u},p}function g(e){return r("gkx")("2312")?{"%future added value":0,HD:720,SD:0,UHD:1080,"":0}[e!=null?e:""]:0}function h(e){var t=f();if(t.connection!=null&&e.representations.length>0){var n;t.connection.sendToWorker({eventToWorker:{initialAbrParams:{abrConfig:o("VideoPlayerNextgendashEngineConfig").createVideoPlayerNextgendashABRConfig({videoPreferredMinimumSmallestDimension:g(null)}),bandwidthDiagnostics:t.env.host.networkDiagnosticsReadBandwidth(),devicePixelRatio:(n=window.devicePixelRatio)!=null?n:1,isDocumentHidden:document.hidden,prefetchResolutionThreshold:1e3},prefetchInfo:e,type:"from_main_to_worker_prefetch"},type:"send_to_worker"})}}function y(e){var t=e.clearPrefetchQueue,n=e.deprioritizeCurrentPrefetchTasks,r=e.preventFetchDemandStart,o=p;(o==null?void 0:o.connection)!=null&&o.connection.sendToWorker({eventToWorker:{clearPrefetchQueue:t,deprioritizeCurrentPrefetchTasks:n,preventFetchDemandStart:r,type:"from_main_to_worker_navigation_signal"},type:"send_to_worker"})}function C(){var e=o("VideoPlayerNextgendashEnvironment").createDefaultConfig();return babelHelpers.extends({},e,{bufferingBeginBufferAheadSec:r("gkx")("7137")?.1:e.bufferingBeginBufferAheadSec,bufferingEndBufferAheadSec:r("gkx")("7137")?.2:e.bufferingEndBufferAheadSec,dataAppendOperationMinBytes:r("gkx")("19511")?null:e.dataAppendOperationMinBytes,debugLog:r("gkx")("17339"),debugOverlay:r("gkx")("4837"),debugViz:r("gkx")("17340"),disableFallbackFromRealWorkerAfterLinked:!0,disablePlaybackLoopSchedulingOnTimer:r("gkx")("6615"),enableAdaptiveConcurrentSegmentFetching:r("gkx")("8486"),enableCdnUrlRefresh:r("gkx")("14068"),enableCombinedInitSidxFetch:r("gkx")("18184"),enableLipSync:r("gkx")("3922")||r("gkx")("7221"),fetchHighPri:!0,fetchInitSidxOfAllRepresentations:r("gkx")("898"),handleUpdateDashManifestInWaitingStates:r("gkx")("6924"),logStallDetailsAsPlayerWarning:r("gkx")("20111"),maxConcurrentPrefetchTasks:r("gkx")("10899")?2:r("gkx")("10183")?5:-1,mediaElementSkipUpdateIfFullyBufferedAndOnlyPlayheadMoving:r("gkx")("19158"),preferredMediaSourceAPIType:r("gkx")("7137")?"ManagedMediaSource":"MediaSource",qplEnabled:r("gkx")("19263"),recoverFromSrcReset:r("gkx")("19599"),resetTargetRepresentationWhenItGetsBlocked:r("gkx")("19128"),retryShorterForUnrecoverableHTTP:r("gkx")("173"),sidxDisableShiftingMediaTimeRangesByEarliestPresentationTime:r("gkx")("19380"),trackScrollPosition:r("gkx")("20629")})}var b=0;function v(t){return function(r){var o=r.url;return new(e||(e=n("Promise")))(function(e){t(o).then(function(t){var n=t.reason,r=t.refreshedUrl;r!=null?e({ok:!0,refreshedUrl:r}):e({failureReason:n!=null?n:"unspecified",ok:!1})}).catch(function(e){throw e})})}}function S(e){var t,a=e.initialProps,i=a.coreVideoPlayerMetaData.videoFBID,l=String(a.loggingMetaData.instanceKey),s=(t=a.coreVideoPlayerMetaData.subOrigin)!=null?t:void 0,m=b++,p="#"+m+"::"+l,_=a.coreVideoPlayerMetaData.initialRepresentationIds,f=!1,h=null,y=o("VideoPlayerNextgendashWorkQueue").createVideoPlayerNextgendashWorkQueue(r("VideoPlayerNextgendashHostAPIComet").scheduleToRun),S=n("cr:9718")==null?void 0:n("cr:9718")(p,y),L=n("cr:5732")?new(n("cr:5732")):null,E={current:null},k={current:null},I={current:null},T=[],D=null,x=null,$=C(),P={config:$,host:r("VideoPlayerNextgendashHostAPIComet"),logging:o("VideoPlayerNextgendashLoggingAPI").combineLoggingDestinations([$.qplEnabled?o("VideoPlayerNextgendashLoggingDestinationQPLFromEngine").createVideoPlayerNextgendashLoggingDestinationQPLFromEngine(E,k):void 0,o("VideoPlayerNextgendashLoggingDestinationEngineWarning").createVideoPlayerNextgendashLoggingDestinationEngineWarning(function(e){N&&N.point("warning",o("VideoPlayerNextgendashQPL").qplAnnotationsForError(R(P,e))),I.current!=null?I.current.dispatch({payload:{warningError:e},type:"implementation_warning"}):T.push(e)}),n("cr:9712"),S==null?void 0:S.loggingDestination,L==null?void 0:L.loggingDestination,o("VideoPlayerNextgendashLoggingDestinationODSFromEngine").createVideoPlayerNextgendashLoggingDestinationODSFromEngine()]),loggingState:{logstampPrefix:p,logstampTint:m%5/5,metadata:babelHelpers.extends({},d,{nextgendashCreatedAt:r("VideoPlayerNextgendashHostAPIComet").clock(),nextgendashInstanceIndex:m,playerInstanceKey:l,playerSubOrigin:s,videoFBID:i})},workQueue:y},N=P.config.qplEnabled?o("VideoPlayerNextgendashQPL").qplStartPlayingApi(P):null;k.current=N,N==null||N.start();var M=a.coreVideoPlayerMetaData.expiredVideoUrlRefreshHandler,w=null,A=null,F=null,O=o("VideoPlayerNextgendashMain").VideoPlayerNextgendashMainSM.createSM("VideoPlayerNextgendashMain",P,null,{abrConfig:o("VideoPlayerNextgendashEngineConfig").createVideoPlayerNextgendashABRConfig({videoPreferredMinimumSmallestDimension:g(a.minQualityPreference)}),audioOnly:a.coreVideoPlayerMetaData.audioOnly===!0,initialExpiredVideoUrlRefreshHandlerState:M!=null?{handler:v(M),identity:M}:null,initialMediaVariantIfLangExistsInManifest:a.initialAudioUserPreferredLanguage!=null?{audioLang:a.initialAudioUserPreferredLanguage,audioRole:"dub",videoLang:P.config.enableLipSync?a.initialAudioUserPreferredLanguage:null,videoRole:P.config.enableLipSync?"dub":null}:null,nextgendashInstanceIndex:m,onBufferingChanged:function(t,n,r){w!=null&&(w(),w=null),n?(w=N==null?void 0:N.subspan("buffering"),G.dispatch({payload:{bufferingType:r?"start/unpause":"in_play",disableZeroPlaybackRate:P.config.sidxDisableShiftingMediaTimeRangesByEarliestPresentationTime?!0:void 0},type:"buffering_begin_requested"})):G.dispatch({payload:{domEventPerfTimestamp:t.perfMs},type:"buffering_end_requested"})},onError:function(t){N&&N.point("error",o("VideoPlayerNextgendashQPL").qplAnnotationsForError(t)),h==null&&(h=t),S?(S.setHalted(t.name),y.enqueueWork(function(){H(t,"comet_nextgendash_main_error")})):H(t,"comet_nextgendash_main_error")},onManifestUpdated:function(){N==null||N.point("manifest_updated"),G.dispatch({payload:{selectedVideoQuality:W.getUserSelectedVideoQuality()},type:"implementation_engine_qualities_changed"})},onMediaSourceAttachedChanged:function(t,n){if(A!=null&&(A(),A=null),n&&(A=N==null?void 0:N.subspan("media_source")),!r("gkx")("18183")){var e,a=(e=O.state.mediaElement)==null?void 0:e.state.mediaElement,i=a!=null?o("VideoPlayerNextgendashHostAPI").unopaqueVideoPlayerNextgendashHostMediaElement(a):null;(i==null||z.current==null||i!==z.current.getUnderlyingVideoElement())&&(z.current=i!=null?o("VideoPlayerImplementationEngineVideoElementAPI").createVideoPlayerImplementationEngineVideoElementAPI(i):null)}n&&!f&&(f=!0,G.dispatch({payload:{selectedVideoQuality:W.getUserSelectedVideoQuality()},type:"implementation_engine_initialized"}))},onSendHaltedToWorkerChanged:S==null?void 0:S.onSendHaltedToWorkerChanged,onVideoRepresentationChanged:function(t,n){N&&N.point("video_representation_changed",{string:{fromVideoRepresentationId:String(t),toVideoRepresentationId:String(n)}}),G.dispatch({payload:{},type:"representation_changed"})},playerInstanceKey:l,playerSubOrigin:s,playerViewportDimensionsInitial:a.dimensions,prefetchResultInitial:_!=null&&_.length>0?{prefetchedRepresentationIds:_,prefetchStartedAt:P.host.clock()}:null,videoFBID:i,workerPortFactories:c,workerTypeInitial:u});E.current=O;function B(){var e;return(e=z.current)!=null?e:null}var W=o("VideoPlayerNextgendashEngineExtrasAPI").createVideoPlayerNextgendashEngineExtrasAPI({getVideoElementAPI:B,mainSm:O}),q=null,U=o("VideoPlayerImplementationEngineAPI").createVideoPlayerImplementationEngine({createDebugAPI:function(t){var e=t.getVideoElementAPI,n=t.loggerToVPL;return L==null?void 0:L.createDebugAPI({engineExtrasAPI:W,getConfig:function(){return a.experimentationConfig},getVideoElementAPI:e,loggerToVPL:n,mainSm:O})},createVideoPlayerError:function(t,n){var e=o("nextgendasherr").nextgendasherrFromNextgendasherr(t);return e!=null?o("VideoPlayerNextgendashEngineErrors").createVideoPlayerErrorFromNextgendashEngine(P,e,n):o("VideoPlayerImplementationErrors").createVideoPlayerErrorFromGenericError("VideoPlayerFatalCaughtByNextgendashEngine",t,n)},destroyEngineParts:function(){e();function e(){if(N==null||N.point("destroy"),r("gkx")("18183")){var e,t;N==null||N.endWithAbort(),(e=D)==null||e.remove(),D=null,(t=x)==null||t.remove(),x=null}O.sendEvent({reason:"destroyEngineParts",type:"__dispose"}),S==null||S.disconnect()}},engineCreateArgs:e,engineExtrasAPI:W,engineMetadata:{isAbrEnabled:!0,playerInstanceKey:a.loggingMetaData.instanceKey,playerVersion:"comet_nextgendash",streamingFormat:"dash"},handleVideoElementChanged:function(t,n){F!=null&&(F(),F=null),t!=null&&(F=N==null?void 0:N.subspan("video_element"),q!=null&&(r("clearTimeout")(q),q=null),O.sendEvent({mediaElement:o("VideoPlayerNextgendashHostAPI").opaqueVideoPlayerNextgendashHostMediaElement(t),type:"update_media_element"}))},handleVideoInfoChange:function(t){if(O.state.state!=="__null__"&&O.state.state!=="__disposed__"){var e,n=O.state;(t.dimensions.height!==n.playerViewportDimensions.height||t.dimensions.width!==n.playerViewportDimensions.width)&&O.sendEvent({playerViewportDimensions:t.dimensions,type:"update_player_viewport_dimensions"});var r=n.dashManifestParsed.state,o=t.coreVideoPlayerMetaData.expiredVideoUrlRefreshHandler,a=(e=r.expiredVideoUrlRefreshHandlerState)==null?void 0:e.identity;r.state!=="__null__"&&r.state!=="__disposed__"&&(a==null?o!=null:a!==o)&&O.sendEvent({expiredVideoUrlRefreshHandlerState:o!=null?{handler:v(o),identity:o}:null,type:"update_expired_video_url_refresh_handler"}),$.trackScrollPosition&&t.videoPlayerScrollPositionAPI!=null&&n.scrollPositionAPI!==t.videoPlayerScrollPositionAPI&&O.sendEvent({scrollPositionAPI:t.videoPlayerScrollPositionAPI,type:"update_scroll_position_api"})}return!1}}),V=U.engine,H=U.handleFatalImplementationError,G=U.machine,z=U.videoElementAPIRef;I.current=G;for(var j of T)G.dispatch({payload:{warningError:j},type:"implementation_warning"});if(T.length=0,(a.manifest!=null||a.manifestUrl!=null)&&O.sendEvent({dashManifestUrl:a.manifestUrl,dashManifestXmlString:a.manifest,type:"update_dash_manifest"}),N){var K=void 0,Q=null,X=null,Y=function(){var e=G.getCurrentState().controlledState,t=e.error,n=e.playbackState;if(n!==K){if(Q!=null&&(t!=null||n!=="paused")&&(Q(),Q=null),X!=null&&(t!=null||n!=="stalling")&&(X(),X=null),t!=null){var r;N.endWithError(h!=null?h:R(P,t)),(r=D)==null||r.remove(),D=null}else if(n==="playing"){var o;N.endWithSuccess(),(o=D)==null||o.remove(),D=null}else n==="paused"?Q=N.subspan("paused"):n==="stalling"&&(X=N.subspan("stalling"));K=n}};D=V.implementationController.subscribe(Y),Y()}if(P.config.logStallDetailsAsPlayerWarning){var J=void 0,Z=null,ee=function(){var e=G.getCurrentState().controlledState,t=e.error,n=e.playbackState;if(n!==J){if((t!=null||n!=="stalling")&&Z!=null&&(r("clearTimeout")(Z),Z=null),t!=null){var o;(o=x)==null||o.remove(),x=null}else if(n==="stalling"&&Z==null){var a=P.host.clock(),i=200;Z=r("setTimeout")(function(){O.sendEvent({stallStartClock:a,type:"debug_log_stall_details"})},i)}J=n}};x=V.implementationController.subscribe(ee),ee()}return N==null||N.point("engine_created"),V}function R(e,t){return o("nextgendasherr").nextgendasherr.apply(void 0,[e,t.errorName,t.errorMessageFormat].concat(t.errorMessageParams))}l.preloadVideoPlayerNextgendashWorker=m,l.prefetchUsingNextgendash=h,l.sendNavigationSignalToNextgendashWorker=y,l.createVideoPlayerNextgendashEngine=S}),98);
__d("VideoPlayerNextgendashEngineData",["VideoPlayerOzImplementationData","err"],(function(t,n,r,o,a,i,l){"use strict";var e=["nextgendashAvailability"];function s(t){var n=t.nextgendashAvailability,a=babelHelpers.objectWithoutPropertiesLoose(t,e);if(n!=="AVAILABLE"){var i=r("err")("nextgendashAvailability="+n);return i.name="GotNextgendashAvailability/"+n,i}var l=o("VideoPlayerOzImplementationData").makeOzImplementationData(a);return l}l.makeNextgendashEngineData=s}),98);
__d("VideoPlayerNextgendashImplementation.react",["VideoPlayerImplementationEngineAPI","VideoPlayerNextgendashEngine"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=o("VideoPlayerImplementationEngineAPI").useVideoPlayerImplementationEngine(e,o("VideoPlayerNextgendashEngine").createVideoPlayerNextgendashEngine),n=t.reactVideoFrameAndComponents;return n}l.default=e}),98);
__d("VideoPlayerNextgendashLoggingDestinationODSWorkerToMain",["Random","VideoPlayerNextgendashBatcher"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=o("VideoPlayerNextgendashBatcher").createBatcher(t,50,20,function(t){e.postMessage({calls:t,type:"comet_video_player_nextgendash__worker_to_main_ods_calls"},[])});return{displayName:"VideoPlayerNextgendashLoggingDestinationODSWorkerToMain",log:function(t,r){switch(r.type){case"ods_call":{var e=r.odsCall,a=e.entity,i=e.key,l=e.sampleRate;o("Random").coinflip(l)&&n.push({entity:a,key:i,sampleRate:1});return}default:return}}}}l.createVideoPlayerNextgendashLoggingDestinationODSWorkerToMain=e}),98);
__d("VideoPlayerNextgendashLoggingDestinationQPLWorkerToMain",["VideoPlayerNextgendashBatcher"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=o("VideoPlayerNextgendashBatcher").createBatcher(t,50,20,function(t){e.postMessage({calls:t,type:"comet_video_player_nextgendash__worker_to_main_qpl_calls"},[])});return{displayName:"VideoPlayerNextgendashLoggingDestinationQPLWorkerToMain",log:function(t,r){switch(r.type){case"qpl_call":{n.push(r.qplCall);return}default:return}}}}l.createVideoPlayerNextgendashLoggingDestinationQPLWorkerToMain=e}),98);
/**
 * License: https://www.facebook.com/legal/license/k5cmJzUOK4Y/
 */
__d("VideoPlayerNextgendashMp4SidxParser",["DataViewReader","nextgendasherr"],(function(t,n,r,o,a,i,l){"use strict";var e=1936286840;function s(t,n,a){var i=new(r("DataViewReader"))(new DataView(n.buffer,n.byteOffset,n.byteLength)),l=i.readUint32(),s=i.readUint32();if(s!==e)throw o("nextgendasherr").nextgendasherr(t,"VideoPlayerNextgendashMp4SidxParserInvalidBoxType",'Invalid box type, expected "sidx".');l===1&&(l=i.readUint64());var u=i.readUint8();i.skip(3),i.skip(4);var c=i.readUint32();if(!c)throw o("nextgendasherr").nextgendasherr(t,"VideoPlayerNextgendashMp4SidxParserInvalidTimescale","Invalid timescale.");var d,m;u===0?(d=i.readUint32(),m=i.readUint32()):(d=i.readUint64(),m=i.readUint64()),i.skip(2);for(var p=i.readUint16(),_=d,f=a+l+m,g=0,h=[],y=0;y<p;y++){var C=i.readUint32(),b=(C&2147483648)>>>31,v=C&2147483647,S=i.readUint32();if(C=i.readUint32(),b===1)throw o("nextgendasherr").nextgendasherr(t,"VideoPlayerNextgendashMp4SidxParserUnsupportedHierarchical","Hierarchical SIDXs are not supported.");var R=_/c,L=(_+S)/c;y===0&&!t.config.sidxDisableShiftingMediaTimeRangesByEarliestPresentationTime&&(g=R),h.push({mediaFileByteRange:{byteLength:v,byteOffset:f},mediaTimeRange:[R-g,L-g]}),_+=S,f+=v}return h}l.parseMp4Sidx=s}),98);
/**
 * License: https://www.facebook.com/legal/license/k5cmJzUOK4Y/
 */
__d("VideoPlayerNextgendashWebmSidxParser",["DataViewReader","nextgendasherr"],(function(t,n,r,o,a,i,l){"use strict";var e=440786851,s=408125543,u=357149030,c=2807729,d=17545,m=475249515,p=187,_=179,f=183,g=241,h=[new Uint8Array([255]),new Uint8Array([127,255]),new Uint8Array([63,255,255]),new Uint8Array([31,255,255,255]),new Uint8Array([15,255,255,255,255]),new Uint8Array([7,255,255,255,255,255]),new Uint8Array([3,255,255,255,255,255,255]),new Uint8Array([1,255,255,255,255,255,255,255])];function y(e,t){if(!e&&!t)return!0;if(!e||!t||e.length!=t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!=t[n])return!1;return!0}var C=(function(){function e(e,t,n){this.$1=e,this.id=t,this.$2=n}var t=e.prototype;return t.getOffset=function(){return this.$2.byteOffset},t.createParser=function(){return new b(this.$1,this.$2)},t.getUint=function(){if(this.$2.byteLength>8)throw o("nextgendasherr").nextgendasherr(this.$1,"VideoPlayerNextgendashWebmSidxParserError","EbmlElement: Unsigned integer has too many bytes.");if(this.$2.byteLength==8&&this.$2.getUint8(0)&224)throw o("nextgendasherr").nextgendasherr(this.$1,"VideoPlayerNextgendashWebmSidxParserError","EbmlParser: Unsigned integer must be at most 53 bits.");for(var e=0,t=0;t<this.$2.byteLength;t++){var n=this.$2.getUint8(t);e=256*e+n}return e},t.getFloat=function(){if(this.$2.byteLength==4)return this.$2.getFloat32(0);if(this.$2.byteLength==8)return this.$2.getFloat64(0);throw o("nextgendasherr").nextgendasherr(this.$1,"VideoPlayerNextgendashWebmSidxParserError","EbmlElement: floating point numbers must be 4 or 8 bytes.")},e})(),b=(function(){function e(e,t){this.$1=e,this.$2=t,this.$3=new(r("DataViewReader"))(this.$2)}var t=e.prototype;return t.hasMoreData=function(){return this.$3.hasMoreData()},t.parseElement=function(){var t=this.$4(),n=this.$5(),r;e.$6(n)?r=this.$2.byteLength-this.$3.getCursor():r=e.$7(this.$1,n);var o=this.$3.getCursor()+r<=this.$2.byteLength?r:this.$2.byteLength-this.$3.getCursor(),a=new DataView(this.$2.buffer,this.$2.byteOffset+this.$3.getCursor(),o);return this.$3.skip(o),new C(this.$1,t,a)},t.$4=function(){var e=this.$5();if(e.length>7)throw o("nextgendasherr").nextgendasherr(this.$1,"VideoPlayerNextgendashWebmSidxParserError","EbmlParser: EBML ID must be at most 7 bytes.");for(var t=0,n=0;n<e.length;n++)t=256*t+e[n];return t},t.$5=function(){var e=this.$3.readUint8(),t;for(t=1;t<=8;t++){var n=1<<8-t;if(e&n)break}if(t>8)throw o("nextgendasherr").nextgendasherr(this.$1,"VideoPlayerNextgendashWebmSidxParserError","EbmlParser: Variable sized integer must fit within 8 bytes.");var r=new Uint8Array(t);r[0]=e;for(var a=1;a<t;a++)r[a]=this.$3.readUint8();return r},e.$7=function(t,n){if(n.length==8&&n[1]&224)throw o("nextgendasherr").nextgendasherr(t,"VideoPlayerNextgendashWebmSidxParserError","EbmlParser: Variable sized integer value must be at most 53 bits.");for(var e=1<<8-n.length,r=n[0]&e-1,a=1;a<n.length;a++)r=256*r+n[a];return r},e.$6=function(t){for(var e=0;e<h.length;e++)if(y(t,h[e]))return!0;return!1},e})();function v(e,t){for(var n=t.createParser(),r=1e6,a=null;n.hasMoreData();){var i=n.parseElement();i.id==c?r=i.getUint():i.id==d&&(a=i.getFloat())}if(a==null)return e.logging.log(e,{error:o("nextgendasherr").nextgendasherr(e,"VideoPlayerNextgendashWebmSidxParserError","Duration does not exist"),type:"generic_error_as_warning"}),null;var l=r/1e9,s=a*l;return{duration:s,timecodeScale:l}}function S(e,t,n,r,a){for(var i=[],l=t.createParser(),s=-1,u=-1;l.hasMoreData();){var c=l.parseElement();if(c.id==p){var d=R(e,c);if(d){var m=r*d.unscaledTime,_=n+d.relativeOffset;if(s>=0){if(!(u>=0))throw o("nextgendasherr").nextgendasherr(e,"VideoPlayerNextgendashWebmSidxParserError","Offset must be non-negative given a valid timestamp.");i.push({mediaFileByteRange:{byteLength:_-u,byteOffset:u},mediaTimeRange:[s,m]})}s=m,u=_}}}if(s>=0){if(!(u>=0))throw o("nextgendasherr").nextgendasherr(e,"VideoPlayerNextgendashWebmSidxParserError","Offset must be non-negative given a valid timestamp.");var f=a;i.push({mediaFileByteRange:{byteLength:null,byteOffset:u},mediaTimeRange:[s,f]})}return i}function R(e,t){var n=t.createParser(),r=n.parseElement();if(r.id!=_)return e.logging.log(e,{error:o("nextgendasherr").nextgendasherr(e,"VideoPlayerNextgendashWebmSidxParserError","CueTime element does not exist."),type:"generic_error_as_warning"}),null;var a=r.getUint(),i=n.parseElement();if(i.id!=f)return e.logging.log(e,{error:o("nextgendasherr").nextgendasherr(e,"VideoPlayerNextgendashWebmSidxParserError","CueTrackPositions element does not exist."),type:"generic_error_as_warning"}),null;for(var l=i.createParser(),s=0;l.hasMoreData();){var u=l.parseElement();if(u.id==g){s=u.getUint();break}}return{relativeOffset:s,unscaledTime:a}}function L(e,t){for(var n=t.createParser(),r=null;n.hasMoreData();){var a=n.parseElement();if(a.id==u){r=a;break}}return r?v(e,r):(e.logging.log(e,{error:o("nextgendasherr").nextgendasherr(e,"VideoPlayerNextgendashWebmSidxParserError","Info element does not exist."),type:"generic_error_as_warning"}),null)}function E(t,n){var r=new b(t,n),a=r.parseElement();if(a.id!=e)return t.logging.log(t,{error:o("nextgendasherr").nextgendasherr(t,"VideoPlayerNextgendashWebmSidxParserError","EBML element does not exist."),type:"generic_error_as_warning"}),null;var i=r.parseElement();if(i.id!=s)return t.logging.log(t,{error:o("nextgendasherr").nextgendasherr(t,"VideoPlayerNextgendashWebmSidxParserError","Segment element does not exist."),type:"generic_error_as_warning"}),null;var l=i.getOffset(),u=L(t,i);return u?{duration:u.duration,segmentOffset:l,timecodeScale:u.timecodeScale}:null}function k(e,t,n){var r=new DataView(n.buffer,n.byteOffset,n.byteLength),a=new DataView(t.buffer,t.byteOffset,t.byteLength),i=E(e,r);if(!i)return[];var l=new b(e,a),s=l.parseElement();return s.id!=m?(e.logging.log(e,{error:o("nextgendasherr").nextgendasherr(e,"VideoPlayerNextgendashWebmSidxParserError","CuesElement does not exist."),type:"generic_error_as_warning"}),[]):S(e,s,i.segmentOffset,i.timecodeScale,i.duration)}l.parseWebmSidx=k}),98);
__d("VideoPlayerNextgendashPlaybackLoop",["Promise","VideoPlayerNextgendashABR","VideoPlayerNextgendashFetchedResource","VideoPlayerNextgendashHostAPI","VideoPlayerNextgendashManifestParser","VideoPlayerNextgendashMediaUtils","VideoPlayerNextgendashMp4SidxParser","VideoPlayerNextgendashQPL","VideoPlayerNextgendashStateMachine","VideoPlayerNextgendashURLUtils","VideoPlayerNextgendashWebmSidxParser","deepEquals","emptyFunction","nextgendasherr","videoUrlUtils"],(function(t,n,r,o,a,i,l){"use strict";var e=["buffer"],s=["abortIsPendingUpdateEnd","errorIsPendingUpdateEnd","qplSubspanEnd"],u=["abortIsPendingUpdateEnd","errorIsPendingUpdateEnd","qplSubspanEnd"],c=["abortIsPendingUpdateEnd","errorIsPendingUpdateEnd","qplSubspanEnd"],d=["buffer"],m,p=[],_=new Uint8Array(0),f=.2,g=500,h={audioLang:null,audioRole:null,videoLang:null,videoRole:null};function y(e,t){return t.type==="BaseURLByteRange"?o("VideoPlayerNextgendashURLUtils").addByteRangeParamsToURL(e,t.baseURL,t.byteRange):t.type==="BaseURLInitURL"?o("VideoPlayerNextgendashURLUtils").combineSegmentTemplateURL(t.baseURL,t.initURL):o("VideoPlayerNextgendashURLUtils").combineSegmentTemplateURL(t.baseURL,t.relativeURL)}var C=o("VideoPlayerNextgendashStateMachine").defineStateMachine(null,function(e){var t,n=e.args,r=n.playerStateFromMain,a=n.sendMediaSourceToMain,i=e.env,l=e.eventClock,s=e.sendToSelf,u={debugPlaybackLoopRecentChanges:[],fetchDemands:[],fetchDemandsPausedUntilMs:null,loopState:o("VideoPlayerNextgendashStateMachine").skipAutoDisposeInsideThisObject({loopIteration:0,loopReasons:U(i,0,p,"0:initial"),loopScheduledToUnixMs:l.unixMs,loopTimerDelayMs:null,loopTimerID:null}),mediaSourceState:B(i,s,a,null),playerStateFromMain:r,playerWarningDedupMap:new Map,recoveringFromMediaError:null,recoveringFromMediaErrorAttempt:0,state:"playing",streams:[]};return(t=H(i,u,u.loopState.loopIteration,e))!=null?t:u},function(e){var t=e.args,n=t.sendMediaSourceToMain,r=t.sendPlayerWarningToMain,a=e.env,i=e.event,l=e.eventClock,s=e.sendToSelf,u=e.state;function c(e){function t(e,t){e.state==="playing"&&e.streams.forEach(function(e){e.sourceBufferState!=null&&t(e.sourceBufferState.sourceBufferCleanup)})}u.state!=="playing"&&e.loopState.loopTimerID!=null&&a.host.timers.clearTimeout(e.loopState.loopTimerID);var n=new Set;t(e,function(e){n.add(e)}),u.state!=="__disposed__"&&t(u,function(e){n.delete(e)}),n.forEach(function(e){return e()})}var d=3;function m(e,t){var i=e.recoveringFromMediaError,l=e.recoveringFromMediaErrorAttempt;if(i!=null||l>=d){var u=[];throw i!=null&&u.push("already attempting a recovery"),l>=d&&u.push("already reached max attempts"),o("nextgendasherr").nextgendasherrFromCause(a,t,"VideoPlayerNextgendashInvalidStartErrorRecoveryAttempt","Invalid attempt to start error recovery: "+u.join(" and "))}var c=e,m=c,p=m.mediaSourceState;p.mediaSourceCleanup();var _=B(a,s,n,p.mediaSourceIndex);return r(o("nextgendasherr").nextgendasherrFromCause(a,t,"VideoPlayerNextgendashPlaybackLoopRecoveringFromError","Replacing MediaSource #%s with #%s",p.mediaSourceIndex,_.mediaSourceIndex)),c=babelHelpers.extends({},c,{debugPlaybackLoopRecentChanges:q(c.debugPlaybackLoopRecentChanges,["recoveringFromError:"+t.name,"mediaSourceState:replace:"+p.mediaSourceIndex+"-->"+_.mediaSourceIndex]),mediaSourceState:_,recoveringFromMediaError:t,recoveringFromMediaErrorAttempt:c.recoveringFromMediaErrorAttempt+1,streams:c.streams.map(function(e){return e.sourceBufferState!=null?(e.sourceBufferState.sourceBufferCleanup(),babelHelpers.extends({},e,{appendState:o("VideoPlayerNextgendashStateMachine").skipAutoDisposeInsideThisObject({appendChain:null,currSourceBufferOperation:null,lastAppendOperation:null,lastRemoveOperation:null,lastSourceBufferOperation:null,pendingAppendOperations:[],pendingRemoveOperations:[],sourceBufferRanges:[],sourceBufferRangesAnnotated:[],workaroundForSegmentBufferedInsufficiently:[]}),sourceBufferState:null})):e})}),c}switch(u.state){case"playing":switch(i.type){case"__enter":{c(i.prevState);return}case"__exception":return;case"__dispose":return;case"_fetch_transitioned":return N(a,e,i.type+":"+i.requestID,0,u);case"update_player_state_from_main":{var p,_,f=o("VideoPlayerNextgendashStateMachine").skipAutoDisposeInsideThisObject(i.playerStateFromMain),h=babelHelpers.extends({},u,{playerStateFromMain:f}),y=h.playerStateFromMain.dashManifestData;if((y==null?void 0:y.createdAt.perfMs)!==((p=u.playerStateFromMain.dashManifestData)==null?void 0:p.createdAt.perfMs)){var C=[];h=babelHelpers.extends({},h,{streams:h.streams.map(function(e){return Ae(a,C,e,y)})}),h=babelHelpers.extends({},h,{debugPlaybackLoopRecentChanges:q(h.debugPlaybackLoopRecentChanges,C)})}var b=(_=f.mediaElementSnapshot)==null?void 0:_.error;if(b!=null&&!h.recoveringFromMediaError&&h.recoveringFromMediaErrorAttempt<d)h=m(h,o("nextgendasherr").nextgendasherrFromMediaError(a,b));else if(h.recoveringFromMediaError&&f.mediaElementSnapshot!=null&&f.mediaElementSnapshot.error==null&&f.mediaSourceIndexApplied===h.mediaSourceState.mediaSourceIndex){var v=h,S=v.recoveringFromMediaError;r(o("nextgendasherr").nextgendasherrFromCause(a,S,"VideoPlayerNextgendashPlaybackLoopRecoveredFromMediaError")),h=babelHelpers.extends({},h,{debugPlaybackLoopRecentChanges:q(h.debugPlaybackLoopRecentChanges,["recoveringFromMediaError:"+S.name+":recovered"]),recoveringFromMediaError:null,streams:h.streams.map(function(e){return e.streamFatalError!=null?babelHelpers.extends({},e,{streamFatalError:null}):e})})}return N(a,e,i.type+":"+i.reason,0,h)}case"request_recovery_from_source_reset":{var R=u,L="SourceResetRecoveryRequest:"+i.mediaSourceIndex+":"+R.mediaSourceState.mediaSourceIndex;if(i.mediaSourceIndex!==R.mediaSourceState.mediaSourceIndex)R=babelHelpers.extends({},R,{debugPlaybackLoopRecentChanges:q(R.debugPlaybackLoopRecentChanges,[L+"->mediaSourceIndexMismatch"])});else if(!R.recoveringFromMediaError&&R.recoveringFromMediaErrorAttempt<d)R=m(babelHelpers.extends({},R,{debugPlaybackLoopRecentChanges:q(R.debugPlaybackLoopRecentChanges,[L+"->beginErrorRecoveryDueToElementSourceReset"])}),o("nextgendasherr").nextgendasherr(a,"VideoPlayerNextgendashPlaybackLoopElementSourceResetAsError"));else{var E=[];R.recoveringFromMediaError&&E.push("StillAttemptingPreviousRecovery"),R.recoveringFromMediaErrorAttempt>=d&&E.push("ReachedRetryCap"),R=babelHelpers.extends({},R,{debugPlaybackLoopRecentChanges:q(R.debugPlaybackLoopRecentChanges,[L+"->"+E.join(":")])})}return N(a,e,""+i.type,0,R)}case"navigation_signal_pause_fetch_demands":{var k=a.host.clock().unixMs+g,I=babelHelpers.extends({},u,{debugPlaybackLoopRecentChanges:q(u.debugPlaybackLoopRecentChanges,["navigation_signal_pause_fetch_demands:pauseUntilMs="+k]),fetchDemandsPausedUntilMs:k});return I}case"_media_source_event":{var T=u,D="mediaSourceEvent:"+i.mediaSourceIndex+":"+i.mediaSourceEventType;if(i.mediaSource!==T.mediaSourceState.mediaSource||i.mediaSourceIndex!==T.mediaSourceState.mediaSourceIndex)T=babelHelpers.extends({},T,{debugPlaybackLoopRecentChanges:q(T.debugPlaybackLoopRecentChanges,[D+"->mediaSourceMismatch:"+T.mediaSourceState.mediaSourceIndex])});else if(T.mediaSourceState.waitingForFirstSourceopen&&i.mediaSourceEventType==="sourceopen")T=babelHelpers.extends({},T,{debugPlaybackLoopRecentChanges:q(T.debugPlaybackLoopRecentChanges,[D+"->first"]),mediaSourceState:babelHelpers.extends({},T.mediaSourceState,{waitingForFirstSourceopen:!1})});else if(i.mediaSourceEventType==="sourceclose")if(!T.recoveringFromMediaError&&T.recoveringFromMediaErrorAttempt<d)T=m(babelHelpers.extends({},T,{debugPlaybackLoopRecentChanges:q(T.debugPlaybackLoopRecentChanges,[D+"->beginErrorRecoveryBeforeSeeingMediaError"])}),o("nextgendasherr").nextgendasherr(a,"VideoPlayerNextgendashPlaybackLoopSourceCloseEventAsError"));else{var x=[];T.recoveringFromMediaError&&x.push("StillAttemptingPreviousRecovery"),T.recoveringFromMediaErrorAttempt>=d&&x.push("ReachedRetryCap"),T=babelHelpers.extends({},T,{debugPlaybackLoopRecentChanges:q(T.debugPlaybackLoopRecentChanges,[D+"->"+x.join(":")])})}else T=babelHelpers.extends({},T,{debugPlaybackLoopRecentChanges:q(T.debugPlaybackLoopRecentChanges,[D])});return N(a,e,i.type+":"+i.mediaSourceEventType,0,T)}case"_source_buffer_event":{var P=u.streams.find(function(e){var t;return((t=e.sourceBufferState)==null?void 0:t.sourceBuffer)===i.sourceBuffer}),M=P==null?void 0:P.appendState.currSourceBufferOperation;if(P!=null&&M!=null){var w=!1,A=[],F=u.streams.map(function(e){var t,n;if(e!==P)return e;var o=ge(a,r,e,A,i,l,(t=(n=u.playerStateFromMain.mediaElementSnapshot)==null?void 0:n.currentTime)!=null?t:0,function(){return _e(a,e.sourceBufferState)});return o!=null?(w=!0,babelHelpers.extends({},e,o)):e}),O=babelHelpers.extends({},u,{debugPlaybackLoopRecentChanges:q(u.debugPlaybackLoopRecentChanges,A),streams:F});return w?N(a,e,i.type+":"+i.sourceBufferEventType+":"+M.operationState+":stateHasChanged",0,O):a.config.disablePlaybackLoopSchedulingOnTimer?u:N(a,e,i.type+":"+i.sourceBufferEventType+":"+M.operationState+":!stateHasChanged",$,u)}else return a.config.disablePlaybackLoopSchedulingOnTimer?u:N(a,e,i.type+":"+i.sourceBufferEventType+":null_currSourceBufferOperation",$,u)}case"_observe_and_act":return H(a,u,i.loopIteration,e);default:i.type;return}case"__disposed__":{switch(i.type){case"__enter":{c(i.prevState);return}}return}default:u.state;return}});function b(e,t,n,r,a){var i=a.templateNumber,l=a.templateTime,s=r;for(var u of[["Number",i],["Time",l]]){var c=u[0],d=u[1],m=new RegExp("\\$"+c+"\\$","g");if(m.test(s)){if(d==null)throw o("nextgendasherr").nextgendasherr(e,"VideoPlayerNextgendashPlaybackLoopSegmentURLTemplateMissingValue/"+c,"%s:%s - Unable to build URL for segment data#%s: missing value for $"+c+"$",t,n,a.segmentId);s=s.replace(m,String(d))}}return s}function v(e,t){return e.slice().sort(function(e,n){var r=t.indexOf(e.representationId);r===-1&&(r=Number.POSITIVE_INFINITY);var o=t.indexOf(n.representationId);return o===-1&&(o=Number.POSITIVE_INFINITY),r<o?-1:r>o?1:e.demandedAtClock.perfMs-n.demandedAtClock.perfMs<.001?e.fetchDemandOrder-n.fetchDemandOrder:e.demandedAtClock.perfMs-n.demandedAtClock.perfMs})}function S(e){for(var t of e.dataKeyToResponseByteRange.keys())if(!t.startsWith("init-")&&!t.startsWith("sidx-"))return!1;return!0}function R(e,t,n,r,o){for(var a=0;a<t.length;++a){var i=t[a],l=i.responseFetch;if(l!=null){var s=null,u=l.state;if(u.state!=="failed")if(u.state==="aborted"||u.state==="__disposed__")s="EvictedAbortedOrInvalid";else if(u.state==="__null__"||u.state==="waiting_start"||u.state==="waiting_retry_or_failed"||u.state==="waiting_start_from_retry"||u.state==="waiting_headers"||u.state==="waiting_data"){var c=S(i);if(c){var d;n.set(i.streamType,((d=n.get(i.streamType))!=null?d:0)+1)}else{var m;r.set(i.streamType,((m=r.get(i.streamType))!=null?m:0)+1)}}else u.state==="completed"||u.state;s!=null&&(o.push("evictedFetch:"+Array.from(i.dataKeyToResponseByteRange.keys()).join("+")+":"+s),t[a]=babelHelpers.extends({},i,{evictedClock:e.host.clock(),evictedReason:s,responseFetch:null}))}}}var L=5*1e3;function E(e,t){var n=o("videoUrlUtils").parseCdnUrlParams(t).expirationDate;return n!=null&&n.getTime()-L<=e.host.clock().unixMs}function k(e,t){return E(e,t.baseURL)||t.type==="BaseURLInitURL"&&E(e,t.initURL)}function I(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r[0]<=t&&t<=r[1])return(r[1]-t)*1e3}return 0}function T(e){return e<2e3?3:e<5e3?2:1}function D(e,t,n,r,o,a,i,l){if(!(l!=null&&e.host.clock().unixMs<l))for(var s=e.config.enableCombinedInitSidxFetch,u=2,c=1,d=1,m=0;m<t.length;++m){var p=t[m];if(p.responseFetch==null){if(e.config.enableCdnUrlRefresh&&k(e,p.requestInfoArgs)){p.isAwaitingUrlRefresh||(t[m]=babelHelpers.extends({},p,{isAwaitingUrlRefresh:!0}));continue}var _=S(p),f=void 0,g=void 0;if(s){var h,y;if(f=_?(h=n.get(p.streamType))!=null?h:0:(y=r.get(p.streamType))!=null?y:0,_)g=u;else if(e.config.enableAdaptiveConcurrentSegmentFetching){var C,b=(C=i.get(p.streamType))!=null?C:0;g=T(b)}else g=c}else{var v,R,L=((v=n.get(p.streamType))!=null?v:0)+((R=r.get(p.streamType))!=null?R:0);f=L,g=d}if(f<g){if(_){var E;n.set(p.streamType,((E=n.get(p.streamType))!=null?E:0)+1)}else{var I;r.set(p.streamType,((I=r.get(p.streamType))!=null?I:0)+1)}var D=o(p);a.push("newFetch:"+Array.from(p.dataKeyToResponseByteRange.keys()).join("+")),t[m]=babelHelpers.extends({},p,{evictedClock:null,evictedReason:null,responseFetch:D})}}}}function x(e,t,n,r,a,i,l){var s=new Map,u=new Map;R(e,n,s,u,r);var c=e.config.trackScrollPosition&&e.config.qplEnabled?new Map:null;function d(n){if(c!=null&&a!=null&&a.distanceToViewport!==0){var r=a.scrollDirection,i=a.distanceToViewport>0&&r==="up"||a.distanceToViewport<0&&r==="down";if(i){var l,s=Math.abs(a.distanceToViewport),u=s<.5?"near":s<1.5?"mid":s<3?"far":"very_far";c.set(u,((l=c.get(u))!=null?l:0)+1)}}var d=t.makeChildSm,m=t.sendToOther,p=t.sendToSelf,_=y(e,n.requestInfoArgs),f=d("fetch-"+n.requestDraft.requestID,o("VideoPlayerNextgendashFetchedResource").VideoPlayerNextgendashFetchedResourceSM,{onTransitioned:function(t,r,o){p({requestID:n.requestDraft.requestID,type:"_fetch_transitioned"},o)},request:babelHelpers.extends({},n.requestDraft,{requestCreatedClock:e.host.clock(),requestInfo:_})});return m(f,{type:"start"}),f}if(D(e,n,s,u,d,r,i,l),c!=null&&c.size>0){var m,p,_,f,g=o("VideoPlayerNextgendashQPL").qplStartPlayingApi(e);g.point("fetch_offscreen_scrolling_away",{int:{countFar:(m=c.get("far"))!=null?m:0,countMid:(p=c.get("mid"))!=null?p:0,countNear:(_=c.get("near"))!=null?_:0,countVeryFar:(f=c.get("very_far"))!=null?f:0}})}return n}var $=1e3,P=20;function N(e,t,a,i,l,s){s===void 0&&(s=0);var u=t.args.sendPlayerWarningToMain,c=t.sendToSelf,d=e.host.clock().unixMs,p=d+i,_=l.loopState;if(_.loopScheduledToUnixMs==null||p<_.loopScheduledToUnixMs){var f=_.loopTimerID;f!=null&&(e.host.timers.clearTimeout(f),f=null);var g=Math.max(0,p-d),h=l.loopState.loopIteration+1,y=l.debugPlaybackLoopRecentChanges,C=h+":"+a+":"+(g<=0?"immediately":"new_timer="+g+"ms"),b=function(){try{c({loopIteration:h,reason:C,type:"_observe_and_act"})}catch(t){u(o("nextgendasherr").nextgendasherrFromCause(e,t,"VideoPlayerNextgendashPlaybackLoopScheduleObserveAndActUnexpectedException",'Caught exception from sendToSelf({loopIteration:%s,reason:"%s"})',h,C,"debugPlaybackLoopRecentChanges:\n "+y.join("\n ")))}},v=babelHelpers.extends({},l,{loopState:o("VideoPlayerNextgendashStateMachine").skipAutoDisposeInsideThisObject(babelHelpers.extends({},_,{loopReasons:U(e,_.loopIteration,_.loopReasons,C),loopScheduledToUnixMs:d+g,loopTimerDelayMs:g,loopTimerID:g>0?e.host.timers.setTimeout(b,g):null}))});return g>0?v:s>=P?(u(o("nextgendasherr").nextgendasherr(e,"VideoPlayerNextgendashPlaybackLoopScheduleObserveAndActRecursion","Too many recursive iterations: %s %s %s",s,"loopReasons="+v.loopState.loopReasons.join(","),"debugPlaybackLoopRecentChanges:\n "+v.debugPlaybackLoopRecentChanges.join("\n "))),(m||(m=n("Promise"))).resolve().then(b).catch(r("emptyFunction")),v):H(e,v,h,t,s)}else return}function M(e){var t=/^(.*)[ ][*][*][ ](\d+)$/,n=e.reduce(function(e,n){var r=t.exec(n)||[],o=r[1],a=r[2],i=a?parseInt(a,10):1;return isNaN(i)&&(i=1),e.lastLineMinusMaybeSuffix===(o||n)?babelHelpers.extends({},e,{lastLineRepeatCount:e.lastLineRepeatCount+i}):(w(e),babelHelpers.extends({},e,{lastLineMinusMaybeSuffix:o||n,lastLineRepeatCount:i}))},{coalesced:[],lastLineMinusMaybeSuffix:null,lastLineRepeatCount:0});return w(n),n.coalesced}function w(e){e.lastLineMinusMaybeSuffix!=null&&e.coalesced.push(""+e.lastLineMinusMaybeSuffix+(e.lastLineRepeatCount===1?"":" ** "+e.lastLineRepeatCount))}function A(e,t,n){if(!e.host.mediaSourceEndOfStreamCallIsExpectedToBeSafeAndNotNoop(e,t.mediaSourceState.mediaSource,t.playerStateFromMain.mediaElementSnapshot)){n.push("endOfStream skipped: !mediaSourceEndOfStreamCallIsExpectedToBeSafeAndNotNoop");return}var r=[],a=[];t.streams.forEach(function(t){if(!(t.type!=="video"&&t.type!=="audio")){if(t.targetRepresentationId==null||t.sourceBufferState==null){var n=[];t.targetRepresentationId==null&&n.push("NullTargetRepresentationId"),t.sourceBufferState==null&&n.push("NullSourceBufferState");var a=n.join("And");throw o("nextgendasherr").nextgendasherr(e,"VideoPlayerNextgendashEndOfStreamRequiredStreamNotSetup/"+a,"%s:%s - Unable to endOfStream() for required stream that is not setup: %s",t.type,t.targetRepresentationId,n.join(" and "))}var i=!1,l,s=t.appendState.sourceBufferRanges,u=t.targetRepresentationId!=null?t.sidxByRepresentationId[t.targetRepresentationId]:null;if(u!=null){var c;l=u.findLast(function(e){return e.isEndingSegment});var d=(c=l)==null?void 0:c.mediaTimeRange;d!=null&&s.some(function(e){return o("VideoPlayerNextgendashMediaUtils").isWithinRange(e,Math.max(d[0],d[1]-.001))})&&(i=!0)}r.push(i)}});var i=r.length>0&&r.every(function(e){return e});i?(e.host.mediaSourceEndOfStream(e,t.mediaSourceState.mediaSource,t.playerStateFromMain.mediaElementSnapshot),n.push("endOfStream call attempted")):n.push("endOfStream skipped: !shouldCallEndOfStreamAll")}var F=2e3;function O(e,t,n,r,a){var i,l;if(t.recoveringFromMediaError||r.streamFatalError!=null)return{abortFurtherStreamProcessing:!0,stream:r};var s=r.appendState.lastSourceBufferOperation,u=s!=null&&s.operationState==="errored"?s.error:null,c=(i=s!=null&&s.operationState==="errored"?s.waitForMediaElementErrorUntilUnixMs:null)!=null?i:0,d=(l=t.playerStateFromMain.mediaElementSnapshot)==null?void 0:l.error;if(u&&!d){var m;if(n.unixMs<c){var p;return a.push(r.type+":"+((p=r.targetRepresentationId)!=null?p:"no_target_representation")+":lastSourceBufferOperationErrorWaitForMediaError:"+(c-n.unixMs)+"ms"),{abortFurtherStreamProcessing:!0,stream:r}}return a.push(r.type+":"+((m=r.targetRepresentationId)!=null?m:"no_target_representation")+":streamFatalError:"+u.name),{abortFurtherStreamProcessing:!0,stream:babelHelpers.extends({},r,{streamFatalError:u})}}if(d){var _,f,g=o("nextgendasherr").nextgendasherrFromMediaError(e,d),h=u&&g?o("nextgendasherr").nextgendasherrFromCause.apply(void 0,[e,u,g.name,g.messageFormat].concat(g.messageParams)):(_=u!=null?u:g)!=null?_:o("nextgendasherr").nextgendasherr(e,"VideoPlayerNextgendashPlaybackLoopUnknownStreamFatalError");return a.push(r.type+":"+((f=r.targetRepresentationId)!=null?f:"no_target_representation")+":streamFatalError:"+h.name),{abortFurtherStreamProcessing:!0,stream:babelHelpers.extends({},r,{streamFatalError:h})}}return{abortFurtherStreamProcessing:!1,stream:r}}function B(e,t,n,r){var a=r!=null?r+1:0,i=e.host.mediaSourceCreate(e,function(e){var n=e.domEventType,r=e.eventTarget;t({mediaSource:r,mediaSourceEventType:n,mediaSourceIndex:a,type:"_media_source_event"})}),l=i[0],s=i[1];return n(l,a),o("VideoPlayerNextgendashStateMachine").skipAutoDisposeInsideThisObject({mediaSource:l,mediaSourceCleanup:s,mediaSourceIndex:a,waitingForFirstSourceopen:!0})}var W=60;function q(e,t){return t.length===0?e:o("VideoPlayerNextgendashStateMachine").skipAutoDisposeInsideThisObject([].concat(e.slice(0,-1),M([].concat(e.slice(-1),t))).slice(-W))}function U(e,t,n,r){return e.config.logStallDetailsAsPlayerWarning||e.config.debugViz||e.config.debugLog?(r!=null?n.concat([r]):n).filter(function(e){return e.startsWith(String(t+1)+":")||e.startsWith(String(t)+":")||e.startsWith(String(t-1)+":")||e.startsWith(String(t-2)+":")}):p}function V(e){return new Set(e.filter(function(e){return e.isAwaitingUrlRefresh}).map(function(e){var t=[e.requestInfoArgs.baseURL];return e.requestInfoArgs.type==="BaseURLInitURL"&&t.push(e.requestInfoArgs.initURL),t}).flat())}function H(e,t,n,r,a){a===void 0&&(a=0);var i=r.eventClock,l=r.sendToSelf,s=r.args.requestUrlRefresh;if(!(n<t.loopState.loopIteration)){var u=t.loopState.loopTimerID;u!=null&&(e.host.timers.clearTimeout(u),u=null);var c=t.playerStateFromMain.dashManifestData,d=10,m=10,p=[],_=[],f=0,g=i,h=g,y=e.config.enableCdnUrlRefresh?V(t.fetchDemands):null,C=t.fetchDemands,b=t.streams,S=b,R=!1,L=!1;e:do{++f,S=b,R=!1,L=!1,_.length=0;try{if(c){var E=["video","audio"].map(function(a,i){var l=S.find(function(e){return e.type===a});if(l!=null&&l.streamFatalError!=null)return l;var s=a==="video"?c.manifestRepresentations.video.length>0&&!c.audioOnly:a==="audio"?c.manifestRepresentations.audio.length>0||c.audioOnly:!1,u=s?l:void 0;u==null&&s&&(a==="video"?(u={appendState:o("VideoPlayerNextgendashStateMachine").skipAutoDisposeInsideThisObject({appendChain:null,currSourceBufferOperation:null,lastAppendOperation:null,lastRemoveOperation:null,lastSourceBufferOperation:null,pendingAppendOperations:[],pendingRemoveOperations:[],sourceBufferRanges:[],sourceBufferRangesAnnotated:[],workaroundForSegmentBufferedInsufficiently:[]}),blockedRepresentations:{},manifestRepresentationsCount:0,playableRepresentations:[],prevSelectedMediaVariant:null,prevSelectedVideoQualityDisplayLabel:null,sidxByRepresentationId:{},sourceBufferState:null,streamFatalError:null,targetRepresentationId:null,targetRepresentationReason:null,targetVariantRepresentationIds:[],type:"video",videoABRState:null,videoABRStateClock:null},u=Ae(e,_,u,c)):a==="audio"&&(u={appendState:o("VideoPlayerNextgendashStateMachine").skipAutoDisposeInsideThisObject({appendChain:null,currSourceBufferOperation:null,lastAppendOperation:null,lastRemoveOperation:null,lastSourceBufferOperation:null,pendingAppendOperations:[],pendingRemoveOperations:[],sourceBufferRanges:[],sourceBufferRangesAnnotated:[],workaroundForSegmentBufferedInsufficiently:[]}),blockedRepresentations:{},manifestRepresentationsCount:0,playableRepresentations:[],prevSelectedMediaVariant:null,prevSelectedVideoQualityDisplayLabel:null,sidxByRepresentationId:{},sourceBufferState:null,streamFatalError:null,targetRepresentationId:null,targetRepresentationReason:null,targetVariantRepresentationIds:[],type:"audio"},u=Ae(e,_,u,c)));var d=l==null&&u!=null?"added":l!=null&&u==null?"removed":u!==l?"replaced":null;if(d!=null&&(R=!0,_.push(a+":"+d+":manifestRepresentations="+de(c.manifestRepresentations[a]))),u!=null){var m=u,p=_.length;try{var g=G(e,t,c,r,u,C,n*1e4+i*100+f-1,_);C=g.fetchDemands,u=g.stream}catch(t){var h=o("nextgendasherr").nextgendasherrFromCause(e,t,"VideoPlayerNextgendashPlaybackLoopObserveAndActException");_.push(u.type+":streamFatalError:"+h.name),u=babelHelpers.extends({},u,{streamFatalError:h})}if(u.streamFatalError!=null&&u.streamFatalError!==m.streamFatalError){var y;L=!0,e.logging.log(e,{error:u.streamFatalError,format:"%s:%s - new streamFatalError",params:[u.type,(y=u.targetRepresentationId)!=null?y:"no_target_representation"],type:"generic_error"})}if(u!==m&&(R=!0,_.length===p)){var b=Object.keys(m).map(function(e){return u!=null&&u[e]!==m[e]?e:null}).filter(Boolean);_.push(u.type+":changeWithoutReason:"+b.join(","))}}return u}).filter(Boolean);R&&(b=E)}else{if(S.length>0)throw o("nextgendasherr").nextgendasherr(e,"VideoPlayerNextgendashPlaybackLoopManifestDataDisappeared");break e}}finally{h=e.host.clock(),b!==S&&p.push.apply(p,_)}}while(R&&!L&&f<d&&o("VideoPlayerNextgendashHostAPI").diffVideoPlayerNextgendashClockstamp(h,g).perfMs<m);var k=[];if(!L){var T,D,P=v(C,e.config.fetchInitSidxOfAllRepresentations?b.map(function(e){return e.targetRepresentationId}).filter(Boolean):[]);e.config.enableCdnUrlRefresh&&(P=P.map(function(e){if(!e.isAwaitingUrlRefresh)return e;var t=c.manifestRepresentations[e.streamType].find(function(t){return t.representationId===e.representationId});if(t==null)return e;var n;return e.requestInfoArgs.type==="BaseURLInitURL"&&t.segmentsInfo.initURL!=null?n=babelHelpers.extends({},e.requestInfoArgs,{baseURL:t.segmentsInfo.baseURL,initURL:t.segmentsInfo.initURL}):n=babelHelpers.extends({},e.requestInfoArgs,{baseURL:t.segmentsInfo.baseURL}),babelHelpers.extends({},e,{requestInfoArgs:n})}));var M=new Map,w=(T=(D=t.playerStateFromMain.mediaElementSnapshot)==null?void 0:D.currentTime)!=null?T:0;for(var F of b){var O=I(F.appendState.sourceBufferRanges,w);M.set(F.type,O)}if(C=x(e,r,P,k,t.playerStateFromMain.scrollPositionInfo,M,t.fetchDemandsPausedUntilMs),e.config.enableCdnUrlRefresh){var B=Array.from(V(C)).filter(function(e){return y!=null&&!y.has(e)});B.length>0&&s(B.map(function(e){return{url:e}}))}}var W=babelHelpers.extends({},t,{debugPlaybackLoopRecentChanges:q(t.debugPlaybackLoopRecentChanges,p.concat(k)),fetchDemands:C,loopState:o("VideoPlayerNextgendashStateMachine").skipAutoDisposeInsideThisObject(babelHelpers.extends({},t.loopState,{loopIteration:n,loopReasons:U(e,n,t.loopState.loopReasons),loopScheduledToUnixMs:null,loopTimerDelayMs:null,loopTimerID:u})),streams:b}),H=[],z=!1,j=!1;if(W.streams.forEach(function(e){e.type!=="video"&&e.type!=="audio"||((e.appendState.currSourceBufferOperation!=null||e.appendState.pendingAppendOperations.length!==0||e.appendState.pendingRemoveOperations.length!==0)&&(z=!0),e.streamFatalError!=null&&(j=!0))}),z||j||W.recoveringFromMediaError!=null)H.push("endOfStream skipped: "+[z?"current or pending operation":null,j?"pending stream fatal error(s)":null,W.recoveringFromMediaError!=null?"recovering from MediaError "+W.recoveringFromMediaError.name:null].filter(Boolean).join(", "));else try{A(e,W,H)}catch(t){return l({exception:o("nextgendasherr").nextgendasherrFromCause(e,t,"VideoPlayerNextgendashPlaybackLoopCheckAndCallEndOfStreamError","%s","debugPlaybackLoopRecentChanges:\n "+W.debugPlaybackLoopRecentChanges.join("\n "),"endOfStreamDebugReasons:\n "+H.join("\n ")),type:"__exception"}),W}H.length===0&&H.push("endOfStream: checked, unknown result");var K=babelHelpers.extends({},W,{debugPlaybackLoopRecentChanges:q(W.debugPlaybackLoopRecentChanges,H)});return L?(l({exception:o("nextgendasherr").nextgendasherrFromMultipleCauses(e,K.streams.map(function(e){return e.streamFatalError!=null?[e.type,e.streamFatalError]:null}).filter(Boolean),"VideoPlayerNextgendashPlaybackLoopStreamFatalErrors","%s","debugPlaybackLoopRecentChanges:\n "+K.debugPlaybackLoopRecentChanges.concat(K.recoveringFromMediaErrorAttempt>0?["recoveringFromMediaErrorAttempt:"+K.recoveringFromMediaErrorAttempt]:[]).join("\n ")),type:"__exception"}),K):K.streams!==t.streams?N(e,r,"streamsChanged:("+p.join(",")+")",0,K,a+1):e.config.disablePlaybackLoopSchedulingOnTimer?K:N(e,r,"!streamsChanged",10*$,K,a+1)}}function G(e,t,n,r,a,i,l,s){var u,c,d,m,p,g,y,C,b,v,S,R,L,E=r.args,k=E.prefetchResult,I=E.sendPlayerWarningToMain,T=r.eventClock,D=r.sendToSelf,x=i,$=l*1e4,P=O(e,t,T,a,s),N=P.abortFurtherStreamProcessing,M=P.stream;if(M.streamFatalError!=null||N)return{fetchDemands:x,stream:M};var w=M.sourceBufferState;if(w!=null&&t.mediaSourceState.mediaSourceIndex!==w.mediaSourceIndex){var A;s.push(M.type+":"+((A=M.targetRepresentationId)!=null?A:"no_target_representation")+":sourceBufferState:reset:"+w.mediaSourceIndex+"-->"+t.mediaSourceState.mediaSourceIndex),w.sourceBufferCleanup(),w=null,M=babelHelpers.extends({},M,{appendState:o("VideoPlayerNextgendashStateMachine").skipAutoDisposeInsideThisObject({appendChain:null,currSourceBufferOperation:null,lastAppendOperation:null,lastRemoveOperation:null,lastSourceBufferOperation:null,pendingAppendOperations:[],pendingRemoveOperations:[],sourceBufferRanges:[],sourceBufferRangesAnnotated:[],workaroundForSegmentBufferedInsufficiently:[]}),sourceBufferState:null})}var F=M.appendState.sourceBufferRanges,B=null,W=n.manifestRepresentations[M.type].find(function(e){return e.representationId===M.targetRepresentationId}),q=M.targetRepresentationReason,U=!1;if(W!==null)switch(M.type){case"video":{var V,H=t.playerStateFromMain.selectedMediaVariant;U=Le(H,H!=null?H:h,(V=M.prevSelectedMediaVariant)!=null?V:h,t.playerStateFromMain.selectedVideoQualityDisplayLabel,M.prevSelectedVideoQualityDisplayLabel);break}case"audio":{var G,ae=t.playerStateFromMain.selectedMediaVariant;U=Ee(ae,ae!=null?ae:h,(G=M.prevSelectedMediaVariant)!=null?G:h);break}}if(W==null||U){var le=Ie(e,I,t.playerWarningDedupMap,T,t.playerStateFromMain,n,k,F,M,s);B=le.prevTargetRepresentation,M=le.stream,W=le.targetRepresentation,q=le.targetRepresentationReason}var ue=B,ce=W,de=q,me=ce.representationId;if(w==null)try{var pe=e.host.mediaSourceAddSourceBuffer(e,t.mediaSourceState.mediaSource,ce,function(e){var t=e.domEventType,n=e.eventTarget;D({debugStreamType:M.type,sourceBuffer:n,sourceBufferEventType:t,type:"_source_buffer_event"})}),_e=pe[0],fe=pe[1];w={mediaSourceIndex:t.mediaSourceState.mediaSourceIndex,sourceBuffer:_e,sourceBufferCleanup:fe,sourceBufferMimeCodecsParsed:ce.mimeCodecsParsed},s.push(M.type+":"+me+":sourceBufferState:new:"+o("VideoPlayerNextgendashMediaUtils").debugStringifyMimeCodecs(w.sourceBufferMimeCodecsParsed)),M=babelHelpers.extends({},M,{sourceBufferState:w})}catch(n){if(!(typeof n=="object"&&n!=null&&n.name==="VideoPlayerNextgendashHostAPIAddSourceBufferMediaSourceNotOpen"&&t.mediaSourceState.waitingForFirstSourceopen))throw o("nextgendasherr").nextgendasherrFromCause(e,n,"VideoPlayerNextgendashPlaybackLoopAddSourceBufferException")}var ge=w,he=K(ce),ye=ne(x,he,!0),Ce=ye==null?void 0:ye.responseFetch,be=ye==null||(u=ye.responseInfo)==null?void 0:u.buffer;if(be==null&&Ce!=null&&Ce.state.state==="completed")return M=Fe(e,I,s,M,n,me,o("nextgendasherr").nextgendasherr(e,"VideoPlayerNextgendashPlaybackLoopInitFetchBufferExtractionFailed","%s:%s - Failed to extract init buffer from the completed response; mimeCodecs=%s",M.type,me,ce.mimeCodecsParsed.mimeCodecs)),{fetchDemands:x,stream:M};if(Ce!=null&&Ce.state.state==="failed")return M=Fe(e,I,s,M,n,me,o("nextgendasherr").nextgendasherrFromCause(e,Ce.state.error,"VideoPlayerNextgendashPlaybackLoopInitFetchFailed","%s:%s - Failed to fetch init; mimeCodecs=%s",M.type,me,ce.mimeCodecsParsed.mimeCodecs)),{fetchDemands:x,stream:M};if(ye==null){var ve=e.config.enableCombinedInitSidxFetch&&ce.segmentsInfo.type==="SegmentBase"&&M.sidxByRepresentationId[me]==null&&ne(x,X(ce),!1)==null;ve?x=[].concat(x,[J(e,++$,ce)]):x=[].concat(x,[Q(e,++$,ce)])}var Se=M.sidxByRepresentationId[me],Re=ce.segmentsInfo,ke=X(ce),Te=ne(x,ke,!0),De=Te==null?void 0:Te.responseFetch,Ae=Te==null||(c=Te.responseInfo)==null?void 0:c.buffer;if(Se==null&&Ae!=null){var We=ce.mimeCodecsParsed.containerType,qe=null;try{switch(We){case"mp4":{var Ue=Re.type==="SegmentBase"?Re.indexByteRange.byteOffset:null;if(Ue==null)throw o("nextgendasherr").nextgendasherr(e,"VideoPlayerNextgendashPlaybackLoopSidxParseMp4MissingSidxByteOffset");qe=o("VideoPlayerNextgendashMp4SidxParser").parseMp4Sidx(e,Ae,Ue);break}case"webm":{if(be!=null)qe=o("VideoPlayerNextgendashWebmSidxParser").parseWebmSidx(e,Ae,be);else{if(ye==null)throw o("nextgendasherr").nextgendasherr(e,"VideoPlayerNextgendashPlaybackLoopSidxParseWebmMissingInitFetch");qe=null}break}default:throw o("nextgendasherr").nextgendasherr(e,"VideoPlayerNextgendashPlaybackLoopSidxParseUnexpectedContainerType","Unexpected container type for sidx parsing: %s",We)}}catch(t){return M=Fe(e,I,s,M,n,me,o("nextgendasherr").nextgendasherrFromCause(e,t,"VideoPlayerNextgendashPlaybackLoopSidxParseFailed","%s:%s - Failed to parse sidx; mimeCodecs=%s",M.type,me,ce.mimeCodecsParsed.mimeCodecs)),{fetchDemands:x,stream:M}}var Ve=qe;if(Ve!=null){var He,Ge;Se=Pe(e,M.type,me,Ve.map(function(e,t){return{isEndingSegment:t===Ve.length-1,mediaFileByteRange:e.mediaFileByteRange,mediaTimeRange:e.mediaTimeRange,segmentId:t}})),s.push(M.type+":"+me+":sidx/buffer:"+Ve.length+":"+Se.length),M=babelHelpers.extends({},M,{sidxByRepresentationId:o("VideoPlayerNextgendashStateMachine").skipAutoDisposeInsideThisObject(babelHelpers.extends({},M.sidxByRepresentationId,(He={},He[me]=Se,He)))}),x=(Ge=oe(x,function(e){return e===ke}))!=null?Ge:x}}else{if(Ae==null&&De!=null&&De.state.state==="completed")return M=Fe(e,I,s,M,n,me,o("nextgendasherr").nextgendasherr(e,"VideoPlayerNextgendashPlaybackLoopSidxFetchBufferExtractionFailed","%s:%s - Failed to extract sidx buffer from the completed response; mimeCodecs=%s",M.type,me,ce.mimeCodecsParsed.mimeCodecs)),{fetchDemands:x,stream:M};if(Se==null&&De!=null&&De.state.state==="failed")return M=Fe(e,I,s,M,n,me,o("nextgendasherr").nextgendasherrFromCause(e,De.state.error,"VideoPlayerNextgendashPlaybackLoopSidxFetchFailed","%s:%s - Failed to fetch sidx; mimeCodecs=%s",M.type,me,ce.mimeCodecsParsed.mimeCodecs)),{fetchDemands:x,stream:M};if(Se==null&&Re.type==="SegmentTemplate"){var ze,je=$e(Re);Se=Pe(e,M.type,me,je),s.push(M.type+":"+me+":sidx/template:"+je.length+":"+Se.length),M=babelHelpers.extends({},M,{sidxByRepresentationId:o("VideoPlayerNextgendashStateMachine").skipAutoDisposeInsideThisObject(babelHelpers.extends({},M.sidxByRepresentationId,(ze={},ze[me]=Se,ze)))})}else if(Se==null&&Te==null){var Ke;x=[].concat((Ke=oe(x,function(e){return e!==ke&&e.startsWith("sidx-"+ce.type+"-")}))!=null?Ke:x,[Y(e,++$,ce)])}}var Qe=Se,Xe=(d=(m=t.playerStateFromMain.mediaElementSnapshot)==null?void 0:m.currentTime)!=null?d:0;if(((p=M.appendState.appendChain)==null?void 0:p.mediaTail)!=null){var Ye=Ne(e,M.type,me,M.appendState.appendChain,Xe,F,t.mediaSourceState.mediaSource,s);Ye!==M.appendState.appendChain&&(M=babelHelpers.extends({},M,{appendState:o("VideoPlayerNextgendashStateMachine").skipAutoDisposeInsideThisObject(babelHelpers.extends({},M.appendState,{appendChain:Ye}))}))}var Je=ue!=null&&(((g=ce.role)!=null?g:null)!==((y=ue.role)!=null?y:null)||((C=ce.lang)!=null?C:null)!==((b=ue.lang)!=null?b:null));if(ue!=null&&me!==ue.representationId&&(de==="selected_switch"||Je)){var Ze=5,et=Je?0:Xe+Ze,tt=[et,Number.POSITIVE_INFINITY],nt={operationState:"wait_start",operationTiming:{created:e.host.clock()},operationType:"remove_operation",removeRange:tt};s.push(M.type+":"+me+":pendingRemoveOperations:newRemoveOperation:"+o("VideoPlayerNextgendashMediaUtils").debugStringifyTimeRange(nt.removeRange)),M=babelHelpers.extends({},M,{appendState:o("VideoPlayerNextgendashStateMachine").skipAutoDisposeInsideThisObject(babelHelpers.extends({},M.appendState,{pendingAppendOperations:[],pendingRemoveOperations:[].concat(M.appendState.pendingRemoveOperations,[nt])}))})}var rt=(v=(S=(R=M.appendState.pendingAppendOperations[M.appendState.pendingAppendOperations.length-1])==null?void 0:R.appendInfo.representationId)!=null?S:M.appendState.currSourceBufferOperation!=null&&M.appendState.currSourceBufferOperation.operationType==="append_operation"?M.appendState.currSourceBufferOperation.appendInfo.representationId:null)!=null?v:M.appendState.lastAppendOperation!=null&&M.appendState.lastAppendOperation.operationState==="succeeded"?M.appendState.lastAppendOperation.appendInfo.representationId:null;if(ge!=null&&me!==rt&&be!=null){var ot={appendInfo:{appendInfoType:"init",mimeCodecsParsed:ce.mimeCodecsParsed,representationId:me},buffer:be,operationState:"wait_start",operationTiming:{created:e.host.clock()},operationType:"append_operation"};s.push(M.type+":"+me+":pendingAppendOperations:initAppendOperation:"+se(ot.appendInfo)),M=babelHelpers.extends({},M,{appendState:o("VideoPlayerNextgendashStateMachine").skipAutoDisposeInsideThisObject(babelHelpers.extends({},M.appendState,{pendingAppendOperations:[ot]}))})}var at=16.924449682236,it=22,lt=4,st=t.playerStateFromMain.mediaElementSnapshot==null?"initial":t.playerStateFromMain.mediaElementSnapshot.paused?"paused":"playing",ut={initial:at,paused:lt,playing:it}[st],ct=M.appendState.appendChain!=null?Xe-f:Xe,dt=Xe+ut,mt=M.appendState.currSourceBufferOperation!=null&&M.appendState.currSourceBufferOperation.operationType==="append_operation"?M.appendState.currSourceBufferOperation.appendInfo.appendInfoType==="data"&&M.appendState.currSourceBufferOperation.appendInfo.dataByteRangeLength>0?M.appendState.currSourceBufferOperation.appendInfo:null:M.appendState.lastAppendOperation!=null&&M.appendState.lastAppendOperation.operationState==="succeeded"&&M.appendState.lastAppendOperation.appendInfo.appendInfoType==="data"&&M.appendState.lastAppendOperation.appendInfo.dataByteRangeLength>0?M.appendState.lastAppendOperation.appendInfo:null;function pt(e,t){var n=M.appendState.appendChain;return n!=null&&e===n.representationId&&n.mediaTail!=null&&t<=n.mediaTail.segmentId}var _t=Qe!=null?Qe:[],ft=_t.filter(function(e){if(!xe(F,e)&&!M.appendState.workaroundForSegmentBufferedInsufficiently.some(function(t){return t.representationId===me&&t.segment.segmentId===e.segmentId})){if(e.isEndingSegment&&Xe>e.mediaTimeRange[1])return!pt(me,e.segmentId);var t=o("VideoPlayerNextgendashMediaUtils").isWithinRange(e.mediaTimeRange,ct);if(t)return!pt(me,e.segmentId);var n=o("VideoPlayerNextgendashMediaUtils").isWithinRange(e.mediaTimeRange,dt);if(n)return!pt(me,e.segmentId);var r=ct<=e.mediaTimeRange[0]&&e.mediaTimeRange[1]<=dt;if(r)return!pt(me,e.segmentId)}return!1}),gt=new Set,ht=null;if(ft.length>1&&ce.segmentsInfo.type==="SegmentBase"){for(var yt=[],Ct=0;Ct<ft.length;++Ct){var bt=ft[Ct],vt=Z(ce,bt);gt.add(vt);var St=re(e,ht!=null?ht:x,vt);ht=St!=null?St:ht,St==null&&yt.push(bt)}for(var Rt=k!=null&&k.prefetchedRepresentationIds.includes(me)?[0]:[],Lt=z(yt,Rt),Et=0;Et<Lt.length;++Et){var kt=Lt[Et];ht=ht!=null?ht:[].concat(x),ht.push(te(e,++$,ce,kt))}}else ft.forEach(function(t){var n=Z(ce,t);gt.add(n);var r=re(e,ht!=null?ht:x,n);ht=r!=null?r:ht,r==null&&(ht=ht!=null?ht:[].concat(x),ht.push(ee(e,++$,ce,t)))});var It=!0,Tt=new Set;(ht!=null?ht:x).forEach(function(t){var r=T.perfMs-t.demandedAtClock.perfMs,o=0;r<o||t.activeDemands.forEach(function(t){t.startsWith("segment-"+M.type+"-")&&!gt.has(t)&&![mt,M.appendState.currSourceBufferOperation!=null&&M.appendState.currSourceBufferOperation.operationType==="append_operation"?M.appendState.currSourceBufferOperation.appendInfo:null].concat(M.appendState.pendingAppendOperations.map(function(e){return e.appendInfo})).filter(Boolean).some(function(r){var o=j(e,n.manifestRepresentations[M.type],r.representationId);switch(r.appendInfoType){case"init":return t===K(o);case"data":return t===Z(o,r.segment);default:r.appendInfoType}})&&Tt.add(t)})}),Tt.size>0&&(ht=oe(ht!=null?ht:x,function(e){return Tt.has(e)}));{var Dt=ht!=null?ht:x,xt=Dt.reduce(function(e,t){if(t.streamType===M.type&&t.activeDemands.size>0)if(t.responseFetch==null)e.unfulfilledDemandsCountForThisStream+=1;else{var n=t.responseFetch.state.state;n!=="completed"&&n!=="aborted"&&n!=="failed"&&n!=="__null__"&&n!=="__disposed__"&&(e.inflightFetchesCountForThisStream+=1)}return e},{inflightFetchesCountForThisStream:0,unfulfilledDemandsCountForThisStream:0});if(xt.inflightFetchesCountForThisStream===0&&xt.unfulfilledDemandsCountForThisStream>0){var $t=Ie(e,I,t.playerWarningDedupMap,T,t.playerStateFromMain,n,k,F,M,s);if($t.stream.targetRepresentationId!==M.targetRepresentationId)return{fetchDemands:x,stream:$t.stream};M=$t.stream}}if(e.config.fetchInitSidxOfAllRepresentations&&me!=null&&M.playableRepresentations.length>1&&((L=t.playerStateFromMain.mediaElementSnapshot)==null?void 0:L.bufferedFully)!==!0){for(var Pt of M.playableRepresentations)if(Pt.representationId!==me){var Nt=ne(ht!=null?ht:x,K(Pt),!1)!=null,Mt=M.sidxByRepresentationId[Pt.representationId]!=null||ne(ht!=null?ht:x,X(Pt),!1)!=null;if(!Nt||!Mt){var wt=e.config.enableCombinedInitSidxFetch&&Pt.segmentsInfo.type==="SegmentBase"&&!Nt&&!Mt;wt?(ht=ht!=null?ht:[].concat(x),ht.push(J(e,++$,Pt))):(Nt||(ht=ht!=null?ht:[].concat(x),ht.push(Q(e,++$,Pt))),Mt||(ht=ht!=null?ht:[].concat(x),ht.push(Y(e,++$,Pt))))}}}if(x=ht!=null?ht:x,!(M.appendState.pendingAppendOperations.length>0||M.appendState.currSourceBufferOperation!=null)){var At=null;if(mt!=null)At={dataByteRangeStart:mt.dataByteRangeStart+mt.dataByteRangeLength,incompleteChunkedAppendInfo:mt,mimeCodecsParsed:mt.mimeCodecsParsed,representationId:mt.representationId,segment:mt.segment};else if(ft.length>0){var Ft=ft[0];At={dataByteRangeStart:0,incompleteChunkedAppendInfo:null,mimeCodecsParsed:ce.mimeCodecsParsed,representationId:me,segment:Ft}}var Ot=At;if(Ot!=null){if(M.appendState.appendChain!=null&&M.appendState.appendChain.representationId===Ot.representationId){var Bt=j(e,n.manifestRepresentations[M.type],Ot.representationId),Wt=Z(Bt,Ot.segment),qt=ne(x,Wt);if(qt==null)throw o("nextgendasherr").nextgendasherr(e,Ot.incompleteChunkedAppendInfo!=null?"VideoPlayerNextgendashPlaybackLoopMissingFetchDemandForSegmentToContinueChunkedAppend":"VideoPlayerNextgendashPlaybackLoopMissingFetchDemandForSegmentToAppend","%s:%s - nextAppendInfo=%s segmentFetchDemandKey=%s fetchDemands=%s",M.type,me!=null?me:"no_target_representation",JSON.stringify(Ot),Wt,ie(x));var Ut=null;qt.responseFetch!=null&&qt.responseFetch.state.state==="failed"?Ut=o("nextgendasherr").nextgendasherrFromCause(e,qt.responseFetch.state.error,"VideoPlayerNextgendashPlaybackLoopSegmentFetchFailed","%s:%s - Fetch failed for media segment needed to append; segmentFetchDemandKey=%s nextAppendInfo=%s",M.type,me,Wt,JSON.stringify(Ot)):qt.responseFetch!=null&&qt.responseFetch.state.state==="aborted"&&(Ut=o("nextgendasherr").nextgendasherr(e,"VideoPlayerNextgendashPlaybackLoopSegmentFetchAborted","%s:%s - Fetch aborted for media segment needed to append; segmentFetchDemandKey=%s nextAppendInfo=%s",M.type,me,Wt,JSON.stringify(Ot)));var Vt=qt==null?void 0:qt.responseInfo;if(Ut!=null)return M=Fe(e,I,s,M,n,me,Ut),{fetchDemands:x,stream:M};if(Vt!=null){var Ht=Ot.segment.mediaFileByteRange.byteLength,Gt=Vt.isFetchComplete||Vt.responseByteRange.byteLength!=null&&Vt.chunksByteLength>=Vt.responseByteRange.byteOffset+Vt.responseByteRange.byteLength,zt=6,jt=0,Kt=Gt?null:e.config.dataAppendOperationMinBytes==="ozplayer-like"?zt>0&&Ht!=null&&Ht>0?Math.ceil(Ht/zt):jt>0?jt:null:e.config.dataAppendOperationMinBytes,Qt=Vt.responseByteRange.byteOffset+Ot.dataByteRangeStart,Xt=Vt.responseByteRange.byteLength!=null?Vt.responseByteRange.byteLength-Ot.dataByteRangeStart:null,Yt=Me(Vt.chunks,Qt,Kt!=null?Xt!=null?Math.min(Xt,Kt):Kt:Xt),Jt=null;if(Yt!=null&&(Kt===null||Yt.copyTotalBytesCount>=Kt)){if(Jt=we(Vt.chunks,Yt),Jt==null)throw o("nextgendasherr").nextgendasherr(e,"VideoPlayerNextgendashPlaybackLoopFailedToCombineChunksToAppend","%s/data#%s - Failed to copy %sB from chunks #%s(%sB)..#%s(%sB) into an append buffer (out of %s chunks of total %sB).",Ot.representationId,Ot.segment.segmentId,Yt.copyTotalBytesCount,Yt.startChunkIndex,Yt.startChunkByteOffset,Yt.endChunkIndex,Yt.endChunkBytesCount,Vt.chunks.length,Vt.chunksByteLength)}else Gt&&(Jt=_);if(Jt!=null){var Zt={appendInfoType:"data",dataByteRangeLength:Jt.byteLength,dataByteRangeStart:Ot.dataByteRangeStart,mimeCodecsParsed:Ot.mimeCodecsParsed,representationId:Ot.representationId,segment:Ot.segment},en={appendInfo:Zt,buffer:Jt,operationState:"wait_start",operationTiming:{created:e.host.clock()},operationType:"append_operation"};s.push(M.type+":"+me+":pendingAppendOperations:dataAppendOperation:"+se(Zt)),M=babelHelpers.extends({},M,{appendState:o("VideoPlayerNextgendashStateMachine").skipAutoDisposeInsideThisObject(babelHelpers.extends({},M.appendState,{pendingAppendOperations:[].concat(M.appendState.pendingAppendOperations,[en])}))})}}}}}var tn=Oe(e,I,M,s,ce,t.mediaSourceState.mediaSource,Xe);tn!=null&&(M=babelHelpers.extends({},M,tn));var nn=Be(e,I,M,s,ce,Xe,t.mediaSourceState.mediaSource);return nn!=null&&(M=babelHelpers.extends({},M,nn)),{fetchDemands:x,stream:M}}function z(e,t){for(var n=[],r=0;r<e.length;++r){var o=e[r];if(n.length===0)n.push([o]);else{var a=n[n.length-1],i=a[a.length-1],l=i.mediaFileByteRange.byteLength!=null&&o.mediaFileByteRange.byteOffset===i.mediaFileByteRange.byteOffset+i.mediaFileByteRange.byteLength&&!t.includes(i.segmentId);l?a.push(o):n.push([o])}}return n}function j(e,t,n){var r=t.find(function(e){return e.representationId===n});if(r==null)throw o("nextgendasherr").nextgendasherr(e,"VideoPlayerNextgendashPlaybackLoopUnableToFindRepresentation",'In %s manifestRepresentations, missing one with ID "%s"',t.length,n);return r}function K(e){return"init-"+e.type+"-"+e.representationId}function Q(e,t,n){var r=K(n),a=n.segmentsInfo.type==="SegmentBase"?{byteLength:n.segmentsInfo.initByteRange.byteLength,byteOffset:0}:{byteLength:null,byteOffset:0},i=o("VideoPlayerNextgendashStateMachine").skipAutoDisposeInsideThisObject(new Map([[r,a]]));return{activeDemands:o("VideoPlayerNextgendashStateMachine").skipAutoDisposeInsideThisObject(new Set(i.keys())),dataKeyToResponseByteRange:i,demandedAtClock:e.host.clock(),evictedClock:null,evictedReason:null,fetchDemandOrder:t,representationId:n.representationId,requestDraft:o("VideoPlayerNextgendashStateMachine").skipAutoDisposeInsideThisObject({qplName:n.type+"_init",reportToBandwidthEstimator:!0,requestID:r,responseMode:"buffer"}),requestInfoArgs:n.segmentsInfo.type==="SegmentBase"?{baseURL:n.segmentsInfo.baseURL,byteRange:n.segmentsInfo.initByteRange,type:"BaseURLByteRange"}:{baseURL:n.segmentsInfo.baseURL,initURL:n.segmentsInfo.initURL,type:"BaseURLInitURL"},responseFetch:null,streamType:n.type}}function X(e){return"sidx-"+e.type+"-"+e.representationId}function Y(e,t,n){var r=n.segmentsInfo;if(r.type!=="SegmentBase")throw o("nextgendasherr").nextgendasherr(e,"VideoPlayerNextgendashPlaybackLoopSidxFetchUnknown","%s:%s - sidx fetch unknown ("+r.type+")",n.type,n.representationId);var a=X(n),i={byteLength:r.indexByteRange.byteLength,byteOffset:0},l=o("VideoPlayerNextgendashStateMachine").skipAutoDisposeInsideThisObject(new Map([[a,i]]));return{activeDemands:o("VideoPlayerNextgendashStateMachine").skipAutoDisposeInsideThisObject(new Set(l.keys())),dataKeyToResponseByteRange:l,demandedAtClock:e.host.clock(),evictedClock:null,evictedReason:null,fetchDemandOrder:t,representationId:n.representationId,requestDraft:o("VideoPlayerNextgendashStateMachine").skipAutoDisposeInsideThisObject({qplName:n.type+"_sidx",reportToBandwidthEstimator:!0,requestID:a,responseMode:"buffer"}),requestInfoArgs:{baseURL:r.baseURL,byteRange:r.indexByteRange,type:"BaseURLByteRange"},responseFetch:null,streamType:n.type}}function J(e,t,n){var r=n.segmentsInfo;if(r.type!=="SegmentBase")throw o("nextgendasherr").nextgendasherr(e,"VideoPlayerNextgendashPlaybackLoopCombinedInitSidxFetchUnknown","%s:%s - combined init+sidx fetch unknown ("+r.type+")",n.type,n.representationId);var a=K(n),i=X(n),l=r.initByteRange,s=r.indexByteRange,u=Math.min(l.byteOffset,s.byteOffset),c=l.byteOffset+l.byteLength,d=s.byteOffset+s.byteLength,m=Math.max(c,d),p=m-u,_=o("VideoPlayerNextgendashStateMachine").skipAutoDisposeInsideThisObject(new Map([[a,{byteLength:l.byteLength,byteOffset:l.byteOffset-u}],[i,{byteLength:s.byteLength,byteOffset:s.byteOffset-u}]]));return{activeDemands:o("VideoPlayerNextgendashStateMachine").skipAutoDisposeInsideThisObject(new Set(_.keys())),dataKeyToResponseByteRange:_,demandedAtClock:e.host.clock(),evictedClock:null,evictedReason:null,fetchDemandOrder:t,representationId:n.representationId,requestDraft:o("VideoPlayerNextgendashStateMachine").skipAutoDisposeInsideThisObject({qplName:n.type+"_init_sidx_combined",reportToBandwidthEstimator:!0,requestID:"init_sidx-"+n.type+"-"+n.representationId,responseMode:"buffer"}),requestInfoArgs:{baseURL:r.baseURL,byteRange:{byteLength:p,byteOffset:u},type:"BaseURLByteRange"},responseFetch:null,streamType:n.type}}function Z(e,t){return"segment-"+e.type+"-"+e.representationId+"-"+t.segmentId}function ee(e,t,n,r){var a=n.segmentsInfo,i=Z(n,r),l=n.segmentsInfo.type==="SegmentBase"?{byteLength:r.mediaFileByteRange.byteLength,byteOffset:0}:{byteLength:null,byteOffset:0},s=o("VideoPlayerNextgendashStateMachine").skipAutoDisposeInsideThisObject(new Map([[i,l]]));return{activeDemands:o("VideoPlayerNextgendashStateMachine").skipAutoDisposeInsideThisObject(new Set(s.keys())),dataKeyToResponseByteRange:s,demandedAtClock:e.host.clock(),evictedClock:null,evictedReason:null,fetchDemandOrder:t,representationId:n.representationId,requestDraft:o("VideoPlayerNextgendashStateMachine").skipAutoDisposeInsideThisObject({qplName:n.type+"_segment",reportToBandwidthEstimator:!0,requestID:i,responseMode:"stream"}),requestInfoArgs:a.type==="SegmentBase"?{baseURL:a.baseURL,byteRange:r.mediaFileByteRange,type:"BaseURLByteRange"}:{baseURL:a.baseURL,relativeURL:b(e,n.type,n.representationId,a.segmentURLTemplate,r),type:"BaseURLRelativeURL"},responseFetch:null,streamType:n.type}}function te(e,t,n,r){if(r.length===0)throw o("nextgendasherr").nextgendasherr(e,"VideoPlayerNextgendashPlaybackLoopGroupOfSegmentsFetchEmptySegments","%s:%s - Group of segments fetch empty segments",n.type,n.representationId);if(r.length===1)return ee(e,t,n,r[0]);var a=n.segmentsInfo;if(a.type!=="SegmentBase")throw o("nextgendasherr").nextgendasherr(e,"VideoPlayerNextgendashPlaybackLoopGroupOfSegmentsFetchUnsupported","%s:%s - Group of segments fetch unsupported ("+a.type+")",n.type,n.representationId);var i=r[0].mediaFileByteRange,l=r[r.length-1].mediaFileByteRange,s=o("VideoPlayerNextgendashStateMachine").skipAutoDisposeInsideThisObject(new Map(r.map(function(e){return[Z(n,e),{byteLength:e.mediaFileByteRange.byteLength,byteOffset:e.mediaFileByteRange.byteOffset-i.byteOffset}]})));return{activeDemands:o("VideoPlayerNextgendashStateMachine").skipAutoDisposeInsideThisObject(new Set(s.keys())),dataKeyToResponseByteRange:s,demandedAtClock:e.host.clock(),evictedClock:null,evictedReason:null,fetchDemandOrder:t,representationId:n.representationId,requestDraft:o("VideoPlayerNextgendashStateMachine").skipAutoDisposeInsideThisObject({qplName:n.type+"_segment_group",reportToBandwidthEstimator:!0,requestID:"segment-"+n.type+"-"+n.representationId+"-"+r.map(function(e){return e.segmentId}).join(","),responseMode:"stream"}),requestInfoArgs:{baseURL:a.baseURL,byteRange:{byteLength:l.byteLength!=null?l.byteOffset+l.byteLength:null,byteOffset:i.byteOffset},type:"BaseURLByteRange"},responseFetch:null,streamType:n.type}}function ne(e,t,n){n===void 0&&(n=!1);for(var r=!1,o=null,a=0;a<e.length;++a){var i=e[a],l=i.dataKeyToResponseByteRange.get(t);if(l!=null&&(r=!0,i.responseFetch!=null)){o={responseByteRange:l,responseFetch:i.responseFetch,responseFetchDataState:i.responseFetch.state.state==="waiting_data"||i.responseFetch.state.state==="completed"?i.responseFetch.state.responseData.state:null};break}}if(o==null)return r?{responseFetch:null,responseInfo:null}:null;var s=o,u=s.responseByteRange,c=s.responseFetch,d=s.responseFetchDataState;if(u!=null&&d!=null&&(d.state==="reading_stream"||d.state==="done_stream"||d.state==="done_buffer")){var m=d.state==="done_stream"||d.state==="done_buffer",p=d.state==="done_buffer"?[d.buffer]:d.chunks,_=d.state==="done_buffer"?d.buffer.byteLength:d.dataBytesLengthTotal,f=null;if(n&&(m||u.byteLength!=null&&_>=u.byteOffset+u.byteLength)){var g=Me(p,u.byteOffset,u.byteLength);f=g!=null?we(p,g):null}return{responseFetch:c,responseInfo:{buffer:f,chunks:p,chunksByteLength:_,isFetchComplete:m,responseByteRange:u}}}return{responseFetch:c,responseInfo:null}}function re(e,t,n){for(var r=null,a=0;a<t.length;++a){var i=t[a];if(i.dataKeyToResponseByteRange.has(n)){var l=new Set(i.activeDemands);l.add(n),r=r!=null?r:[].concat(t),r[a]=babelHelpers.extends({},i,{activeDemands:o("VideoPlayerNextgendashStateMachine").skipAutoDisposeInsideThisObject(l),demandedAtClock:e.host.clock()})}}return r}function oe(e,t){var n=!1,r=e.map(function(e){var r=null;return e.activeDemands.forEach(function(n){t(n)&&(r=r!=null?r:new Set(e.activeDemands),r.delete(n))}),r!=null?(n=!0,r.size===0?null:babelHelpers.extends({},e,{activeDemands:o("VideoPlayerNextgendashStateMachine").skipAutoDisposeInsideThisObject(r)})):e});return n?r.filter(Boolean):null}function ae(e,t){return e.map(function(e){var n,r,o,a=(n=e.responseFetch)==null?void 0:n.state,i=a==null?void 0:a.state,l=t?{pf:a!=null&&(r=a.prefetchResultState)!=null?r:void 0,rc:a!=null&&a.state!=="__null__"&&a.state!=="__disposed__"?a.request.requestCreatedClock:void 0,ttfb:(a==null?void 0:a.state)==="waiting_data"||(a==null?void 0:a.state)==="completed"?a.responseHeader.httpHeadersReceivedClock.perfMs-a.requestStartedClock.perfMs:void 0,ttlb:(a==null?void 0:a.state)==="completed"?a.requestCompletedClock.perfMs-a.requestStartedClock.perfMs:void 0,ttrs:(a==null?void 0:a.state)==="waiting_headers"||(a==null?void 0:a.state)==="waiting_data"||(a==null?void 0:a.state)==="completed"?a.requestStartedClock.perfMs-a.request.requestCreatedClock.perfMs:void 0}:void 0,s=(o=e.responseFetch)==null||(o=o.state)==null||(o=o.responseData)==null?void 0:o.state.state,u=Array.from(e.dataKeyToResponseByteRange.entries()).map(function(e){var t=e[0],n=e[1];return[t,le(n)]});return[u,i,s,l]})}function ie(e,t){return t===void 0&&(t=!1),JSON.stringify(ae(e,t))}function le(e){return"["+e.byteOffset+"B.."+(e.byteLength!=null?e.byteOffset+e.byteLength-1+"B="+e.byteLength+"B":"EOF")+"]"}function se(e){switch(e.appendInfoType){case"init":return e.representationId+"/init#"+o("VideoPlayerNextgendashMediaUtils").debugStringifyMimeCodecs(e.mimeCodecsParsed);case"data":return e.representationId+"/data#"+e.segment.segmentId+o("VideoPlayerNextgendashMediaUtils").debugStringifyTimeRange(e.segment.mediaTimeRange,e.segment.isEndingSegment)+le(e.segment.mediaFileByteRange)+"<"+(e.segment.mediaFileByteRange.byteOffset+e.dataByteRangeStart)+"B"+(e.dataByteRangeLength>0?".."+(e.segment.mediaFileByteRange.byteOffset+e.dataByteRangeStart+e.dataByteRangeLength-1)+"B="+e.dataByteRangeLength+"B":"X")+">";default:return e.appendInfoType,""}}function ue(e){return e==null?"null":e.representationId+"["+e.playheadMinimumTimeSec+"s.."+(e.mediaTail!=null?e.mediaTail.mediaTimeSec+"s;data#"+e.mediaTail.segmentId+"]":"null]")}function ce(e){return Object.entries(e).map(function(e){var t=e[0],n=e[1];return[t,n==null?void 0:n.name].join(":")}).join(",")||"none"}function de(e){return e.map(function(e){var t=[e.lang,e.role].filter(Boolean).join("+");return e.representationId+":"+o("VideoPlayerNextgendashMediaUtils").debugStringifyMimeCodecs(e.mimeCodecsParsed)+(t!==""?":"+t:"")}).join(",")||"none"}function me(e){return e.map(function(e){var t,n;return e.representationId+":"+((t=e.lang)!=null?t:"null")+"+"+((n=e.role)!=null?n:"null")}).join(",")||"none"}function pe(e){return e.map(function(e){var t,n;return e.representationId+":"+((t=e.lang)!=null?t:"null")+"+"+((n=e.role)!=null?n:"null")}).join(",")||"none"}function _e(e,t){return t!=null?e.host.sourceBufferSnapshotBuffered(e,t.sourceBuffer):void 0}function fe(e){return"MSreadyState:"+e.readyState+",MSduration:"+e.duration+",SBSUpdating:["+(e.sourceBuffersUpdating?e.sourceBuffersUpdating.map(function(e){return e?"T":"F"}).join(""):"")+"]"+(e.exception!=null?"MSexception:"+e.exception.name:"")}function ge(t,n,r,a,i,l,m,p){var _=r.appendState,g=_.currSourceBufferOperation;if(g==null)return null;var h=null,y=null,C=null,b=(function(){function a(e){e===void 0&&(e="");var n="VideoPlayerNextgendashPlaybackLoopUnexpectedSourceBufferEvent["+g.operationState+"]<--"+i.sourceBufferEventType+e;throw i.exception!=null?o("nextgendasherr").nextgendasherrFromCause(t,i.exception,n):o("nextgendasherr").nextgendasherr(t,n)}switch(g.operationState){case"wait_start":{var m=function(n){if(t.config.qplEnabled){var e=o("VideoPlayerNextgendashQPL").qplStartPlayingApi(t),a=e.subspan(g.operationType==="append_operation"?"mse_append_"+r.type+"_"+g.appendInfo.appendInfoType:g.operationType==="remove_operation"?"mse_remove_"+r.type:"mse_"+g.operationType,g.operationType==="append_operation"?g.appendInfo.appendInfoType==="data"?{int:{byteLength:g.buffer.byteLength,dataByteRangeLength:g.appendInfo.dataByteRangeLength,dataByteRangeStart:g.appendInfo.dataByteRangeStart,segmentId:g.appendInfo.segment.segmentId}}:{int:{byteLength:g.buffer.byteLength}}:g.operationType==="remove_operation"?{string:{removeRange:o("VideoPlayerNextgendashMediaUtils").debugStringifyTimeRange(g.removeRange)}}:void 0,o("VideoPlayerNextgendashQPL").qplTimestampFromClockstamp(t,n));return function(e,t){return a(o("VideoPlayerNextgendashQPL").qplAnnotationsMerge({string:{sourceBufferRangesAfterFinish:y?o("VideoPlayerNextgendashMediaUtils").debugStringifyTimeRanges(y):void 0}},e),t)}}};switch(i.sourceBufferEventType){case"_started":{var _=babelHelpers.extends({},g.operationTiming,{started:l}),f=m(_.started);return babelHelpers.extends({},g,{debugSourceBufferRangesAfterStart:void 0,operationState:"wait_updateend",operationTiming:_,qplSubspanEnd:f})}case"_exception":{y=p();var b=babelHelpers.extends({},g.operationTiming,{ended:l,started:l}),v=o("nextgendasherr").nextgendasherrFromCause(t,i.exception,"VideoPlayerNextgendashPlaybackLoopSourceBufferException"),S=m(b.started);return S&&S(o("VideoPlayerNextgendashQPL").qplAnnotationsForError(v),o("VideoPlayerNextgendashQPL").qplTimestampFromClockstamp(t,b.ended)),babelHelpers.extends({},g,{error:v,operationState:"errored",operationTiming:b,waitForMediaElementErrorUntilUnixMs:l.unixMs+F})}case"_finished":{var R,L;if(g.operationType!=="append_operation"||g.appendInfo.appendInfoType!=="data"||g.appendInfo.dataByteRangeLength>0)throw a("NotDataEndSegmentAppendOperation");var E=g.appendInfo.segment,k=g.buffer,I=babelHelpers.objectWithoutPropertiesLoose(g,e);if(y=p(),y!=null&&!xe(y,E)){var T;h={representationId:g.appendInfo.representationId,segment:E},n(o("nextgendasherr").nextgendasherr(t,"VideoPlayerNextgendashPlaybackLoopSegmentBufferedInsufficiently","%s:%s - After finishing append of %s its media time range %s is missing from SourceBuffer: %s",r.type,(T=r.targetRepresentationId)!=null?T:"no_target_representation",se(g.appendInfo),JSON.stringify(E.mediaTimeRange),JSON.stringify(y)))}I.operationType==="append_operation"&&I.appendInfo.appendInfoType==="data"&&(C=I.appendInfo);var D=babelHelpers.extends({},g.operationTiming,{ended:l,started:l}),x=m(D.started);return x&&x(void 0,o("VideoPlayerNextgendashQPL").qplTimestampFromClockstamp(t,D.ended)),babelHelpers.extends({},I,{debugSourceBufferRangesAfterFinish:void 0,debugSourceBufferRangesAfterStart:void 0,operationState:"succeeded",operationTiming:D})}default:throw i.sourceBufferEventType,a()}}case"wait_updateend":switch(i.sourceBufferEventType){case"_exception":{var $=g.abortIsPendingUpdateEnd,P=g.errorIsPendingUpdateEnd,N=g.qplSubspanEnd,M=babelHelpers.objectWithoutPropertiesLoose(g,s);y=p();var w="VideoPlayerNextgendashPlaybackLoopSourceBufferExceptionWhileAwaitingUpdateEnd"+($?"AfterAbort":""),A=P?o("nextgendasherr").nextgendasherrFromMultipleCauses(t,[["InitialError",P],["LaterError",i.exception]],w):o("nextgendasherr").nextgendasherrFromCause(t,i.exception,w),O=babelHelpers.extends({},g.operationTiming,{ended:l});return N&&N(o("VideoPlayerNextgendashQPL").qplAnnotationsForError(A),o("VideoPlayerNextgendashQPL").qplTimestampFromClockstamp(t,O.ended)),babelHelpers.extends({},M,{error:A,operationState:"errored",operationTiming:O,waitForMediaElementErrorUntilUnixMs:l.unixMs+F})}case"_finished":{var B,W;if(g.operationType!=="remove_operation")throw a("NotRemoveOperation");var q=g.abortIsPendingUpdateEnd,U=g.errorIsPendingUpdateEnd,V=g.qplSubspanEnd,H=babelHelpers.objectWithoutPropertiesLoose(g,u);y=p();var G=babelHelpers.extends({},H.operationTiming,{ended:l});return V&&V(void 0,o("VideoPlayerNextgendashQPL").qplTimestampFromClockstamp(t,G.ended)),babelHelpers.extends({},H,{debugSourceBufferRangesAfterFinish:void 0,debugSourceBufferRangesAfterStart:void 0,operationState:"succeeded",operationTiming:G})}case"updateend":{var z=g.abortIsPendingUpdateEnd,j=g.errorIsPendingUpdateEnd,K=g.qplSubspanEnd,Q=babelHelpers.objectWithoutPropertiesLoose(g,c);(z||j||Q.operationType==="remove_operation")&&(y=p());var X=babelHelpers.extends({},g.operationTiming,{ended:l});if(j)return K&&K(o("VideoPlayerNextgendashQPL").qplAnnotationsForError(j),o("VideoPlayerNextgendashQPL").qplTimestampFromClockstamp(t,X.ended)),babelHelpers.extends({},Q,{debugSourceBufferRangesAfterFinish:void 0,error:j,operationState:"errored",operationTiming:X,waitForMediaElementErrorUntilUnixMs:l.unixMs+F});var Y=Q.buffer,J=babelHelpers.objectWithoutPropertiesLoose(Q,d);if(z){var Z=o("nextgendasherr").nextgendasherr(t,"VideoPlayerNextgendashPlaybackLoopSourceBufferOperationAborted");return K&&K(o("VideoPlayerNextgendashQPL").qplAnnotationsForError(Z),o("VideoPlayerNextgendashQPL").qplTimestampFromClockstamp(t,X.ended)),babelHelpers.extends({},J,{debugSourceBufferRangesAfterFinish:void 0,operationState:"aborted",operationTiming:X})}return g.operationType==="append_operation"&&g.appendInfo.appendInfoType==="data"&&(C=g.appendInfo),K&&K(void 0,o("VideoPlayerNextgendashQPL").qplTimestampFromClockstamp(t,X.ended)),babelHelpers.extends({},J,{debugSourceBufferRangesAfterFinish:void 0,operationState:"succeeded",operationTiming:X})}case"error":{if(g.errorIsPendingUpdateEnd)throw a("SecondErrorEvent");if(g.abortIsPendingUpdateEnd)throw a("ErrorAfterAbort");return babelHelpers.extends({},g,{errorIsPendingUpdateEnd:o("nextgendasherr").nextgendasherr(t,"VideoPlayerNextgendashPlaybackLoopSourceBufferErrorEvent")})}case"abort":{if(g.abortIsPendingUpdateEnd)throw a("SecondAbortEvent");if(g.errorIsPendingUpdateEnd)throw a("AbortAfterError");return babelHelpers.extends({},g,{abortIsPendingUpdateEnd:!0})}default:throw i.sourceBufferEventType,a()}default:throw g.operationState,a()}})(),v=h,S=b.operationState==="succeeded"||b.operationState==="errored"||b.operationState==="aborted",R=b!==g?S?null:b:_.currSourceBufferOperation,L=b!==g&&S?b:_.lastSourceBufferOperation;if(R!==_.currSourceBufferOperation||L!==_.lastSourceBufferOperation){var E,k,I,T=L!=null&&L.operationType==="append_operation"?L:_.lastAppendOperation,D=L!=null&&L.operationType==="remove_operation"?L:_.lastRemoveOperation,x=_.appendChain,$=L!=null&&L.operationType==="append_operation"&&L.operationState==="succeeded"?L.appendInfo.appendInfoType==="init"?{playheadMinimumTimeSec:m,representationId:L.appendInfo.representationId}:x!=null&&x.playheadMinimumTimeSec>L.appendInfo.segment.mediaTimeRange[1]+f?{playheadMinimumTimeSec:m,representationId:L.appendInfo.representationId}:x!=null?{mediaTail:{mediaTimeSec:L.appendInfo.segment.mediaTimeRange[1],segmentId:L.appendInfo.segment.segmentId},playheadMinimumTimeSec:x.playheadMinimumTimeSec,representationId:x.representationId}:x:x,P=he(_.sourceBufferRangesAnnotated,y,(E=C)==null?void 0:E.segment.mediaTimeRange,(k=C)==null?void 0:k.representationId,r.manifestRepresentationsCount),N=""+g.operationType+(g.operationType==="append_operation"?"/"+se(g.appendInfo):"")+":"+g.operationState+"--"+i.sourceBufferEventType+(i.sourceBufferEventType==="_exception"?"/"+i.exception.name:"")+"-->"+b.operationState+(b.operationState==="wait_updateend"?(b.errorIsPendingUpdateEnd?",errorIsPendingUpdateEnd":"")+(b.abortIsPendingUpdateEnd?",abortIsPendingUpdateEnd":""):b.operationState==="errored"?",waitForMediaElementError":"")+(v!=null?",SegmentBufferedInsufficiently":""),M=r.type+":"+((I=r.targetRepresentationId)!=null?I:"no_target_representation")+":";return a.push(M+"handleSourceBufferEvent:"+N),T!==_.lastAppendOperation&&a.push(M+"...:lastAppendOperation:"+(T!=null?se(T.appendInfo):"null")),D!==_.lastRemoveOperation&&a.push(M+"...:lastRemoveOperation:"+(D!=null?o("VideoPlayerNextgendashMediaUtils").debugStringifyTimeRange(D.removeRange):"null")),$!==x&&a.push(M+"...:appendChain:"+ue(x)+"-->"+ue($)),{appendState:o("VideoPlayerNextgendashStateMachine").skipAutoDisposeInsideThisObject(babelHelpers.extends({},_,{appendChain:$,currSourceBufferOperation:R,lastAppendOperation:T,lastRemoveOperation:D,lastSourceBufferOperation:L,sourceBufferRanges:y!=null?y:_.sourceBufferRanges,sourceBufferRangesAnnotated:P!=null?P:_.sourceBufferRangesAnnotated,workaroundForSegmentBufferedInsufficiently:v!=null&&!r.appendState.workaroundForSegmentBufferedInsufficiently.some(function(e){return e.representationId===v.representationId&&e.segment.segmentId===v.segment.segmentId})?[].concat(r.appendState.workaroundForSegmentBufferedInsufficiently,[v]):r.appendState.workaroundForSegmentBufferedInsufficiently}))}}return null}function he(e,t,n,r,o){if(t==null)return null;var a=e[0],i=a!=null?a[2]:null,l=Math.max(o,r!=null||i!=null?r!=null&&i!=null?2:1:0);if(l===1&&t.length>0){var s;return i=(s=i!=null?i:r)!=null?s:null,t.map(function(e){var t=e[0],n=e[1];return[t,n,i]})}else if(l>1&&t.length>0){var u=new Set,c,d,m;for(c=0,d=t.length;c<d;++c)m=t[c],u.add(m[0]),u.add(m[1]);for(c=0,d=e.length;c<d;++c)m=e[c],u.add(m[0]),u.add(m[1]);n!=null&&(u.add(n[0]),u.add(n[1]));var p=Array.from(u).sort(function(e,t){return e-t}),_=[],f,g,h;for(c=0,d=p.length-1;c<d;++c)if(f=p[c],g=p[c+1],t.some(function(e){return e[0]<=f&&g<=e[1]})){var y,C;h=(f+g)/2,i=(y=(C=e.find(function(e){return e[0]<=h&&h<=e[1]}))==null?void 0:C[2])!=null?y:null,i==null&&n!=null&&r!=null&&(i=r),a=_[_.length-1],i==null&&a!=null&&a[1]===f?_[_.length-1]=[a[0],g,a[2]]:a!=null&&a[1]===f&&a[2]===i?_[_.length-1]=[a[0],g,i]:_.push([f,g,i])}return _}else return e.length>0?[]:null}function ye(e){var t=new Map;for(var n of e){var r=o("VideoPlayerNextgendashManifestParser").getDisplayLabelFromVideoRepresentation(n);t.has(r)||t.set(r,n)}return Array.from(t.values())}function Ce(e,t,n){var r=function(n,r){return e.filter(function(e){return e.lang===n&&e.role===r})},o=[],a=r(t,n);if(a.length===0){var i=(t!=null?t:"null")+"+"+(n!=null?n:"null"),l=e.map(function(e){return e.lang});l.includes(t)&&l.unshift(t),l=Array.from(new Set(l));for(var s=Array.from(new Set(e.map(function(e){return e.role}))),u=0;a.length===0&&u<l.length;++u)for(var c=l[u],d=0;a.length===0&&d<s.length;++d){var m=s[d];(c!==t||m!==n)&&(o.push((c===t?"sameLang":"lang#"+u)+"+"+(m===n?"sameRole":"role#"+d)+";"+i+"-->"+(c!=null?c:"null")+"+"+(m!=null?m:"null")),a=r(c,m))}var p=e[0];if(a.length===0&&p!=null){var _,f;o.push("firstRepresentation;"+i+"-->"+p.representationId+":"+((_=p.lang)!=null?_:"null")+"+"+((f=p.role)!=null?f:"null")),a=[p]}}return{debugFallbacksTried:o,filteredRepresentations:a}}function be(e,t){var n=Ce(e,t.videoLang,t.videoRole),r=n.debugFallbacksTried,o=n.filteredRepresentations;return{debugFallbacksTried:r,representationsByVariant:ye(o)}}function ve(e,t){var n=e.some(function(e){return t==null||o("VideoPlayerNextgendashManifestParser").getDisplayLabelFromVideoRepresentation(e)===t}),r=e.filter(function(e){return n?t==null||o("VideoPlayerNextgendashManifestParser").getDisplayLabelFromVideoRepresentation(e)===t:!0});return r}function Se(e,t){var n=Ce(e,t.audioLang,t.audioRole),r=n.debugFallbacksTried,o=n.filteredRepresentations;return{debugFallbacksTried:r,representationsByVariant:o}}function Re(e,t,n,a,i,l,s,u,c,d,m,p,_,f,g,y){var C,b=(C=l.find(function(e){return e.representationId===c}))!=null?C:null,v,S=b,R=g,L=y,E=p!=null?p:h,k=be(s,E),I=k.debugFallbacksTried,T=k.representationsByVariant,D=T.map(function(e){return e.representationId}),x=ve(T,_);if(I.length>0&&!I.every(function(e){return e.startsWith("lang#0+sameRole;null+null-->")})||x.length===0){var $,P=["video",s.length,E.videoLang,E.videoRole,E.audioLang,E.audioRole,_].join(":"),N=1+(($=n.get(P))!=null?$:0);if(n.set(P,N),N===1){var M=me(l),w=me(s),A=me(T),F=me(x);t(o("nextgendasherr").nextgendasherr(e,x.length===0?"VideoPlayerNextgendashPlaybackLoopRepresentationAllFiltered[video]":"VideoPlayerNextgendashPlaybackLoopRepresentationFallback[video]","%s:%s - No representations for variant, "+(x.length===0?"all filtered":"fallback applied")+". %s %s %s %s %s %s %s %s","video",c!=null?c:"no_target_representation","selectedVariant="+JSON.stringify(p),"targetVariant="+(E===p?"same":JSON.stringify(E)),"manifestRepresentations="+M,"playableRepresentations="+(w===M?"same":w),"blockedRepresentations="+ce(u),"targetVariantRepresentations="+A,"filteredRepresentations="+(F===A?"same":F),"fallbacksTried="+I.join(";")))}}var O=d!=null?d:h,B=Le(p,E,O,_,m);if(x.length>0){var W=null;if(g==null&&f!=null){var q=x.filter(function(e){var t;return(t=f.prefetchedRepresentationIds.includes(e.representationId))!=null?t:!1});if(q.length>0){var U=q[0];R={bestRepresentationId:U.representationId,bestRepresentationIsPrefetched:!0,hasMadeInitialDecision:!1,lastEvaluationReason:null},L=f.prefetchStartedAt,W=U,S=U,v="prefetch"}}else{var V;W=(V=x.find(function(e){return e.representationId===(g==null?void 0:g.bestRepresentationId)}))!=null?V:null}var H=5e3,G=B||S==null||W==null||y!=null&&o("VideoPlayerNextgendashHostAPI").diffVideoPlayerNextgendashClockstamp(a,y).unixMs>H;if(G){var z,j=i(e,x,g),K=j.bestRepresentation;r("deepEquals")(j.nextABRState,g)||(R=j.nextABRState,L=e.host.clock()),K!=null&&K.representationId!==((z=S)==null?void 0:z.representationId)?(S=K,B?v="selected_switch":v="abr_switch"):S!=null?B?v="selected_keep":v="abr_keep":B?v="selected_keep":S!=null?v="keep_prev_no_representation_from_abr":v="null_no_representation_from_abr"}else v==null&&(v="abr_skip")}else S!=null?v="keep_prev":l.length>0?v="null_no_representations_for_variant":v="null_no_representations_in_manifest";return{prevTargetRepresentation:b,targetRepresentation:S,targetRepresentationReason:v,targetVariantRepresentationIds:D,videoABRState:R,videoABRStateClock:L}}function Le(e,t,n,r,o){return e!=null&&(t.videoLang!==n.videoLang||t.videoRole!==n.videoRole)||r!=null&&r!==o}function Ee(e,t,n){return e!=null&&(t.audioLang!==n.audioLang||t.audioRole!==n.audioRole)}function ke(e,t,n,r,a,i,l,s,u){var c,d=(c=r.find(function(e){return e.representationId===l}))!=null?c:null,m,p=d,_=u!=null?u:h,f=Se(a,_),g=f.debugFallbacksTried,y=f.representationsByVariant,C=y.map(function(e){return e.representationId}),b=y;if(g.length>0&&!g.every(function(e){return e.startsWith("lang#0+sameRole;null+null-->")})||b.length===0){var v,S=["audio",a.length,_.videoLang,_.videoRole,_.audioLang,_.audioRole].join(":"),R=1+((v=n.get(S))!=null?v:0);if(n.set(S,R),R===1){var L=pe(r),E=pe(a),k=pe(y),I=pe(b);t(o("nextgendasherr").nextgendasherr(e,b.length===0?"VideoPlayerNextgendashPlaybackLoopRepresentationAllFiltered[audio]":"VideoPlayerNextgendashPlaybackLoopRepresentationFallback[audio]","%s:%s - No representations for variant, "+(b.length===0?"all filtered":"fallback applied")+". %s %s %s %s %s %s %s %s","audio",l!=null?l:"no_target_representation","selectedVariant="+JSON.stringify(u),"targetVariant="+(_===u?"same":JSON.stringify(_)),"manifestRepresentations="+L,"playableRepresentations="+(E===L?"same":E),"blockedRepresentations="+ce(i),"targetVariantRepresentations="+k,"filteredRepresentations="+(I===k?"same":I),"fallbacksTried="+g.join(";")))}}var T=s!=null?s:h,D=Ee(u,_,T);if(b.length>0){var x,$=b.slice().sort(function(e,t){return t.bandwidth-e.bandwidth}).find(function(e){return!0});$!=null&&$.representationId!==((x=p)==null?void 0:x.representationId)?(p=$,D?m="selected_switch":m="abr_switch"):p!=null?D?m="selected_keep":m="abr_keep":D?m="selected_keep":p!=null?m="keep_prev_no_representation_from_abr":m="null_no_representation_from_abr"}else p!=null?m="keep_prev":r.length>0?m="null_no_representations_for_variant":m="null_no_representations_in_manifest";return{prevTargetRepresentation:d,targetRepresentation:p,targetRepresentationReason:m,targetVariantRepresentationIds:C}}function Ie(e,t,n,r,a,i,l,s,u,c){var d=u,m,p,_,f;if(d.type==="video"){var g,h,y=Re(e,t,n,r,function(t,n,r){var i,u,c,d;return o("VideoPlayerNextgendashABR").evaluateVideoPlayerNextgendashABRForVideo(n,{abrConfig:a.abrConfig,bandwidthDiagnostics:e.host.networkDiagnosticsReadBandwidth(),devicePixelRatio:a.devicePixelRatio,isDocumentHidden:a.isDocumentHidden,mediaDurationSec:(i=(u=a.mediaElementSnapshot)==null?void 0:u.duration)!=null?i:"NOT_A_NUMBER",playerDimensions:a.playerViewportDimensions,playheadMediaTimeSec:(c=(d=a.mediaElementSnapshot)==null?void 0:d.currentTime)!=null?c:0,prefetchResult:l,sourceBufferBufferedRangesSec:s})},i.manifestRepresentations.video,d.playableRepresentations,d.blockedRepresentations,d.targetRepresentationId,d.prevSelectedMediaVariant,d.prevSelectedVideoQualityDisplayLabel,a.selectedMediaVariant,a.selectedVideoQualityDisplayLabel,l,d.videoABRState,d.videoABRStateClock);if(m=y.prevTargetRepresentation,_=y.targetRepresentation,p=y.targetRepresentationReason,f=y.targetVariantRepresentationIds,g=y.videoABRState,h=y.videoABRStateClock,g!==d.videoABRState){var C,b,v,S,R,L,E,k;c.push(d.type+":"+((C=d.targetRepresentationId)!=null?C:"no_target_representation")+":videoABRState:"+(((b=g)==null?void 0:b.bestRepresentationId)!==((v=d.videoABRState)==null?void 0:v.bestRepresentationId)?(S=(R=g)==null?void 0:R.bestRepresentationId)!=null?S:"no_best_representation":"best_representation_unchanged")+(((L=g)==null?void 0:L.bestRepresentationIsPrefetched)===!0?"(prefetched)":"")+":"+((E=(k=g)==null?void 0:k.lastEvaluationReason)!=null?E:"?")),d=babelHelpers.extends({},d,{videoABRState:g,videoABRStateClock:h})}}else if(d.type==="audio"){var I=ke(e,t,n,i.manifestRepresentations.audio,d.playableRepresentations,d.blockedRepresentations,d.targetRepresentationId,d.prevSelectedMediaVariant,a.selectedMediaVariant);m=I.prevTargetRepresentation,_=I.targetRepresentation,p=I.targetRepresentationReason,f=I.targetVariantRepresentationIds}else{var T,D;d.type,p="unexpected_stream_type",f=(T=(D=i.manifestRepresentations[d.type])==null?void 0:D.map(function(e){return e.representationId}))!=null?T:[]}if(_==null){var x;throw d.type==="video"?x=i.manifestRepresentations.video:d.type==="audio"?x=i.manifestRepresentations.audio:d.type,x=x!=null?x:[],o("nextgendasherr").nextgendasherr(e,"VideoPlayerNextgendashPlaybackLoopNoTargetRepresentation["+d.type+"]","%s:%s - Unable to select representation ("+p+"). %s",d.type,m!=null?m.representationId:"no_target_representation","manifestRepresentations="+(x.map(function(e){return e.representationId}).join(",")||"none"),"blockedRepresentations="+ce(d.blockedRepresentations))}return{prevTargetRepresentation:m,stream:Te(e,d,c,m,_,p,f,a.selectedMediaVariant,a.selectedVideoQualityDisplayLabel),targetRepresentation:_,targetRepresentationReason:p}}function Te(e,t,n,r,a,i,l,s,u){if(a!=null&&a.type!==t.type)throw o("nextgendasherr").nextgendasherr(e,"VideoPlayerNextgendashPlaybackLoopRepresentationTypeMismatch","Unexpected representation type "+a.type+" for stream of type "+t.type);if((a==null?void 0:a.representationId)!==(r==null?void 0:r.representationId)){var c,d,m,p;return n.push(t.type+":"+((c=t.targetRepresentationId)!=null?c:"no_target_representation")+":switchRepresentation:"+i+":"+((d=r==null?void 0:r.representationId)!=null?d:"null")+"->"+((m=a==null?void 0:a.representationId)!=null?m:"null")),babelHelpers.extends({},t,{prevSelectedMediaVariant:s,prevSelectedVideoQualityDisplayLabel:u,targetRepresentationId:(p=a==null?void 0:a.representationId)!=null?p:null,targetRepresentationReason:i,targetVariantRepresentationIds:l})}else return t}function De(e,t,n){for(var r=0,a=e.length;r<a;++r){var i=e[r];if(o("VideoPlayerNextgendashMediaUtils").isWithinRange(i,t[0],n)&&o("VideoPlayerNextgendashMediaUtils").isWithinRange(i,t[1],n))return!0}return!1}function xe(e,t){return De(e,t.mediaTimeRange,1e-5)||t.isEndingSegment&&De(e,t.mediaTimeRange,1e-4)}function $e(e){for(var t=[],n=e.segmentTimeline,r=e.startNumber,a=e.timescale,i=n.every(function(e){return e.id!=null}),l=n.length,s=0;s<l;++s)for(var u=n[s],c=u.r+1,d=0;d<c;++d){var m=t.length,p=i&&u.id!=null?u.id-(u.r-d):(r!=null?r:0)+m,_=u.t+d*u.d;t.push({isEndingSegment:s===l-1&&d===c-1,mediaFileByteRange:o("VideoPlayerNextgendashMediaUtils").ZERO_TO_EOF_OPEN_ENDED_BYTE_RANGE,mediaTimeRange:[(u.t+d*u.d)/a,(u.t+(d+1)*u.d)/a],segmentId:m,templateNumber:p,templateTime:_})}return t}function Pe(e,t,n,r){var a=void 0,i=void 0,l=function(t,n){return Math.abs(t-n)>.001};return r.filter(function(s,u){if(i!==void 0&&s.segmentId<=i)throw o("nextgendasherr").nextgendasherr(e,"VideoPlayerNextgendashPlaybackLoopBadSegmentIdSequenceInSidx","%s:%s - sidx segmentId %s duplicates or decreases from previous %s",t,n,s.segmentId,i);if(i=s.segmentId,s.mediaTimeRange[1]<s.mediaTimeRange[0])throw o("nextgendasherr").nextgendasherr(e,"VideoPlayerNextgendashPlaybackLoopFoundNegativeSegmentDurationFromSidx","%s:%s - sidx segmentId %s for time %ss - %ss has negative duration %s",t,n,s.segmentId,s.mediaTimeRange[0],s.mediaTimeRange[1],s.mediaTimeRange[1]-s.mediaTimeRange[0]);if(a!==void 0&&l(s.mediaTimeRange[0],a))throw o("nextgendasherr").nextgendasherr(e,"VideoPlayerNextgendashPlaybackLoopFoundNonContinuousMediaTimeRangesFromSidx","%s:%s - sidx segmentId %s start time %s too far from previous segment's end time %s",t,n,s.segmentId,s.mediaTimeRange[0],a);a=s.mediaTimeRange[1];var c=s.mediaTimeRange[1]<=0;if(c&&s.isEndingSegment)throw o("nextgendasherr").nextgendasherr(e,"VideoPlayerNextgendashPlaybackLoopFoundNonPositiveRepresentationEndTimeFromSidx","%s:%s - sidx segmentId %s isEndingSegment with non-positive end time %s",t,n,s.segmentId,s.mediaTimeRange[1]);if(s.isEndingSegment!==(u===r.length-1))throw o("nextgendasherr").nextgendasherr(e,"VideoPlayerNextgendashPlaybackLoopSidxHasBadEndingSegmentFlag","%s:%s - sidx with segment count %s has segmentId %s incorrectly marked as "+(s.isEndingSegment?"ending":"not ending"),t,n,r.length,s.segmentId);return!c})}function Ne(e,t,n,r,a,i,l,s){if(r.mediaTail==null)return r;var u=r.playheadMinimumTimeSec,c=r.mediaTail.mediaTimeSec;if(u>c+f)throw o("nextgendasherr").nextgendasherr(e,"VideoPlayerNextgendashPlaybackLoopIncoherentAppendChain","%s:%s - appendChain.playheadMinimumTimeSec %ss > appendChain.mediaTail.mediaTimeSec %ss",t,n,u,c);if(!o("VideoPlayerNextgendashMediaUtils").isWithinRange([u,c+f],a)){var d={playheadMinimumTimeSec:a,representationId:r.representationId};return s.push(t+":"+n+":appendChain:"+ue(r)+"-->"+ue(d)+"(playhead_outside)"),d}if(Math.abs(c-u)>f){var m=[u,Math.max(a,c-f)];if(i===void 0||!De(i,m,0)){var p={playheadMinimumTimeSec:a,representationId:r.representationId};return s.push(t+":"+n+":appendChain:"+ue(r)+"-->"+ue(p)+"(GapFoundIn"+o("VideoPlayerNextgendashMediaUtils").debugStringifyTimeRange(m)+":ActualBuffered"+(i!=null?o("VideoPlayerNextgendashMediaUtils").debugStringifyTimeRanges(i):"Unavailable")+":MSEstate="+fe(e.host.mediaSourceCollectSnapshot(e,l))+")"),p}}return r}function Me(e,t,n){for(var r=null,o=null,a=null,i=null,l=null,s=0,u=e.length,c=0;s<u;++s){var d=e[s],m=c+d.byteLength;if(r==null&&t>=c&&t<m&&(r=s,o=t-c),r!=null&&o!=null){a=s;var p=n!=null?Math.min(t+n,m):m;if(l=p-t,i=p-Math.max(t,c),n!=null&&l>=n)break}c=m}return r==null||o==null||a==null||i==null||l==null||l===0?null:{copyTotalBytesCount:l,endChunkBytesCount:i,endChunkIndex:a,startChunkByteOffset:o,startChunkIndex:r}}function we(e,t){var n=t.startChunkByteOffset,r=t.startChunkIndex,o=t.copyTotalBytesCount,a=t.endChunkBytesCount,i=t.endChunkIndex,l=null;if(i===r)return l=n===0&&a===e[r].byteLength?e[r]:e[r].subarray(n,n+a),l;for(;l==null&&i>r;)try{l=new Uint8Array(new ArrayBuffer(o))}catch(t){l=null,o-=a,i--,a=e[i].byteLength-(i===r?n:0)}if(l!=null)for(var s=0,u=r;u<=i;++u){var c=e[u],d=u===r||u===i?c.subarray(u===r?n:0,u===i?a:c.byteLength):c;l.set(d,s),s+=d.byteLength}return l}function Ae(e,t,n,r,a){var i,l,s,u=(i=r==null?void 0:r.manifestRepresentations[n.type])!=null?i:[],c=(l=u==null?void 0:u.filter(function(e){return n.blockedRepresentations[e.representationId]==null}))!=null?l:[],d=null;if(u.length>0&&c.length===0){var m,p=de(u),_=de(c),f=["VideoPlayerNextgendashPlaybackLoopBlockedAllRepresentations["+n.type+"]","%s:%s - Blocked all representations: %s %s %s",n.type,(m=n.targetRepresentationId)!=null?m:"no_target_representation","manifestRepresentations="+p,"playableRepresentations="+(_===p?"same":_),"blockedRepresentations="+ce(n.blockedRepresentations)];d=a!=null?o("nextgendasherr").nextgendasherrFromCause.apply(void 0,[e,a].concat(f)):o("nextgendasherr").nextgendasherr.apply(void 0,[e].concat(f))}if(t.push(n.type+":"+((s=n.targetRepresentationId)!=null?s:"no_target_representation")+":playableRepresentations:"+c.length+"-of-"+u.length),d!=null){var g;t.push(n.type+":"+((g=n.targetRepresentationId)!=null?g:"no_target_representation")+":streamFatalError:"+d.name)}var h={targetRepresentationId:n.targetRepresentationId,targetRepresentationReason:n.targetRepresentationReason};if(e.config.resetTargetRepresentationWhenItGetsBlocked&&n.targetRepresentationId!=null&&n.blockedRepresentations[n.targetRepresentationId]!=null){var y;t.push(n.type+":"+((y=n.targetRepresentationId)!=null?y:"no_target_representation")+":targetRepresentationId:blocked"),h={targetRepresentationId:null,targetRepresentationReason:"null_blocked_representation"}}return babelHelpers.extends({},n,h,{manifestRepresentationsCount:u.length,playableRepresentations:o("VideoPlayerNextgendashStateMachine").skipAutoDisposeInsideThisObject(c),streamFatalError:d!=null?d:n.streamFatalError})}function Fe(e,t,n,r,a,i,l){var s,u,c=r.blockedRepresentations[i];return t(e.config.resetTargetRepresentationWhenItGetsBlocked?o("nextgendasherr").nextgendasherrFromCause(e,l,c!=null?"VideoPlayerNextgendashPlaybackLoopRepresentationBlockedAgain":"VideoPlayerNextgendashPlaybackLoopRepresentationBlocked",c!=null?"%s:%s - Previously: "+c.name+" %s":"%s:%s - %s",r.type,i,"blockedRepresentations="+ce(r.blockedRepresentations)):l),n.push(r.type+":"+((s=r.targetRepresentationId)!=null?s:"no_target_representation")+":blockedRepresentations+"+i+":"+l.name),Ae(e,n,babelHelpers.extends({},r,{blockedRepresentations:o("VideoPlayerNextgendashStateMachine").skipAutoDisposeInsideThisObject(babelHelpers.extends({},r.blockedRepresentations,(u={},u[i]=l,u)))}),a,l)}function Oe(e,t,n,r,a,i,l){var s=n.appendState,u=s.pendingRemoveOperations,c=u[0],d=n.sourceBufferState;if(s.currSourceBufferOperation==null&&c!=null&&c.operationState==="wait_start"&&d!=null){var m=a.representationId,p=c.removeRange,_=e.host.mediaSourceGetDuration(e,i);_!=="NOT_A_NUMBER"&&c.removeRange[0]>_&&(c=babelHelpers.extends({},c,{removeRange:[0,c.removeRange[1]]}));var f={appendState:o("VideoPlayerNextgendashStateMachine").skipAutoDisposeInsideThisObject(babelHelpers.extends({},s,{currSourceBufferOperation:c,pendingRemoveOperations:u.slice(1)}))};r.push(n.type+":"+m+":pendingRemoveOperations:currSourceBufferOperation:"+o("VideoPlayerNextgendashMediaUtils").debugStringifyTimeRange(c.removeRange)+(c.removeRange!==p?":adjustedFrom="+o("VideoPlayerNextgendashMediaUtils").debugStringifyTimeRange(p):""));var g=void 0;try{var h=ge(e,t,{appendState:f.appendState,manifestRepresentationsCount:n.manifestRepresentationsCount,targetRepresentationId:n.targetRepresentationId,type:n.type},r,{debugStreamType:n.type,sourceBuffer:d.sourceBuffer,sourceBufferEventType:"_started",type:"_source_buffer_event"},e.host.clock(),l,function(){return _e(e,d)});h!=null&&(f=babelHelpers.extends({},f,h)),e.host.sourceBufferRemove(e,d.sourceBuffer,{mimeCodecsParsed:a.mimeCodecsParsed,removeRange:c.removeRange,representationId:m,type:n.type})}catch(a){if(g=o("nextgendasherr").nextgendasherrFromCause(e,a,"VideoPlayerNextgendashPlaybackLoopSourceBufferRemoveException"),g.name==="VideoPlayerNextgendashPlaybackLoopSourceBufferRemoveException/HostAPISourceBufferRemoveNoopNothingBuffered"){g=void 0;var y=ge(e,t,{appendState:f.appendState,manifestRepresentationsCount:n.manifestRepresentationsCount,targetRepresentationId:n.targetRepresentationId,type:n.type},r,{debugStreamType:n.type,sourceBuffer:d.sourceBuffer,sourceBufferEventType:"_finished",type:"_source_buffer_event"},e.host.clock(),l,function(){return _e(e,d)});y!=null&&(f=babelHelpers.extends({},f,y))}}if(g!=null){var C=ge(e,t,{appendState:f.appendState,manifestRepresentationsCount:n.manifestRepresentationsCount,targetRepresentationId:n.targetRepresentationId,type:n.type},r,{debugStreamType:n.type,exception:g,sourceBuffer:d.sourceBuffer,sourceBufferEventType:"_exception",type:"_source_buffer_event"},e.host.clock(),l,function(){return _e(e,d)});C!=null&&(f=babelHelpers.extends({},f,C))}return f}return null}function Be(e,t,n,r,a,i,l){var s=n.appendState,u=s.pendingRemoveOperations,c=s.pendingAppendOperations,d=c[0],m=n.sourceBufferState,p=a.representationId;if(s.currSourceBufferOperation==null&&u.length<=0&&d!=null&&d.operationState==="wait_start"&&m!=null){var _,f=d.appendInfo;if(f.appendInfoType!=="init"&&((_=s.appendChain)==null?void 0:_.representationId)!==f.representationId){var g;throw o("nextgendasherr").nextgendasherr(e,"VideoPlayerNextgendashPlaybackLoopDataRepresentationIdMismatchesLastInit","%s: Dequeued append operation appendInfoType %s representationId %s mismatches last init segment representationId %s, targetRepresentationId %s",n.type,f.appendInfoType,f.representationId,(g=s.appendChain)==null?void 0:g.representationId,p)}var h={appendState:o("VideoPlayerNextgendashStateMachine").skipAutoDisposeInsideThisObject(babelHelpers.extends({},n.appendState,{currSourceBufferOperation:d,pendingAppendOperations:c.slice(1)})),sourceBufferState:m};if(r.push(n.type+":"+p+":pendingAppendOperations:currSourceBufferOperation:"+se(d.appendInfo)),f.appendInfoType==="data"&&f.dataByteRangeLength===0){var y=ge(e,t,{appendState:h.appendState,manifestRepresentationsCount:n.manifestRepresentationsCount,targetRepresentationId:n.targetRepresentationId,type:n.type},r,{debugStreamType:n.type,sourceBuffer:m.sourceBuffer,sourceBufferEventType:"_finished",type:"_source_buffer_event"},e.host.clock(),i,function(){return _e(e,m)});y!=null&&(h=babelHelpers.extends({},h,y))}else{var C;try{var b=ge(e,t,{appendState:h.appendState,manifestRepresentationsCount:n.manifestRepresentationsCount,targetRepresentationId:n.targetRepresentationId,type:n.type},r,{debugStreamType:n.type,sourceBuffer:m.sourceBuffer,sourceBufferEventType:"_started",type:"_source_buffer_event"},e.host.clock(),i,function(){return _e(e,m)});b!=null&&(h=babelHelpers.extends({},h,b)),f.appendInfoType==="init"&&(r.push(n.type+":"+p+":abort:MSEbefore="+fe(e.host.mediaSourceCollectSnapshot(e,l))),e.host.sourceBufferAbort(e,m.sourceBuffer,{mimeCodecsParsed:f.mimeCodecsParsed,representationId:f.representationId,type:n.type}));var v=f.mimeCodecsParsed,S=m.sourceBufferMimeCodecsParsed,R=v.contentType!==S.contentType,L=v.containerType!==S.containerType,E=v.codecFamily!==S.codecFamily;(R||L||E)&&(r.push(n.type+":"+p+":sourceBufferState:changeType:"+o("VideoPlayerNextgendashMediaUtils").debugStringifyMimeCodecs(m.sourceBufferMimeCodecsParsed)+"-->"+o("VideoPlayerNextgendashMediaUtils").debugStringifyMimeCodecs(f.mimeCodecsParsed)+":MSEbefore="+fe(e.host.mediaSourceCollectSnapshot(e,l))),e.host.sourceBufferChangeType(e,m.sourceBuffer,{mimeCodecsParsed:f.mimeCodecsParsed,mimeCodecsParsedBeforeChangeType:m.sourceBufferMimeCodecsParsed,representationId:f.representationId,type:n.type}),m=babelHelpers.extends({},m,{sourceBufferMimeCodecsParsed:f.mimeCodecsParsed}),h=babelHelpers.extends({},h,{sourceBufferState:m})),r.push(n.type+":"+p+":append:MSEbefore="+fe(e.host.mediaSourceCollectSnapshot(e,l))),e.host.sourceBufferAppendBuffer(e,l,m.sourceBuffer,d.buffer,{mimeCodecsParsed:f.mimeCodecsParsed,representationId:f.representationId,type:n.type})}catch(t){C=o("nextgendasherr").nextgendasherrFromCause(e,t,"VideoPlayerNextgendashPlaybackLoopSourceBufferAppendException")}if(C!=null){var k=ge(e,t,{appendState:h.appendState,manifestRepresentationsCount:n.manifestRepresentationsCount,targetRepresentationId:n.targetRepresentationId,type:n.type},r,{debugStreamType:n.type,exception:C,sourceBuffer:m.sourceBuffer,sourceBufferEventType:"_exception",type:"_source_buffer_event"},e.host.clock(),i,function(){return _e(e,m)});k!=null&&(h=babelHelpers.extends({},h,k))}}return h}return null}l.originalMediaVariant=h,l.VideoPlayerNextgendashPlaybackLoopSM=C,l.internal_substituteParamsInSegmentURLTemplate=b,l.internal_prioritizeFetchDemands=v,l.internal_evictFetchDemandsByFetchState=R,l.internal_startFetchRequestsForFetchDemands=D,l.internal_fulfillFetchDemands=x,l.internal_coalesceAdjacentDebugLogLines=M,l.internal_groupSegmentsToFetch=z,l.makeSegmentFetchDataKey=Z,l.findDataForDataKey=ne,l.debugPrepareFetchDemands=ae,l.internal_handleSourceBufferEvent=ge,l.internal_updateSourceBufferRangesAnnotated=he,l.internal_filterVideoRepresentationsByVariant=be,l.internal_filterVideoRepresentationsByQuality=ve,l.internal_filterAudioRepresentationsByVariant=Se,l.internal_selectTargetVideoRepresentation=Re,l.internal_selectTargetAudioRepresentation=ke,l.internal_checkRangeBufferedWithoutGap=De,l.internal_makeSidxFromSegmentTemplate=$e,l.internal_validateAndNormalizeSidx=Pe,l.internal_selectDataChunksToAppend=Me,l.internal_combineDataChunksIntoContiguousBuffer=we,l.internal_blockRepresentationInStream=Fe,l.internal_startPendingRemoveOperation=Oe,l.internal_startPendingAppendOperation=Be}),98);
__d("VideoPlayerNextgendashWorkerPlayer",["VideoPlayerNextgendashManifestParser","VideoPlayerNextgendashPlaybackLoop","VideoPlayerNextgendashStateMachine","deepEquals","nextgendasherr"],(function(t,n,r,o,a,i,l){"use strict";var e=o("VideoPlayerNextgendashStateMachine").defineStateMachine({augmentEnv:function(t,n){return babelHelpers.extends({},t,{config:n.playerStateFromMain.configFromMain,loggingState:babelHelpers.extends({},t.loggingState,{logstampPrefix:t.loggingState.logstampPrefix+"::#"+n.nextgendashInstanceIndex+"::"+n.playerInstanceKey,logstampTint:n.nextgendashInstanceIndex%20/20,metadata:babelHelpers.extends({},t.loggingState.metadata,{nextgendashInstanceIndex:n.nextgendashInstanceIndex,playerInstanceKey:n.playerInstanceKey,playerSubOrigin:n.playerSubOrigin,prefetchKey:n.prefetchKey,videoFBID:n.videoFBID})})})}},function(e){var t=e.args,n=t.linkedAt,r=t.playerInstanceKey,a=t.playerStateFromMain,i=t.prefetchResult,l=t.sendToMain,s=t.videoFBID,u=t.workerType,c=e.env,d=e.makeChildSm,m=e.sendToSelf;return{linkedAt:n,playbackLoop:d("playbackLoop",o("VideoPlayerNextgendashPlaybackLoop").VideoPlayerNextgendashPlaybackLoopSM,{onTransitioned:function(t,n,r){m({type:"_playback_loop_transitioned"},r)},playerStateFromMain:a,prefetchResult:i,requestUrlRefresh:function(t){l({playerInstanceKey:r,type:"from_worker_to_main_refresh_urls",urls:t,workerType:u},[])},sendMediaSourceToMain:function(t,n){m({mediaSource:t,mediaSourceIndex:n,type:"_send_media_source_to_main"})},sendPlayerWarningToMain:function(t){c.logging.log(c,{error:t,format:"sendPlayerWarningToMain",type:"generic_error_as_warning"}),m({type:"_send_player_warning_to_main",warningError:t})}}),playerInstanceKey:r,playerStateFromWorkerSent:null,shouldSendPlayerStateForDebug:!1,state:"initial",videoFBID:s}},function(e){var t=e.args,n=t.playerInstanceKey,a=t.sendToMain,i=t.workerType,l=e.env,c=e.event,d=e.sendToOther,m=e.sendToSelf,_=e.state,f=_.state!=="__disposed__"&&_.playbackLoop.state.state==="playing"?_.playbackLoop.state:null;function g(){a({playerInstanceKey:n,playerStateForDebug:p(l,f),type:"from_worker_to_main_player_state_for_debug",workerType:i},[],!0)}if(c.type==="update_player_state_from_main")return _.state!=="__disposed__"?(Object.assign(l.config,c.playerStateFromMain.configFromMain),d(_.playbackLoop,{playerStateFromMain:c.playerStateFromMain,reason:c.reason,type:"update_player_state_from_main"}),c.playerStateFromMain.shouldSendPlayerStateForDebug&&c.playerStateFromMain.shouldSendPlayerStateForDebug!==_.shouldSendPlayerStateForDebug&&g(),babelHelpers.extends({},_,{shouldSendPlayerStateForDebug:c.playerStateFromMain.shouldSendPlayerStateForDebug})):void 0;if(c.type==="request_recovery_from_source_reset"){if(_.state!=="__disposed__"){d(_.playbackLoop,{mediaSourceIndex:c.mediaSourceIndex,type:"request_recovery_from_source_reset"});return}return}if(c.type==="navigation_signal_pause_fetch_demands"){if(_.state!=="__disposed__"){d(_.playbackLoop,{type:"navigation_signal_pause_fetch_demands"});return}return}switch(_.state){case"initial":switch(c.type){case"__enter":return;case"__exception":return;case"__dispose":return;case"_playback_loop_transitioned":{var h=null,y=u(f);return y!==s&&!r("deepEquals")(y,_.playerStateFromWorkerSent)&&(a({playerInstanceKey:n,playerStateFromWorker:y,type:"from_worker_to_main_playback_loop_state",workerType:i},[],!0),h=y),_.playbackLoop.state.state==="__disposed__"&&_.playbackLoop.state.exception!=null&&m({exception:_.playbackLoop.state.exception,type:"__exception"}),_.shouldSendPlayerStateForDebug&&g(),h!=null?babelHelpers.extends({},_,{playerStateFromWorkerSent:h}):void 0}case"_send_media_source_to_main":{var C=c.mediaSource,b=c.mediaSourceIndex,v=p(l,f),S=u(f);if(i==="RealWorker"||i==="RealWorkerV2"){var R=l.host.mediaSourceGetHandleInWorker(l,C);a({mediaSourceHandle:R,mediaSourceIndex:b,playerInstanceKey:n,playerStateForDebug:v,playerStateFromWorker:S,type:"from_worker_to_main_player_new_media_source",workerType:i},[R])}else a({mediaSource:C,mediaSourceIndex:b,playerInstanceKey:n,playerStateForDebug:v,playerStateFromWorker:S,type:"from_worker_to_main_player_new_media_source",workerType:i},[]);return babelHelpers.extends({},_,{playerStateFromWorkerSent:S})}case"_send_player_warning_to_main":{var L=p(l,f),E=u(f);return a({playerInstanceKey:n,playerStateForDebug:L,playerStateFromWorker:E,type:"from_worker_to_main_player_warning",warningErrorSnapshot:o("nextgendasherr").nextgendasherrToSnapshot(c.warningError),workerType:i},[]),babelHelpers.extends({},_,{playerStateFromWorkerSent:E})}case"debug_log_stall_details":{var k,I=l.host.clock(),T=p(l,f),D=u(f),x=f==null?void 0:f.playerStateFromMain.mediaElementSnapshot,$={fetchDemands:f?o("VideoPlayerNextgendashPlaybackLoop").debugPrepareFetchDemands(f.fetchDemands,!0):void 0,loopIteration:f==null?void 0:f.loopState.loopIteration,loopReasons:f==null?void 0:f.loopState.loopReasons,mediaElementSnapshotFromMain:c.mediaElementSnapshotFromMain,mediaElementSnapshotFromPlaybackLoop:r("deepEquals")(x,c.mediaElementSnapshotFromMain)?"same":x,playerStateFromWorker:D,stallDetailsClock:I,stallStartClock:c.stallStartClock,streams:f?f.streams.map(function(e){return{sourceBufferRanges:e.appendState.sourceBufferRanges,type:e.type}}):void 0,waitingForFirstSourceOpen:f==null||(k=f.mediaSourceState)==null?void 0:k.waitingForFirstSourceopen},P=o("nextgendasherr").nextgendasherr(l,"VideoPlayerNextgendashDebugStallDetails","Stall details: %s %s",JSON.stringify($),"debugPlaybackLoopRecentChanges:"+(f==null?"undefined":"\n "+f.debugPlaybackLoopRecentChanges.join("\n ")));return a({playerInstanceKey:n,playerStateForDebug:T,playerStateFromWorker:D,type:"from_worker_to_main_player_warning",warningErrorSnapshot:o("nextgendasherr").nextgendasherrToSnapshot(P),workerType:i},[]),babelHelpers.extends({},_,{playerStateFromWorkerSent:D})}default:c.type;return}case"__disposed__":switch(c.type){case"__enter":{if(_.exception!=null){var N,M=o("nextgendasherr").nextgendasherrToSnapshot(_.exception),w=c.prevState.playbackLoop.state.state==="playing"?c.prevState.playbackLoop.state:null,A=u(w),F=A===s&&(N=c.prevState.playerStateFromWorkerSent)!=null?N:A;a({errorSnapshot:M,playerInstanceKey:n,playerStateForDebug:p(l,w),playerStateFromWorker:F,type:"from_worker_to_main_player_fatal_error",workerType:i},[])}return}default:return}default:{_.state;return}}}),s=o("VideoPlayerNextgendashStateMachine").skipAutoDisposeInsideThisObject({blockedRepresentationIds:{audio:[],video:[]},bufferedRangesWithRepIds:{audio:null,video:null},targetRepresentationId:{audio:null,video:null},targetVariantRepresentationIds:{audio:[],video:[]},workaroundForSegmentBufferedInsufficientlyMediaTimeRanges:[]});function u(e){var t,n,r,a,i,l;if(e==null)return s;var u=e.streams.find(function(e){return e.type==="audio"}),c=e.streams.find(function(e){return e.type==="video"});if(u==null&&c==null)return s;var d=c==null?void 0:c.appendState,m=u==null?void 0:u.appendState,p=[].concat((t=d==null?void 0:d.workaroundForSegmentBufferedInsufficiently.map(function(e){return e.segment.mediaTimeRange}))!=null?t:[],(n=m==null?void 0:m.workaroundForSegmentBufferedInsufficiently.map(function(e){return e.segment.mediaTimeRange}))!=null?n:[]);return o("VideoPlayerNextgendashStateMachine").skipAutoDisposeInsideThisObject({blockedRepresentationIds:{audio:Object.keys((r=u==null?void 0:u.blockedRepresentations)!=null?r:{}),video:Object.keys((a=c==null?void 0:c.blockedRepresentations)!=null?a:{})},bufferedRangesWithRepIds:{audio:m==null?void 0:m.sourceBufferRangesAnnotated,video:d==null?void 0:d.sourceBufferRangesAnnotated},targetRepresentationId:{audio:u==null?void 0:u.targetRepresentationId,video:c==null?void 0:c.targetRepresentationId},targetVariantRepresentationIds:{audio:(i=u==null?void 0:u.targetVariantRepresentationIds)!=null?i:[],video:(l=c==null?void 0:c.targetVariantRepresentationIds)!=null?l:[]},workaroundForSegmentBufferedInsufficientlyMediaTimeRanges:p.length>0?p:void 0})}function c(e,t,n){var r,a=e!=null&&t!=null?e.sidxByRepresentationId[t.representationId]:null,i=t!=null&&t.type==="audio"?o("VideoPlayerNextgendashManifestParser").getDisplayLabelFromAudioRepresentation(t):t!=null&&t.type==="video"?o("VideoPlayerNextgendashManifestParser").getDisplayLabelFromVideoRepresentation(t)+(t.lang!=null?" - "+t.lang:"")+(t.role!=null?" - "+t.role:""):void 0,l=t!=null?t.mimeCodecsParsed.codecFamily:void 0;return o("VideoPlayerNextgendashStateMachine").skipAutoDisposeInsideThisObject((r=a==null?void 0:a.map(function(r){var a,s=e!=null&&t!=null?o("VideoPlayerNextgendashPlaybackLoop").makeSegmentFetchDataKey(t,r):null,u=s!=null&&n!=null?o("VideoPlayerNextgendashPlaybackLoop").findDataForDataKey(n,s):null,c=u==null?void 0:u.responseFetch,d=u==null?void 0:u.responseInfo,m=d!=null&&c!=null&&c.state.state!=="__null__"&&c.state.state!=="__disposed__"&&c.state.state!=="waiting_start"?c.state.request.requestInfo+("#"+d.responseByteRange.byteOffset+"B.."+(d.responseByteRange.byteLength!=null?d.responseByteRange.byteOffset+d.responseByteRange.byteLength-1:"?")+"B"):void 0,p=c!=null?""+c.state.state+(c.state.responseData!=null?":"+c.state.responseData.state.state+(c.state.responseData.state.state==="reading_stream"||c.state.responseData.state.state==="done_stream"?"["+c.state.responseData.state.chunks.length+"]":""):""):void 0,_=r.mediaFileByteRange.byteLength,f=c!=null&&c.state.state!=="__null__"&&c.state.state!=="__disposed__"?c.state.request.requestCreatedClock.unixMs:void 0,g=c!=null&&(c.state.state==="waiting_headers"||c.state.state==="waiting_data")?c.state.requestStartedClock.unixMs:void 0,h=c!=null&&c.state.state!=="__null__"&&c.state.state!=="__disposed__"?c.state.prefetchResultState:void 0,y=c!=null&&(c.state.state==="waiting_data"||c.state.state==="completed")&&parseInt((a=c.state.responseHeader.httpHeaders)==null?void 0:a.get("Content-Length"),10)||void 0,C=c!=null&&c.state.state==="waiting_headers"?0:c!=null&&(c.state.state==="waiting_data"||c.state.state==="completed")?c.state.responseData.state.state==="reading_stream"||c.state.responseData.state.state==="done_stream"?c.state.responseData.state.dataBytesLengthTotal:c.state.responseData.state.state==="done_buffer"?c.state.responseData.state.buffer.byteLength:c.state.responseData.state.state==="done_text"?c.state.responseData.state.text.length:void 0:void 0;return{byteLength:_,dataState:c==null?"not_ready":{__disposed__:"disposed",__null__:"not_ready",aborted:"failed",completed:"ready",failed:"failed",waiting_data:"fetching",waiting_headers:"fetching",waiting_retry_or_failed:"retrying",waiting_start:"not_ready",waiting_start_from_retry:"retrying"}[c.state.state],debugJsonString:JSON.stringify({bytesDownloaded:C,bytesExpected:y,error:c!=null&&c.state.state==="aborted"?String(c.state.abortReason):c!=null&&c.state.state==="failed"?String(c.state.error):c!=null&&c.state.state==="__disposed__"&&c.state.exception!=null?String(c.state.exception):void 0,label:[i,l].filter(Boolean).join(" / "),prefetchResultState:h,requestCreatedClockUnixMs:f,requestStartedClockUnixMs:g,responseByteRange:d==null?void 0:d.responseByteRange,state:p,url:m}),mediaTimeEnd:r.mediaTimeRange[1],mediaTimeStart:r.mediaTimeRange[0],segmentId:r.segmentId}}))!=null?r:[])}function d(e){return e.map(function(e){return{endTime:e[1],startTime:e[0]}})}function m(e,t,n){return e.map(function(e){var r=t==null?void 0:t.find(function(t){return t.representationId===e[2]});return{debugJsonString:JSON.stringify({label:r?n(r):void 0,representationId:e[2]}),endTime:e[1],startTime:e[0]}})}function p(e,t){var n,r,a,i,l,s,u;if(e.config.debugOverlay){var p=t==null?void 0:t.streams.find(function(e){return e.type==="audio"}),_=t==null||(n=t.playerStateFromMain.dashManifestData)==null?void 0:n.manifestRepresentations.audio.find(function(e){return e.representationId===(p==null?void 0:p.targetRepresentationId)}),f=t==null?void 0:t.streams.find(function(e){return e.type==="video"}),g=t==null||(r=t.playerStateFromMain.dashManifestData)==null?void 0:r.manifestRepresentations.video.find(function(e){return e.representationId===(f==null?void 0:f.targetRepresentationId)}),h=m((a=p==null?void 0:p.appendState.sourceBufferRangesAnnotated)!=null?a:[],t==null||(i=t.playerStateFromMain.dashManifestData)==null?void 0:i.manifestRepresentations.audio,o("VideoPlayerNextgendashManifestParser").getDisplayLabelFromAudioRepresentation),y=m((l=f==null?void 0:f.appendState.sourceBufferRangesAnnotated)!=null?l:[],t==null||(s=t.playerStateFromMain.dashManifestData)==null?void 0:s.manifestRepresentations.video,o("VideoPlayerNextgendashManifestParser").getDisplayLabelFromVideoRepresentation),C=t==null||(u=t.playerStateFromMain)==null||(u=u.mediaElementSnapshot)==null?void 0:u.bufferedForDebug,b=d(C!=null?C:[]),v=c(p,_,t==null?void 0:t.fetchDemands),S=c(f,g,t==null?void 0:t.fetchDemands);return o("VideoPlayerNextgendashStateMachine").skipAutoDisposeInsideThisObject({bufferedRanges:{audio:h,captions:[],combo:b,video:y},segments:{audio:v,captions:[],combo:[],video:S}})}}l.VideoPlayerNextgendashWorkerPlayerSM=e}),98);
__d("VideoPlayerNextgendashWorkerPrefetchTaskQueue",["VideoPlayerNextgendashStateMachine","VideoPlayerNextgendashWorkerPrefetchCache","nextgendasherr"],(function(t,n,r,o,a,i,l){"use strict";var e=0;function s(){return e++}function u(){e=0}var c=o("VideoPlayerNextgendashStateMachine").defineStateMachine(null,function(e){var t=e.env;return{state:"idle"}},function(e){var t=e.env,n=e.event,r=e.sendToSelf,a=e.state,i=e.unexpectedEvent;function l(e){var n;try{n=o("VideoPlayerNextgendashWorkerPrefetchCache").processPrefetchTask({env:t,task:e})}catch(e){return t.logging.log(t,{error:o("nextgendasherr").nextgendasherrFromCause(t,e,"VideoPlayerNextgendashProcessPrefetchTaskException"),type:"generic_error_as_warning"}),null}if(n==null)return null;var a=n,i=a.abort,l=a.promise,u=s();return l.finally(function(){r({taskID:u,type:"task_completed"})}),{abort:i,promise:l,task:e,taskID:u}}function u(e,n){if(e.size>=t.config.maxConcurrentPrefetchTasks)return n;var r;for(r=0;r<n.length;r++){var o=n[r],a=l(o.task);if(a!=null&&(e.set(a.taskID,a),e.size>=t.config.maxConcurrentPrefetchTasks))break}return n.slice(r+1)}function c(e,t){var n=t.map(function(e){return{priority:0,task:e}}),r=e.findIndex(function(e){return e.priority===1});return r===-1?[].concat(e,n):[].concat(e.slice(0,r),n,e.slice(r))}switch(a.state){case"idle":switch(n.type){case"__enter":return;case"__exception":return;case"__dispose":return;case"enqueue_tasks":{var d=new Map,m=c([],n.tasks),p=u(d,m);return d.size>0?{activeTasks:d,queuedTasks:p,state:"fetching"}:{state:"idle"}}case"task_completed":throw i();case"cancel_all_tasks":return;case"cancel_tasks_for_prefetch_key":return;case"deprioritize_current_tasks":return;default:{n.type;return}}case"fetching":switch(n.type){case"__enter":return;case"__exception":return;case"__dispose":return;case"enqueue_tasks":{var _=c(a.queuedTasks,n.tasks),f=u(a.activeTasks,_);return babelHelpers.extends({},a,{queuedTasks:f})}case"task_completed":{a.activeTasks.delete(n.taskID);var g=u(a.activeTasks,a.queuedTasks);return a.activeTasks.size>0?babelHelpers.extends({},a,{queuedTasks:g}):{state:"idle"}}case"cancel_all_tasks":return a.activeTasks.forEach(function(e){e.abort()}),a.activeTasks.clear(),{state:"idle"};case"deprioritize_current_tasks":{var h=a.queuedTasks.map(function(e){return{priority:1,task:e.task}});return babelHelpers.extends({},a,{queuedTasks:h})}case"cancel_tasks_for_prefetch_key":{var y=n.prefetchKey;a.activeTasks.forEach(function(e,t){e.task.prefetchKey===y&&(e.abort(),a.activeTasks.delete(t))});var C=a.queuedTasks.filter(function(e){return e.task.prefetchKey!==y}),b=u(a.activeTasks,C);return a.activeTasks.size>0?babelHelpers.extends({},a,{queuedTasks:b}):{state:"idle"}}default:{n.type;return}}case"__disposed__":switch(n.type){case"__enter":{n.prevState.state==="fetching"&&n.prevState.activeTasks.forEach(function(e){e.abort()});return}default:return}default:{a.state;return}}});l.resetTaskIDCounterForTestingOnly=u,l.VideoPlayerNextgendashWorkerPrefetchTaskQueueSM=c}),98);
__d("VideoPlayerNextgendashWorker",["VideoPlayerNextgendashConnectionWorkerToMain","VideoPlayerNextgendashStateMachine","VideoPlayerNextgendashWorkerPlayer","VideoPlayerNextgendashWorkerPrefetchCache","VideoPlayerNextgendashWorkerPrefetchTaskQueue","nextgendasherr"],(function(t,n,r,o,a,i,l){"use strict";var e=o("VideoPlayerNextgendashStateMachine").defineStateMachine(null,function(e){var t=e.args,n=t.portToMain,r=t.subscribeToDebugHalt,a=t.workerType,i=e.env,l=e.sendToSelf,s=o("VideoPlayerNextgendashConnectionWorkerToMain").connectToMain(i,a,n,r,function(e){l(e)});return{mainConnection:s,players:new Map,prefetchTaskQueue:null,state:"port_to_main_ready"}},function(e){var t=e.args.workerType,n=e.env,r=e.event,a=e.eventClock,i=e.makeChildSm,l=e.sendToOther,s=e.sendToSelf,u=e.state;switch(u.state){case"port_to_main_ready":switch(r.type){case"__enter":return;case"__exception":return;case"__dispose":return;case"_worker_player_disposed":{r.prefetchKey!=null&&u.prefetchTaskQueue!=null&&l(u.prefetchTaskQueue,{prefetchKey:r.prefetchKey,type:"cancel_tasks_for_prefetch_key"});var c=u.players,d=c.get(r.playerInstanceKey);return d?(c.delete(r.playerInstanceKey),u.mainConnection.sendToMain({eventToMain:{exceptionSnapshot:r.exception!=null?o("nextgendasherr").nextgendasherrToSnapshot(r.exception):void 0,playerInstanceKey:r.playerInstanceKey,reason:r.exception!=null?"VideoPlayerNextgendashWorkerPlayer_exception":"VideoPlayerNextgendashWorkerPlayer_disposed",type:"from_worker_to_main_player_unlinked",workerType:t},type:"send_to_main"}),u):void 0}case"from_main_to_worker_link_player":{var m=u.players,p=m.get(r.playerInstanceKey);if(!p){var _,f=(_=r.prefetchKey!=null?o("VideoPlayerNextgendashWorkerPrefetchCache").getCachedRepresentationsForPrefetchKey(n,r.prefetchKey):null)!=null?_:r.prefetchResultInitial;p=i("player-"+r.playerInstanceKey,o("VideoPlayerNextgendashWorkerPlayer").VideoPlayerNextgendashWorkerPlayerSM,{linkedAt:a,nextgendashInstanceIndex:r.nextgendashInstanceIndex,onDisposed:function(t,n,o){s({exception:n.exception,playerInstanceKey:r.playerInstanceKey,prefetchKey:r.prefetchKey,type:"_worker_player_disposed"})},playerInstanceKey:r.playerInstanceKey,playerStateFromMain:o("VideoPlayerNextgendashStateMachine").skipAutoDisposeInsideThisObject(r.playerStateFromMain),playerSubOrigin:r.playerSubOrigin,prefetchKey:r.prefetchKey,prefetchResult:f,sendToMain:function(t,n,r){u.mainConnection.sendToMain({canSendOnlyLatestOfTypeIfThrottled:r,eventToMain:t,transferList:n,type:"send_to_main"})},videoFBID:r.videoFBID,workerType:t})}return m.set(r.playerInstanceKey,p),u}case"from_main_to_worker_unlink_player":{var g=u.players;return g.delete(r.playerInstanceKey),u}case"from_main_to_worker_sync_state":{var h=u.players,y=h.get(r.playerInstanceKey);if(!y)return;l(y,{playerStateFromMain:r.playerStateFromMain,reason:r.reason,type:"update_player_state_from_main"});return}case"from_main_to_worker_debug_log_stall_details":{var C=u.players,b=C.get(r.playerInstanceKey);if(!b)return;l(b,{mediaElementSnapshotFromMain:r.mediaElementSnapshotFromMain,stallStartClock:r.stallStartClock,type:"debug_log_stall_details"});return}case"from_main_to_worker_request_recovery_from_source_reset":{var v=u.players,S=v.get(r.playerInstanceKey);if(!S)return;l(S,{mediaSourceIndex:r.mediaSourceIndex,type:"request_recovery_from_source_reset"});return}case"from_main_to_worker_prefetch":{if(n.config.maxConcurrentPrefetchTasks<1){o("VideoPlayerNextgendashWorkerPrefetchCache").initiatePrefetch(n,r.prefetchInfo,r.initialAbrParams);return}var R;try{R=o("VideoPlayerNextgendashWorkerPrefetchCache").getPrefetchTasks(n,r.prefetchInfo,r.initialAbrParams)}catch(e){n.logging.log(n,{error:o("nextgendasherr").nextgendasherrFromCause(n,e,"VideoPlayerNextgendashGetPrefetchTasksException"),type:"generic_error_as_warning"});return}if(R.length===0)return;var L=u.prefetchTaskQueue;return L||(L=i("prefetch-task-queue",o("VideoPlayerNextgendashWorkerPrefetchTaskQueue").VideoPlayerNextgendashWorkerPrefetchTaskQueueSM,{})),l(L,{tasks:R,type:"enqueue_tasks"}),babelHelpers.extends({},u,{prefetchTaskQueue:L})}case"from_main_to_worker_navigation_signal":{if(r.clearPrefetchQueue){var E=u.prefetchTaskQueue;E!=null&&l(E,{type:"cancel_all_tasks"})}if(r.deprioritizeCurrentPrefetchTasks){var k=u.prefetchTaskQueue;k!=null&&l(k,{type:"deprioritize_current_tasks"})}if(r.preventFetchDemandStart)for(var I of u.players.values())l(I,{type:"navigation_signal_pause_fetch_demands"});return}default:r.type;return}case"__disposed__":switch(r.type){case"__enter":{var T=r.prevState;if(T.state==="port_to_main_ready"){var D=T.mainConnection.disconnectFromMain;D!=null&&D(u.exception!=null?o("nextgendasherr").nextgendasherrFromCause(n,u.exception,"VideoPlayerNextgendashWorkerDisposed"):o("nextgendasherr").nextgendasherr(n,"VideoPlayerNextgendashWorkerDisposed"))}return}default:return}default:{u.state;return}}});l.VideoPlayerNextgendashWorkerSM=e}),98);
__d("VideoPlayerNextgendashWorkerEnvironment",["VideoPlayerNextgendashLoggingAPI","VideoPlayerNextgendashLoggingDestinationODSWorkerToMain","VideoPlayerNextgendashLoggingDestinationQPLWorkerToMain","VideoPlayerNextgendashWorkQueue","VideoPlayerNextgendashWorker"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,r,a){var i,l=e,u=(i=l.isInWorkerType)!=null?i:"VirtualWorker",c=t,d={config:l,host:c,logging:o("VideoPlayerNextgendashLoggingAPI").combineLoggingDestinations([l.debugLog?r:null,l.debugViz?a==null?void 0:a.createLoggingDestination({hostAPI:c,portToMain:n,workerType:u}):null,o("VideoPlayerNextgendashLoggingDestinationQPLWorkerToMain").createVideoPlayerNextgendashLoggingDestinationQPLWorkerToMain(n,c.timers),o("VideoPlayerNextgendashLoggingDestinationODSWorkerToMain").createVideoPlayerNextgendashLoggingDestinationODSWorkerToMain(n,c.timers)]),loggingState:s(u),workQueue:o("VideoPlayerNextgendashWorkQueue").createVideoPlayerNextgendashWorkQueue(c.scheduleToRun)},m=o("VideoPlayerNextgendashWorker").VideoPlayerNextgendashWorkerSM.createSM("VideoPlayerNextgendashWorker",d,null,{portToMain:n,subscribeToDebugHalt:a==null?void 0:a.subscribeToDebugHalt,workerType:u})}function s(e){return{logstampPrefix:{RealWorker:"nextgendash_real_worker",RealWorkerV2:"nextgendash_real_worker_v2",VirtualWorker:"nextgendash_virtual_worker"}[e],logstampTint:{RealWorker:.9,RealWorkerV2:.8,VirtualWorker:.3}[e],metadata:{}}}l.createVideoPlayerNextgendashWorkerEnvironment=e,l.createWorkerDefaultLoggingState=s}),98);
__d("VideoPlayerNextgendashWorkerEnvironmentImportUnconditionally",["VideoPlayerNextgendashWorkerEnvironment"],(function(t,n,r,o,a,i){"use strict";Object.keys(importNamespace("VideoPlayerNextgendashWorkerEnvironment")).forEach(function(e){e==="default"||e==="__esModule"||(i[e]=importNamespace("VideoPlayerNextgendashWorkerEnvironment")[e])})}),null);
__d("VideoPlayerOzImplementationDefaultConditional.react",["cr:1195"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:1195")}),98);
__d("handleVideoPlayerLatencyLevelChange",[],(function(t,n,r,o,a,i){"use strict";function e(e,t,n,r){if(e&&t&&n){var o=e.getAllContexts().latency_level,a=[];try{a=JSON.parse(e.getString("seek_on_latency_level_change_allowed","[]"))}catch(e){}var i=a.some(function(e){return e.length===2&&e[0]===o&&e[1]===r});if(e.setContext("latency_level",r),!i)return;var l=t.getDuration(),s=l!=null?l+e.getNumber("live_initial_playback_position",0):null;s!=null&&t.setPlayheadPosition(s)}}i.default=e}),66);
__d("VideoPlayerOzImplementationEngineExtrasAPI",["VideoPlayerOzWWWGlobalConfig","emptyFunction","gkx","handleVideoPlayerLatencyLevelChange","oz-player/networks/OzBandwidthEstimator"],(function(t,n,r,o,a,i,l){"use strict";var e=r("emptyFunction");function s(e){var t;return(t=e.getSelectedVideoQuality())!=null?t:""}function u(e){var t=e.getCurrentPlayingAudioTrackID();return t==null?null:t}function c(e){var t=e.getCurrentVideoRepresentation();return t==null?"":t.getDisplayLabel()}function d(e){var t,n=e.getIsVideoQualityAdaptationEnabled()?"auto":(t=e.getSelectedVideoQuality())!=null?t:"auto";return n}function m(e){return e.getTargetAudioTrack()}function p(e){var t,n;return(t=(n=e.getMpd())==null?void 0:n.getCustomField("fbProjection"))!=null?t:null}function _(e,t){var n=d(e);if(t==="notselected"||t===n)return!1;if(t==="auto")return e.enableVideoQualityAdaptation(),!0;if(t!==e.getSelectedVideoQuality()){var r=t;return e.switchToVideoQuality(r),!0}else return!1}function f(e,t){var n=t;e.switchToVideoVariant(n)}function g(e){var t=e.getConfig,n=e.getOzPlayer,o=e.getVideoElementAPI,a={getApproximateFBLSToPlayerDisplayLatency:function(){var e,t;return(e=(t=n())==null?void 0:t.getApproximateFBLSToPlayerDisplayLatency())!=null?e:null},getAvailableAudioTracks:function(){var e,t=(e=n())==null?void 0:e.getAudioTracks();if(!t)return[];var r=t.map(function(e){return{displayLabel:e.displayLabel,id:e.id,lang:e.lang,mimeCodecs:e.mimeCodecs,role:e.role,variantKey:e.variantKey}});return r},getAvailableVideoQualities:function(){var e,t;return(e=(t=n())==null?void 0:t.getVideoQualities())!=null?e:[]},getAvailableVideoTracks:function(){var e,t=(e=n())==null?void 0:e.getVideoTracks();if(!t)return[];var r=t.map(function(e){return{codec:e.codec,codecFamily:e.codecFamily,displayLabel:e.displayLabel,height:e.height,id:e.id,lang:e.lang,mimeCodecs:e.mimeCodecs,qualityLabel:e.qualityLabel,role:e.role,variantKey:e.variantKey,width:e.width}});return r},getCurrentAudioRepresentation:function(){var e,t;return(e=(t=n())==null?void 0:t.getCurrentAudioRepresentation())!=null?e:null},getCurrentPlayingAudioRepresentationID:function(){var e=n();return e?u(e):null},getCurrentPlayingAudioTrackID:function(){var e=n();return e?u(e):null},getCurrentPlayingVideoQuality:function(){var e=n();return e?c(e):""},getCurrentPlayingVideoRepresentationID:function(){var e,t;return(e=(t=n())==null||(t=t.getCurrentVideoRepresentation())==null?void 0:t.getID())!=null?e:null},getCurrentTargetVideoQuality:function(){var e=n();return e?s(e):""},getCurrentVideoRepresentation:function(){var e,t;return(e=(t=n())==null?void 0:t.getCurrentVideoRepresentation())!=null?e:null},getEstimatedBandwidth:function(){return r("oz-player/networks/OzBandwidthEstimator").getBandwidth(r("VideoPlayerOzWWWGlobalConfig"))},getInbandCaptionsAutogeneratedFromManifest:function(){var e,t=(e=n())==null?void 0:e.getMpd();return!!(t!=null&&t.getCustomField("hasInbandCaptionsFromUsingASRCaptions"))},getInbandCaptionsExpectedFromManifest:function(){var e,t=(e=n())==null?void 0:e.getMpd();return!!(t!=null&&t.getCustomField("hasInbandCaptionsFromUsingASRCaptions"))||!!(t!=null&&t.getCustomField("hasInbandCaptionsFromAccessibility"))},getManifestIdentifier:function(){var e,t=(e=n())==null||(e=e.getMpd())==null?void 0:e.getCustomField("fbManifestIdentifier");return t!=null?String(t):null},getMpdValidationErrors:function(){var e,t=(e=n())==null||(e=e.getMpd())==null?void 0:e.getCustomField("validationErrors");return t!=null?String(t):null},getPerfLoggerProvider:function(){var e=n();return e?e.getPerfLoggerProvider():null},getRepresentationCaptionsExpectedFromManifest:function(){var e,t=(e=n())==null?void 0:e.getMpd();return!!(t!=null&&t.getCustomField("hasVTTRepresentationCaptions"))},getStreamType:function(){return"dash"},getTargetAudioTrack:function(){var e=n();return e?m(e):null},getUserSelectedVideoQuality:function(){var e=n();return e?d(e):""},getUserSelectedVideoVariant:function(){var e,t=n();return(e=t==null?void 0:t.getTargetVideoVariant())!=null?e:null},getVideoProjectionType:function(){var e=n();return e!=null?p(e):null},getVideoRepresentations:function(){var e,t;return(e=(t=n())==null||(t=t.getMpd())==null?void 0:t.getVideoRepresentations())!=null?e:null},isDrm:function(){var e;return!!((e=n())!=null&&e.isDrm())},isFBIsLiveTemplated:function(){var e,t=(e=n())==null?void 0:e.getMpd();return!!(t!=null&&t.getCustomField("isLiveTemplated"))},isFBMS:function(){var e,t=(e=n())==null?void 0:e.getMpd();return!!(t!=null&&t.getCustomField("isFBMS"))},isFBWasLive:function(){var e,t=(e=n())==null?void 0:e.getMpd();return!!(t!=null&&t.getCustomField("isFBWasLive"))},isLiveRewindAvailable:function(){var e,t,r=(e=(t=n())==null?void 0:t.getMpdUrl())!=null?e:"";try{var o,a;return(o=(a=new URL(r).searchParams.get("ms"))==null?void 0:a.includes("m_CT"))!=null?o:!1}catch(e){}return!1},isMixedCodecManifest:function(){var e,t,r,o,a=(e=n())==null?void 0:e.getMpd();if(a==null)return null;var i=(t=a.getVideoRepresentations())!=null?t:[],l=new Set(i.map(function(e){return/codecs=\"([^\".]+)/i.exec(e.getMimeCodecs())})),s=(r=(o=n())==null||(o=o.getMpd())==null?void 0:o.getAudioRepresentations())!=null?r:[],u=new Set(s.map(function(e){return/codecs=\"([^\".]+)/i.exec(e.getMimeCodecs())}));return l.size>1||u.size>1},isPredictiveDash:function(){var e,t,r=(e=(t=n())==null||(t=t.getMpd())==null?void 0:t.getVideoRepresentations()[0])!=null?e:null;return r!==null&&r.canPredict()},setDimensions:function(t){},setEnableLiveheadCatchup:function(t){var e=n();e!=null&&e.setEnableLiveheadCatchup(t)},setLatencyLevel:function(a){r("handleVideoPlayerLatencyLevelChange")(t(),o(),n(),a)},setUserSelectedVideoQuality:function(t){var e=n();e!=null&&_(e,t)},setUserSelectedVideoVariant:function(t){var e=n();e!=null&&t!=null&&f(e,t)}};return a}l.createVideoPlayerOzImplementationEngineExtrasAPI=g}),98);
__d("oz-player/shims/www/OzDOMEventListenerWWW",["OzDOMEventListenerImpl"],(function(t,n,r,o,a,i){"use strict";var e=n("OzDOMEventListenerImpl");i.default=e}),66);
__d("oz-player/shims/OzDOMEventListener",["oz-player/shims/www/OzDOMEventListenerWWW"],(function(t,n,r,o,a,i,l){"use strict";l.default=r("oz-player/shims/www/OzDOMEventListenerWWW")}),98);
__d("oz-player/shims/www/OzSubscriptionsHandlerWWW",["SubscriptionsHandler"],(function(t,n,r,o,a,i,l){"use strict";l.default=r("SubscriptionsHandler")}),98);
__d("oz-player/shims/OzSubscriptionsHandler",["oz-player/shims/www/OzSubscriptionsHandlerWWW"],(function(t,n,r,o,a,i,l){"use strict";l.default=r("oz-player/shims/www/OzSubscriptionsHandlerWWW")}),98);
__d("oz-player/shims/www/ozThrottleWWW",["throttle"],(function(t,n,r,o,a,i,l){"use strict";l.default=r("throttle")}),98);
__d("oz-player/shims/ozThrottle",["oz-player/shims/www/ozThrottleWWW"],(function(t,n,r,o,a,i,l){"use strict";l.default=r("oz-player/shims/www/ozThrottleWWW")}),98);
__d("oz-player/strategies/OzBufferingDetectorStates",["oz-player/utils/OzBufferingUtils"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t,n){this.$1=e,this.$2=t,this.$3=n}var t=e.prototype;return t.handleEvent=function(t,n,r){if(t.type==="pause"||n.paused)return new s(this.$1,this.$2);var e=this.$3 instanceof u?this.$1.getInPlayBufferOverflowTarget():this.$1.getStartBufferUnderflowTarget();return o("oz-player/utils/OzBufferingUtils").hasEnoughBuffer(n,e,r)?new u(this.$1,this.$2):this},e})(),s=(function(){function t(e,t){this.$1=e,this.$2=t}var n=t.prototype;return n.handleEvent=function(n,r,a){return n.type==="play"||n.type==="playing"||!r.paused?o("oz-player/utils/OzBufferingUtils").hasEnoughBuffer(r,this.$1.getStartBufferUnderflowTarget(),a)?new u(this.$1,this.$2):new e(this.$1,this.$2,this):this},t})(),u=(function(){function t(e,t){this.$1=e,this.$2=t,this.$3=t.getString("stream_types_eligible_for_partial_playback","").split(",")}var n=t.prototype;return n.handleEvent=function(n,r,a,i){return i===void 0&&(i=new Map),n.type==="pause"||r.paused?new s(this.$1,this.$2):!o("oz-player/utils/OzBufferingUtils").hasEnoughBuffer(r,this.$1.getInPlayBufferUnderflowTarget(),a)&&!this.$4(n,r.currentTime,i)?new e(this.$1,this.$2,this):this},n.$4=function(t,n,r){return t.type==="waiting"?!1:o("oz-player/utils/OzBufferingUtils").hasEnoughPartialBuffer(n,r,this.$3,this.$2.getNumber("partial_playback_buffer_overflow",0))},t})();l.OzVideoBufferingState=e,l.OzVideoPausedState=s,l.OzVideoPlayingState=u}),98);
__d("oz-player/strategies/OzBufferingStateThresholdManager",["oz-player/shims/OzPerformance","oz-player/utils/OzBufferingUtils"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){this.$2=!1,this.$3=-1/0,this.$4=-1/0,this.$1=e}var t=e.prototype;return t.getInPlayBufferUnderflowTarget=function(){return this.$1.getNumber("in_play_buffer_underflow_target",o("oz-player/utils/OzBufferingUtils").BUFFER_UNDERFLOW_THRESHOLD)},t.getInPlayBufferOverflowTarget=function(){return this.$5()?this.$1.getNumber("stream_interrupt_in_play_buffer_overflow_target",o("oz-player/utils/OzBufferingUtils").BUFFER_UNDERFLOW_THRESHOLD):r("oz-player/shims/OzPerformance").now()-this.$4<this.$1.getNumber("recent_buffer_timeout_ms",0)?this.$1.getNumber("recent_buffer_in_play_buffer_overflow_target",o("oz-player/utils/OzBufferingUtils").BUFFER_UNDERFLOW_THRESHOLD):this.$1.getNumber("in_play_buffer_overflow_target",o("oz-player/utils/OzBufferingUtils").BUFFER_OVERFLOW_THRESHOLD)},t.getStartBufferUnderflowTarget=function(){return this.$1.getNumber("start_buffer_underflow_target",o("oz-player/utils/OzBufferingUtils").BUFFER_UNDERFLOW_THRESHOLD)},t.notifyBufferingEnd=function(){this.$4=r("oz-player/shims/OzPerformance").now()},t.notifyStreamInterrupted=function(){this.$2=!0},t.notifyStreamResumed=function(){this.$2=!1,this.$3=r("oz-player/shims/OzPerformance").now()},t.$5=function(){var e=this.$1.getNumber("stream_interrupt_buffer_target_timeout_ms",0);return e===0?!1:this.$2||r("oz-player/shims/OzPerformance").now()-this.$3<e},e})();l.default=e}),98);
__d("oz-player/strategies/OzBufferingDetector",["oz-player/shims/OzDOMEventListener","oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/ozThrottle","oz-player/strategies/OzBufferingDetectorStates","oz-player/strategies/OzBufferingStateThresholdManager","oz-player/utils/OzBufferingUtils"],(function(t,n,r,o,a,i,l){"use strict";var e=150,s=(function(t){function n(n,a,i){var l;return l=t.call(this)||this,l.$OzBufferingDetector$p_3=new(r("oz-player/shims/OzSubscriptionsHandler")),l.$OzBufferingDetector$p_6=new Map,l.$OzBufferingDetector$p_8=null,l.$OzBufferingDetector$p_9=function(e){l.$OzBufferingDetector$p_11(e)},l.$OzBufferingDetector$p_2=n,l.$OzBufferingDetector$p_4=a,l.$OzBufferingDetector$p_5=i,l.$OzBufferingDetector$p_7=new(r("oz-player/strategies/OzBufferingStateThresholdManager"))(a),l.$OzBufferingDetector$p_2.paused?l.$OzBufferingDetector$p_1=new(o("oz-player/strategies/OzBufferingDetectorStates")).OzVideoPausedState(l.$OzBufferingDetector$p_7,l.$OzBufferingDetector$p_4):l.$OzBufferingDetector$p_1=o("oz-player/utils/OzBufferingUtils").hasEnoughBuffer(l.$OzBufferingDetector$p_2,l.$OzBufferingDetector$p_7.getInPlayBufferUnderflowTarget(),l.$OzBufferingDetector$p_5())?new(o("oz-player/strategies/OzBufferingDetectorStates")).OzVideoPlayingState(l.$OzBufferingDetector$p_7,l.$OzBufferingDetector$p_4):new(o("oz-player/strategies/OzBufferingDetectorStates")).OzVideoBufferingState(l.$OzBufferingDetector$p_7,l.$OzBufferingDetector$p_4,null),l.$OzBufferingDetector$p_3.addSubscriptions(r("oz-player/shims/OzDOMEventListener").listenDOMEvent(l.$OzBufferingDetector$p_2,"pause",l.$OzBufferingDetector$p_9),r("oz-player/shims/OzDOMEventListener").listenDOMEvent(l.$OzBufferingDetector$p_2,"play",l.$OzBufferingDetector$p_9),r("oz-player/shims/OzDOMEventListener").listenDOMEvent(l.$OzBufferingDetector$p_2,"progress",r("oz-player/shims/ozThrottle")(l.$OzBufferingDetector$p_9,e)),r("oz-player/shims/OzDOMEventListener").listenDOMEvent(l.$OzBufferingDetector$p_2,"timeupdate",r("oz-player/shims/ozThrottle")(l.$OzBufferingDetector$p_9,e)),r("oz-player/shims/OzDOMEventListener").listenDOMEvent(l.$OzBufferingDetector$p_2,"seeked",l.$OzBufferingDetector$p_9),r("oz-player/shims/OzDOMEventListener").listenDOMEvent(l.$OzBufferingDetector$p_2,"seeking",l.$OzBufferingDetector$p_9),r("oz-player/shims/OzDOMEventListener").listenDOMEvent(l.$OzBufferingDetector$p_2,"waiting",l.$OzBufferingDetector$p_9)),l.$OzBufferingDetector$p_3.addSubscriptions(r("oz-player/shims/OzDOMEventListener").listenDOMEvent(l.$OzBufferingDetector$p_2,"canplay",l.$OzBufferingDetector$p_9),r("oz-player/shims/OzDOMEventListener").listenDOMEvent(l.$OzBufferingDetector$p_2,"canplaythrough",l.$OzBufferingDetector$p_9)),l}babelHelpers.inheritsLoose(n,t);var a=n.prototype;return a.$OzBufferingDetector$p_10=function(){var e=this,t="unavailable",n=this.$OzBufferingDetector$p_7.getInPlayBufferUnderflowTarget();return this.$OzBufferingDetector$p_6.forEach(function(r,a){var i=e.$OzBufferingDetector$p_2.currentTime;o("oz-player/utils/OzBufferingUtils").hasBuffer(i,n,r)||(t=t==="unavailable"?a:"audio/video")}),t},a.setSourceBufferState=function(t,n){this.$OzBufferingDetector$p_6.set(t,n)},a.$OzBufferingDetector$p_11=function(t){var e=this.$OzBufferingDetector$p_1.handleEvent(t,this.$OzBufferingDetector$p_2,this.$OzBufferingDetector$p_5(),this.$OzBufferingDetector$p_6),n=this.$OzBufferingDetector$p_1;this.$OzBufferingDetector$p_1=e;var r=e instanceof o("oz-player/strategies/OzBufferingDetectorStates").OzVideoBufferingState,a=n instanceof o("oz-player/strategies/OzBufferingDetectorStates").OzVideoBufferingState;if(e===n)return r&&this.$OzBufferingDetector$p_8&&this.$OzBufferingDetector$p_8.cloneContext().getOperationLogger("buffering_handle_event").setInitiator(t.type).log(),e;if(r){var i=n instanceof o("oz-player/strategies/OzBufferingDetectorStates").OzVideoPlayingState?"in_play":"start/unpause";this.$OzBufferingDetector$p_8&&this.$OzBufferingDetector$p_8.cloneContext().getOperationLogger("enter_buffering").setState("buffering").setType(i).setReason(this.$OzBufferingDetector$p_10()).setInitiator(t.type).log(),this.emit("enterBuffering",i)}else a&&(this.$OzBufferingDetector$p_8&&this.$OzBufferingDetector$p_8.cloneContext().getOperationLogger("leave_buffering").setInitiator(t.type).log(),this.$OzBufferingDetector$p_7.notifyBufferingEnd(),this.emit("leaveBuffering",{domEventPerfTimestamp:t.timeStamp}));return e},a.notifyStreamInterrupted=function(){this.$OzBufferingDetector$p_7.notifyStreamInterrupted()},a.notifyStreamResumed=function(){this.$OzBufferingDetector$p_7.notifyStreamResumed()},a.attachPerfLoggerProvider=function(t){this.$OzBufferingDetector$p_8=t},a.destroy=function(){this.$OzBufferingDetector$p_3.release()},n})(r("oz-player/shims/OzEventEmitter"));l.default=s}),98);
__d("VideoPlayerOzImplementationEnginePartsImplUtils",["OzSystemicRiskABRManager","OzWidevineDrmProvider","cr:2964","gkx","justknobx","oz-player/networks/OzBandwidthEstimator","oz-player/strategies/OzBufferingDetector"],(function(t,n,r,o,a,i,l){"use strict";var e=/(livestream-)?lookaside\.(facebook|workplace)\.com$/;function s(t){return e.test(t.getDomain())}function u(e,t,n,o,a,i){if(a.current==null){var l=!0,s=function(){if(l)return!1;var e=a.current!==u;return!1},u=new(r("oz-player/strategies/OzBufferingDetector"))(e,n,function(){var e=o.getCurrentState(),n=e.controlledState;return n.streamEnded?t.getDuration():1/0});a.current=u,l=!1;var c=function(t){if(!s()){o.dispatch({payload:{bufferingType:t},type:"buffering_begin_requested"});var e=n.getNumber("ull_fallback_stall_count",0);if(e>0){var r=i.getLoggerState().stallCountTotal;n.getBool("fix_ull_fallback_stall_count",!1)&&(r=i.getLoggerState().inPlayStallCount200ms),o.getCurrentState().controlledState.latencyLevel==="ultra-low"&&r>e&&o.dispatch({payload:{latencyLevel:"low",ullIneligibilityReason:null},type:"implementation_set_latency_level_requested"})}}},d=function(t){s()||o.dispatch({payload:{domEventPerfTimestamp:t.domEventPerfTimestamp},type:"buffering_end_requested"})};u.addListener("enterBuffering",c),u.addListener("leaveBuffering",d)}}function c(e){var t=e.accessToken,n=e.graphQLVideoDRMInfo,o=e.videoFBID,a=[];if(n&&o!=null){var i=r("justknobx")._("717")?null:n.widevineCert;a.push(new(r("OzWidevineDrmProvider"))(o,n.graphApiVideoLicenseUri,n.videoLicenseUriMap,t,i!=null?i:null))}return a}function d(e){var t=e.VideoPlayerShakaPerformanceLoggerClass,n=e.accessToken,r=e.disableLogging,o=e.getApproximateFBLSToPlayerDisplayLatency,a=e.getBandwidthEstimate,i=e.getPlayerDimensions,l=e.getPlayerFormat,s=e.playbackIsLiveStreaming,u=e.playerInstanceCount,c=e.playerInstanceKey,d=e.playerSuborigin,m=e.playerVersion,p=e.videoElement,_=e.videoFBID,f=e.videoPlayerShakaPerformanceLoggerBuilder;if(r||!f&&(!t||!t.shouldInitialize()))return[];var g={accessToken:n,getApproximateFBLSToPlayerDisplayLatency:o,getBandwidthEstimate:a,getPlayerDimensions:i,getPlayerFormat:l,isLive:s,isServableViaFbms:!1,playerInstanceCount:u,playerOrigin:null,playerSuborigin:d,playerVersion:m,representationId:null,uniqueID:c,video:p,videoID:_!=null?_:""};return f!=null?[f.build(g)]:t?[new t(g)]:[]}function m(e,t){return t>0?t/1e3*-1:e.getNumber("live_initial_playback_position",0)}function p(e,t,n){return t>0&&n>0?(t+n)/1e3:e.getNumber("livehead_fall_behind_block_threshold",0)}function _(e,t){return t>0?t/2/1e3:e.getNumber("live_time_range_block_margin",0)}function f(e){return function(t,o,a,i,l,s,u,c,d){return!e&&n("cr:2964")!=null?new(n("cr:2964"))(t,o,a,i,l,s,u,c,d):t.getLegacyConfig().getBool("use_systemic_risk_abr",!1)?new(r("OzSystemicRiskABRManager"))(t,o,a,i,l,s,u,c,d):null}}function g(e,t){var n=t.experimentationConfig,o=t.getCurrentVideoRepresentation,a=t.getOzCDNSignedQueryParams,i=t.isClientTriggeredTraceEnabled,l=t.playbackIsLiveStreaming,s=t.playbackSessionId,u=t.shouldRefresh403,c=e.getQueryData(),d;if(l&&(d={},n.getBool("server_side_abr_send_client_estimates",!1))){var m=r("oz-player/networks/OzBandwidthEstimator").getBandwidthDiagnostics(n);m&&(d=babelHelpers.extends({},d,{_nc_bwe:String(m.bandwidthEstimate),_nc_bwe_std:String(m.bandwidthStandardDeviation),_nc_ttfb:String(m.timeToFirstByteMsEstimate),_nc_ttfb_std:String(m.timeToFirstByteMsStandardDeviation)}));var p=o();p&&(d=babelHelpers.extends({},d,{_nc_abr_bitrate:String(p.getBandwidth()),_nc_abr_qlabel:p.getDisplayLabel()}))}var _=n.getNumber("live_video_chunk_duration",0),f=n.getBool("use_bandwidth_estimate_from_headers_in_abr",!1),g=f?r("oz-player/networks/OzBandwidthEstimator").hasRecentBandwidthEstimateFromHeader():!1;if(l&&_>0&&g&&(d=babelHelpers.extends({},d,{chk_dur:_.toString(10)})),r("gkx")("24354")&&c.uss!=null&&c.odm!=null&&(d=babelHelpers.extends({},d,{manual_redirect:"1"})),i&&(d=babelHelpers.extends({},d,{_nc_psid:s})),u){var h=a();if(h!=null){var y=e.getDomain()+e.getPath(),C=h.get(y);if(C!=null)for(var b in C){var v;d=babelHelpers.extends({},d,(v={},v[b]=C[b],v))}}}return d}l.checkShouldIncludeCredentials=s,l.createOzBufferingDetector=u,l.createOzDrmProviders=c,l.createOzPerfLoggerProviders=d,l.calculateInitialPlaybackPositionForDynamicMpd=m,l.calculateLiveheadFallBehindBlockThreshold=p,l.calculateLiveheadFallBehindBlockMargin=_,l.getVideoAbrManagerFactory=f,l.getCustomRequestParametersForURI=g}),98);
__d("getOzPlaybackRestrictions",["OzMinimumSmallestDimensionRestriction","OzMosThresholdRestriction","gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=[];switch(e){case"HD":n.push(new(r("OzMinimumSmallestDimensionRestriction"))(720));break;case"UHD":r("gkx")("24263")&&n.push(new(r("OzMinimumSmallestDimensionRestriction"))(1080));break;default:break}var o=t.getNumber("mos_upper_threshold",0),a=t.getNumber("mos_lower_threshold",0);return(o>0||a>0)&&n.push(new(r("OzMosThresholdRestriction"))(t)),n}l.default=e}),98);
__d("oz-player/configs/OzPlayerConfigDefaults",[],(function(t,n,r,o,a,i){var e={bandwidth_ignore_on_stream_write_samples:!1,bandwidth_use_response_time_adjustment:!1,catchup_use_timeline_range_end_time_as_end:!1,clear_on_seek:!0,debug_live_replay:!1,do_not_end_stream:!1,enable_abr_logging:!1,enable_alternative_audio_tracks:!1,enable_lip_sync_abr_select_quality:!1,enable_managed_media_source:!1,enable_revoke_object_url_on_destroy:!1,fix_live_rewind_user_selected_playback_speed:!0,ignore_reset_after_seek_if_bufferahead:!1,latencymanager_stalled_edgelatency_sec_on:!1,msm_refactor_wait_for_sourceopen:!1,ms_promise_for_null:!1,no_rep_to_switch_fallback_progressive:!1,normalize_mpd_fetch_errors:!0,parse_number_templated_uri:!0,pdash_use_pdash_segmentlocator:!1,playback_speed_latency_adjustment_disabled:!1,player_emit_mpdparsed_early:!1,playhead_manager_buffered_timerange_update_on_timeupdate:!0,playhead_manager_clamp_initial_playback_position:!1,reset_catchup_timeout_after_play_sec_on_overwrite:!0,retry_video_element_error:!0,sidx_parser_memory_optimization:!0,skip_videobuffer_gaps:!0,skip_videobuffer_gaps_on_buffer_updated:!0,use_live_latency_manager:!1,use_scf_timebased_segments:!1,video_cdn_url_refresh:!1,vtt_caption_representation:!0},l={abr_confidence_threshold:.9,abr_eval_buffer_threshold:0,abr_min_bandwidth_samples:0,abr_prevent_down_switch_buffer_threshold:11,abr_restrict_from_index:0,abr_restrict_to_index:0,append_byte_target_without_range:1e5,appends_per_segment:6,auto_seek_playhead_slack:.5,bandwidth_boundary_standard_deviation_factor:1,bandwidth_estimator_half_life:6,bandwidth_estimator_outlier_exclusion_factor:50,bandwidth_estimator_std_dev_penalty_factor:0,bandwidth_header_expire_threshold:0,bandwidth_response_time_handicap:0,bandwidth_ttfb_samples_to_save:5,buffer_ahead_target:22,buffer_target_constraint_append_succeeded_reward:.2,buffer_target_constraint_minimum_sec:2,buffer_target_constraint_quota_exceeded_penalty:.3,byte_count_per_sample:2e5,catchup_timeout_after_buffering_sec:0,catchup_timeout_after_play_sec:0,clear_buffer_around_playhead_boundary_ms:5e3,clear_buffer_on_seek_epsilon_s:0,clear_buffer_on_seek_nudge_s:0,default_bandwidth_estimate:1e6,download_cursor_buffer_ahead_time_max_sec:0,download_cursor_total_buffer_max_sec:0,dvl_initial_segment_ignore_count:1,dvl_update_interval_ms:0,dynamic_mpd_initial_playback_position_offset_modifier:4,initial_manifest_request_retry_count:3,initial_switch_interval:0,in_play_buffer_overflow_target:1,in_play_buffer_underflow_target:.1,latencymanager_stalled_edgelatency_sec:0,live_audio_ibr_bandwidth_percentage:.05,live_numerical_error_epsilon:1e-4,loop_body_handle_error_interval_ms:1,low_buffer_bandwidth_target_increase_factor:0,low_buffer_bandwidth_target_threshold:10,low_segment_stream_playhead_threshold:0,manifest_initial_update_delay_ms:0,manifest_update_frequency_ms:0,max_bandwidth_sample_count:30,maximum_bandwidth_sample_bandwidth:1e8,max_start_eme_attempts:3,min_eval_interval:100,minimum_bandwidth_sample_duration:10,minimum_bytes_to_sample_on_close:25e3,min_switch_interval:100,mpd_updater_network_request_timeout_ms:2e4,ms_promise_for_null_ms:0,network_seg_timeout_ms:0,overwrite_livehead_fall_behind_block_threshold:0,overwrite_live_time_range_block_margin:0,partial_playback_buffer_overflow:.75,paused_stream_segments_count:2,pdash_download_cursor_between_catchups_seg:0,pdash_download_cursor_catchup_threshold_gop_multiplier:0,pdash_download_cursor_catchup_threshold_sec:0,pdash_download_cursor_catchup_tolerance_sec:0,per_stream_duration_target:0,pixels_above_viewport_to_observe:0,pixels_below_viewport_to_observe:0,playback_speed_enabled_delay_sec:4,playback_speed_latency_adjustment_rate:0,playback_speed_latency_slowdown_adjustment_rate:0,playback_speed_latency_speedup_adjustment_rate:0,playback_speed_min_buffer_sec:1,playback_speed_min_duration_sec:2,playback_speed_min_sharpness_factor:3,playback_speed_restore_min_duration_sec:1,playhead_manager_buffered_auto_seek_playhead_slack:.5,playhead_manager_buffered_is_near_gap_threshold:1.5,playhead_manager_buffered_numerical_error:.01,playhead_manager_timeupdate_throttle_ms:1e3,pre_start_buffer_ahead_target:16.924449682236,prioritize_by_viewport_static_penalty:0,recent_buffer_in_play_buffer_overflow_target:3,recent_buffer_timeout_ms:1e4,resolution_constraint_factor:2,seconds_to_stream:10,seconds_to_stream_near_bandwidth_boundary:10,seek_ahead_epsilon:.05,segments_to_stream:5,segments_to_stream_near_bandwidth_boundary:5,segments_to_stream_under_playhead_threshold:0,sidx_segment_retry_attempts:9999,sidx_segment_retry_interval_ms:100,skip_videobuffer_gaps_max_gap_size_sec:0,stale_mpd_buffer_ahead_target:0,start_buffer_underflow_target:.1,steadystate_minbuffer_buckets:0,steadystate_minbuffer_buckets_sec:1,steadystate_minbuffer_sec:0,stream_interrupt_buffer_target_timeout_ms:1e4,stream_interrupt_check_mpd_stale_count_threshold:6,stream_interrupt_in_play_buffer_overflow_target:1,stream_reader_max_buffer_len:0,timeline_offset_threshold:10,time_to_first_byte_estimate_half_life_ms:500,time_to_first_byte_ignore_above_threshold_ms:0},s={bandwidth_estimate_header_key:"",bandwidth_estimate_key:"",block_representation_status_codes_json:"[500, 503]",block_representation_status_codes_temporarily_json:"{}",cdn_experiment_id:"",stream_types_eligible_for_partial_playback:""};a.exports={defaultBools:e,defaultNumbers:l,defaultStrings:s}}),null);
__d("oz-player/configs/OzPlayerConfig",["oz-player/configs/OzPlayerConfigDefaults"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){e===void 0&&(e={}),this.$1=e}var t=e.prototype;return t.getBool=function(t){return typeof this.$1[t]=="boolean"?this.$1[t]:o("oz-player/configs/OzPlayerConfigDefaults").defaultBools[t]},t.getNumber=function(t){return typeof this.$1[t]=="number"?this.$1[t]:o("oz-player/configs/OzPlayerConfigDefaults").defaultNumbers[t]},t.getString=function(t){return typeof this.$1[t]=="string"?this.$1[t]:o("oz-player/configs/OzPlayerConfigDefaults").defaultStrings[t]},t.getLegacyConfig=function(){var e=this;return{getBool:function(n,r){var t;return typeof e.$1[n]=="boolean"?e.$1[n]:(t=o("oz-player/configs/OzPlayerConfigDefaults").defaultBools[n])!=null?t:r},getNumber:function(n,r){var t;return typeof e.$1[n]=="number"?e.$1[n]:(t=o("oz-player/configs/OzPlayerConfigDefaults").defaultNumbers[n])!=null?t:r},getString:function(n,r){var t;return typeof e.$1[n]=="string"?e.$1[n]:(t=o("oz-player/configs/OzPlayerConfigDefaults").defaultStrings[n])!=null?t:r}}},e})();l.default=e}),98);
__d("oz-player/configs/OzConfigUtils",["oz-player/configs/OzPlayerConfig"],(function(t,n,r,o,a,i,l){"use strict";var e=new(r("oz-player/configs/OzPlayerConfig")),s=function(n){return{getBool:function(r){return n.getBool(r,e.getBool(r))},getNumber:function(r){return n.getNumber(r,e.getNumber(r))},getString:function(r){return n.getString(r,e.getString(r))},getLegacyConfig:function(){return n}}};l.provideConfigWithDefaults=s}),98);
__d("oz-player/networks/OzClientClock",["oz-player/shims/OzPerformance","oz-player/utils/OzResourceTimingUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){if(e!==null){var t=parseInt(e,10);if(!isNaN(t))return t}return null}var s=(function(){function t(){this.$1=null,this.$2=0,this.$2=Date.now()-r("oz-player/shims/OzPerformance").now()}var n=t.prototype;return n.updateOffsetFromHeaderResponse=function(n,r){var t=e(r.get("x-fb-dynamic-server-wallclock-ms")),a=e(r.get("x-fb-dynamic-rtt-ms")),i=o("oz-player/utils/OzResourceTimingUtils").getLatestResourceTimingEntry(n);if(t!==null&&a!==null&&i!=null&&i.responseStart>0&&i.duration>10){var l=i.requestStart+this.$2,s=t-l-a/2;this.$1=s}},n.now=function(){var e;return r("oz-player/shims/OzPerformance").now()+this.$2+((e=this.$1)!=null?e:0)},n.getClientClockOffsetMs=function(){return this.$1},t})(),u=new s;l.default=u}),98);
__d("oz-player/networks/OzClockSyncNetworkRequestStreamHandler",["oz-player/networks/OzClientClock","oz-player/networks/OzTransformStream"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(){}var t=e.prototype;return t.onResponse=function(t,n){var e=t.headers;if(!e)return null;var o=new(r("oz-player/networks/OzTransformStream"));return o.addListener("writableClose",function(){r("oz-player/networks/OzClientClock").updateOffsetFromHeaderResponse(n,e)}),o},t.onError=function(t,n){return null},e})();l.default=e}),98);
__d("VideoPlayerOzImplementationEnginePartsImplFunction",["CometThrottle","ConstUriUtils","Deferred","FBLogger","JSResourceForInteraction","NetworkStatus","OzActiveActiveFailoverNetworkRequestStreamHandler","OzBufferVTTCaptionsVisibleStrategy","OzCDNSignedQueryParams","OzCustomParsers","OzCustomRepresentationParsers","OzOneSemanticHandler","OzOneSemanticHandlerUtils","OzPredictedSegmentTimelineParser","OzVideoLiveTraceNetworkRequestStreamHandler","Promise","QE2Logger","TimeRanges","VideoPlayerConnectionQuality","VideoPlayerImplementationErrors","VideoPlayerODS","VideoPlayerOzImplementationEnginePartsImplUtils","clearTimeout","cr:1836099","cr:1871597","cr:1947728","cr:1993377","getErrorSafe","getOzPlaybackRestrictions","gkx","justknobx","md5","oz-player/configs/OzConfigUtils","oz-player/networks/OzBandwidthEstimator","oz-player/networks/OzClockSyncNetworkRequestStreamHandler","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("JSResourceForInteraction")("VideoPlayerEmsg").__setRef("VideoPlayerOzImplementationEnginePartsImplFunction"),u=1e4,c=null,d=null;n("cr:1836099")&&(c=n("cr:1836099").getHiveConfig(),d=n("cr:1836099").HiveOz);function m(t){var a,i,l=t.OzPlayerClass,m=t.callChain,p=t.destroyOzPlayerPartsRef,_=t.engineDebugAPI,f=t.engineExtrasAPI,g=t.getCaptionsInfo,h=t.getLatencyLevelManager,y=t.getVideoLiveTrace,C=t.handleCaptionsInfoChange,b=t.handleFatalImplementationError,v=t.hivePluginRef,S=t.initialProps,R=t.initiateLivePlaybackFromStart,L=t.loggerToVPL,E=t.machine,k=t.overrideOzRequestImplementationRef,I=t.ozBufferingDetectorRef,T=t.ozPlayerRef,D=t.p2pSessionLoggerRef,x=t.playerFormatForDPLRef,$=t.playerVersion,P=t.resolvedVideoInfo,N=t.videoElement,M=t.videoElementAPI,w={current:!1},A={current:null},F={current:null};p.current=function(t){var e=I.current;e&&(I.current=null,e.destroy());var n=T.current;if(n){_&&_.handleOzPlayerChanged(null,M),T.current=null;try{n.destroy([].concat(t,["destroyOzPlayerParts"]).join(":"))}catch(e){var o=r("getErrorSafe")(e);r("FBLogger")("comet_video_player").catching(o).mustfix("Error in ozPlayer.destroy: %s",o.message)}}var a=A.current;a&&(A.current=null,a()),F.current&&(F.current=null),Ue(),v.current&&(v.current=null),D.current&&(D.current=null),k.current&&(k.current=null)};var O=P.accessToken,B=P.audioOnly,W=P.experimentationConfig,q=P.graphQLVideoDRMInfo,U=P.graphQLVideoP2PSettings,V=P.manifestUrl,H=P.manifestXmlStringResolved,G=P.minQualityPreference,z=P.ozPrefetchCache,j=P.videoFBID,K=S.coreVideoPlayerMetaData.loggingConfig,Q=K.disableLogging===!0?null:P.VideoPlayerShakaPerformanceLoggerClass,X=!!S.coreVideoPlayerMetaData.isLiveStreaming,Y=!!((a=S.coreVideoPlayerMetaData.isClientTriggeredTraceEnabled)!=null&&a),J=function(t){return f.getEstimatedBandwidth()},Z=function(){return f.getApproximateFBLSToPlayerDisplayLatency()},ee=function(){W.setContext("connection_quality",o("VideoPlayerConnectionQuality").evaluate(function(){return J(X)}))},te=function(){var e=W.getNumber("connection_quality_context_throttle_frequency",0);if(e===0)return null;var t=r("CometThrottle")(ee,e),n=r("oz-player/networks/OzBandwidthEstimator").addListener("bandwidth_sampled",t);return function(){n.remove(),t.cancel()}};A.current=te();var ne=o("VideoPlayerOzImplementationEnginePartsImplUtils").createOzDrmProviders({accessToken:O,graphQLVideoDRMInfo:q,videoFBID:j}),re=function(){return E.getCurrentState().controlledState.captionsVisible},oe=[];W.getBool("use_vtt_captions_visible_buffer_strategy",!0)&&oe.push(new(r("OzBufferVTTCaptionsVisibleStrategy"))(re));var ae=function(){return E.getCurrentState().controlledState.dimensions},ie=function(){var e;return(e=x.current)!=null?e:"unknown"},le=o("VideoPlayerOzImplementationEnginePartsImplUtils").createOzPerfLoggerProviders({VideoPlayerShakaPerformanceLoggerClass:Q,accessToken:O,disableLogging:K.disableLogging===!0,getApproximateFBLSToPlayerDisplayLatency:Z,getBandwidthEstimate:J,getPlayerDimensions:ae,getPlayerFormat:ie,playbackIsLiveStreaming:X,playerInstanceCount:S.loggingMetaData.playerImplementationInstanceCountRef.current,playerInstanceKey:S.loggingMetaData.instanceKey,playerSuborigin:S.coreVideoPlayerMetaData.subOrigin,playerVersion:$,videoElement:N,videoFBID:j,videoPlayerShakaPerformanceLoggerBuilder:P.videoPlayerShakaPerformanceLoggerBuilder});if(F.current==null&&(F.current=new(r("OzCDNSignedQueryParams"))),U&&j!=null){var se,ue=U.community_info,ce=U.config,de=U.hive_initialization_options,me=D.current=(se=D.current)!=null?se:n("cr:1871597")?new(n("cr:1871597"))(j,ue):null;try{if(!v.current){me&&me.logEnableP2P();var pe=function(t){D.current&&D.current.logHiveError(t)},_e=function(t){var e=T.current;e&&e.injectExternalDebugEvent("P2PTech",t.tech),D.current&&D.current.logSessionActive(t.tech)},fe=function(t){var e=T.current;e&&e.injectExternalDebugEvent("P2PStats",t),D.current&&D.current.setCurrentHiveStats(t)},ge=function(t){var e=t.state,n=E.getCurrentState(),r=n.controlledState,o=r.playbackState;if(v.current&&e==="CLOSED"){Ue();var a=T.current;a&&o!=="ended"&&(w.current&&V!=null?a.updatePlayerRunTimeConfig({manifestUrl:V}):a.load(V))}},he={HiveJava:{},HiveJS:{maximumTrimming:{dash:void 0,hls:void 0},renderStatsCallback:fe},debugLevel:"off",hiveTechOrder:["HiveJS","StatsJS","HiveJava"],onActiveSession:_e,onError:pe,onSessionStateChange:ge,telemetryId:me?me.getSessionID():0},ye=W.getNumber("hive_maximum_trimming_seconds",0);if(ye>0&&(he.HiveJS.maximumTrimming={dash:ye,hls:ye}),de){var Ce=de.HiveJava,be=de.debugLevel,ve=de.hiveTechOrder;he.hiveTechOrder=ve.slice(),he.HiveJava=Ce?{minVersion:Ce.minVersion}:{},he.debugLevel=be!=null?be:he.debugLevel}if(ce.disable_hivejava_for_livevc===!0&&V!=null&&V.startsWith("https://livestream-lookaside")){var Se=he.hiveTechOrder.indexOf("HiveJava");Se>=0&&he.hiveTechOrder.splice(Se,1)}if(c)c.SensitiveInfo.restrictedConnectivityInfo=!0;else throw r("FBLogger")("comet_video_player").mustfixThrow("HiveConfig does not exist");if(d)v.current=new d(he);else throw r("FBLogger")("comet_video_player").mustfixThrow("HiveOz does not exist");if(v.current){if(!n("cr:1947728"))throw r("FBLogger")("comet_video_player").mustfixThrow("OzConfigurableRequestImplementation does not exist");k.current=n("cr:1947728")(v.current.getRequestImplementation(),{inferResponseStatusIsOK:!0,inferResponseStatusIsOk2xx:!1})}}}catch(e){var Re=r("getErrorSafe")(e);me&&me.logError(Re),Ue()}}var Le=[new(r("OzVideoLiveTraceNetworkRequestStreamHandler"))(function(e,t,n){var r=y();r!=null&&r.handleHeadersAndBody(e,t,n)},W.getBool("live_trace_parse_emsg",!1)),new(r("oz-player/networks/OzClockSyncNetworkRequestStreamHandler"))];r("OzActiveActiveFailoverNetworkRequestStreamHandler")&&Le.push(new(r("OzActiveActiveFailoverNetworkRequestStreamHandler"))(function(e,t){var n=T.current,r=e.headers;if(n&&r){var a=parseInt(r.get("x-fb-video-replica"),10);L.logVPLEvent({eventType:"replica_switch",logDataOverrides:{error_code:e.status.toString(),error_user_info:JSON.stringify({failover_response_code:e.status.toString(),replica:a,url:t})},state:E.getCurrentState()});var i=n.getMpdUrl();if(i!=null){var l=o("ConstUriUtils").getUri(i);if(l){var s=l.addQueryParam("replica",a);s&&(Ue(),n.updatePlayerRunTimeConfig({manifestUrl:s.toString(),resetStreamAnchor:!0}))}}}}));var Ee=S.coreVideoPlayerMetaData.expiredVideoUrlRefreshHandler,ke=S.loggingMetaData.instanceKey,Ie=r("gkx")("24353"),Te=r("gkx")("24354")||r("gkx")("24355"),De=X?Ie:Te,xe=r("gkx")("4927");W.getBool("log_exposure_on_oz_initialization",!1)&&o("QE2Logger").logExposureForUser("www_videos_html5_mpeg_dash");var $e={audioOnly:B!=null?B:!1,bufferEndLimit:S.coreVideoPlayerMetaData.bufferEndLimit!=null?S.coreVideoPlayerMetaData.bufferEndLimit:null,bufferingDetector:(i=I.current)!=null?i:void 0,config:o("oz-player/configs/OzConfigUtils").provideConfigWithDefaults(W),configureCustomRequestParametersForSegment:function(t){var e=null;if(X&&Y){var n=t.getByteRange(),o=n?n.startByte+", "+(n.endByte!=null?n.endByte:"null"):"null",a=r("md5")(t.getURI().toString()+o);e=e!=null?e:{},a!=null&&(e=babelHelpers.extends({},e,{_nc_tsid:a})),e=babelHelpers.extends({},e,{_nc_e2e:"live"})}return e},customParsers:o("OzCustomParsers").createOzCustomParser(),customRepresentationParsers:o("OzCustomRepresentationParsers").createOzCustomRepresentationParsers({ozConfig:W}),customSegmentTimelineParser:W.getBool("enable_predictive_dash",!1)?new(r("OzPredictedSegmentTimelineParser")):void 0,customVTTBufferTargetStrategies:oe,debugCreateInitiator:[].concat(m,["proceedWithOzPlayerCreation"]).join(":"),drmProviders:ne,getCustomRequestParametersForURI:function(t){return o("VideoPlayerOzImplementationEnginePartsImplUtils").getCustomRequestParametersForURI(t,{experimentationConfig:W,getCurrentVideoRepresentation:function(){var e=T.current;return e==null?void 0:e.getCurrentVideoRepresentation()},getOzCDNSignedQueryParams:function(){return F.current},isClientTriggeredTraceEnabled:Y,playbackIsLiveStreaming:X,playbackSessionId:ke,shouldRefresh403:De})},getOverrideOzRequestImplementation:function(){return k.current},getShouldIncludeCredentials:W.getBool("use_oz_credentials_provider",!1)?o("VideoPlayerOzImplementationEnginePartsImplUtils").checkShouldIncludeCredentials:null,getUserSelectedPlaybackRate:function(){return E.getCurrentState().controlledState.targetPlaybackRate},getVideoDimensions:ae,initialPlaybackPositionForDynamicMpd:o("VideoPlayerOzImplementationEnginePartsImplUtils").calculateInitialPlaybackPositionForDynamicMpd(W,S.coreVideoPlayerMetaData.desiredLatencyMs),initialRepresentationIDs:S.coreVideoPlayerMetaData.initialRepresentationIds,initiateLivePlaybackFromStart:R,isClientTriggeredTraceEnabled:Y,liveheadFallBehindBlockMargin:o("VideoPlayerOzImplementationEnginePartsImplUtils").calculateLiveheadFallBehindBlockMargin(W,S.coreVideoPlayerMetaData.desiredLatencyMs),liveheadFallBehindBlockThreshold:o("VideoPlayerOzImplementationEnginePartsImplUtils").calculateLiveheadFallBehindBlockThreshold(W,S.coreVideoPlayerMetaData.desiredLatencyMs,S.coreVideoPlayerMetaData.latencyToleranceMs),loggerConfig:{isOzDevConsoleEnabled:r("gkx")("24356"),observedOperationLoggers:[],perfLoggerProviders:le},mpdUrl:V,networkRequestFetchPriority:"high",networkRequestStreamHandlers:Le,networkRequestStreamRetryHandler:De?function(t,o,a){var i=t.headers,l=i==null?void 0:i.get("x-fb-url-refresh"),s=F.current;if(t.status===403&&s!=null){L.logVPLEvent({eventType:"video_cdn_url_expired",logDataOverrides:{error_user_info:JSON.stringify({expired_url:a})},state:E.getCurrentState()});var u=l!=null&&n("cr:1993377")!=null?{name:"refreshShortExpiryVideoUrl",promise:n("cr:1993377")(l)}:Ee!=null?{name:"expiredVideoUrlRefreshHandler",promise:Ee(a)}:null;if(u!=null)return u.promise.then(function(e){var t,n,a=(t=e.refreshedUrl)!=null?t:null,i=(n=e.reason)!=null?n:null;if(a!=null&&a!=="")return L.logVPLEvent({eventType:"video_cdn_url_refreshed",logDataOverrides:{error_user_info:JSON.stringify({refresh_handler:u.name,refreshed_url:a})},state:E.getCurrentState()}),s.update(a),o(a);throw r("FBLogger")("comet_video_player").mustfixThrow("%s refreshedUrl is %s, reason: %s",u.name,a===""?"an empty string":"null",i!=null?i:"null")}).catch(function(e){var t=r("getErrorSafe")(e);throw L.logVPLEvent({eventType:"video_cdn_url_refresh_error",logDataOverrides:{error_description:t.message,error_user_info:JSON.stringify({expired_url:a,refresh_handler:u.name,refresh_url:l})},state:E.getCurrentState()}),t})}return(e||(e=n("Promise"))).resolve(t)}:null,networkRequestUrlRefreshHandler:xe?S.coreVideoPlayerMetaData.expiredVideoUrlRefreshHandler:null,prefetchCache:W.getBool("use_prefetch_cache",!1)?z:null,rawMpdXml:v.current?void 0:H,seekHandler:null,setCustomFetchStreamLoggingAttributes:function(t,n,a){t.setIsOnline(r("NetworkStatus").isOnline());var e=a==null?void 0:a.headers;if(e)try{t.setProxyStatusHeader(e.get("proxy-status")),t.setDynamicStatusHeader(e.get("x-fb-dynamic-status"))}catch(e){}o("OzOneSemanticHandlerUtils").setOneSemanticFetchStreamLoggingAttributes(t,n,a)},shouldBlockStatusCode5xx:!X,startTimeStamp:W.getBool("fix_start_timestamp",!1)?S.coreVideoPlayerMetaData.startTimestamp:0,userPreferenceLang:S.initialAudioUserPreferredLanguage,videoAbrManagerFactory:o("VideoPlayerOzImplementationEnginePartsImplUtils").getVideoAbrManagerFactory(X),videoNode:N,videoPlaybackRestrictions:r("getOzPlaybackRestrictions")(G,W)},Pe=new l($e);T.current=Pe,I.current&&I.current.attachPerfLoggerProvider(Pe.getPerfLoggerProvider());var Ne=S.loggingMetaData.playerImplementationInstanceCountRef;Ne.current++,Pe.onError(function(e){Q&&Q.flushQueuedLogs(),b(e,"oz_player_error")}),r("justknobx")._("3727")||Pe.onWarning(function(e){Q&&Q.flushQueuedLogs();var t=o("VideoPlayerImplementationErrors").createVideoPlayerErrorFromOzImplementationError(e,"oz_player_warning");E.dispatch({payload:{warningError:t},type:"implementation_warning"})}),Pe.addListener("switchVideoRepresentation",function(){E.dispatch({payload:{},type:"representation_changed"})});var Me=function(t){if(W.getBool("enable_error_recovery_attempt_logging",!1)){var e=o("VideoPlayerImplementationErrors").createVideoPlayerErrorFromOzImplementationError(t,"oz_player_stream_error_retry");E.dispatch({payload:{recoverableError:e},type:"error_recovery_attempt"})}};Pe.addListener("manifestFetchError",function(e){o("OzOneSemanticHandler").handleManifestFetchErrorEvent(W,e)}),Pe.addListener("manifestFetchErrorRetry",function(e){Me(e)}),Pe.addListener("streamError",function(e){return o("OzOneSemanticHandler").handleStreamErrorEvent(W,e)}),Pe.addListener("streamErrorRetry",function(e){var t;(((t=e.getExtra())==null?void 0:t.mimeType)!=="application"||W.getBool("enable_era_logging_for_application_stream",!0))&&Me(e)}),Pe.addListener("streamInterruptAt",function(){E.dispatch({type:"stream_interrupted"})}),Pe.addListener("streamResumedAt",function(){E.dispatch({type:"stream_resumed"})}),Pe.addListener("streamGoneBeforeStart",function(){Ue(),E.dispatch({type:"stream_gone_before_start"})}),Pe.addListener("streamEnd",function(){Ue(),E.dispatch({type:"stream_ended"})}),Pe.addListener("videoNodeErrorRetry",function(e){if(W.getBool("enable_error_recovery_attempt_logging",!1)){var t=o("VideoPlayerImplementationErrors").createVideoPlayerErrorFromOzImplementationVideoNodeError(e,"oz_player_stream_error_retry");E.dispatch({payload:{recoverableError:t},type:"error_recovery_attempt"})}}),Pe.addListener("enterBuffering",function(e){E.dispatch({payload:{bufferingType:e},type:"buffering_begin_requested"})}),Pe.addListener("leaveBuffering",function(e){E.dispatch({payload:{domEventPerfTimestamp:e.domEventPerfTimestamp},type:"buffering_end_requested"})}),_&&_.handleOzPlayerChanged(Pe,M);var we=function(){var e=g(),t={inbandCaptionsAutogeneratedFromManifest:f.getInbandCaptionsAutogeneratedFromManifest(),inbandCaptionsExpectedFromManifest:f.getInbandCaptionsExpectedFromManifest(),inbandCaptionsExpectedFromProps:e==null?void 0:e.inbandCaptionsExpectedFromProps,representationCaptionsExpectedFromManifest:f.getRepresentationCaptionsExpectedFromManifest(),sideLoadCaptionsExpectedFromProps:e==null?void 0:e.sideLoadCaptionsExpectedFromProps,sideLoadCaptionsUrlFromProps:e==null?void 0:e.sideLoadCaptionsUrlFromProps},n=E.getCurrentState(),r=n.controlledState;(t.inbandCaptionsExpectedFromManifest!==r.captionsLoaded||t.inbandCaptionsAutogeneratedFromManifest!==r.inbandCaptionsAutogenerated)&&C(t)},Ae=function(t,n){var e=t.getCustomField("timescale"),r=typeof e=="number"?e:0;E.dispatch({payload:{timescale:r,videoBytes:n},type:"cea608_bytes_received"})},Fe=function(){var e=f.getVideoRepresentations();if(e!=null&&e.length>0){var t=e[0].getTimeRanges();if(t!=null&&t.length>0){var n=t[0].startTime,o=Math.max(t[t.length-1].endTime-W.getNumber("live_rewind_seek_to_live_delta",8),n);E.dispatch({payload:{seekableRanges:new(r("TimeRanges"))([{endTime:o,startTime:n}])},type:"seekable_ranges_changed"})}}},Oe=function(){var e=Pe.getMpd();if(e){var t=e.getCustomField("loapStreamType"),n=y();typeof t=="number"&&n!=null&&n.setStreamType(t)}},Be=function(t){if(t!=null){var e=o("ConstUriUtils").getUri(t);if(e){var n=e.getQueryParam("lvp");return n==="1"}}return!1},We=function(t){var e=function(){Fe(),we(),Oe()};t.addListener("updated",e),e();var n=[],a=function(t){L.logVPLEvent({eventType:"imf",logDataOverrides:t,state:E.getCurrentState()})},i=function(t,n,r){var e=t.parseEmsgBoxesFromMP4Segment,o=e(r,j,n.getID(),N.currentTime,a);o.length>0&&E.dispatch({payload:{emsgBoxes:o},type:"emsg_boxes_parsed"})},l=function(t){for(var e=n.shift();e;)i.apply(void 0,[t].concat(e)),e=n.shift()};if(Pe.updatePlayerRunTimeConfig({audioStreamDataHandler:function(){var e=E.getCurrentState();if(e.controlledState.emsgObserverTokens.size>0){for(var t=s.getModuleIfRequireable(),o=arguments.length,a=new Array(o),u=0;u<o;u++)a[u]=arguments[u];t!=null?(l(t),i.apply(void 0,[t].concat(a))):(n.push(a),s.load().then(function(e){l(e)}).catch(function(e){r("FBLogger")("comet_video_player").catching(r("getErrorSafe")(e)).warn("Failed to load VideoPlayerEmsg"),n.length=0}))}},videoStreamDataHandler:Ae}),f.isPredictiveDash()){W.setContext("streaming_implementation","pdash");var u=h();u&&u.maybeUpdateLatencyLevel()}var c="mos",d=W.getBool("is_csvqm_enabled",!1);if(d&&!X){var m=f.getVideoRepresentations(),p=m==null?void 0:m.every(function(e){return e.getQualityScoreCurveString("csvqm")!=null});p===!0&&(c="csvqm")}W.setContext("quality_score_type",c),o("VideoPlayerODS").bumpEntityKey("comet_video_player",c==="csvqm"?"OzImplementation.quality_score_type_csvqm":"OzImplementation.quality_score_type_mos",14);{var _=g();C({inbandCaptionsAutogeneratedFromManifest:f.getInbandCaptionsAutogeneratedFromManifest(),inbandCaptionsExpectedFromManifest:f.getInbandCaptionsExpectedFromManifest(),inbandCaptionsExpectedFromProps:_==null?void 0:_.inbandCaptionsExpectedFromProps,representationCaptionsExpectedFromManifest:f.getRepresentationCaptionsExpectedFromManifest(),sideLoadCaptionsExpectedFromProps:_==null?void 0:_.sideLoadCaptionsExpectedFromProps,sideLoadCaptionsUrlFromProps:_==null?void 0:_.sideLoadCaptionsUrlFromProps})}};Pe.addListener("vttCaptionsUpdated",function(e,t){var n="webvtt",r=E.getCurrentState().controlledState.captionFormat;n!==r&&E.dispatch({payload:{captionFormat:n},type:"controller_set_caption_format_requested"}),E.dispatch({payload:{activeCaptions:e,captionsLocale:t},type:"controller_set_active_captions_requested"})}),Pe.addListener("mpdParsed",function(e){f.isPredictiveDash()&&W.setContext("streaming_implementation","pdash")}),Pe.addListener("mpdReady",function(e){w.current=!0,We(e),E.dispatch({payload:{selectedVideoQuality:f.getUserSelectedVideoQuality()},type:"implementation_engine_initialized"})}),Pe.addListener("representationBlocked",function(e){E.dispatch({payload:{blockedRepresentationID:e},type:"implementation_engine_representation_blocked"})});var qe=null;function Ue(){r("clearTimeout")(qe);var e=v.current,t=D.current;if(e!=null){v.current=null,D.current=null,k.current=null;try{e&&e.closeHiveSession(),t&&t.logEndSession()}catch(e){var n=r("getErrorSafe")(e);t&&t.logError(n)}}}var Ve=v.current,He=U==null?void 0:U.ticket;if(V!=null&&U&&Ve&&He!=null){var Ge=Pe.getPerfLoggerProvider();Ge&&Ge.setIsP2pPlayback(!0);var ze=V.substring(V.indexOf("?")),je=Ve.initSession(He+ze,Pe,N),Ke=new(r("Deferred"));qe=r("setTimeout")(function(){Ke.reject(new Error("Hive initialization timed out after "+u+"ms"))},u),je.then(function(e){Ke.resolve(e)}).catch(function(e){Ke.reject(e)}),Ke.getPromise().then(function(e){r("clearTimeout")(qe);var t=e.manifest,n=e.tech,o=D.current;t!==V&&o&&o.logManifestMismatch(t,V),o&&o.logSessionInit(n,t),L.setLoggingToVPLAdditionalData("is_p2p_playback",!0),L.setLoggingToVPLAdditionalData("is_live_preview",Be(t)),Pe.load(t)}).catch(function(e){r("clearTimeout")(qe);var t=D.current;t&&t.logError(e),Ue(),L.setLoggingToVPLAdditionalData("is_live_preview",Be(V)),Pe.load(V)})}else L.setLoggingToVPLAdditionalData("is_p2p_playback",!1),L.setLoggingToVPLAdditionalData("is_live_preview",Be(V)),Pe.load(V)}l.proceedWithOzPlayerCreation=m}),98);
__d("VideoPlayerOzImplementationLatencyLevelManager",[],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t,n){this.$2="normal",this.$4=null,this.$1=e,this.$3=t,this.$6=n}var t=e.prototype;return t.updatePlayerFormat=function(t){this.$4!==t&&(this.$4=t,this.maybeUpdateLatencyLevel())},t.updateBroadcastLatencySensitivity=function(t){this.$5!==t&&(this.$5=t,this.maybeUpdateLatencyLevel())},t.maybeUpdateLatencyLevel=function(){var e=this.$7(this.$5);e!==this.$2&&(this.$2=e,this.$1.getBool("set_latency_context_immediately",!1)&&this.$1.setContext("latency_level",e),this.$3.dispatch({payload:{latencyLevel:e,ullIneligibilityReason:this.$8()},type:"implementation_set_latency_level_requested"}))},t.$8=function(){var e=this.$1.getNumber("ultra_low_latency_bandwidth_threshold",0),t=this.$6.getEstimatedBandwidth();return t!==null&&e>0&&t<e?"low_bandwidth_estimate":null},t.$7=function(t){if(t==null)return"normal";switch(t){case 1:return"low";case 2:return this.$8()!==null?this.$1.getBool("fall_back_to_low_latency_in_ull",!1)?"low":"normal":"ultra-low";case 0:return"normal"}},e})();l.default=e}),98);
__d("VideoPlayerOzPlayerModuleLoaderDeferredForDisplay",["requireDeferredForDisplay"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferredForDisplay")("oz-player").__setRef("VideoPlayerOzPlayerModuleLoaderDeferredForDisplay");function s(){return{getModuleIfRequireable:function(){return e.getModuleIfRequireable()||null},load:function(){return e.load()}}}l.default=s}),98);
__d("VideoPlayerOzImplementationEngine",["CometDASHPrefetchCacheManager","ErrorMetadata","VideoPlayerImplementationEngineAPI","VideoPlayerImplementationEngineVideoElementAPI","VideoPlayerImplementationErrors","VideoPlayerImplementationLoadSequenceManager","VideoPlayerODS","VideoPlayerOzImplementationEngineExtrasAPI","VideoPlayerOzImplementationEnginePartsImplFunction","VideoPlayerOzImplementationEnginePartsImplUtils","VideoPlayerOzImplementationLatencyLevelManager","VideoPlayerOzPlayerModuleLoaderDeferredForDisplay","cr:1157","err","gkx","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e=!1;function s(e){var t=e.initialProps,a={current:null},i={current:null},l={current:null},s={current:null},u={current:null},c={current:null},d={current:null},m={current:null},p={current:null},_={current:null},f={current:null},g={current:null},h={current:null},y={current:null};function C(){var e;return(e=d.current)!=null?e:null}function b(){var e;return(e=c.current)!=null?e:null}function v(){var e,t;return(e=(t=i.current)==null?void 0:t.experimentationConfig)!=null?e:null}function S(){var e;return(e=X.current)!=null?e:null}function R(){var e;return(e=h.current)!=null?e:null}var L;n("cr:1157")&&(L=new(n("cr:1157")));var E="comet_oz",k=t.loggingMetaData.instanceKey,I=t.initiateLivePlaybackFromStart,T=function(t,n){return n.manifestXmlStringInitial!==null?t.manifestXmlStringInitial!==n.manifestXmlStringInitial:t.manifestUrl!==n.manifestUrl},D=function(t,n){return t.videoFBID!==n.videoFBID},x=function(t){return t.getBool("use_full_player_if_cached",!1)&&r("VideoPlayerOzPlayerModuleLoaderDeferredForDisplay")?r("VideoPlayerOzPlayerModuleLoaderDeferredForDisplay")().getModuleIfRequireable():null},$=function(t,n,r){n!=null?i.current=babelHelpers.extends({},t,{manifestXmlStringResolved:n}):i.current=t,Q.dispatch({type:"implementation_engine_oz_manifest_downloading"}),u.current=x(t.experimentationConfig),M(u.current,[].concat(r,["proceedWithOzManifestDownloading"]))},P=function(t){var e,n,i,l=t.manifestUrl,s=t.manifest,u=null;r("CometDASHPrefetchCacheManager")&&t.coreVideoPlayerMetaData.videoFBID!=null&&(u=r("CometDASHPrefetchCacheManager").get(t.coreVideoPlayerMetaData.videoFBID));var c={VideoPlayerShakaPerformanceLoggerClass:t.coreVideoPlayerMetaData.VideoPlayerShakaPerformanceLoggerClass,accessToken:t.loggingMetaData.accessToken,audioOnly:t.coreVideoPlayerMetaData.audioOnly,experimentationConfig:t.experimentationConfig,graphQLVideoDRMInfo:t.coreVideoPlayerMetaData.graphQLVideoDRMInfo,graphQLVideoP2PSettings:t.coreVideoPlayerMetaData.graphQLVideoP2PSettings,initialAudioUserPreferredLanguage:t.initialAudioUserPreferredLanguage,manifestUrl:l!=null?l:null,manifestXmlStringInitial:s!=null?s:null,minQualityPreference:t.minQualityPreference,ozPrefetchCache:u,videoFBID:t.coreVideoPlayerMetaData.videoFBID,videoPlayerShakaPerformanceLoggerBuilder:t.coreVideoPlayerMetaData.videoPlayerShakaPerformanceLoggerBuilder},d=a.current,m=(e=h.current)!=null?e:new(r("VideoPlayerOzImplementationLatencyLevelManager"))(t.experimentationConfig,Q,B);h.current=m,y.current=(n=t.coreVideoPlayerMetaData.playerFormat)!=null?n:null,m.updatePlayerFormat((i=t.coreVideoPlayerMetaData.playerFormat)!=null?i:null),m.updateBroadcastLatencySensitivity(t.coreVideoPlayerMetaData.broadcastLatencySensitivity);var p=!1;if(d==null)p=!0;else if(d!=null&&!D(c,d)&&T(c,d)){var _=14;o("VideoPlayerODS").bumpEntityKey("OzImplementation","manifest_reloaded",_),p=!1}else if(d!=null&&D(c,d)){var f,g=r("err")("videoFBID changed after player initialization: %s",JSON.stringify({subOrigin:t.coreVideoPlayerMetaData.subOrigin,toVideoFBID:c.videoFBID}));g.name="VideoPlayerOzImplementationVideoFBIDChanged";var C=(f=g.metadata)!=null?f:new(r("ErrorMetadata"));throw d.videoFBID!=null&&C.addEntry("COMET_VIDEO","VIDEO_ID",d.videoFBID),g.metadata=C,g.project="comet_video_player",g}if(!p)return!1;if(l=c.manifestUrl,s=c.manifestXmlStringInitial,s==null&&l==null){var b,v=r("err")("Empty manifestXmlStringInitial and manifestUrl: %s",JSON.stringify({manifestUrl:l,manifestXmlStringInitial:s,subOrigin:t.coreVideoPlayerMetaData.subOrigin}));v.name="VideoPlayerOzImplementationManifestEmpty";var S=(b=v.metadata)!=null?b:new(r("ErrorMetadata"));throw c.videoFBID!=null&&S.addEntry("COMET_VIDEO","VIDEO_ID",c.videoFBID),v.metadata=S,v.project="comet_video_player",v}return a.current=c,$(c,s,["handleVideoInfoChangeForOzImplementation","downloadManifestInOz"]),!0},N=function(t,n){var e=function(r){s.current===t&&(u.current=r,M(r,[].concat(n,["handleOzPlayerModuleLoadSuccess"])))},o=function(n){s.current===t&&j(n,"oz_player_module_load_failed")};s.current=t,r("promiseDone")(t,e,o)},M=function(t,n){var e=H(),a=i.current;if(!(e==null||a==null)){var l=r("gkx")("18183")?o("VideoPlayerImplementationEngineAPI").ensureVideoElementAPI(X):X.current=o("VideoPlayerImplementationEngineVideoElementAPI").createVideoPlayerImplementationEngineVideoElementAPI(e),s=a.experimentationConfig;t?w(t,e,l,a,[].concat(n,["proceedWithResolvedVideoInfo","OzPlayerModuleFromRef"])):r("VideoPlayerOzPlayerModuleLoaderDeferredForDisplay")?(s.getBool("instantiate_buffering_detector_before_quick_starter",!1)&&o("VideoPlayerOzImplementationEnginePartsImplUtils").createOzBufferingDetector(e,l,a.experimentationConfig,Q,d,K),N(r("VideoPlayerOzPlayerModuleLoaderDeferredForDisplay")().load(),[].concat(n,["proceedWithResolvedVideoInfo","VideoPlayerOzPlayerModuleLoaderAsync"]))):j(new Error("Neither of OzPlayerModuleLoader is available."),"oz_player_module_loaders_missing")}},w=function(n,a,i,s,u){try{var e={OzPlayerClass:n,callChain:[].concat(u,["proceedWithResolvedVideoInfoAndOzPlayerModuleSync"]),destroyOzPlayerPartsRef:g,engineDebugAPI:L,engineExtrasAPI:B,getCaptionsInfo:V,getLatencyLevelManager:R,getVideoLiveTrace:G,handleCaptionsInfoChange:z,handleFatalImplementationError:j,initialProps:t,loggerToVPL:K,machine:Q,ozBufferingDetectorRef:d,playerFormatForDPLRef:y,playerVersion:E,resolvedVideoInfo:s,videoElement:a},h=v(),C=t.coreVideoPlayerMetaData.loadSequence;h&&h.getNumber("load_sequence_max_delay_ms",0)>0&&C!=null?f.current=r("VideoPlayerImplementationLoadSequenceManager").schedule(h,C,function(){return o("VideoPlayerOzImplementationEnginePartsImplFunction").proceedWithOzPlayerCreation(babelHelpers.extends({},e,{hivePluginRef:m,initiateLivePlaybackFromStart:I,overrideOzRequestImplementationRef:_,ozPlayerRef:c,p2pSessionLoggerRef:p,videoElementAPI:i})),i.getCanPlayPromise()}):o("VideoPlayerOzImplementationEnginePartsImplFunction").proceedWithOzPlayerCreation(babelHelpers.extends({},e,{hivePluginRef:m,initiateLivePlaybackFromStart:I,overrideOzRequestImplementationRef:_,ozPlayerRef:c,p2pSessionLoggerRef:p,videoElementAPI:i})),l.current=s}catch(e){j(e,"oz_player_create_exception")}};function A(e){var t=g.current;t!=null&&(g.current=null,t(e)),f.current!=null&&(f.current(),f.current=null)}function F(){}function O(){s.current=null,u.current=null}var B=o("VideoPlayerOzImplementationEngineExtrasAPI").createVideoPlayerOzImplementationEngineExtrasAPI({getConfig:v,getOzPlayer:b,getVideoElementAPI:S}),W=o("VideoPlayerImplementationEngineAPI").createVideoPlayerImplementationEngine({createDebugAPI:function(t){var e=t.getVideoElementAPI,n=t.loggerToVPL;return L?L.createDebugAPI({engineExtrasAPI:B,getConfig:function(){var e,t;return(e=(t=l.current)==null?void 0:t.experimentationConfig)!=null?e:null},getManifest:function(){var e,t;return(e=(t=l.current)==null?void 0:t.manifestXmlStringResolved)!=null?e:null},getManifestUrl:function(){var e,t;return(e=(t=l.current)==null?void 0:t.manifestUrl)!=null?e:null},getOzBufferingDetector:C,getOzPlayer:b,getVideoElementAPI:e,loggerToVPL:n}):null},createVideoPlayerError:o("VideoPlayerImplementationErrors").createVideoPlayerErrorFromOzImplementationError,destroyEngineParts:function(t){A([].concat(t,["destroyEngineParts"])),O()},engineCreateArgs:e,engineExtrasAPI:B,engineMetadata:{isAbrEnabled:!0,playerInstanceKey:k,playerVersion:E,streamingFormat:"dash"},handleVideoElementChanged:function(t,n){t!=null&&M(u.current,[].concat(n,["handleVideoElementMounted"]))},handleVideoInfoChange:P}),q=W.debugLog,U=W.engine,V=W.getCaptionsInfo,H=W.getVideoElement,G=W.getVideoLiveTrace,z=W.handleCaptionsInfoChange,j=W.handleFatalImplementationError,K=W.loggerToVPL,Q=W.machine,X=W.videoElementAPIRef;return U}l.createVideoPlayerOzImplementationEngine=s}),98);
__d("VideoPlayerOzImplementationV2.react",["VideoPlayerImplementationEngineAPI","VideoPlayerOzImplementationEngine"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=o("VideoPlayerImplementationEngineAPI").useVideoPlayerImplementationEngine(e,o("VideoPlayerOzImplementationEngine").createVideoPlayerOzImplementationEngine),n=t.reactVideoFrameAndComponents;return n}l.default=e}),98);
__d("VideoPlayerSpinner.react",["CometLightweightVideoAttachmentContext","FDSLoadingAnimation.react","gkx","react","react-compiler-runtime","stylex","useDebouncedValue"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=s.useContext,d=36,m={spinner:{height:"xc9qbxq",insetInlineStart:"xbudbmw",opacity:"x1hc1fzr",position:"x10l6tqk",top:"xwa60dl",transform:"x11lhmoz",transitionDelay:"x5w5eug",transitionDuration:"x13dflua",transitionProperty:"x19991ni",transitionTimingFunction:"xl405pv",width:"x14qfxbe",$$css:!0},spinnerHidden:{opacity:"xg01cxk",transitionDelay:"x2p8vrm",transitionDuration:"x13dflua",transitionProperty:"x1jl3cmp",transitionTimingFunction:"xl405pv",visibility:"xlshs6z",$$css:!0},spinnerSnappier:{transitionDelay:"x2p8vrm",$$css:!0},spinnerSnappierHidden:{transitionDelay:"x1ahifba",$$css:!0}};function p(t){var n=o("react-compiler-runtime").c(8),a=t.isVisible,i=r("useDebouncedValue")(a,a?200:500),l=c(r("CometLightweightVideoAttachmentContext")),s=l.isLightweightVideoAttachment,p;n[0]!==a?(p=(e||(e=r("stylex"))).props(m.spinner,r("gkx")("24333")?[m.spinnerSnappier,!a&&m.spinnerHidden,!a&&m.spinnerSnappierHidden]:[!a&&m.spinnerHidden]),n[0]=a,n[1]=p):p=n[1];var _=!i,f=s?"media":"default",g;n[2]!==_||n[3]!==f?(g=u.jsx(r("FDSLoadingAnimation.react"),{animationPaused:_,color:f,size:d}),n[2]=_,n[3]=f,n[4]=g):g=n[4];var h;return n[5]!==p||n[6]!==g?(h=u.jsx("div",babelHelpers.extends({},p,{children:g})),n[5]=p,n[6]=g,n[7]=h):h=n[7],h}l.default=p}),98);
__d("VideoPlayerStateBasedLoggingEventsJSModuleWrapper",["VideoPlayerStateBasedLoggingEvents"],(function(t,n,r,o,a,i,l){"use strict";l.default=r("VideoPlayerStateBasedLoggingEvents")}),98);
__d("oz-player/shims/ozReportUnexpectedError",["oz-player/shims/www/ozReportUnexpectedErrorWWW"],(function(t,n,r,o,a,i,l){"use strict";l.default=r("oz-player/shims/www/ozReportUnexpectedErrorWWW")}),98);
__d("oz-player/loggings/OzLoggingUtils",["oz-player/shims/ozReportUnexpectedError"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){var r=e.getOperationLogger(t).start();try{return n(r)}catch(e){throw r.setError(e),e}finally{r.log()}}function s(e,t,n,o,a){o===void 0&&(o=function(){}),a===void 0&&(a=function(){});var i=t.getOperationLogger(n).start();o(i),e.then(function(e){a(i),i.log()},function(e){a(i),i.setError(e),i.log()}).catch(function(e){r("oz-player/shims/ozReportUnexpectedError")(e,n+" logger")})}l.executeOperationAndLog=e,l.monitorPromiseAndLogOperation=s}),98);
__d("oz-player/loggings/OzOperationLoggerBase",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(e){this.$52=new Map,this.$1=e}var t=e.prototype;return t.start=function(){var e=Date.now();return this.setClientTimeBegin(e),this.setClientTimeEnd(null),this.setClientTimeDuration(null),this},t.log=function(){var e=Date.now(),t=this.getClientTimeBegin(),n=this.getClientTimeEnd();(t==null||t===0)&&(t=e,this.setClientTimeBegin(t)),(n==null||n===0)&&(n=e,this.setClientTimeEnd(n)),this.setClientTimeDuration(n-t)},t.setError=function(t){return this.$2=t,this},t.setPerSessionSampleRate=function(t){return this.$3=t,this},t.setAppendTarget=function(t){return this.$47=t,this},t.setOneObserved=function(t){return this.$44=t,this},t.setOneReqWave=function(t){return this.$45=t,this},t.setOneResWave=function(t){return this.$46=t,this},t.setIsP2pPlayback=function(t){return this.$43=t,this},t.setResult=function(t){return this.$4=t,this},t.setType=function(t){return this.$5=t,this},t.setClientTimeBegin=function(t){return this.$6=t,this},t.setClientTimeDuration=function(t){return this.$7=t,this},t.setClientTimeEnd=function(t){return this.$8=t,this},t.setSegmentCount=function(t){return this.$15=t,this},t.setTimeToFirstByte=function(t){return this.$9=t,this},t.setTimeToLastByte=function(t){return this.$10=t,this},t.setTimeToRequestStart=function(t){return this.$11=t,this},t.setTimeToRequestSent=function(t){return this.$12=t,this},t.setReason=function(t){return this.$13=t,this},t.setResource=function(t){return this.$14=t,this},t.setSegmentStartTime=function(t){return this.$16=t,this},t.setSegmentEndTime=function(t){return this.$17=t,this},t.setLength=function(t){return this.$18=t,this},t.setLiveheadPosition=function(t){return this.$19=t,this},t.setLiveheadSeqNumHeader=function(t){return this.$20=t,this},t.setLiveheadSeqNumMpd=function(t){return this.$21=t,this},t.setManifestType=function(t){return this.$22=t,this},t.setMediaSourceNewDuration=function(t){return this.$23=t,this},t.setMediaSourcePreviousDuration=function(t){return this.$24=t,this},t.setPriorityFloat=function(t){return this.$25=t,this},t.setAppendedBufferMs=function(t){return this.$26=t,this},t.setInitiator=function(t){return this.$27=t,this},t.setPreloadTime=function(t){return this.$28=t,this},t.setConcluder=function(t){return this.$29=t,this},t.setPreviousRepresentationID=function(t){return this.$30=t,this},t.setRepresentationID=function(t){return this.$31=t,this},t.setStreamSwitchReason=function(t){return this.$32=t,this},t.setState=function(t){return this.$33=t,this},t.setContentLengthHeader=function(t){return this.$34=t,this},t.setOriginHitHeader=function(t){return this.$36=t,this},t.setEdgeHitHeader=function(t){return this.$37=t,this},t.setFNAHitHeader=function(t){return this.$38=t,this},t.setCode=function(t){return this.$35=t,this},t.setResponseTimeMsHeader=function(t){return this.$39=t,this},t.setIsTemplatedManifest=function(t){return this.$40=t,this},t.setIsLatencyCachupEnabled=function(t){return this.$41=t,this},t.setPlayerFormat=function(t){return this.$42=t,this},t.setIsRingBufferSample=function(t){return this.$48=t,this},t.setIsOnline=function(t){return this.$49=t,this},t.setProxyStatusHeader=function(t){return this.$50=t,this},t.setPlaybackFbmsParam=function(t){return this},t.setPreferredEdgeLatency=function(t){return this.$51=t,this},t.setUserInfo=function(t){return this},t.setDynamicStatusHeader=function(t){return this},t.setIsMixedCodecManifest=function(t){return this.$53=t,this},t.getPerSessionSampleRate=function(){return this.$3},t.setMediaSourceSourceBuffer=function(t,n){return this.$52.set(t,n),this},t.unsetMediaSourceSourceBuffers=function(){return this.$52.clear(),this},t.getError=function(){return this.$2},t.getResult=function(){return this.$4},t.getType=function(){return this.$5},t.getClientTimeBegin=function(){return this.$6},t.getClientTimeEnd=function(){return this.$7!=null?this.$6!=null?this.$6+this.$7:null:this.$8},t.getTimeToRequestStart=function(){return this.$11},t.getTimeToRequestSent=function(){return this.$12},t.getReason=function(){return this.$13},t.getResource=function(){return this.$14},t.getOperationName=function(){return this.$1},t.getSegmentStartTime=function(){return this.$16},t.getSegmentEndTime=function(){return this.$17},t.getLength=function(){return this.$18},t.getLiveheadPosition=function(){return this.$19},t.getManifestType=function(){return this.$22},t.getIsMixedCodecManifest=function(){return this.$53},t.getPriorityFloat=function(){return this.$25},t.getAppendedBufferMs=function(){return this.$26},t.getInitiator=function(){return this.$27},t.getPreloadTime=function(){return this.$28},t.getConcluder=function(){return this.$29},t.getContentLengthHeader=function(){return this.$34},t.getOriginHitHeader=function(){return this.$36},t.getEdgeHitHeader=function(){return this.$37},t.getFNAHitHeader=function(){return this.$38},t.getCode=function(){return this.$35},t.getResponseTimeMsHeader=function(){return this.$39},t.getIsTemplatedManifest=function(){return this.$40},t.getOneObserved=function(){return this.$44},t.getOneReqWave=function(){return this.$45},t.getOneResWave=function(){return this.$46},t.getAppendTarget=function(){return this.$47},t.getIsRingBufferSample=function(){return this.$48},t.getIsOnline=function(){return this.$49},t.getProxyStatusHeader=function(){return this.$50},t.getMediaSourceSourceBuffers=function(){return this.$52},e})();i.default=e}),66);
__d("oz-player/shims/www/OzMaybeNativePromiseWWW",["cr:3014"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:3014")}),98);
__d("oz-player/shims/OzMaybeNativePromise",["oz-player/shims/www/OzMaybeNativePromiseWWW"],(function(t,n,r,o,a,i,l){"use strict";l.default=r("oz-player/shims/www/OzMaybeNativePromiseWWW")}),98);
__d("oz-player/utils/OzErrorEmitter",["oz-player/shims/OzEventEmitter","oz-player/shims/ozvariant"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t){var n;return t===void 0&&(t=!1),n=e.call(this)||this,n.$OzErrorEmitter$p_1=!1,n.$OzErrorEmitter$p_2=!1,n.$OzErrorEmitter$p_3=[],n.emitError=function(e){n.$OzErrorEmitter$p_1?n.emit("error",e):n.$OzErrorEmitter$p_2?n.$OzErrorEmitter$p_3.push(e):n.$OzErrorEmitter$p_1||r("oz-player/shims/ozvariant")(0,14038)},n.$OzErrorEmitter$p_2=t,n}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.onError=function(t){this.$OzErrorEmitter$p_1=!0;var e=this.addListener("error",t);return this.$OzErrorEmitter$p_2&&this.$OzErrorEmitter$p_3.length>0&&this.$OzErrorEmitter$p_3.forEach(this.emitError),e},t})(r("oz-player/shims/OzEventEmitter"));l.default=e}),98);
__d("oz-player/drm/OzDrmManager",["oz-player/drm/OzDrmUtils","oz-player/loggings/OzLoggingUtils","oz-player/loggings/OzOperationLoggerBase","oz-player/shims/OzDOMEventListener","oz-player/shims/OzMaybeNativePromise","oz-player/shims/OzSubscriptionsHandler","oz-player/utils/OzErrorEmitter","oz-player/utils/OzErrorUtils"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t,n){var a=this;n===void 0&&(n=null),this.$1=null,this.$2=new Map,this.$4=!1,this.$6=new(r("oz-player/shims/OzSubscriptionsHandler")),this.$7=new(r("oz-player/utils/OzErrorEmitter")),this.$8=!1,this.$9=null,this.$10=0,this.$11=[],this.$12=[],this.$22=function(e,t){e instanceof r("oz-player/loggings/OzOperationLoggerBase")&&e.getError()&&e.setResult("failed"),t!=null&&e.setReason(t)},this.$19=function(e){if(a.$4)return r("oz-player/shims/OzMaybeNativePromise").reject(o("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_DRM_MANAGER",description:"OzDrmManager destroyed before call to mediaKeySystemAccess.createMediaKeys()."}));var t=a.$5.mediaKeys!=null?r("oz-player/shims/OzMaybeNativePromise").resolve(a.$5.mediaKeys):e.createMediaKeys(),n=t.then(function(t){return{mediaKeySystemAccess:e,mediaKeys:t}});return o("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(n,a.$3,"drm_create_media_keys",function(){},a.$22),n},this.$20=function(e){if(a.$4)return r("oz-player/shims/OzMaybeNativePromise").reject(o("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_DRM_MANAGER",description:"OzDrmManager destroyed before call to setMediaKeys()"}));var t=e.mediaKeySystemAccess,n=e.mediaKeys;if(!n)throw o("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_DRM_MANAGER",description:"No mediaKeys for mediaKeySystemAccess"});var i=a.$5.setMediaKeys(n).then(function(){if(a.$4)return r("oz-player/shims/OzMaybeNativePromise").reject(o("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_DRM_MANAGER",description:"OzDrmManager destroyed after setMediaKeys() called."}));var e=Array.from(a.$2.values()).find(function(e){return e.getKeySystem()===t.keySystem});if(!e)throw o("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_DRM_MANAGER",description:"Can't find OzDrmProvider for keySystem "+t.keySystem});var i=e.getServerCertificate();return i?n.setServerCertificate(i).then(function(){return{mediaKeys:n,provider:e}}):{mediaKeys:n,provider:e}});return o("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(i,a.$3,"drm_set_media_keys",function(){},a.$22),i},this.$21=function(e){var t=e.mediaKeys,n=e.provider,i=n.getInitDatas();if(i.length===0)return a.$6.addSubscriptions(r("oz-player/shims/OzDOMEventListener").listenDOMEvent(a.$5,"encrypted",function(e){a.$23(t,n,e).catch(function(e){a.$14(o("oz-player/utils/OzErrorUtils").convertPromiseRejectionReasonToOzError(e,{type:"OZ_DRM_MANAGER",description:"DRM encrypted rejection"}))})})),r("oz-player/shims/OzMaybeNativePromise").resolve([]);var l=i.map(function(e){return a.$23(t,n,{initData:e.data,initDataType:e.type})}),s=r("oz-player/shims/OzMaybeNativePromise").all(l);return o("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(s,a.$3,"drm_request_license",function(){},a.$22),s},this.$5=t,this.$1=n,this.$3=e.cloneContext().setType("drm_manager")}var t=e.prototype;return t.hasContentProtections=function(){return this.$9},t.onError=function(t){return this.$7.onError(t)},t.$13=function(t){this.$7.emitError(t)},t.$14=function(t){var e,n,r=(e=(n=this.$1)==null?void 0:n.maxStartEMEAttempts)!=null?e:-1;this.$10<r?this.$15():this.$13(t)},t.addProvider=function(t){this.$2.set(t.getSchemeId(),t)},t.getProviderForSchemeId=function(t){return this.$2.get(t)},t.$16=function(t){if(!t)return null;for(var e=[],n=0;n<t.length;n++){var r=t[n],a=r.$.schemeIdUri,i=this.getProviderForSchemeId(a);if(i){var l=i.getInitDatas();if(l.length==0&&r["cenc:pssh"]&&r["cenc:pssh"].length===1){var s,u=(s=r["cenc:pssh"][0]._)!=null?s:"",c=o("oz-player/drm/OzDrmUtils").base64ToUint8Array(u.replace(/-/g,"+").replace(/_/g,"/"));l=[{data:c,type:"cenc"}],i.setInitDatas(l)}e.push({provider:i,initDatas:l})}}return e},t.$15=function(){try{this.$8=!1,this.startEME(this.$11,this.$12)}catch(t){var e=t;this.$13(o("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_DRM_MANAGER",description:"Restart EME failed with: "+String(e),extra:{}}))}},t.startEME=function(t,n){var e=this;if(!this.$8){this.$8=!0,this.$10+=1,this.$11=t,this.$12=n;var r=new Map;this.$17(n,r,"audio"),this.$17(t,r,"video");var a;if(r.forEach(function(t,n){a?a=a.catch(function(){return e.$18(n,t)}):a=e.$18(n,t)}),!a){this.$9=!1;return}var i=a;this.$9=!0;var l=this.$3.getOperationLogger("drm_setup").start();i.then(this.$19).then(this.$20).then(this.$21).then(function(){return l.log()},function(t){var n=o("oz-player/utils/OzErrorUtils").convertPromiseRejectionReasonToOzError(t,{type:"OZ_DRM_MANAGER",description:"DRM definedKeyPromiseChain rejection"});e.$13(n),l.setResult("failed").setError(n).log()})}},t.$17=function(t,n,r){var e=this;t.forEach(function(t){var o=e.$16(t.getContentProtectionXml()),a=t.getMimeCodecs();o!=null&&o.forEach(function(e){var t=e.provider,o=t.getKeySystem(),i=n.get(o);i||(i={audioCapabilities:new Map,videoCapabilities:new Map,distinctiveIdentifier:t.getRequireDistinctiveIdentifier(),persistentState:t.getRequirePersistentState(),sessionTypes:t.getDrmSessionTypes(),initDataTypes:t.getInitDataTypes()},n.set(o,i)),r==="audio"&&!i.audioCapabilities.has(a)&&i.audioCapabilities.set(a,{contentType:a,robustness:t.getAudioRobustness()}),r==="video"&&!i.videoCapabilities.has(a)&&i.videoCapabilities.set(a,{contentType:a,robustness:t.getVideoRobustness()})})})},t.destroy=function(){this.$6.release(),this.$4=!0},t.$18=function(t,n){var e=this,a={audioCapabilities:Array.from(n.audioCapabilities.values()),videoCapabilities:Array.from(n.videoCapabilities.values()),distinctiveIdentifier:n.distinctiveIdentifier,persistentState:n.persistentState,sessionTypes:n.sessionTypes,initDataTypes:n.initDataTypes},i=window.navigator.requestMediaKeySystemAccess(t,[a]);return o("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(i,this.$3,"drm_request_media_key_system_access",function(){},function(n){var o=null;return n instanceof r("oz-player/loggings/OzOperationLoggerBase")&&n.getError()&&(o="keySystem: "+t+";domConfig: "+JSON.stringify(a)),e.$22(n,o)}),i},t.$23=function(t,n,a){var e=this,i=t.createSession();return this.$6.addSubscriptions(r("oz-player/shims/OzDOMEventListener").listenDOMEvent(i,"message",function(t){e.$24(i,n,t).catch(function(t){e.$14(o("oz-player/utils/OzErrorUtils").convertPromiseRejectionReasonToOzError(t,{type:"OZ_DRM_MANAGER",description:"DRM message rejection"}))})}),r("oz-player/shims/OzDOMEventListener").listenDOMEvent(i,"keystatuseschange",function(t){e.$25(i).catch(function(t){e.$14(o("oz-player/utils/OzErrorUtils").convertPromiseRejectionReasonToOzError(t,{type:"OZ_DRM_MANAGER",description:"DRM keystatuseschange rejection"}))})})),i.generateRequest(a.initDataType,a.initData)},t.$24=function(t,n,r){var e=this,a=n.getLicenseRequestInfo(r.message.slice(0)),i=this.$3.getOperationLogger("drm_fetch_license").setResource(a.url).start();return window.fetch(a.url,a).then(function(r){return r.ok?i.setResult("success").setCode(r.status).log():i.setResult("failed").setCode(r.status).setError(o("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_DRM_MANAGER",description:"DRM license fetch HTTP status not OK ("+r.status+")",extra:{code:r.status.toString()}})).log(),r.arrayBuffer().then(function(a){var i=new Uint8Array(a),l=n.parseLicenseResponse(i);if(l==null||l.byteLength===0){var s,u,c=l==null?"License is null or undefined.":"License is 0 bytes.";r.ok?a.byteLength===0&&(c+=" HTTP status OK ("+r.status+"), but response body is 0 bytes"):c+=" HTTP status not OK ("+r.status+")";var d=o("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_DRM_MANAGER",description:"No license for "+n.getKeySystem()+" - "+c,extra:{code:r.status.toString(),headers:r.headers,url:r.url}}),m=(s=(u=e.$1)==null?void 0:u.throwNoLicenseError)!=null?s:!1;if(m)throw d;e.$13(d)}else t.update(l)})})},t.$25=function(t){return t.expiration<Date.now()?t.close():r("oz-player/shims/OzMaybeNativePromise").resolve()},e})();l.OzDrmManager=e}),98);
__d("oz-player/loggings/OzPerfLoggerProviderBase",["oz-player/utils/OzErrorUtils"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(){}var t=e.prototype;return t.cloneContext=function(){var e=this.createLoggerProvider();return this.$11(e),e},t.setType=function(t){return this.$1=t,this},t.setInitiator=function(t){return this.$2=t,this},t.setResource=function(t){return this.$4=t,this},t.setRepresentationID=function(t){return this.$3=t,this},t.setSegmentStartTime=function(t){return this.$5=t,this},t.setSegmentEndTime=function(t){return this.$6=t,this},t.setStreamSwitchReason=function(t){return this.$7=t,this},t.setIsP2pPlayback=function(t){return this.$8=t,this},t.setIsRingBufferSample=function(t){return this.$9=t,this},t.setPerSessionSampleRate=function(t){return this.$10=t,this},t.getType=function(){return this.$1},t.getInitiator=function(){return this.$2},t.getRepresentationID=function(){return this.$3},t.getStreamSwitchReason=function(){return this.$7},t.getResource=function(){return this.$4},t.getSegmentStartTime=function(){return this.$5},t.getSegmentEndTime=function(){return this.$6},t.getIsP2pPlayback=function(){return this.$8},t.getIsRingBufferSample=function(){return this.$9},t.getOperationLogger=function(t){var e=this.createOperationLogger(t);return this.setOperationContext(e)},t.setOperationContext=function(t){return this.$11(t),t},t.createOperationLogger=function(t){throw o("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_NOT_IMPLEMENTED_ERROR",description:"Not implemented: createOperationLogger"})},t.createLoggerProvider=function(){throw o("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_NOT_IMPLEMENTED_ERROR",description:"Not implemented: createLoggerProvider"})},t.$11=function(t){this.getType()&&t.setType(this.getType()),this.getInitiator()&&t.setInitiator(this.getInitiator()),this.getResource()&&t.setResource(this.getResource()),this.getRepresentationID()&&t.setRepresentationID(this.getRepresentationID()),this.getStreamSwitchReason()&&t.setStreamSwitchReason(this.getStreamSwitchReason()),typeof this.getSegmentStartTime()=="number"&&t.setSegmentStartTime(this.getSegmentStartTime()),typeof this.getSegmentEndTime()=="number"&&t.setSegmentEndTime(this.getSegmentEndTime()),typeof this.getIsP2pPlayback()=="boolean"&&t.setIsP2pPlayback(this.getIsP2pPlayback()),typeof this.getIsRingBufferSample()=="boolean"&&t.setIsRingBufferSample(this.getIsRingBufferSample())},e})();l.default=e}),98);
__d("oz-player/loggings/OzDevConsolePerfLogger",["oz-player/loggings/OzOperationLoggerBase","oz-player/loggings/OzPerfLoggerProviderBase"],(function(t,n,r,o,a,i,l){"use strict";function e(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=console).debug.apply(e,["[oz]"].concat(n))}function s(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=console).error.apply(e,["[oz]"].concat(n))}function u(e,t){return Math.floor(e).toString().padStart(t,"0")}function c(e,t){t===void 0&&(t=null);var n=function(t){return u(t.getHours(),2)+":"+u(t.getMinutes(),2)+":"+u(t.getSeconds(),2)+" "+u(t.getMilliseconds(),3)},r=t?t.getTime()-e.getTime():0;return"["+n(e)+(t?" - "+n(t):"")+" ("+r+" ms)]"}function d(t){return t==="failed"?s:e}function m(e){return e==null||e===0?null:e.toFixed(2)}var p=(function(e){function t(){return e.apply(this,arguments)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.createOperationLogger=function(t){return new _(t)},n.createLoggerProvider=function(){return new t},t})(r("oz-player/loggings/OzPerfLoggerProviderBase")),_=(function(e){function t(){return e.apply(this,arguments)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.log=function(){e.prototype.log.call(this);var t=this.getClientTimeBegin()||0,n=this.getClientTimeEnd(),r=n!=null&&n!==0?new Date(n):null,o=this.getResult()||"success",a=this.getType(),i=this.getInitiator(),l=this.getResource(),s=m(this.getSegmentStartTime()),u=m(this.getSegmentEndTime());d(o)("["+o+"]",this.getOperationName()+": "+c(new Date(t),r),a!=null&&a!==""?"["+a+"]":"",s!=null&&s!==""&&u!=null&&u!==""?"[segment time range: "+s+" - "+u+"]":"",i||"",l||"")},t})(r("oz-player/loggings/OzOperationLoggerBase"));l.OzDevConsolePerfLoggerProvider=p,l.OzDevConsoleOperationLogger=_}),98);
__d("oz-player/loggings/OzMultiDestinationPerfLogger",["oz-player/loggings/OzOperationLoggerBase","oz-player/loggings/OzPerfLoggerProviderBase"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t){var n;return n=e.call(this)||this,n.$OzMultiDestinationPerfLoggerProvider$p_1=t,n}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.createOperationLogger=function(t){return new s(t,this.$OzMultiDestinationPerfLoggerProvider$p_1.map(function(e){return e.getOperationLogger(t)}))},n.createLoggerProvider=function(){return new t(this.$OzMultiDestinationPerfLoggerProvider$p_1)},t})(r("oz-player/loggings/OzPerfLoggerProviderBase")),s=(function(e){function t(t,n){var r;return r=e.call(this,t)||this,r.$OzMultiDestinationOperationLogger$p_1=n,r}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.start=function(){return e.prototype.start.call(this),this.$OzMultiDestinationOperationLogger$p_1.forEach(function(e){return e.start()}),this},n.setPerSessionSampleRate=function(n){return e.prototype.setPerSessionSampleRate.call(this,n),this.$OzMultiDestinationOperationLogger$p_1.forEach(function(e){return e.setPerSessionSampleRate(n)}),this},n.setResult=function(n){return e.prototype.setResult.call(this,n),this.$OzMultiDestinationOperationLogger$p_1.forEach(function(e){return e.setResult(n)}),this},n.setError=function(n){return e.prototype.setError.call(this,n),this.$OzMultiDestinationOperationLogger$p_1.forEach(function(e){return e.setError(n)}),this},n.setType=function(n){return e.prototype.setType.call(this,n),this.$OzMultiDestinationOperationLogger$p_1.forEach(function(e){return e.setType(n)}),this},n.setMediaSourcePreviousDuration=function(n){return e.prototype.setMediaSourcePreviousDuration.call(this,n),this.$OzMultiDestinationOperationLogger$p_1.forEach(function(e){return e.setMediaSourcePreviousDuration(n)}),this},n.setMediaSourceNewDuration=function(n){return e.prototype.setMediaSourceNewDuration.call(this,n),this.$OzMultiDestinationOperationLogger$p_1.forEach(function(e){return e.setMediaSourceNewDuration(n)}),this},n.setClientTimeBegin=function(n){return e.prototype.setClientTimeBegin.call(this,n),this.$OzMultiDestinationOperationLogger$p_1.forEach(function(e){return e.setClientTimeBegin(n)}),this},n.setClientTimeDuration=function(n){return e.prototype.setClientTimeDuration.call(this,n),this.$OzMultiDestinationOperationLogger$p_1.forEach(function(e){return e.setClientTimeDuration(n)}),this},n.setClientTimeEnd=function(n){return e.prototype.setClientTimeEnd.call(this,n),this.$OzMultiDestinationOperationLogger$p_1.forEach(function(e){return e.setClientTimeEnd(n)}),this},n.setSegmentCount=function(n){return e.prototype.setSegmentCount.call(this,n),this.$OzMultiDestinationOperationLogger$p_1.forEach(function(e){return e.setSegmentCount(n)}),this},n.setTimeToFirstByte=function(n){return e.prototype.setTimeToFirstByte.call(this,n),this.$OzMultiDestinationOperationLogger$p_1.forEach(function(e){return e.setTimeToFirstByte(n)}),this},n.setTimeToLastByte=function(n){return e.prototype.setTimeToLastByte.call(this,n),this.$OzMultiDestinationOperationLogger$p_1.forEach(function(e){return e.setTimeToLastByte(n)}),this},n.setTimeToRequestStart=function(n){return e.prototype.setTimeToRequestStart.call(this,n),this.$OzMultiDestinationOperationLogger$p_1.forEach(function(e){return e.setTimeToRequestStart(n)}),this},n.setTimeToRequestSent=function(n){return e.prototype.setTimeToRequestSent.call(this,n),this.$OzMultiDestinationOperationLogger$p_1.forEach(function(e){return e.setTimeToRequestSent(n)}),this},n.setReason=function(n){return e.prototype.setReason.call(this,n),this.$OzMultiDestinationOperationLogger$p_1.forEach(function(e){return e.setReason(n)}),this},n.setResource=function(n){return e.prototype.setResource.call(this,n),this.$OzMultiDestinationOperationLogger$p_1.forEach(function(e){return e.setResource(n)}),this},n.setSegmentStartTime=function(n){return e.prototype.setSegmentStartTime.call(this,n),this.$OzMultiDestinationOperationLogger$p_1.forEach(function(e){return e.setSegmentStartTime(n)}),this},n.setSegmentEndTime=function(n){return e.prototype.setSegmentEndTime.call(this,n),this.$OzMultiDestinationOperationLogger$p_1.forEach(function(e){return e.setSegmentEndTime(n)}),this},n.setAppendedBufferMs=function(n){return e.prototype.setAppendedBufferMs.call(this,n),this.$OzMultiDestinationOperationLogger$p_1.forEach(function(e){return e.setAppendedBufferMs(n)}),this},n.setLength=function(n){return e.prototype.setLength.call(this,n),this.$OzMultiDestinationOperationLogger$p_1.forEach(function(e){return e.setLength(n)}),this},n.setLiveheadPosition=function(n){return e.prototype.setLiveheadPosition.call(this,n),this.$OzMultiDestinationOperationLogger$p_1.forEach(function(e){return e.setLiveheadPosition(n)}),this},n.setLiveheadSeqNumHeader=function(n){return e.prototype.setLiveheadSeqNumHeader.call(this,n),this.$OzMultiDestinationOperationLogger$p_1.forEach(function(e){return e.setLiveheadSeqNumHeader(n)}),this},n.setLiveheadSeqNumMpd=function(n){return e.prototype.setLiveheadSeqNumMpd.call(this,n),this.$OzMultiDestinationOperationLogger$p_1.forEach(function(e){return e.setLiveheadSeqNumMpd(n)}),this},n.setManifestType=function(n){return e.prototype.setManifestType.call(this,n),this.$OzMultiDestinationOperationLogger$p_1.forEach(function(e){return e.setManifestType(n)}),this},n.setPriorityFloat=function(n){return e.prototype.setPriorityFloat.call(this,n),this.$OzMultiDestinationOperationLogger$p_1.forEach(function(e){return e.setPriorityFloat(n)}),this},n.setInitiator=function(n){return e.prototype.setInitiator.call(this,n),this.$OzMultiDestinationOperationLogger$p_1.forEach(function(e){return e.setInitiator(n)}),this},n.setPreloadTime=function(n){return e.prototype.setPreloadTime.call(this,n),this.$OzMultiDestinationOperationLogger$p_1.forEach(function(e){return e.setPreloadTime(n)}),this},n.setConcluder=function(n){return e.prototype.setConcluder.call(this,n),this.$OzMultiDestinationOperationLogger$p_1.forEach(function(e){return e.setConcluder(n)}),this},n.setPreviousRepresentationID=function(n){return e.prototype.setPreviousRepresentationID.call(this,n),this.$OzMultiDestinationOperationLogger$p_1.forEach(function(e){return e.setPreviousRepresentationID(n)}),this},n.setRepresentationID=function(n){return e.prototype.setRepresentationID.call(this,n),this.$OzMultiDestinationOperationLogger$p_1.forEach(function(e){return e.setRepresentationID(n)}),this},n.setState=function(n){return e.prototype.setState.call(this,n),this.$OzMultiDestinationOperationLogger$p_1.forEach(function(e){return e.setState(n)}),this},n.setContentLengthHeader=function(n){return e.prototype.setContentLengthHeader.call(this,n),this.$OzMultiDestinationOperationLogger$p_1.forEach(function(e){return e.setContentLengthHeader(n)}),this},n.setEdgeHitHeader=function(n){return e.prototype.setEdgeHitHeader.call(this,n),this.$OzMultiDestinationOperationLogger$p_1.forEach(function(e){return e.setEdgeHitHeader(n)}),this},n.setFNAHitHeader=function(n){return e.prototype.setFNAHitHeader.call(this,n),this.$OzMultiDestinationOperationLogger$p_1.forEach(function(e){return e.setFNAHitHeader(n)}),this},n.setOriginHitHeader=function(n){return e.prototype.setOriginHitHeader.call(this,n),this.$OzMultiDestinationOperationLogger$p_1.forEach(function(e){return e.setOriginHitHeader(n)}),this},n.setCode=function(n){return e.prototype.setCode.call(this,n),this.$OzMultiDestinationOperationLogger$p_1.forEach(function(e){return e.setCode(n)}),this},n.setResponseTimeMsHeader=function(n){return e.prototype.setResponseTimeMsHeader.call(this,n),this.$OzMultiDestinationOperationLogger$p_1.forEach(function(e){return e.setResponseTimeMsHeader(n)}),this},n.setIsTemplatedManifest=function(n){return e.prototype.setIsTemplatedManifest.call(this,n),this.$OzMultiDestinationOperationLogger$p_1.forEach(function(e){return e.setIsTemplatedManifest(n)}),this},n.setIsLatencyCachupEnabled=function(n){return e.prototype.setIsLatencyCachupEnabled.call(this,n),this.$OzMultiDestinationOperationLogger$p_1.forEach(function(e){return e.setIsLatencyCachupEnabled(n)}),this},n.setPlayerFormat=function(n){return e.prototype.setPlayerFormat.call(this,n),this.$OzMultiDestinationOperationLogger$p_1.forEach(function(e){return e.setPlayerFormat(n)}),this},n.setIsP2pPlayback=function(n){return e.prototype.setIsP2pPlayback.call(this,n),this.$OzMultiDestinationOperationLogger$p_1.forEach(function(e){return e.setIsP2pPlayback(n)}),this},n.setOneObserved=function(n){return e.prototype.setOneObserved.call(this,n),this.$OzMultiDestinationOperationLogger$p_1.forEach(function(e){return e.setOneObserved(n)}),this},n.setOneReqWave=function(n){return e.prototype.setOneReqWave.call(this,n),this.$OzMultiDestinationOperationLogger$p_1.forEach(function(e){return e.setOneReqWave(n)}),this},n.setOneResWave=function(n){return e.prototype.setOneResWave.call(this,n),this.$OzMultiDestinationOperationLogger$p_1.forEach(function(e){return e.setOneResWave(n)}),this},n.setAppendTarget=function(n){return e.prototype.setAppendTarget.call(this,n),this.$OzMultiDestinationOperationLogger$p_1.forEach(function(e){return e.setAppendTarget(n)}),this},n.setIsRingBufferSample=function(n){return e.prototype.setIsRingBufferSample.call(this,n),this.$OzMultiDestinationOperationLogger$p_1.forEach(function(e){return e.setIsRingBufferSample(n)}),this},n.setIsOnline=function(n){return e.prototype.setIsOnline.call(this,n),this.$OzMultiDestinationOperationLogger$p_1.forEach(function(e){return e.setIsOnline(n)}),this},n.setIsMixedCodecManifest=function(n){return e.prototype.setIsMixedCodecManifest.call(this,n),this.$OzMultiDestinationOperationLogger$p_1.forEach(function(e){return e.setIsMixedCodecManifest(n)}),this},n.setProxyStatusHeader=function(n){return e.prototype.setProxyStatusHeader.call(this,n),this.$OzMultiDestinationOperationLogger$p_1.forEach(function(e){return e.setProxyStatusHeader(n)}),this},n.setPlaybackFbmsParam=function(n){return e.prototype.setPlaybackFbmsParam.call(this,n),this.$OzMultiDestinationOperationLogger$p_1.forEach(function(e){return e.setPlaybackFbmsParam(n)}),this},n.setPreferredEdgeLatency=function(n){return e.prototype.setPreferredEdgeLatency.call(this,n),this.$OzMultiDestinationOperationLogger$p_1.forEach(function(e){return e.setPreferredEdgeLatency(n)}),this},n.setUserInfo=function(n){return e.prototype.setUserInfo.call(this,n),this.$OzMultiDestinationOperationLogger$p_1.forEach(function(e){return e.setUserInfo(n)}),this},n.setDynamicStatusHeader=function(n){return e.prototype.setDynamicStatusHeader.call(this,n),this.$OzMultiDestinationOperationLogger$p_1.forEach(function(e){return e.setDynamicStatusHeader(n)}),this},n.setMediaSourceSourceBuffer=function(n,r){return e.prototype.setMediaSourceSourceBuffer.call(this,n,r),this.$OzMultiDestinationOperationLogger$p_1.forEach(function(e){return e.setMediaSourceSourceBuffer(n,r)}),this},n.unsetMediaSourceSourceBuffers=function(){return e.prototype.unsetMediaSourceSourceBuffers.call(this),this.$OzMultiDestinationOperationLogger$p_1.forEach(function(e){return e.unsetMediaSourceSourceBuffers()}),this},n.log=function(){e.prototype.log.call(this),this.$OzMultiDestinationOperationLogger$p_1.forEach(function(e){return e.log()})},t})(r("oz-player/loggings/OzOperationLoggerBase"));l.OzMultiDestinationPerfLoggerProvider=e}),98);
__d("oz-player/loggings/OzOperationLoggerObserver",["oz-player/shims/OzSubscriptionsHandler"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(){this.$1=new(r("oz-player/shims/OzSubscriptionsHandler"))}var t=e.prototype;return t.observe=function(t,n){var e,r=t.map(function(e){var t=e.setOperationLoggedListener(function(e){var t=e.getClientTimeBegin()||0,r=e.getClientTimeEnd()||0;n.getOperationLogger(e.getOperationName()).setClientTimeBegin(t).setClientTimeDuration(r-t).setClientTimeEnd(r).setLength(e.getLength()).setResult(e.getResult()||"success").setInitiator(e.getInitiator()).setType(e.getType()).log()});return e.activate(),t});(e=this.$1).addSubscriptions.apply(e,r)},t.destroy=function(){this.$1.release()},e})();l.default=e}),98);
__d("oz-player/shims/www/OzNetworkDiagnosticsWWW",["VideoPlayerOzWWWGlobalConfig"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){if(!e)return null;var n=parseInt(e.get(t),10);return!isNaN(n)&&isFinite(n)?n:null}function s(e,t,n){var r;if(!e||t===""||n==="")return null;for(var o=(r=e.get(t))!=null?r:"",a=o.split(";"),i=0;i<a.length;i++){var l=a[i].split(":");if(l.length===2&&l[0]===n){var s=parseInt(l[1],10);return isFinite(s)?s:null}}return null}var u={getNextValidSegmentId:function(n){return e(n,"x-fb-next-valid-segment-id")},getResponseTimeMs:function(n){return e(n,"x-fb-response-time-ms")},getDvlSegmentPTS:function(n){return e(n,"x-fb-segment-pts-start")},getDvlStatus:function(t){return t==null?void 0:t.get("x-fb-dynamic-status")},getUsableResponseSizeForBandwidthEstimation:function(n){return e(n,"x-fb-dynamic-predictive-response-chunk-size")},getBandwidthMeanEstimate:function(t){var e=r("VideoPlayerOzWWWGlobalConfig").getString("bandwidth_estimate_header_key",""),n=r("VideoPlayerOzWWWGlobalConfig").getString("bandwidth_estimate_key","");return s(t,e,n)},getBandwidthStandardDeviationEstimate:function(n){return e(n,"x-bwe-std-dev")},getTimeToFirstByteMsEstimate:function(n){return e(n,"x-mrtt-ms")}},c=u;l.default=c}),98);
__d("oz-player/shims/OzNetworkDiagnostics",["oz-player/shims/www/OzNetworkDiagnosticsWWW"],(function(t,n,r,o,a,i,l){"use strict";l.default=r("oz-player/shims/www/OzNetworkDiagnosticsWWW")}),98);
__d("oz-player/manifests/OzDynamicVideoLibrary",["oz-player/shims/OzNetworkDiagnostics"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){this.$4=null,this.$5=null,this.$6=new RegExp(/(.*)\.(m4v|m4a)(\?|$)/),this.$7={m4a:{time:0},m4v:{time:0}},this.$8={audio:"m4a",video:"m4v"},this.$9={};var t=e.config;this.$3=t}var t=e.prototype;return t.getLastSegmentStartPTS=function(){return this.$1},t.getLast200RequestedTime=function(){return this.$5},t.getLast200RequestedUrlDecisionMinTime=function(){var e=[];for(var t in this.$7)e.push(this.$7[t].time);return Math.min.apply(Math,e)},t.getLast200RequestedUrlDecisionTimeByMimeType=function(t){var e;return(e=this.$7[this.$8[t]])==null?void 0:e.time},t.updateWithResponse=function(t,n,o,a){var e;!a.headers||a.status!=200||(this.$5=n,this.$1=(e=r("oz-player/shims/OzNetworkDiagnostics").getDvlSegmentPTS(a.headers))!=null?e:this.$1,this.$2=r("oz-player/shims/OzNetworkDiagnostics").getDvlStatus(a.headers),this.$10(t,o),(this.$2!=null||this.$2==="200")&&(this.$4=n))},t.$10=function(t,n){var e=this.$6.exec(t);if(e!=null){var r=e[2];n!=null&&(this.$7[r]={time:n})}},t.shouldRequestDynamicInfo=function(t){if(t!=="video")return!1;this.$11(t);var e=this.$12(t);return e!=null&&e<=this.$3.getNumber("dvl_initial_segment_ignore_count")?!1:this.$3.getNumber("dvl_update_interval_ms")==0||this.$4==null||this.$4+this.$3.getNumber("dvl_update_interval_ms")<=Date.now()},t.$11=function(t){return this.$9[t]==null&&(this.$9[t]={segmentCount:0}),this.$9[t].segmentCount=this.$9[t].segmentCount!=null?this.$9[t].segmentCount+1:0},t.$12=function(t){return this.$9[t].segmentCount},e})();l.default=e}),98);
__d("oz-player/manifests/OzRepresentationBase",["oz-player/parsers/getMIMECodecs","oz-player/shims/ozvariant","oz-player/utils/OzErrorUtils"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t,n,r,o,a,i,l,s,u,c,d,m){this.$1=e,this.$2=t,this.$11=n,this.$6=i,this.$3=r,this.$4=o,this.$5=a,this.$7=l,this.$8=s,this.$9=u,this.$10=c,this.$12=d,this.$13=m}var t=e.prototype;return t.getContentProtectionXml=function(){return this.$2},t.getID=function(){return this.$11},t.getBandwidth=function(){return this.$10},t.getMimeCodecs=function(){return r("oz-player/parsers/getMIMECodecs")(this.$3,this.$4)},t.getMimeType=function(){return this.$3},t.getCodecs=function(){return this.$4},t.getVariantKey=function(){return this.$5},t.getLang=function(){return this.$6},t.getRole=function(){return this.$7},t.getDisplayLabel=function(){return this.$11},t.getInitSegment=function(){return this.$8},t.getCustomFieldFirstSegment=function(){return this.$12},t.getCustomField=function(t){if(this.$13==null||!this.$13[t])throw o("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_REPRESENTATION_PARSER",description:"Custom field "+t+" is not specified by caller",extra:{code:"OZ_RP-8"}});var e=this.$13[t];try{return e(this.$1)}catch(e){return null}},t.updateWith=function(n){n instanceof e||r("oz-player/shims/ozvariant")(0,229),this.$9.updateWith(n.$9)},t.getSegmentByTime=function(t){return this.$9.getSegmentByTime(t)},t.getSegment=function(t){return this.$9.getSegment(t)},t.getPredictedSegmentAfter=function(t){return this.$9.getPredictedSegmentAfter(t)},t.canPredict=function(){return this.$9.canPredict()},t.canApproximateId=function(){return this.$9.canApproximateId()},t.getSegmentAfter=function(t){return this.$9.getSegmentAfter(t)},t.isEndingSegment=function(t){return this.$9.isEndingSegment(t)},t.addUpdateListener=function(t){return this.$9.addUpdateListener(t)},t.getTimeRanges=function(){return this.$9.getTimeRanges()},t.blockTimeRange=function(t){this.$9.blockTimeRange(t)},t.getEndingSegment=function(){return this.$9.getEndingSegment()},t.getMaxGopSec=function(){return this.$9.getMaxGopSec()},e})();l.default=e}),98);
__d("oz-player/manifests/OzVideoRepresentation",["oz-player/manifests/OzRepresentationBase"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t,n,r,o,a,i,l,s,u,c,d,m,p,_,f){var g;if(g=e.call(this,t,n,r,o,a,i,l,s,u,c,d,m,p)||this,g.$OzVideoRepresentation$p_5=null,g.$OzVideoRepresentation$p_6=null,g.$OzVideoRepresentation$p_7=null,g.$OzVideoRepresentation$p_1=_,g.$OzVideoRepresentation$p_2=f,g.$OzVideoRepresentation$p_4=p,g.$OzVideoRepresentation$p_3=t,p!=null){if(p.playbackResolutionMos!=null){var h=g.getCustomField("playbackResolutionMos");g.$OzVideoRepresentation$p_7=h!=null?String(h):null}if(p.playbackResolutionCsvqm!=null){var y=g.getCustomField("playbackResolutionCsvqm");g.$OzVideoRepresentation$p_6=y!=null?String(y):null}}return g}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.getQualityScoreCurveString=function(t){return t==="csvqm"?this.$OzVideoRepresentation$p_6:this.$OzVideoRepresentation$p_7},n.getWidth=function(){return this.$OzVideoRepresentation$p_1},n.getHeight=function(){return this.$OzVideoRepresentation$p_2},n.getDisplayLabel=function(){if(this.$OzVideoRepresentation$p_5!=null)return this.$OzVideoRepresentation$p_5;var e=this.$OzVideoRepresentation$p_4?this.$OzVideoRepresentation$p_4.qualityLabel:null;return e&&(this.$OzVideoRepresentation$p_5=e(this.$OzVideoRepresentation$p_3)),(this.$OzVideoRepresentation$p_5==null||this.$OzVideoRepresentation$p_5=="")&&(this.$OzVideoRepresentation$p_5=this.getHeight().toString()+"p"),this.$OzVideoRepresentation$p_5||""},t})(r("oz-player/manifests/OzRepresentationBase"));l.default=e}),98);
__d("oz-player/utils/OzMimeUtil",[],(function(t,n,r,o,a,i){"use strict";function e(e){return(e.split("/")[0]||"").trim()}function l(e){var t=(e.split(";")[0]||"").trim(),n=(t.split("/")[1]||"").trim();return n}function s(e){var t=e.split('codecs="').pop();return t.split(".")[0].trim()}i.getMimeType=e,i.getContainerType=l,i.getParsedCodecFamily=s}),66);
__d("oz-player/media_source/OzMSESourceBufferImpl",["oz-player/shims/OzDOMEventListener","oz-player/utils/OzErrorUtils","oz-player/utils/OzMimeUtil"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t,n,r){this.$1=e,this.$2=n,this.$3=t,this.$4=r}var t=e.prototype;return t.registerOnUpdateStartListener=function(t){return r("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"updatestart",t)},t.registerOnUpdateEndListener=function(t){return r("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"updateend",t)},t.registerOnUpdateListener=function(t){return r("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"update",t)},t.registerOnErrorListener=function(t){return r("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"error",t)},t.getIsUpdating=function(){return this.$1.updating},t.getBuffered=function(){return this.$1.buffered},t.setAppendWindowEnd=function(t){this.$1.appendWindowEnd=t},t.appendBuffer=function(t,n){var e,r=(e=o("oz-player/utils/OzMimeUtil")).getMimeType(n)!==e.getMimeType(this.$3),a=e.getContainerType(n)!==e.getContainerType(this.$3),i=e.getParsedCodecFamily(n)!==e.getParsedCodecFamily(this.$3);if(r||a||i)if(this.$4){try{this.$1.changeType(n)}catch(e){throw o("oz-player/utils/OzErrorUtils").createOzError({description:'SourceBufferChangeTypeError: Failed to changeType("'+n+'"): '+String(e)+" current MIME Codecs: "+this.$3,type:"OZ_SOURCE_BUFFER_CHANGE_TYPE"})}this.$3=n}else throw o("oz-player/utils/OzErrorUtils").createOzError({description:"SourceBufferChangeTypeError: attempted to call changeType() on a SourceBuffer that does not support it.",type:"OZ_SOURCE_BUFFER_CHANGE_TYPE_UNAVAILABLE"});this.$1.appendBuffer(t)},t.abort=function(){this.$1.abort()},t.remove=function(t,n){this.$1.remove(t,n)},e})();l.default=e}),98);
__d("oz-player/media_source/OzMediaErrorProvider",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(e){this.$1=e}var t=e.prototype;return t.hasError=function(){return this.$1.error!==null},t.getMediaErrorName=function(){var e=this.$1.error;return e&&e.message?this.$2(e.message):null},t.getErrorCode=function(){var e=this.$1.error;return e&&e.code?e.code:null},t.getVideoNode=function(){return this.$1},t.$2=function(t){return t.replace(/([0-9]{2,})/g,function(e){for(var t="";t.length<e.length;)t+="#";return t})},e})();i.default=e}),66);
__d("oz-player/utils/OzSourceBufferUtil",["oz-player/utils/OzNumericalRangeUtil"],(function(t,n,r,o,a,i,l){"use strict";function e(e){for(var t=0,n=0;n<e.getBuffered().length;n++)t+=e.getBuffered().end(n)-e.getBuffered().start(n);return t}function s(e){return e.reduce(function(e,t){return e+(t.endTime-t.startTime)},0)}function u(e){return e.getBuffered().length==0?0:e.getBuffered().start(0)}function c(e){var t=null;try{t=e.getBuffered()}catch(e){return 0}return t.length==0?0:t.end(t.length-1)}function d(e){for(var t=[],n=0;n<e.length;n++)t.push({startTime:e.start(n),endTime:e.end(n)});return t}function m(e,t,n){var r=o("oz-player/utils/OzNumericalRangeUtil").findCurrentRangeIndex(n,t,e.map(function(e){return{rangeStart:e.startTime,rangeEnd:e.endTime}})),a=r>=0?parseFloat((e[r].endTime-t).toFixed(3)):0,i=r>=0?e.length-1-r:-1;return{bufferAheadSec:a,bufferedOffset:i}}function p(e,t,n){var r=e.map(function(e){return{rangeStart:e.startTime,rangeEnd:e.endTime}}),a=o("oz-player/utils/OzNumericalRangeUtil").findCurrentRangeIndex(n,t,r),i=parseFloat(r.reduce(function(e,n){var r=n.rangeEnd;return r==null?e:e+(o("oz-player/utils/OzNumericalRangeUtil").isWithin(t,n)?r-t:o("oz-player/utils/OzNumericalRangeUtil").isLargerThan(n.rangeStart,t)?r-n.rangeStart:0)},0).toFixed(3)),l=a>=0?e.length-1-a:-1;return{bufferAheadSec:i,bufferedOffset:l}}l.getTotalBufferedTime=e,l.getTotalInBufferedRanges=s,l.getStartBufferedTime=u,l.getEndBufferedTime=c,l.convertToBufferedTimeRangeArray=d,l.getBufferAheadInBufferedRanges=m,l.getTotalBufferAheadOfPosition=p}),98);
__d("oz-player/media_source/SourceBufferManagerUtils",["oz-player/utils/OzSourceBufferUtil"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){var r=o("oz-player/utils/OzSourceBufferUtil").getEndBufferedTime(t);return function(){var e=o("oz-player/utils/OzSourceBufferUtil").getEndBufferedTime(t);return{startTime:r,endTime:e}}}l.startMeasuringAppendedBuffer=e}),98);
__d("oz-player/shims/www/OzDeferredWWW",["Deferred"],(function(t,n,r,o,a,i,l){"use strict";l.default=r("Deferred")}),98);
__d("oz-player/shims/OzDeferred",["oz-player/shims/www/OzDeferredWWW"],(function(t,n,r,o,a,i,l){"use strict";l.default=r("oz-player/shims/www/OzDeferredWWW")}),98);
__d("oz-player/utils/OzFakeEventTarget",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(){this.$1={}}var t=e.prototype;return t.dispatchEvent=function(t){this.$1[t]!=null&&this.$1[t].forEach(function(e){return e()})},t.addEventListener=function(t,n){var e=this;return this.$1[t]===void 0&&(this.$1[t]=new Set),this.$1[t].add(n),{remove:function(){e.removeEventListener(t,n)}}},t.removeEventListener=function(t,n){this.$1[t]&&this.$1[t].delete(n)},t.destroy=function(){this.$1={}},e})();i.default=e}),66);
__d("oz-player/states/OzObservedSourceBufferState",["oz-player/shims/OzSubscriptionsHandler","oz-player/utils/OzFakeEventTarget"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t,n){var o;return o=e.call(this)||this,o.$OzObservedSourceBufferState$p_2=new(r("oz-player/shims/OzSubscriptionsHandler")),o.$OzObservedSourceBufferState$p_3=[],o.$OzObservedSourceBufferState$p_6=function(){var e;try{e=o.$OzObservedSourceBufferState$p_1.getBuffered()}catch(e){if(e.name==="InvalidStateError"){o.$OzObservedSourceBufferState$p_3=[];return}else throw e}for(var t=[],n=0;n<e.length;n++)t.push({startTime:e.start(n),endTime:e.end(n)});o.$OzObservedSourceBufferState$p_3=t},o.$OzObservedSourceBufferState$p_1=t,o.$OzObservedSourceBufferState$p_4=n,o.$OzObservedSourceBufferState$p_5(),o}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.$OzObservedSourceBufferState$p_5=function(){var e=this;this.$OzObservedSourceBufferState$p_2.release(),this.$OzObservedSourceBufferState$p_2=new(r("oz-player/shims/OzSubscriptionsHandler")),this.$OzObservedSourceBufferState$p_2.addSubscriptions(this.$OzObservedSourceBufferState$p_1.registerOnUpdateEndListener(function(){e.$OzObservedSourceBufferState$p_6(),e.dispatchEvent("buffer_updated")}),this.$OzObservedSourceBufferState$p_1.registerOnErrorListener(this.$OzObservedSourceBufferState$p_6))},n.setSourceBuffer=function(t){this.$OzObservedSourceBufferState$p_1=t,this.$OzObservedSourceBufferState$p_5(),this.$OzObservedSourceBufferState$p_6()},n.getBufferedRanges=function(){return this.$OzObservedSourceBufferState$p_3},n.destroy=function(){e.prototype.destroy.call(this),this.$OzObservedSourceBufferState$p_2.release(),this.$OzObservedSourceBufferState$p_2.engage()},t})(r("oz-player/utils/OzFakeEventTarget"));l.default=e}),98);
__d("oz-player/utils/OzCustomErrorCode",[],(function(t,n,r,o,a,i){"use strict";var e={APPEND_BUFFER_UNKNOWN_ERROR:"21539",APPEND_BUFFER_INVALID_STATE_ERROR_SOURCE_BUFFER_HAS_BEEN_REMOVED:"21540",APPEND_BUFFER_MEDIA_ERROR_ATTRIBUTE_NOT_NULL:"21541",APPEND_BUFFER_SOURCE_BUFFER_UPDATING_ATTRIBUTE_IS_TRUE:"21542",SOURCE_BUFFER_MANAGER_ADD_SOURCE_BUFFER_ERROR:"21543",SOURCE_BUFFER_MANAGER_CREATE_ERROR:"21544",SETUP_STREAMS_PROMISE_REJECTION:"21545",APPEND_BUFFER_QUOTA_EXCEEDED_ERROR:"21546",APPEND_BUFFER_INVALID_STATE_ERROR:"21547",SOURCE_BUFFER_MANAGER_UPDATEEND_UNKNOWN_ERROR:"21548",NETWORK_REQUEST_STREAM_RETRY_HANDLER_ERROR:"21549",STREAM_APPEND_QUOTA_EXCEEDED_HANDLER_ERROR:"21550",SOURCE_BUFFER_MANAGER_CLEAR_RANGE_FAILED:"21551",WEBVTT_CAPTION_PARSE_ERROR:"21552"},l=e;i.default=l}),66);
__d("oz-player/media_source/SourceBufferManager",["Promise","oz-player/loggings/OzLoggingUtils","oz-player/media_source/SourceBufferManagerUtils","oz-player/shims/OzDOMEventListener","oz-player/shims/OzDeferred","oz-player/shims/OzMaybeNativePromise","oz-player/shims/OzStreams","oz-player/shims/OzSubscriptionsHandler","oz-player/states/OzObservedSourceBufferState","oz-player/utils/OzCustomErrorCode","oz-player/utils/OzErrorUtils","oz-player/utils/ozConcatUint8Arrays"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){function t(e,t,n,a,i,l){var s=this;l===void 0&&(l=null),this.$4=null,this.$5=new(r("oz-player/shims/OzSubscriptionsHandler")),this.$7=!1,this.$8=[],this.$12=!1,this.$13=!1,this.$14=0,this.$26=function(){if(s.$10.hasError()){s.$13=!1,s.$12=!1;var e=s.$10.getMediaErrorName(),t=e!=null?e:"An unknown source buffer error occurred.",n=s.$10.getErrorCode(),a=n!=null?String(n):r("oz-player/utils/OzCustomErrorCode").SOURCE_BUFFER_MANAGER_UPDATEEND_UNKNOWN_ERROR,i=o("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SOURCE_BUFFER",description:t,extra:{code:a}});s.$4&&s.$4.reject(i),s.$4=null,s.cancelOperationAndCleanQueue()}else if(!s.$13){s.$13=!0;var l=s.$10.getVideoNode(),u=s.$26,c=r("oz-player/shims/OzDOMEventListener").listenDOMEvent(l,"error",u);s.$5.addSubscriptions(c)}},this.$17=function(){var e=s.$2;if(e!=null){var t;e.getOperationLogger("source_buffer_updateend").setError((t=s.$10.getMediaErrorName())!=null?t:void 0).setCode(s.$10.getErrorCode()).setResult(s.$12?"failed":"success").log()}var n=s.$4;n&&(s.$12?s.$26():(n.resolve(),s.$4&&(s.$4=null)))},this.$18=function(){var e=s.$2;if(e!=null){var t;e.getOperationLogger("source_buffer_error").setError((t=s.$10.getMediaErrorName())!=null?t:void 0).setCode(s.$10.getErrorCode()).setResult("failed").log()}s.$12=!0},this.$1=e,this.$2=l,this.$3=t,this.$11=n,this.$16(),this.$9=new(r("oz-player/states/OzObservedSourceBufferState"))(this.$3,this.$11),this.$10=a,this.$15=i}var a=t.prototype;return a.$16=function(){this.$5.release(),this.$5=new(r("oz-player/shims/OzSubscriptionsHandler")),this.$5.addSubscriptions(this.$3.registerOnUpdateEndListener(this.$17),this.$3.registerOnErrorListener(this.$18))},a.setSourceBuffer=function(t){t!=null&&(this.cancelOperationAndCleanQueue(),this.$3=t,this.$16(),this.$9.setSourceBuffer(t))},a.queueData=function(t,n,o,a,i){a===void 0&&(a=null),i===void 0&&(i=0);var e=new(r("oz-player/shims/OzDeferred"))(r("oz-player/shims/OzMaybeNativePromise"));this.$8.push({data:t,deferred:e,loggerProvider:a,appendTarget:i,mimeCodecs:n,clearSourceBufferRange:o});var l=e.getPromise();return this.$7||this.$19().catch(function(e){}),l},a.cancelOperationAndCleanQueue=function(t){t===void 0&&(t=null),t&&t.cloneContext().getOperationLogger("source_buffer_cancel_and_clean").log();var e=o("oz-player/utils/OzErrorUtils").createOzCancelledError("SBM cancel and clean");this.$8.forEach(function(t){var n=t.deferred;n.reject(e)}),this.$8=[];try{this.$11.getBool("enable_alternative_audio_tracks")?this.$15()==="open"&&(this.$10.hasError()||this.$3.abort()):this.$15()!=="closed"&&(this.$10.hasError()||this.$3.abort())}catch(e){var n=e;t&&t.cloneContext().getOperationLogger("cancel_operation_abort_failed").setError(n).setReason(this.$15?this.$15():null).log()}var r=this.$4;r&&r.reject(e),this.$6&&(this.$6.reject(e),this.$6=null)},a.getSourceBufferState=function(){return this.$9},a.$20=function(t,n){var e=Math.max(t,0);n>0&&n>e&&this.$3.remove(e,n)},a.$21=function(t,n){var e=Math.max(t,0);if(n>0&&n>e){var o=this.$22();return this.$20(e,n),o}return r("oz-player/shims/OzMaybeNativePromise").resolve()},a.clearRangeWithWait=function(r){var t=this;return this.cancelOperationAndCleanQueue(),r.reduce(function(e,n){var r=n.fromTime,o=n.toTime;return e.then(function(){return t.$21(r,o)})},(e||(e=n("Promise"))).resolve())},a.$22=function(t){var e=this.$4=new(r("oz-player/shims/OzDeferred"))(r("oz-player/shims/OzMaybeNativePromise")),n=e.getPromise();return t&&o("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(n,t,"wait_for_source_buffer"),n},a.$23=function(t,n,a,i){var e=this,l=function(){var l=e.$4=new(r("oz-player/shims/OzDeferred"))(r("oz-player/shims/OzMaybeNativePromise")),s=!1,u=!0;try{u=!!e.$3.getBuffered()}catch(e){u=!1}try{if(s=e.$3.getIsUpdating(),u)e.$3.appendBuffer(t,n);else return l.resolve(),l.getPromise()}catch(t){var c=t,d=r("oz-player/utils/OzCustomErrorCode").APPEND_BUFFER_UNKNOWN_ERROR,m=c.name,p=c.message;m==="QuotaExceededError"?d=r("oz-player/utils/OzCustomErrorCode").APPEND_BUFFER_QUOTA_EXCEEDED_ERROR:e.$10.hasError()?d=r("oz-player/utils/OzCustomErrorCode").APPEND_BUFFER_MEDIA_ERROR_ATTRIBUTE_NOT_NULL:s?d=r("oz-player/utils/OzCustomErrorCode").APPEND_BUFFER_SOURCE_BUFFER_UPDATING_ATTRIBUTE_IS_TRUE:m==="InvalidStateError"&&typeof p=="string"&&/SourceBuffer has been removed/.test(p)?d=r("oz-player/utils/OzCustomErrorCode").APPEND_BUFFER_INVALID_STATE_ERROR_SOURCE_BUFFER_HAS_BEEN_REMOVED:m==="InvalidStateError"&&(d=r("oz-player/utils/OzCustomErrorCode").APPEND_BUFFER_INVALID_STATE_ERROR);var _=o("oz-player/utils/OzErrorUtils").createOzError({type:o("oz-player/utils/OzErrorUtils").isOzError(c)?c.getType():m==="QuotaExceededError"?"OZ_SOURCE_BUFFER_QUOTA_EXCEEDED":m==="OZ_SOURCE_BUFFER_CHANGE_TYPE"?"OZ_SOURCE_BUFFER_CHANGE_TYPE":"OZ_SOURCE_BUFFER",description:"SBM#"+e.$1+" appendBuffer("+n+") failed: "+String(p),extra:o("oz-player/utils/OzErrorUtils").isOzError(c)?c.getExtra():{originalError:c,code:d}});e.$4=null,l.reject(_)}var f=l.getPromise();return a&&o("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(f,a,"append",function(e){var n;e.setLength(t.byteLength);var r=(n=i==null?void 0:i.appendTarget)!=null?n:null;e.setAppendTarget(r)}),f};return this.$3.getIsUpdating()?this.$22(a).then(l).catch(function(e){throw e}):(this.$14+=t.byteLength,l())},a.$19=function(){var e=this;if(this.$7)return r("oz-player/shims/OzMaybeNativePromise").reject(this.$24("Another unit of queued data is being appended."));var t=this.$8.shift();if(!t)return this.$7=!1,r("oz-player/shims/OzMaybeNativePromise").resolve();var n=t.data,a=t.mimeCodecs,i=t.deferred,l=t.loggerProvider,s=t.appendTarget,u=t.clearSourceBufferRange;this.$7=!0;var c,d=function(){return n instanceof o("oz-player/shims/OzStreams").OzReadableStream?e.$25(n,a,l,s):e.$23(n,a,l,{appendTarget:s})};u?(c=this.$3.getIsUpdating()?this.$22(l):r("oz-player/shims/OzMaybeNativePromise").resolve(),c=c.then(function(){return e.clearRangeWithWait([{fromTime:u[0],toTime:u[1]}])}).then(d)):c=d();var m=o("oz-player/media_source/SourceBufferManagerUtils").startMeasuringAppendedBuffer(this.$11,this.$3,this.$9);return c.catch(function(e){i.reject(e)}).then(function(){var t=m(),n=t.startTime,r=t.endTime;i.resolve({startTime_UNSAFE:n,endTime_UNSAFE:r,appendedSec:r-n}),e.$7=!1,e.$19().catch(function(e){})})},a.$25=function(t,n,a,i){var e=this,l=[],s=0,u=t.getReader(),c=function(){var t=new(r("oz-player/shims/OzDeferred"))(r("oz-player/shims/OzMaybeNativePromise"));return e.$6=t,u.read().then(function(n){t.resolve(n),e.$6=null}).catch(function(n){t.reject(n),e.$6=null}),t.getPromise().then(function(t){if(t.done){var o=r("oz-player/utils/ozConcatUint8Arrays")(l),u=o.buffer;return l.length=0,s=0,u.byteLength>0?e.$23(u,n,a,{appendTarget:i}):r("oz-player/shims/OzMaybeNativePromise").resolve()}var d=t.value,m=d;if(i>0){var p=d instanceof Uint8Array?d:new Uint8Array(d);if(l.push(p),s+=p.byteLength,s>=i){var _=r("oz-player/utils/ozConcatUint8Arrays")(l),f=_.buffer;l.length=0,s=0,m=f}}return m&&m.byteLength>=i?e.$23(m,n,a,{appendTarget:i}).then(function(){return c()}):c()},function(t){if(e.$11.getBool("enable_alternative_audio_tracks"))try{e.$15()==="open"&&(e.$10.hasError()||e.$3.abort())}catch(e){var a=e}else try{e.$3.abort()}catch(e){var i=e}if(typeof t=="object"&&o("oz-player/utils/OzErrorUtils").isOzError(t))return r("oz-player/shims/OzMaybeNativePromise").reject(t);if(typeof t=="object"&&t!=null&&typeof t.name=="string"&&t.name==="TypeError"&&typeof t.message=="string"&&t.message.includes("network error")){var l=o("oz-player/utils/OzErrorUtils").convertPromiseRejectionReasonToOzError(t,{description:"SBM#"+e.$1+" appendReadableStream("+n+") failed: Stream read is interrupted (previously TypeError network error)}",extra:{originalError:t},type:"OZ_NETWORK"});return r("oz-player/shims/OzMaybeNativePromise").reject(l)}var s=o("oz-player/utils/OzErrorUtils").convertPromiseRejectionReasonToOzError(t,{description:"SBM#"+e.$1+" appendReadableStream("+n+") failed: Unexpected error while reading from stream: "+String(t),extra:{originalError:t},type:"OZ_NETWORK"});return r("oz-player/shims/OzMaybeNativePromise").reject(s)})};return c()},a.$24=function(t){var e=this.$2;return e!=null&&e.getOperationLogger("source_buffer_invariant").setError(t).setResult("failed").log(),o("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SOURCE_BUFFER",description:"SBM invariant: "+t})},a.destroy=function(){var e=this,t=this.$2;t&&t.cloneContext().getOperationLogger("source_buffer_destroy").log();var n=this.$4;n&&(this.$13?n.getPromise().catch(function(){e.$4=null,e.$5.release(),e.$5=new(r("oz-player/shims/OzSubscriptionsHandler"))}):(n.reject(o("oz-player/utils/OzErrorUtils").createOzCancelledError("SBM destroyed")),this.$4=null,this.$5.release(),this.$5=new(r("oz-player/shims/OzSubscriptionsHandler")))),this.$9.destroy()},a.getDebug=function(){return{SourceBuffer:this.$3}},t})();l.default=s}),98);
__d("oz-player/shims/www/getOzVTTSourceBufferImplLazyWWW",["JSResourceForInteraction"],(function(t,n,r,o,a,i,l){"use strict";var e=r("JSResourceForInteraction")("OzVTTSourceBufferImpl").__setRef("oz-player/shims/www/getOzVTTSourceBufferImplLazyWWW");function s(){return e.load()}l.default=s}),98);
__d("oz-player/shims/www/getOzVTTSourceBufferImplWWW",["oz-player/shims/www/getOzVTTSourceBufferImplLazyWWW"],(function(t,n,r,o,a,i,l){"use strict";l.default=r("oz-player/shims/www/getOzVTTSourceBufferImplLazyWWW")}),98);
__d("oz-player/shims/getOzVTTSourceBufferImpl",["oz-player/shims/www/getOzVTTSourceBufferImplWWW"],(function(t,n,r,o,a,i,l){"use strict";l.default=r("oz-player/shims/www/getOzVTTSourceBufferImplWWW")}),98);
__d("oz-player/shims/www/ozClearTimeoutWWW",["clearTimeout"],(function(t,n,r,o,a,i,l){"use strict";l.default=r("clearTimeout")}),98);
__d("oz-player/shims/ozClearTimeout",["oz-player/shims/www/ozClearTimeoutWWW"],(function(t,n,r,o,a,i,l){"use strict";l.default=r("oz-player/shims/www/ozClearTimeoutWWW")}),98);
__d("oz-player/shims/www/ozSetTimeoutAcrossTransitionsWWW",["setTimeoutAcrossTransitions"],(function(t,n,r,o,a,i,l){"use strict";l.default=r("setTimeoutAcrossTransitions")}),98);
__d("oz-player/shims/ozSetTimeoutAcrossTransitions",["oz-player/shims/www/ozSetTimeoutAcrossTransitionsWWW"],(function(t,n,r,o,a,i,l){"use strict";l.default=r("oz-player/shims/www/ozSetTimeoutAcrossTransitionsWWW")}),98);
__d("oz-player/utils/ozGetErrorNameFromMediaErrorCode",[],(function(t,n,r,o,a,i){"use strict";function e(e){switch(e){case 1:return"MEDIA_ERR_ABORTED";case 2:return"MEDIA_ERR_NETWORK";case 3:return"MEDIA_ERR_DECODE";case 4:return"MEDIA_ERR_SRC_NOT_SUPPORTED";default:}return"MEDIA_ERR_UNKNOWN"}i.default=e}),66);
__d("oz-player/media_source/MediaSourceManager",["oz-player/loggings/OzMultiDestinationPerfLogger","oz-player/media_source/OzMSESourceBufferImpl","oz-player/media_source/OzMediaErrorProvider","oz-player/media_source/SourceBufferManager","oz-player/shims/OzDOMEventListener","oz-player/shims/OzDeferred","oz-player/shims/OzMaybeNativePromise","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/getOzVTTSourceBufferImpl","oz-player/shims/ozClearTimeout","oz-player/shims/ozReportUnexpectedError","oz-player/shims/ozSetTimeoutAcrossTransitions","oz-player/shims/ozThrottle","oz-player/utils/OzCustomErrorCode","oz-player/utils/OzErrorEmitter","oz-player/utils/OzErrorUtils","oz-player/utils/OzMimeUtil","oz-player/utils/ozGetErrorNameFromMediaErrorCode"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){var t=this,n=e.videoNode,a=e.config,i=e.perfLoggerProvider,l=i===void 0?new(o("oz-player/loggings/OzMultiDestinationPerfLogger")).OzMultiDestinationPerfLoggerProvider([]):i,s=e.isChangeTypeSupported,u=e.useManagedMediaSource,c=e.handleVttCaptionsUpdated,d=e.onClearVideoNodeError,m=e.onRetryVideoElementError;this.$3=new(r("oz-player/shims/OzSubscriptionsHandler")),this.$4=new(r("oz-player/shims/OzSubscriptionsHandler")),this.$6=[],this.$7=new Map,this.$8=[],this.$10=!1,this.$12=!1,this.$13=!1,this.$14=!1,this.$15=!1,this.$18=null,this.$19=null,this.$20=new(r("oz-player/utils/OzErrorEmitter")),this.$22="undetected",this.$23=!1,this.$24=!1,this.$31=function(){if(t.$34()||(t.$10=!1),!!t.$35()){var e=t.$8.shift();e&&(e(t.$2),t.$10=!0)}},this.$5=l,this.$11=a,this.$1=n,this.$21=c,this.$16=d,this.$17=m,this.$23=s,this.$24=u,this.$9=new(r("oz-player/media_source/OzMediaErrorProvider"))(this.$1),this.$3.addSubscriptions(r("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"error",function(){var e;t.$5.getOperationLogger("media_element_error").setError((e=t.$9.getMediaErrorName())!=null?e:void 0).setCode(t.$9.getErrorCode()).setResult("failed").setUserInfo({av1HardwareSupport:t.$22}).log(),t.$8=[],t.$6=[],t.$4.release(),t.$4=new(r("oz-player/shims/OzSubscriptionsHandler")),t.$15=t.$15||t.$14||t.$13;var n=t.$1.error,a=(n==null?void 0:n.code)||0,i=!n&&t.$1.poster!=null&&t.$1.poster!=="",l=o("oz-player/utils/OzErrorUtils").createOzError({type:i?"OZ_POSSIBLE_POSTER_LOAD_FAILURE":r("oz-player/utils/ozGetErrorNameFromMediaErrorCode")(a),description:(n==null?void 0:n.message)!=null?n.message:"",extra:{originalError:n,code:String(a)}});if(t.$19!=null){t.$5.getOperationLogger("media_element_error").setError(n).setCode(a).setReason("mitigation_failed").setResult("failed").setUserInfo({av1HardwareSupport:t.$22}).log(),t.$20.emitError(l);return}t.$19=t.$1.currentTime,t.$18==null&&(t.$18=r("oz-player/shims/ozSetTimeoutAcrossTransitions")(function(){t.$18=null,t.$11.getBool("retry_video_element_error")&&(t.$17!=null&&t.$17(l),t.$25())},0))}),r("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"play",function(){t.$14=!0}),r("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"playing",function(){t.$14=!1,t.$15=!1,t.$19=null,t.$13=!0}),r("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"pause",function(){t.$14=!1,t.$13=!1,t.$15=!!t.$1.error}),r("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"ended",function(){t.$14=!1,t.$13=!1})),this.$2=this.$26(),this.$5.getOperationLogger("media_source_new").log(),this.$3.addSubscriptions(r("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$2,"sourceopen",function(){t.$5.getOperationLogger("media_source_open").log()}),r("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$2,"sourceended",function(){t.$5.getOperationLogger("media_source_ended").log()}),r("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$2,"sourceclose",function(){t.$5.getOperationLogger("media_source_close").log()})),this.$27(this.$2)}var t=e.prototype;return t.$26=function(){return this.$24?new ManagedMediaSource:new MediaSource},t.$27=function(t){var e=this.$1,n=e.src;n!==""&&URL.revokeObjectURL(n),t?(this.$24&&(e.disableRemotePlayback=!0),e.src=URL.createObjectURL(t)):(e.removeAttribute("src"),e.removeAttribute("srcObject"))},t.$25=function(){var e=this;this.$7.forEach(function(e){e.cancelOperationAndCleanQueue()}),this.$2=this.$26(),this.$27(this.$2),this.$7.forEach(function(e,t){e.setSourceBuffer(null)});var t=this.$28().then(function(){var t=[];return e.$7.forEach(function(n,r){var o=e.$29(r).then(function(t){n.setSourceBuffer(t),e.$30(t,r)});t.push(o)}),r("oz-player/shims/OzMaybeNativePromise").all(t)});t.then(function(){if(e.$16&&e.$16(),e.$19!=null&&(e.$1.currentTime=e.$19),e.$15){var t=e.$1.play();return t==null?void 0:t.catch(function(){})}}).catch(function(t){e.$20.emitError(t)})},t.$28=function(){var e=this;if(this.$11.getBool("msm_refactor_wait_for_sourceopen")){if(this.$2.readyState==="open")return r("oz-player/shims/OzMaybeNativePromise").resolve();var t=new(r("oz-player/shims/OzDeferred"))(r("oz-player/shims/OzMaybeNativePromise")),n=r("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$2,"sourceopen",function(){n.remove(),t.resolve(),e.$31()});return this.$3.addSubscriptions(n),t.getPromise()}else{if(this.$2.readyState==="open")return r("oz-player/shims/OzMaybeNativePromise").resolve();var o=new(r("oz-player/shims/OzDeferred"))(r("oz-player/shims/OzMaybeNativePromise"));return this.$3.addSubscriptions(r("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$2,"sourceopen",function(){o.resolve(),e.$31()})),o.getPromise()}},t.$29=function(t){var e=this;if(this.$11.getBool("msm_refactor_wait_for_sourceopen"))return r("oz-player/shims/OzMaybeNativePromise").resolve().then(function(){return e.$32(t)}).catch(function(e){var n=o("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SOURCE_BUFFER",description:'Failed to addSourceBuffer("'+t+'"): '+String(e),extra:{originalError:e,code:r("oz-player/utils/OzCustomErrorCode").SOURCE_BUFFER_MANAGER_ADD_SOURCE_BUFFER_ERROR.toString()}});throw n});try{return this.$32(t)}catch(e){var n=o("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SOURCE_BUFFER",description:'Failed to addSourceBuffer("'+t+'"): '+(e.message||String(e)),extra:{originalError:e,code:r("oz-player/utils/OzCustomErrorCode").SOURCE_BUFFER_MANAGER_ADD_SOURCE_BUFFER_ERROR.toString()}});throw n}},t.$32=function(t){var e=this;{var n;return t.includes("vtt")?n=this.$33(t):n=this.$28().then(function(){return new(r("oz-player/media_source/OzMSESourceBufferImpl"))(e.$2.addSourceBuffer(t),t,e.$11,e.$23)}),n.then(function(n){return e.$6.push(n),n.registerOnUpdateListener(function(){e.$5.cloneContext().getOperationLogger("source_buffer_update_start").setType(o("oz-player/utils/OzMimeUtil").getMimeType(t)).setMediaSourceSourceBuffer(o("oz-player/utils/OzMimeUtil").getMimeType(t),n).setType(o("oz-player/utils/OzMimeUtil").getMimeType(t)).log()}),e.$5.getOperationLogger("add_source_buffer").setMediaSourceSourceBuffer(o("oz-player/utils/OzMimeUtil").getMimeType(t),n).log(),n})}},t.$30=function(t,n){var e=this;this.$4.addSubscriptions(t.registerOnUpdateEndListener(function(){e.$31()}))},t.$33=function(t){var e=this;return r("oz-player/shims/getOzVTTSourceBufferImpl")().then(function(n){if(e.$21!=null){var a=new n({onCaptionsChanged:e.$21,config:e.$11}),i=r("oz-player/shims/ozThrottle")(function(){a.setCurrentVideoTime(e.$1.currentTime)},200);return e.$3.addSubscriptions(r("oz-player/shims/OzDOMEventListener").listenDOMEvent(e.$1,"timeupdate",function(){i()}),{remove:function(){i=function(){}}}),a}else throw o("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SOURCE_BUFFER",description:'Failed to addSourceBuffer("'+t+'"): No handleVttCaptionsUpdated callback provided',extra:{code:r("oz-player/utils/OzCustomErrorCode").SOURCE_BUFFER_MANAGER_ADD_SOURCE_BUFFER_ERROR.toString()}})})},t.createSourceBufferManager=function(t,n,a,i){var e=this;return(this.$11.getBool("msm_refactor_wait_for_sourceopen")?this.$29(n).then(function(e){return[void 0,e]}):r("oz-player/shims/OzMaybeNativePromise").all([this.$28(),this.$29(n)])).then(function(a){var i=a[0],l=a[1],s=new(r("oz-player/media_source/SourceBufferManager"))(t,l,e.$11,e.$9,function(){return e.$2.readyState},e.$5.cloneContext().setType(o("oz-player/utils/OzMimeUtil").getMimeType(n)));return e.$30(l,n),e.$7.set(n,s),s}).catch(function(n){var a=o("oz-player/utils/OzErrorUtils").isOzError(n)?n.getExtra():void 0,i=a==null?void 0:a.code,l=o("oz-player/utils/OzErrorUtils").isOzError(n)?""+n.getType()+(i!=null?"#"+i:"")+": "+n.getDescription():String(n),s=o("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SOURCE_BUFFER",description:"Failed to create SBM#"+t+": "+l+", support AAC-LC="+(e.$2.constructor.isTypeSupported("audio/mp4; codecs=mp4a.40.2")?"true":"false")+", readyState="+e.$2.readyState,extra:babelHelpers.extends({},a,{originalError:n,code:r("oz-player/utils/OzCustomErrorCode").SOURCE_BUFFER_MANAGER_CREATE_ERROR.toString()})});throw s})},t.getReadyState=function(){return this.$2.readyState},t.getMediaSource=function(){return this.$2},t.notifyEndOfStream=function(t,n){var e=this,o=new(r("oz-player/shims/OzDeferred"))(r("oz-player/shims/OzMaybeNativePromise"));return this.$3.addSubscriptions(r("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$2,"sourceended",function(){o.resolve()})),this.$8.push(function(r){if(r.readyState==="open"){var o=e.$5.getOperationLogger("end_of_stream");o.setInitiator(t).setReason(n),o.log(),r.endOfStream()}}),this.$31(),o.getPromise()},t.updateDuration=function(t,n){var e=this,a=this.$2.duration;Number.isFinite(a)&&(!n||a>=t)||(this.$8.push(function(n){n.duration!==a&&!(isNaN(n.duration)&&isNaN(a))&&r("oz-player/shims/ozReportUnexpectedError")(o("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SOURCE_BUFFER",description:"mediaSource duration discrepancy: "+n.duration+" != "+a}),"MediaSourceManager updateDuration","warn");var i=e.$11.getBool("msm_refactor_wait_for_sourceopen")?n.duration!==1/0&&t<n.duration:t<n.duration;if(i){e.$5.getOperationLogger("media_source_update_duration").setMediaSourcePreviousDuration(n.duration).setMediaSourceNewDuration(t).setResult("failed").log();return}e.$5.getOperationLogger("media_source_update_duration").setMediaSourcePreviousDuration(n.duration).setMediaSourceNewDuration(t).log(),n.duration=t}),this.$31())},t.detach=function(){this.$18&&(r("oz-player/shims/ozClearTimeout")(this.$18),this.$18=null),this.$5.getOperationLogger("source_buffer_detach").unsetMediaSourceSourceBuffers(),this.$27(null);for(var e=0;e<this.$2.sourceBuffers.length;e++){var t=this.$2.sourceBuffers[e];this.$2.removeSourceBuffer(t)}this.$3.release(),this.$3.engage(),this.$4.release(),this.$4.engage(),this.$8=[],this.$10=!1,this.$12=!0},t.$35=function(){return!this.$34()&&this.$2.readyState==="open"&&!this.$10&&!this.$12},t.$34=function(){return this.$6.some(function(e){return e.getIsUpdating()})},t.onError=function(t){return this.$20.onError(t)},e})();l.default=e}),98);
__d("oz-player/media_source/OzMediaSeekableRangeManager",["oz-player/shims/OzSubscriptionsHandler"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t){var n=this;this.$5=function(e){e===void 0&&(e=!0);var t=n.$2;if(t){var r=t.getTimeRanges();if(r.length){var o=r[r.length-1];n.$1.updateDuration(o.endTime,e)}}},this.$1=e,this.$3=new(r("oz-player/shims/OzSubscriptionsHandler")),this.$4=t}var t=e.prototype;return t.setTimeRangeProvider=function(t){this.$3.release(),this.$3.engage(),this.$3.addSubscriptions(t.addUpdateListener(this.$5)),this.$2=t},t.listenToMediaStreamInitAppended=function(t){var e=this;return t.addListener("initAppended",function(){e.$5(!1)})},t.destroy=function(){this.$3.release()},e})();l.default=e}),98);
__d("oz-player/networks/OzCreateErrorStream",["oz-player/shims/OzStreams"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return new(o("oz-player/shims/OzStreams")).OzReadableStream({pull:function(n){n.error(e)}})}l.default=e}),98);
__d("oz-player/shims/OzFetchAPI",[],(function(t,n,r,o,a,i){"use strict";var e=function(n,r){return t.fetch(n,r)},l=function(n,r){return new t.Response(n,r)};i.fetch=e,i.Response=l}),66);
__d("oz-player/networks/FetchWithTimeout",["oz-player/shims/OzFetchAPI","oz-player/shims/ozClearTimeout","oz-player/shims/ozSetTimeoutAcrossTransitions"],(function(t,n,r,o,a,i,l){"use strict";function e(e,n,a,i){var l=null,s;if("AbortController"in t&&a!=null&&a!=0){var u=new AbortController;l=r("oz-player/shims/ozSetTimeoutAcrossTransitions")(function(){return u.abort()},a),s=babelHelpers.extends({},n,{signal:u.signal})}else s=babelHelpers.extends({},n);return i!=null&&(s=babelHelpers.extends({},s,{referrer:i})),o("oz-player/shims/OzFetchAPI").fetch(e,s).then(function(e){return r("oz-player/shims/ozClearTimeout")(l),e})}l.default=e}),98);
__d("oz-player/networks/OzHTTPHeaders",["oz-player/shims/ozvariant"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(){this.$1=new Map}var t=e.prototype;return t.append=function(t,n){var e=t.toLowerCase(),r=this.$1.get(e);r!=null?this.$1.set(e,r+", "+n):this.$1.set(e,n)},t.get=function(t){var e=t.toLowerCase(),n=this.$1.get(e);return n!=null?n:null},t.entries=function(){return this.$1.entries()},t.has=function(t){return this.get(t)!==null},e})(),s=t.Headers,u=s&&s.prototype,c=s&&u&&typeof u.append=="function"&&typeof u.entries=="function"&&typeof u.get=="function"&&typeof u.has=="function"?s:e;function d(e){if(e==null)return null;if(typeof e=="object"&&typeof e.append=="function"&&typeof e.get=="function"&&typeof e.has=="function"){if(typeof e.entries=="function")return e;if(typeof e.forEach=="function"){var t=new c;return e.forEach(function(e,n){t.append(n,e)}),t}}return r("oz-player/shims/ozvariant")(!1,"Malformed Headers object: %s %s",typeof e,String(e)),null}l.OzHTTPHeaders=c,l.maybeConvertHeadersToOzHTTPHeaders=d}),98);
__d("oz-player/utils/arrayBuffer2OzReadableStream",["oz-player/shims/OzStreams"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return new(o("oz-player/shims/OzStreams")).OzReadableStream({start:function(n){var t=new Uint8Array(e);n.enqueue(t),n.close()}})}l.default=e}),98);
__d("oz-player/utils/maybeConvertReadableStreamToOzReadableStream",["asyncToGeneratorRuntime","oz-player/shims/OzStreams"],(function(t,n,r,o,a,i,l){"use strict";function e(e){if(!o("oz-player/shims/OzStreams").OzReadableStreamIsPolyfilled)return e;var t=e.getReader();return new(o("oz-player/shims/OzStreams")).OzReadableStream({start:(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){for(;;){var n=yield t.read();if(n.done)break;e.enqueue(n.value)}e.close()});function r(t){return e.apply(this,arguments)}return r})()})}l.default=e}),98);
__d("oz-player/utils/processFetchResponse",["oz-player/networks/OzHTTPHeaders","oz-player/shims/OzMaybeNativePromise","oz-player/utils/arrayBuffer2OzReadableStream","oz-player/utils/maybeConvertReadableStreamToOzReadableStream"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.body,n=e.ok,a=e.status,i=e.headers;return t!=null?r("oz-player/shims/OzMaybeNativePromise").resolve({ok:n,status:a,headers:o("oz-player/networks/OzHTTPHeaders").maybeConvertHeadersToOzHTTPHeaders(i),body:r("oz-player/utils/maybeConvertReadableStreamToOzReadableStream")(t),arrayBuffer:function(){return e.arrayBuffer()}}):e.arrayBuffer().then(function(e){return{ok:n,status:a,headers:o("oz-player/networks/OzHTTPHeaders").maybeConvertHeadersToOzHTTPHeaders(i),body:r("oz-player/utils/arrayBuffer2OzReadableStream")(e),arrayBuffer:function(){return r("oz-player/shims/OzMaybeNativePromise").resolve(e)}}})}l.default=e}),98);
__d("oz-player/networks/OzFetchRequestImplementation",["oz-player/networks/FetchWithTimeout","oz-player/utils/processFetchResponse"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,o,a,i,l,s){var u=n?n.networkTimeoutMs:null,c=r("oz-player/networks/FetchWithTimeout")(e,t,u);return c.then(function(e){var t=e.ok,n=e.status,a=e.headers;return o!=null&&!t&&typeof e.text=="function"?e.text().then(function(r){return{ok:t,status:n,headers:a,body:r,arrayBuffer:function(){return e.arrayBuffer()}}}):r("oz-player/utils/processFetchResponse")(e)})}var s=e,u=s;l.default=u}),98);
__d("oz-player/networks/withRetries",["Promise","asyncToGeneratorRuntime","oz-player/shims/ozSetTimeoutAcrossTransitions"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,o,a){return new(e||(e=n("Promise")))(function(e,i){function l(e){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(n){try{e(yield t())}catch(e){if(n>0){var s=typeof a=="function"?a(o-n):a;r("oz-player/shims/ozSetTimeoutAcrossTransitions")(function(){l(n-1)},s)}else i(e)}}),s.apply(this,arguments)}l(o)})}l.default=s}),98);
__d("oz-player/networks/OzFetchWithCache",["oz-player/networks/OzFetchRequestImplementation","oz-player/networks/withRetries","oz-player/shims/OzMaybeNativePromise","oz-player/utils/OzErrorUtils","oz-player/utils/arrayBuffer2OzReadableStream","oz-player/utils/processFetchResponse"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.config,n=e.url,a=e.http,i=e.overrideOzRequestImplementation,l=e.options,s=e.prefetchCache,u=e.mediaStreamType,c=e.onPerfEntryAvailable,d=e.dataAppendedCallback,m=e.dataAppendedErrorCallback,p=i!=null?function(){return i.apply(void 0,arguments)}:r("oz-player/networks/OzFetchRequestImplementation"),_=s?s.getCacheValue(n):null,f=_,g=!1,h;if(f)g=!0,h=f.then(function(e){if(e.initiator==="FETCH"){var t=e.response,n=t.ok,a=t.status,i=t.headers;return!n&&typeof e.response.text=="function"?e.response.text().then(function(t){return{ok:!1,status:a,headers:i,body:t,arrayBuffer:function(){return e.response.arrayBuffer()}}}):r("oz-player/utils/processFetchResponse")(e.response)}else if(e.initiator==="XHR_REQUEST"){var l=r("oz-player/utils/arrayBuffer2OzReadableStream")(e.response);return{body:l,status:200,headers:null,ok:!0,arrayBuffer:function(){return r("oz-player/shims/OzMaybeNativePromise").resolve(e.response)}}}else throw o("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_UNEXPECTED_CACHE_INITIATOR",description:"Unable to handle request initiator: "+e.initiator})}).catch(function(e){return p(n,a,null,null,u,c,d,m)});else{var y,C=(y=l==null?void 0:l.retryAttempts_SIDX_USE_ONLY)!=null?y:0;if(C>0){var b,v=(b=l==null?void 0:l.retryTimeoutMs_SIDX_USE_ONLY)!=null?b:100;h=r("oz-player/networks/withRetries")(function(){return p(n,a,l,t,u,c,d,m)},C,v)}else h=p(n,a,l,t,u,c,d,m)}return{promise:h,retrievedFromCache:g}}l.default=e}),98);
__d("oz-player/utils/OzVideoUrlUtils",[],(function(t,n,r,o,a,i){"use strict";var e=-2147483648,l=~e,s=e+1;function u(e){var t=e|0;return Math.max(s,Math.min(t,l))}function c(e){var t=Number.parseInt(e,16);return Number.isFinite(t)?new Date(u(t)*1e3):null}function d(){return u(Date.now()/1e3)}var m={OE:"oe",OE2:"oe2",ODM:"odm",USS:"uss"};function p(e){var t=e instanceof URL?e.searchParams:new URL(e).searchParams,n=t.get(m.OE),r=n==null?void 0:c(n);return{expirationDate:r}}function _(e){var t=e instanceof URL?e.searchParams:new URL(e).searchParams;return t.get(m.OE2)!==null||t.get(m.ODM)!==null||t.get(m.USS)!==null}function f(e){var t=p(e),n=t.expirationDate;return n!=null&&n<=new Date(d()*1e3)}i.DEFAULT_UNIXTIME=e,i.MAX_INT=l,i.parseCdnUrlParams=p,i.isShortenedExpiryTimestampCdnUrl=_,i.isCdnUrlExpired=f}),66);
__d("oz-player/networks/OzNetworkRequestStream",["Promise","oz-player/networks/OzCreateErrorStream","oz-player/networks/OzFetchWithCache","oz-player/shims/OzURI","oz-player/shims/ozvariant","oz-player/utils/OzCustomErrorCode","oz-player/utils/OzErrorUtils","oz-player/utils/OzResourceTimingUtils","oz-player/utils/OzVideoUrlUtils"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){function t(e){this.$8=!1,this.$10="auto";var t=e.debugName,n=e.config,r=e.baseUri,o=e.baseUriDecisionTime,a=e.options,i=e.requestParamCreator,l=e.networkRequestStreamHandlers,s=e.overrideOzRequestImplementation,u=e.prefetchCache,c=e.networkRequestFetchPriority,d=e.networkRequestStreamRetryHandler,m=e.networkRequestUrlRefreshHandler,p=e.dynamicVideoLibrary,_=e.mediaStreamType,f=e.dataAppendedCallback,g=e.dataAppendedErrorCallback;this.$1=t,this.$2=r,this.$3=a,this.$4=i,this.$11=l!=null?l:[],this.$10=c,this.$12=d,this.$13=m,this.$9=s,this.$14=u,this.$15=n,this.$16=p,this.$17=o,this.$18=_,this.$19=f,this.$20=g}var a=t.prototype;return a.$21=function(t){var e=this,n=this.$4.createRequestParam(this.$2,t,this.$10),o=n.uri,a=n.http,i=o.toString();this.$5=i;var l=r("oz-player/networks/OzFetchWithCache")({config:this.$15,url:i,http:a,overrideOzRequestImplementation:this.$9,options:this.$3,prefetchCache:this.$14,mediaStreamType:this.$18,onPerfEntryAvailable:function(n){e.$22(n)},dataAppendedCallback:this.$19,dataAppendedErrorCallback:this.$20}),s=l.promise,u=l.retrievedFromCache;return this.$8=u,{requestPromise:s,requestUrl:i}},a.startStream=function(t){var e=this;return this.$23().then(function(){if(e.$15.getBool("video_cdn_url_refresh")&&!o("oz-player/utils/OzVideoUrlUtils").isShortenedExpiryTimestampCdnUrl(e.$2.toString())&&o("oz-player/utils/OzVideoUrlUtils").isCdnUrlExpired(e.$2.toString()))return r("oz-player/networks/OzCreateErrorStream")(o("oz-player/utils/OzErrorUtils").createOzNetworkError({description:"OzNetworkRequestStream("+e.$1+") CDN URL expired.",responseStatus:0,responseHeaders:null,requestUrl:e.$2.toString()}));var n=e.$21(t),a=n.requestPromise,i=n.requestUrl,l=i,s=Date.now();return a.then(function(n){var a;return(a=e.$16)==null||a.updateWithResponse(i,s,e.$17,n),e.$7=n,e.$12!=null&&n.ok===!1?e.$12(n,function(){var n=e.$21(t),r=n.requestPromise,o=n.requestUrl;return l=o,r},l).catch(function(e){throw o("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_NETWORK_REQUEST_STREAM_RETRY_HANDLER_ERROR",description:String(e),extra:{originalError:e,code:r("oz-player/utils/OzCustomErrorCode").NETWORK_REQUEST_STREAM_RETRY_HANDLER_ERROR,url:l}})}):n}).then(function(t){for(var n=[],a=0;a<e.$11.length;a++)try{var i=e.$11[a].onResponse(t,l);i&&n.push(i)}catch(e){var s=e;return r("oz-player/networks/OzCreateErrorStream")(s)}var u=t.body,c=t.headers,d=t.ok,m=t.status;if(!d)return r("oz-player/networks/OzCreateErrorStream")(o("oz-player/utils/OzErrorUtils").createOzNetworkError({description:"OzNetworkRequestStream("+e.$1+") HTTP status not OK",responseStatus:m,responseHeaders:c,requestUrl:l,responseBody:typeof u=="string"?u:void 0}));typeof u!="string"&&typeof u.getReader=="function"||r("oz-player/shims/ozvariant")(0,3287);for(var p=u,_=0;_<n.length;_++)p=p.pipeThrough(n[_]);return p},function(t){for(var n=[],a=0;a<e.$11.length;a++)try{var i=e.$11[a].onError(t,l);i&&n.push(i)}catch(e){var s=e;return r("oz-player/networks/OzCreateErrorStream")(s)}if(t instanceof TypeError){for(var u=r("oz-player/networks/OzCreateErrorStream")(o("oz-player/utils/OzErrorUtils").createOzNetworkError({description:"OzNetworkRequestStream("+e.$1+") TypeError: "+t.message,responseStatus:0,responseHeaders:null,requestUrl:l})),c=0;c<n.length;c++)u=u.pipeThrough(n[c]);return u}throw t}).catch(function(e){if(o("oz-player/utils/OzErrorUtils").isOzError(e)&&e.getType()==="OZ_NETWORK_REQUEST_STREAM_RETRY_HANDLER_ERROR")throw e;if(e.name==="AbortError"){var t=e.message;return r("oz-player/networks/OzCreateErrorStream")({type:e.name,status:e.code,url:l,message:t})}return r("oz-player/networks/OzCreateErrorStream")({type:"stream_processing",status:0,url:l,message:"Stream processing error. "+e})})})},a.$22=function(t){this.$6=t},a.getLastPerformanceEntry=function(){return this.$6!=null?this.$6:this.$5==null?null:o("oz-player/utils/OzResourceTimingUtils").getLatestResourceTimingEntry(this.$5)},a.getLastRequestUrl=function(){return this.$5},a.getLastResponse=function(){return this.$7},a.retrievedFromCache=function(){return this.$8},a.$23=function(){var t=this;return this.$15.getBool("video_cdn_url_refresh")&&!o("oz-player/utils/OzVideoUrlUtils").isShortenedExpiryTimestampCdnUrl(this.$2.toString())&&o("oz-player/utils/OzVideoUrlUtils").isCdnUrlExpired(this.$2.toString())&&this.$13?this.$13(this.$2.toString()).then(function(e){e.refreshedUrl!=null&&e.reason==="OK"&&(t.$2=new(r("oz-player/shims/OzURI"))(e.refreshedUrl))}):(e||(e=n("Promise"))).resolve()},t})();l.default=s}),98);
__d("oz-player/manifests/OzByteRange",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){return e.startByte===t.startByte}function l(e,t){return t.endByte===null?!1:e.startByte===t.endByte+1}function s(e,t){return e.startByte<t.startByte?!1:t.endByte==null||t.endByte>=e.startByte}function u(e,t){var n=e,r=t;if(r.startByte<n.startByte){var o=n;n=r,r=o}if(n.endByte==null)return{startByte:n.startByte,endByte:null};if(r.startByte>n.endByte+1)return null;var a=r.endByte==null||r.endByte>n.endByte?r.endByte:n.endByte;return{startByte:n.startByte,endByte:a}}function c(e,t){return t.endByte==null?null:e.startByte>t.endByte?{startByte:e.startByte,endByte:e.endByte}:e.endByte!=null&&e.endByte<=t.endByte?null:{startByte:t.endByte+1,endByte:e.endByte}}function d(e){return e.endByte==null?null:e.endByte-e.startByte+1}i.startsAtSame=e,i.startsImmediateAfter=l,i.startsDuring=s,i.union=u,i.disjoinAfter=c,i.getLength=d}),66);
__d("oz-player/networks/OzProducerInterruptedError",[],(function(t,n,r,o,a,i){"use strict";var e=(function(e){function t(){return e.apply(this,arguments)||this}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error));i.default=e}),66);
__d("oz-player/networks/OzDeferredBuffer",["oz-player/networks/OzProducerInterruptedError","oz-player/shims/OzDeferred","oz-player/shims/OzMaybeNativePromise","oz-player/utils/OzErrorUtils"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){e===void 0&&(e={}),this.$2=[],this.$3=!1,this.$5=0;var t=e,n=t.disableArrayShift;this.$1=!!n}var t=e.prototype;return t.produce=function(t){this.$6(t)},t.signalProducerInterruption=function(){this.$6(new(r("oz-player/networks/OzProducerInterruptedError"))("producer interrupted"))},t.consume=function(t){var e=this;if(this.$3)throw o("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_DEFERRED_BUFFER",description:"A buffer can only be consumed by one client at a time"});this.$3=!0;var n=r("oz-player/shims/OzMaybeNativePromise").resolve();return this.isEmpty()&&(this.$4=new(r("oz-player/shims/OzDeferred"))(r("oz-player/shims/OzMaybeNativePromise")),n=this.$4.getPromise()),n.then(function(){if(e.$1){if(e.$2[e.$5]===void 0)throw o("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_DEFERRED_BUFFER",description:"buffer has no value at position "+e.$5})}else if(e.$2.length===0)throw o("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_DEFERRED_BUFFER",description:"buffer length must not be 0"});e.$4=null,e.$3=!1;var n=e.$1?e.$7(t):e.$8(t);if(n instanceof Uint8Array)return n;throw n})},t.$6=function(t){this.$2.push(t),this.$4&&this.$4.resolve()},t.$7=function(t){var e=this.$2[this.$5];if(e===void 0)return new Uint8Array([]);var n=e;if(!(n instanceof Uint8Array))return this.$2[this.$5]=void 0,this.$5++,n;if(t!==void 0&&n.length>t){var r=n.slice(t);n=n.slice(0,t),this.$2[this.$5]=r}else this.$2[this.$5]=void 0,this.$5++;return n},t.$8=function(t){if(this.$2.length===0)return new Uint8Array([]);var e=this.$2[0];if(!(e instanceof Uint8Array))return this.$2.shift(),e;if(t!==void 0&&e.length>t){var n=e.slice(t);e=e.slice(0,t),this.$2[0]=n}else this.$2.shift();return e},t.isEmpty=function(){return this.$1?this.$2[this.$5]===void 0:this.$2.length===0},e})();l.default=e}),98);
__d("oz-player/utils/ozPipeErrorTo",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){try{e==null||e.error(t)}catch(e){}}i.default=e}),66);
__d("oz-player/networks/OzPausableRangeStream",["oz-player/manifests/OzByteRange","oz-player/networks/OzDeferredBuffer","oz-player/shims/OzDeferred","oz-player/shims/OzMaybeNativePromise","oz-player/utils/OzErrorUtils","oz-player/utils/ozPipeErrorTo"],(function(t,n,r,o,a,i,l){"use strict";function e(){return o("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_STREAM",description:"Upstream has an inconsistent range"})}var s=(function(){function e(){this.$1=0}var t=e.prototype;return t.setBytesToSkip=function(t){this.$1=t},t.setBytesSkipped=function(t){this.$1-=t},t.getBytesToSkip=function(){return this.$1},t.hasMoreBytesToSkip=function(){return this.$1>0},e})(),u=(function(){function t(n,o,a,i,l){var u=this;this.$5=!1,this.$7=0,this.$8=0,this.$13=!1,this.$14=new s,this.$15=!1,this.$16=!1,this.$17=!1,this.startStream=function(){u.$13=!0;var e={startByte:u.$1.startByte,endByte:u.$1.endByte};u.$15?u.$8&&(u.$3.produce("skip_buffered_bytes"),u.$8=0):e.startByte+=u.$8;var n=u.$4;return u.$2.startStream(e).then(function(e){return e.pipeTo(u.$16?n:u.$4).then(function(){u.$12&&u.$12.resolve("stream_done")}).catch(function(e){u.$12&&!u.$12.isSettled()&&(u.$16&&e===t.STREAM_PAUSED?u.$12.resolve("stream_paused"):u.$12.reject(e))}),u.$12=new(r("oz-player/shims/OzDeferred"))(r("oz-player/shims/OzMaybeNativePromise")),{statusPromise:u.$12.getPromise()}})},this.$18=n,this.$19=o,this.$1=a,this.$2=i;var c=l||{},d=c.fixStreamingUndefinedEndByte,m=c.disableDeferredBufferArrayShift,p=c.enablePausableStreamResumeFromStartDangerously,_=c.fixPausePreReadableStream,f=c.throwErrorWhenAborted;this.$11=!!d,this.$15=!!p,this.$16=!!_,this.$17=!!f,this.$3=new(r("oz-player/networks/OzDeferredBuffer"))({disableArrayShift:!!m}),this.$6=new this.$18({start:function(t){u.$10=t},pull:function(n){if((u.$11&&u.$1.endByte===null&&u.$5||u.$7===u.$20())&&u.$3.isEmpty())return n.close(),r("oz-player/shims/OzMaybeNativePromise").resolve();var t=function(){var o=u.$14.hasMoreBytesToSkip()?u.$14.getBytesToSkip():void 0;return u.$3.consume(o).then(function(o){if(u.$14.hasMoreBytesToSkip())return u.$14.setBytesSkipped(o.length),t();u.$7+=o.length;var a=u.$20();a!==null&&u.$7>(a||0)&&r("oz-player/utils/ozPipeErrorTo")(u.$10,e()),n.enqueue(o)}).catch(function(e){if(e==="skip_buffered_bytes")return u.$14.setBytesToSkip(u.$7),t();throw e})};return t()},cancel:function(t){u.$12&&u.$12.resolve("stream_cancelled"),r("oz-player/utils/ozPipeErrorTo")(u.$9,t)}}),this.$4=this.$21()}var n=t.prototype;return n.$20=function(){var e=this.$1,t=e.startByte,n=e.endByte;return n!=null?n-t+1:null},n.$21=function(){var t=this;return new this.$19({start:function(n){t.$9=n},write:function(n){t.$3.produce(n),t.$8+=n.length},close:function(){t.$5=!0;var n=t.$1,o=n.endByte,a=n.startByte;t.$11&&o===null&&t.$3.produce(new Uint8Array([])),o!==null&&t.$8!==(o||0)-a+1&&r("oz-player/utils/ozPipeErrorTo")(t.$10,e())},abort:function(n){t.$12&&(t.$17?t.$12.reject(n):t.$12.resolve("stream_aborted")),r("oz-player/utils/ozPipeErrorTo")(t.$10,n)}})},n.getStream=function(){return this.$6},n.pauseStream=function(){r("oz-player/utils/ozPipeErrorTo")(this.$9,t.STREAM_PAUSED),this.$12&&this.$12.resolve("stream_paused"),this.$4=this.$21()},n.getByteRange=function(){return this.$1},n.getBytesStreamed=function(){return this.$7},n.tryConcatByteRange=function(t){return this.$13||!o("oz-player/manifests/OzByteRange").startsImmediateAfter(t,this.$1)?!1:(this.$1={startByte:this.$1.startByte,endByte:t.endByte},!0)},t})();u.STREAM_PAUSED="streamPaused",l.default=u}),98);
__d("oz-player/networks/RequestParamCreator",["oz-player/shims/OzURI"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t,n){var e=this;this.createRequestParam=function(t,n,o){var a=new(r("oz-player/shims/OzURI"))(t.toString());if(n){var i=n.startByte,l=n.endByte;i===0&&l==null||(a.addQueryData({bytestart:n.startByte}),l!=null&&a.addQueryData({byteend:l}))}if(e.$2){var s=e.$2(a);s&&Object.keys(s).forEach(function(e){var t=s[e];a.addQueryData(e,t)})}var u=e.$1&&e.$1(a)?"include":"same-origin";return{uri:a,http:{credentials:u,priority:o}}},this.$1=t,this.$2=n};l.default=e}),98);
__d("oz-player/networks/getOzSegmentStreamableRange",[],(function(t,n,r,o,a,i){"use strict";function e(e){if(!e.length)return null;var t=e[0].getURI().toString(),n=e[0].getByteRange();if(!n)return null;for(var r=n,o=1;o<e.length;o++){var a=e[o];if(a.getURI().toString()!==t)return null;var i=a.getByteRange();if(!r||!i||r.endByte===null||i.startByte!==r.endByte+1)return null;r=i}return{startByte:n.startByte,endByte:r.endByte}}i.default=e}),66);
__d("oz-player/utils/OzNetworkRequestLoggingUtils",["oz-player/shims/OzNetworkDiagnostics","oz-player/utils/OzResourceTimingUtils"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t){return t?parseInt(t.get("content-length"),10):null},s=function(t){return t?t.get("x-fb-fna-hit"):null},u=function(t){return t?t.get("x-fb-edge-hit"):null},c=function(t){return t?t.get("x-fb-origin-hit"):null},d=function(t){return t?parseInt(t.get("x-fb-dynamic-latest-segment-id"),10):null},m=function(t,n){var e=o("oz-player/utils/OzResourceTimingUtils").getLatestResourceTimingEntry(n);e&&t.setTimeToFirstByte(Math.round(e.responseStart-e.startTime)).setTimeToLastByte(Math.round(e.responseEnd-e.startTime)).setTimeToRequestStart(Math.round(e.requestStart-e.startTime))},p=function(n,o,a,i,l,p){a.length&&n.setSegmentCount(a.length),o!=null&&o!==""&&m(n,String(o)),n.setResource(o!=null&&o!==""?o:null).setInitiator("fetch").setTimeToRequestSent(Math.round(Math.floor(i))).setLiveheadSeqNumHeader(d(p==null?void 0:p.headers)).setContentLengthHeader(e(p==null?void 0:p.headers)).setEdgeHitHeader(u(p==null?void 0:p.headers)).setOriginHitHeader(c(p==null?void 0:p.headers)).setFNAHitHeader(s(p==null?void 0:p.headers)).setResponseTimeMsHeader(r("oz-player/shims/OzNetworkDiagnostics").getResponseTimeMs(p==null?void 0:p.headers)).setUserInfo({segmentPTSHeader:String(r("oz-player/shims/OzNetworkDiagnostics").getDvlSegmentPTS(p==null?void 0:p.headers))}).setCode(p==null?void 0:p.status).setLength(l)},_=function(n,o,a,i,l,s,p){o!=null&&o!==""&&m(n,String(o)),n.setResource(o!=null&&o!==""?o:null).setLiveheadSeqNumHeader(d(i==null?void 0:i.headers)).setContentLengthHeader(e(i==null?void 0:i.headers)).setEdgeHitHeader(u(i==null?void 0:i.headers)).setOriginHitHeader(c(i==null?void 0:i.headers)).setResponseTimeMsHeader(r("oz-player/shims/OzNetworkDiagnostics").getResponseTimeMs(i==null?void 0:i.headers)).setCode(i==null?void 0:i.status).setLength(a).setClientTimeBegin(l).setClientTimeDuration(s-l).setClientTimeEnd(s).setUserInfo(p!=null&&p>0?{chunkSize:String(p)}:null)};l.setPerformanceLoggingAttributes=m,l.setFetchStreamLoggingAttributes=p,l.setBandwidthSampledLoggingAttributes=_}),98);
__d("oz-player/networks/OzNetworkManager",["oz-player/loggings/OzLoggingUtils","oz-player/networks/OzNetworkRequestStream","oz-player/networks/OzPausableRangeStream","oz-player/networks/RequestParamCreator","oz-player/networks/getOzSegmentStreamableRange","oz-player/shims/OzStreams","oz-player/shims/OzURI","oz-player/shims/ozvariant","oz-player/utils/OzNetworkRequestLoggingUtils"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){this.$10=null,this.$15="auto";var t=e.config,n=e.prefetchCache,o=e.networkRequestStreamHandlers,a=e.getOverrideOzRequestImplementation,i=e.getShouldIncludeCredentials,l=e.getCustomRequestParametersForURI,s=e.networkRequestFetchPriority,u=s===void 0?"auto":s,c=e.networkRequestStreamRetryHandler,d=e.networkRequestUrlRefreshHandler,m=e.setCustomFetchStreamLoggingAttributes,p=e.dynamicVideoLibrary,_=e.configureCustomRequestParametersForSegment,f=e.onResourceTimingBufferFull,g=e.bandwidthEstimator;this.$2=t,this.$8=i,this.$9=l,this.$1=new(r("oz-player/networks/RequestParamCreator"))(this.$8,this.$9),this.$3=n,this.$4=o,this.$5=c,this.$6=d,this.$7=a,this.$10=m,this.$11=p,this.$12=_,this.$13=f,this.$14=g,this.$15=u}var t=e.prototype;return t.destroy=function(){},t.request=function(t){var e=t.debugName,n=t.segments,o=t.pipeThroughRangeStreamProviders,a=t.loggerProvider,i=t.requestOptions,l=t.mediaStreamType,s=t.dataAppendedCallback,u=t.dataAppendedErrorCallback;n.length>0||r("oz-player/shims/ozvariant")(0,212);var c=r("oz-player/networks/getOzSegmentStreamableRange")(n)||{startByte:0,endByte:null},d=this.$7?this.$7():null,m=this.$16(n[0]),p=new(r("oz-player/networks/OzNetworkRequestStream"))({debugName:e,config:this.$2,baseUri:m,baseUriDecisionTime:null,options:i,requestParamCreator:this.$1,networkRequestFetchPriority:this.$15,networkRequestStreamHandlers:this.$4,networkRequestUrlRefreshHandler:this.$6,overrideOzRequestImplementation:d,prefetchCache:this.$3,networkRequestStreamRetryHandler:this.$5,mediaStreamType:l,dataAppendedCallback:s,dataAppendedErrorCallback:u});return this.$17(c,p,o,a,n)},t.createPausableStream=function(t){var e=t.debugName,n=t.segments,o=t.pipeThroughRangeStreamProviders,a=t.loggerProvider,i=t.mediaStreamType,l=t.dataAppendedCallback,s=t.dataAppendedErrorCallback;n.length>0||r("oz-player/shims/ozvariant")(0,212);var u=r("oz-player/networks/getOzSegmentStreamableRange")(n)||{startByte:0,endByte:null},c=null,d=this.$2.getNumber("network_seg_timeout_ms");d>0&&(c={networkTimeoutMs:d});var m=this.$7?this.$7():null,p=new(r("oz-player/networks/OzNetworkRequestStream"))({debugName:e,config:this.$2,baseUri:this.$16(n[0]),baseUriDecisionTime:n[0].getOptions().getSegmentNumDecisionTime(),options:c,requestParamCreator:this.$1,networkRequestFetchPriority:this.$15,networkRequestStreamHandlers:this.$4,networkRequestUrlRefreshHandler:this.$6,overrideOzRequestImplementation:m,prefetchCache:this.$3,networkRequestStreamRetryHandler:this.$5,dynamicVideoLibrary:this.$11,mediaStreamType:i,dataAppendedCallback:l,dataAppendedErrorCallback:s});return{pausableStream:this.$18(u,p,o||null,a),loggingPayloads:{getRequestUrl:function(){return p.getLastRequestUrl()||null},segments:n,getResponse:function(){return p.getLastResponse()}}}},t.requestRawUrl=function(t){var e=t.debugName,n=t.url,o=t.options,a=t.loggerProvider,i=this.$7?this.$7():null,l=new(r("oz-player/networks/OzNetworkRequestStream"))({debugName:e,config:this.$2,baseUri:new(r("oz-player/shims/OzURI"))(n),baseUriDecisionTime:null,options:o,networkRequestFetchPriority:this.$15,requestParamCreator:this.$1,networkRequestStreamHandlers:this.$4,networkRequestUrlRefreshHandler:this.$6,overrideOzRequestImplementation:i,prefetchCache:this.$3,networkRequestStreamRetryHandler:this.$5,dynamicVideoLibrary:this.$11,mediaStreamType:null,dataAppendedCallback:null,dataAppendedErrorCallback:null}),s={startByte:0,endByte:null};return this.$17(s,l,[],a)},t.$18=function(t,n,a,i){var e=n;if(a!=null)for(var l=0;l<a.length;l++){var s=a[l];e=s(this.$2,e,i,this.$13)}return new(r("oz-player/networks/OzPausableRangeStream"))(o("oz-player/shims/OzStreams").OzReadableStream,o("oz-player/shims/OzStreams").OzWritableStream,t,e,{fixStreamingUndefinedEndByte:!0,enablePausableStreamResumeFromStartDangerously:!0,fixPausePreReadableStream:!0,throwErrorWhenAborted:!0})},t.$17=function(t,n,r,a,i){var e=this;i===void 0&&(i=[]);var l=this.$18(t,n,r,a),s=l.startStream(),u=this.$19(s);if(a){var c=function(r){o("oz-player/utils/OzNetworkRequestLoggingUtils").setFetchStreamLoggingAttributes(r,n.getLastRequestUrl(),i,0,l.getBytesStreamed(),n.getLastResponse());var t=e.$10;t&&t(r,n.getLastRequestUrl(),n.getLastResponse())};o("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(u,a,"fetch_stream",c,c)}return{getStream:function(){return l.getStream()},cancel:function(){return l.pauseStream()},getStatusChangePromise:function(){return u}}},t.$19=function(t){return t.then(function(e){var t=e.statusPromise;return t.then(function(e){return"done"})})},t.$16=function(t){var e=this.$12,n=new(r("oz-player/shims/OzURI"))(t.getURI().toString());if(e){var o=e(t);o&&Object.keys(o).forEach(function(e){var t=o[e];n.addQueryData(e,t)})}return n},t.getBandwidthEstimator=function(){return this.$14},e.getStreamableSegmentsRange=function(t){return t.length?r("oz-player/networks/getOzSegmentStreamableRange")(t)?t.slice(0):[t[0]]:[]},e})();l.default=e}),98);
__d("oz-player/manifests/Mpd",["oz-player/shims/OzEventEmitter","oz-player/utils/OzErrorUtils"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t,n,r,o,a,i,l,s){var u;return u=e.call(this)||this,u.$Mpd$p_9=!1,u.$Mpd$p_1=t,u.$Mpd$p_5=i,u.$Mpd$p_2=n,u.$Mpd$p_3=r,u.$Mpd$p_4=o,u.$Mpd$p_6=a,u.$Mpd$p_7=l,u.$Mpd$p_8=s,u}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.markRefreshed=function(){this.$Mpd$p_10=Date.now()},n.getRefreshDate=function(){return this.$Mpd$p_10},n.updateLocation=function(t){this.$Mpd$p_6=t,this.$Mpd$p_9=!0,this.emit("locationUpdated")},n.getLocation=function(){return this.$Mpd$p_6},n.getMinimumUpdatePeriod=function(){return this.$Mpd$p_5},n.getVideoRepresentations=function(){return this.$Mpd$p_2},n.getVideoRepresentationsByVariant=function(t){return t.lang===null?this.$Mpd$p_2.filter(function(e){return e.getLang()===t.lang&&e.getRole()===t.role}):this.$Mpd$p_2.filter(function(e){return e.getLang()===t.lang&&e.getRole()===t.role})},n.getAudioRepresentationsByVariant=function(t){return t.lang===null?this.$Mpd$p_3.filter(function(e){return e.getLang()===t.lang&&e.getRole()===t.role}):this.$Mpd$p_3.filter(function(e){return e.getLang()===t.lang&&e.getRole()===t.role})},n.getAudioRepresentations=function(){return this.$Mpd$p_3},n.getApplicationRepresentations=function(){return this.$Mpd$p_4},n.getCustomField=function(t){var e=this.$Mpd$p_7.get(t);if(!e)throw o("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_MPD_PARSER",description:"Custom parser not specified for field "+t});try{return e(this.$Mpd$p_1)}catch(e){return null}},n.isStaticMpd=function(){return this.$Mpd$p_8},n.updateWith=function(t){this.$Mpd$p_9&&(this.$Mpd$p_9=!1,this.$Mpd$p_2.splice(0,this.$Mpd$p_2.length),this.$Mpd$p_3.splice(0,this.$Mpd$p_3.length),this.$Mpd$p_4.splice(0,this.$Mpd$p_4.length)),this.$Mpd$p_1=t.$Mpd$p_1,this.$Mpd$p_11(this.$Mpd$p_2,t.getVideoRepresentations()),this.$Mpd$p_11(this.$Mpd$p_3,t.getAudioRepresentations()),this.$Mpd$p_11(this.$Mpd$p_4,t.getApplicationRepresentations()),this.$Mpd$p_8=t.isStaticMpd(),this.$Mpd$p_5=t.getMinimumUpdatePeriod(),this.emit("updated")},n.blockTimeRange=function(t){this.$Mpd$p_2.forEach(function(e){return e.blockTimeRange(t)}),this.$Mpd$p_3.forEach(function(e){return e.blockTimeRange(t)}),this.$Mpd$p_4.forEach(function(e){return e.blockTimeRange(t)})},n.unblockTimeRange=function(){this.blockTimeRange({startTime:0,endTime:0})},n.$Mpd$p_11=function(t,n){for(var e=0;e<n.length;e++){for(var r=n[e],o=!1,a=0;a<t.length;a++){var i=t[a];if(r.getID()===i.getID()){i.updateWith(r),o=!0;break}}o||t.push(r)}},t})(r("oz-player/shims/OzEventEmitter"));l.default=e}),98);
__d("oz-player/manifests/OzApplicationRepresentation",["oz-player/manifests/OzRepresentationBase"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.apply(this,arguments)||this}return babelHelpers.inheritsLoose(t,e),t})(r("oz-player/manifests/OzRepresentationBase"));l.default=e}),98);
__d("oz-player/parsers/OzSegmentTemplateParser",["oz-player/manifests/OzSegmentOptions","oz-player/parsers/OzDefaultSegmentTimelineParser","oz-player/shims/OzURI","oz-player/utils/OzUrlHelper"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t){this.$3=new(r("oz-player/manifests/OzSegmentOptions")),this.$2=e,this.$1=t}var t=e.prototype;return t.getData=function(){return this.$1},t.getTimeRange=function(){return{startTime:0,endTime:0}},t.getByteRange=function(){return null},t.getURI=function(){return this.$2},t.getSequenceNumber=function(){return null},t.getOptions=function(){return this.$3},e})(),s=(function(){function t(e,t,n,o,a){this.$2=n,this.$1=t,this.$3=e,o?this.$4=o:this.$4=new(r("oz-player/parsers/OzDefaultSegmentTimelineParser")),this.$5=a}var n=t.prototype;return n.parseInitializationSegment=function(){var t=o("oz-player/utils/OzUrlHelper").joinUrlPaths(this.$2.baseUrl,this.$1.$.initialization);return new e(new(r("oz-player/shims/OzURI"))(t),this.$5)},n.parseSegmentsContainer=function(){return this.$4.parseSegmentsContainer(this.$3,this.$2,this.$1)},t})();l.default=s}),98);
__d("oz-player/manifests/OzZeroTimeRangeSegment",["oz-player/manifests/OzSegmentOptions"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t,n){this.$4=new(r("oz-player/manifests/OzSegmentOptions")),this.$1=e,this.$2=t,this.$3=n}var t=e.prototype;return t.getData=function(){return null},t.getURI=function(){return this.$1},t.getTimeRange=function(){return{startTime:0,endTime:0}},t.getByteRange=function(){return{startByte:this.$2,endByte:this.$3}},t.getSequenceNumber=function(){return null},t.getOptions=function(){return this.$4},e})();l.default=e}),98);
__d("oz-player/networks/OzNetworkRequestStreamBandwidthReporter",["oz-player/networks/OzTransformStream","oz-player/shims/OzNetworkDiagnostics","oz-player/utils/OzNetworkRequestLoggingUtils"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){var n=this;this.$8=Date.now(),this.$9=Date.now(),this.$10=0,this.$11=0,this.$12=function(){},this.$13=function(){},this.$14=function(){},this.$16=new(r("oz-player/networks/OzTransformStream")),this.$19=!1,this.$20=!1,this.$21=null,this.$22=function(e){n.$25(),e.length!=null&&(n.$11+=e.length),n.$26(),!n.$18&&n.$27()},this.$23=function(){if(!(n.$21!=null&&n.$21>0)){var e=Date.now()-n.$8,r=n.$1.getLastPerformanceEntry();r&&n.$13(r.responseStart-r.requestStart,r.responseEnd-r.requestStart,n.$11),!r&&t.__isresourcetimingbufferfull&&n.$15&&n.$15(),n.$3>0&&e>0&&n.$10===0&&n.$11>=n.$3&&n.$28(n.$11,e)}};var o=e.stream,a=e.loggerProvider,i=e.byteCountPerSample,l=e.minimumBytesToSampleOnClose,s=e.minimumSampleDuration,u=e.maximumSampleBandwidth,c=e.useResponseTimeMs,d=e.responseTimeHandicapMs,m=e.ignoreOnStreamWriteSamples,p=e.onResourceTimingBufferFull;this.$1=o,this.$17=a,this.$2=i,this.$3=l,this.$4=s,this.$5=u,this.$6=c,this.$7=d,this.$18=m,this.$16.addListener("writableWrite",this.$22),this.$16.addListener("writableClose",this.$23),this.$15=p}var n=e.prototype;return n.getTransformStream=function(){return this.$16},n.onBandwidthSample=function(t){this.$12=t},n.onNavigationTimingSample=function(t){this.$13=t},n.onEstimateFromHeaders=function(t){this.$14=t},n.$24=function(t,n,r){var e=n-r,a=this.$17?this.$17.getOperationLogger("bandwidth_sampled"):null;if(a){var i=Date.now(),l=i-e;o("oz-player/utils/OzNetworkRequestLoggingUtils").setBandwidthSampledLoggingAttributes(a,this.$1.getLastRequestUrl(),t,this.$1.getLastResponse(),l,i,this.$21),a.log()}this.$12(t,e)},n.$29=function(t,n,r){if(n-r<=0)return!0;var e=t*8/(n/1e3);return n<this.$4&&e>this.$5},n.$28=function(t,n){var e=this.$1.getLastResponse(),o=this.$6&&r("oz-player/shims/OzNetworkDiagnostics").getResponseTimeMs(e==null?void 0:e.headers)||0;this.$29(t,n,o)||this.$24(t,n,Math.max(o-this.$7,0))},n.$25=function(){var e,t=(e=this.$1.getLastResponse())==null?void 0:e.headers;if(!(this.$20||t==null)){this.$20=!0;var n=r("oz-player/shims/OzNetworkDiagnostics").getBandwidthMeanEstimate(t);n!=null&&this.$14(n)}},n.$26=function(){if(!this.$19){if(this.$21==null){var e=this.$1.getLastResponse();this.$21=r("oz-player/shims/OzNetworkDiagnostics").getUsableResponseSizeForBandwidthEstimation(e==null?void 0:e.headers)||0}this.$21!=null&&this.$21>0&&this.$11>=this.$21&&(this.$19=!0,this.$28(this.$11,Date.now()-this.$9))}},n.$27=function(){var e=Date.now(),t=e-this.$8;this.$2>0&&this.$11>=this.$10+this.$2&&!this.$29(this.$11,t,0)&&(this.$24(this.$11-this.$10,t,0),this.$8=e,this.$10=this.$11)},e})();l.default=e}),98);
__d("oz-player/networks/bandwidth/pipeStreamThroughBandwidthEstimator",["oz-player/networks/OzNetworkRequestStreamBandwidthReporter"],(function(t,n,r,o,a,i,l){"use strict";var e=2e5;function s(t,n,o,a,i){return{startStream:function(s){var l=new(r("oz-player/networks/OzNetworkRequestStreamBandwidthReporter"))({stream:n,loggerProvider:o,byteCountPerSample:t.getNumber("byte_count_per_sample",e),minimumBytesToSampleOnClose:t.getNumber("minimum_bytes_to_sample_on_close",25e3),minimumSampleDuration:t.getNumber("minimum_bandwidth_sample_duration",10),maximumSampleBandwidth:t.getNumber("maximum_bandwidth_sample_bandwidth",1e8),useResponseTimeMs:t.getBool("bandwidth_use_response_time_adjustment",!1),responseTimeHandicapMs:t.getNumber("bandwidth_response_time_handicap",0),ignoreOnStreamWriteSamples:t.getBool("bandwidth_ignore_on_stream_write_samples",!1),onResourceTimingBufferFull:i});return l.onBandwidthSample(function(e,t){a.addBandwidthSample(e,t)}),l.onNavigationTimingSample(function(e,n,r){var o=t.getNumber("time_to_first_byte_ignore_above_threshold_ms",0);(o===0||e<=o)&&a.addNavigationTimingSample(e,n,r)}),l.onEstimateFromHeaders(function(e){a.setBandwidthEstimateFromHeaders({meanEstimate:e})}),n.startStream(s).then(function(e){return n.retrievedFromCache()?e:e.pipeThrough(l.getTransformStream())})}}}l.pipeStreamThroughBandwidthEstimator=s}),98);
__d("oz-player/networks/getOzBandwidthEstimatorPipeThroughReporter",["oz-player/networks/OzNetworkRequestStream","oz-player/networks/bandwidth/pipeStreamThroughBandwidthEstimator"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return function(n,a,i,l){var s=e==="video";return a instanceof r("oz-player/networks/OzNetworkRequestStream")&&s?o("oz-player/networks/bandwidth/pipeStreamThroughBandwidthEstimator").pipeStreamThroughBandwidthEstimator(n.getLegacyConfig(),a,i,t,l):a}}l.default=e}),98);
__d("oz-player/manifests/OzDataSegment",["oz-player/manifests/OzSegmentOptions"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t,n,o,a){this.$6=new(r("oz-player/manifests/OzSegmentOptions")),this.$1=e,this.$2=t,this.$3=n,this.$4=o,this.$5=a}var t=e.prototype;return t.getData=function(){return null},t.getURI=function(){return this.$1},t.getTimeRange=function(){return{startTime:this.$2,endTime:this.$3}},t.getByteRange=function(){return{startByte:this.$4,endByte:this.$5}},t.getSequenceNumber=function(){return null},t.getOptions=function(){return this.$6},e})();l.default=e}),98);
__d("oz-player/shims/www/OzDataViewReaderWWW",["DataViewReader"],(function(t,n,r,o,a,i,l){"use strict";l.default=r("DataViewReader")}),98);
__d("oz-player/shims/OzDataViewReader",["oz-player/shims/www/OzDataViewReaderWWW"],(function(t,n,r,o,a,i,l){"use strict";l.default=r("oz-player/shims/www/OzDataViewReaderWWW")}),98);
/**
 * License: https://www.facebook.com/legal/license/k5cmJzUOK4Y/
 */
__d("oz-player/parsers/OzMp4SidxParser",["oz-player/manifests/OzDataSegment","oz-player/manifests/OzSegmentOptions","oz-player/shims/OzDataViewReader","oz-player/utils/OzErrorUtils"],(function(t,n,r,o,a,i,l){"use strict";var e=1936286840;function s(t,n,a,i){var l=new(r("oz-player/shims/OzDataViewReader"))(new DataView(i.buffer)),s=l.readUint32(),u=l.readUint32();if(u!==e)throw o("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SIDX_PARSER",description:'Invalid box type, expected "sidx".'});s==1&&(s=l.readUint64());var c=l.readUint8();l.skip(3),l.skip(4);var d=l.readUint32();if(!d)throw o("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SIDX_PARSER",description:"Invalid timescale."});var m,p;c==0?(m=l.readUint32(),p=l.readUint32()):(m=l.readUint64(),p=l.readUint64()),l.skip(2);for(var _=l.readUint16(),f=m,g=a+s+p,h=0,y=t.getBool("sidx_parser_memory_optimization"),C=[],b=function(){var e=l.readUint32(),t=(e&2147483648)>>>31,a=e&2147483647,i=l.readUint32();if(e=l.readUint32(),t==1)throw o("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SIDX_PARSER",description:"Heirarchical SIDXs are not supported."});var s=f/d,u=(f+i)/d;v===0&&(h=s);var c=g,m=c+a-1,p=new(r("oz-player/manifests/OzSegmentOptions"));C.push(y?new(r("oz-player/manifests/OzDataSegment"))(n,s-h,u-h,c,m):{getData:function(){return null},getURI:function(){return n},getTimeRange:function(){return{startTime:s-h,endTime:u-h}},getByteRange:function(){return{startByte:c,endByte:m}},getSequenceNumber:function(){return null},getOptions:function(){return p}}),f+=i,g+=a},v=0;v<_;v++)b();return C}l.parse=s}),98);
__d("oz-player/parsers/OzSidxSegmentsContainer",["oz-player/utils/OzErrorUtils"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t){this.$1=e,this.$2=t}var t=e.prototype;return t.getSegmentByTime=function(t){for(var e=this.$1(),n=0;n<e.length;n++){var r=e[n],o=r.getTimeRange();if(o.startTime<=t&&o.endTime>t)return r}return null},t.getSegmentAfter=function(t){var e=this.$1(),n=e.findIndex(function(e){return e.getTimeRange().startTime===t.getTimeRange().startTime&&e.getTimeRange().endTime===t.getTimeRange().endTime});return n>=0&&n+1<e.length?e[n+1]:null},t.getPredictedSegmentAfter=function(t){return null},t.canPredict=function(){return!1},t.canApproximateId=function(){return!1},t.isEndingSegment=function(t){var e=this.$1();if(!e||!e.length)return!1;var n=e[e.length-1].getTimeRange(),r=t.getTimeRange();return n.startTime===r.startTime&&n.endTime===r.endTime},t.getSegment=function(t){return this.$1()[t]||null},t.updateWith=function(t){throw o("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_NOT_IMPLEMENTED_ERROR",description:"Not implemented: updatedWith"})},t.addUpdateListener=function(t){return this.$2.addListener("segment_updated",t)},t.getTimeRanges=function(){var e=this.$1();if(e.length===0)return[];var t=e[0],n=e[e.length-1];return[{startTime:t.getTimeRange().startTime,endTime:n.getTimeRange().endTime}]},t.blockTimeRange=function(){},t.getEndingSegment=function(){var e=this.$1();return e.length>0?e[e.length-1]:null},t.getMaxGopSec=function(){return null},e})();l.default=e}),98);
/**
 * License: https://www.facebook.com/legal/license/k5cmJzUOK4Y/
 */
__d("oz-player/parsers/OzWebmSidxParser",["oz-player/manifests/OzDataSegment","oz-player/shims/OzDataViewReader","oz-player/shims/ozvariant"],(function(t,n,r,o,a,i,l){"use strict";var e=440786851,s=408125543,u=357149030,c=2807729,d=17545,m=475249515,p=187,_=179,f=183,g=241,h=[new Uint8Array([255]),new Uint8Array([127,255]),new Uint8Array([63,255,255]),new Uint8Array([31,255,255,255]),new Uint8Array([15,255,255,255,255]),new Uint8Array([7,255,255,255,255,255]),new Uint8Array([3,255,255,255,255,255,255]),new Uint8Array([1,255,255,255,255,255,255,255])];function y(e,t){if(!e&&!t)return!0;if(!e||!t||e.length!=t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!=t[n])return!1;return!0}var C=(function(){function e(e,t){this.id=e,this.$1=t}var t=e.prototype;return t.getOffset=function(){return this.$1.byteOffset},t.createParser=function(){return new b(this.$1)},t.getUint=function(){if(this.$1.byteLength>8)throw new RangeError("EbmlElement: Unsigned integer has too many bytes.");if(this.$1.byteLength==8&&this.$1.getUint8(0)&224)throw new RangeError("EbmlParser: Unsigned integer must be at most 53 bits.");for(var e=0,t=0;t<this.$1.byteLength;t++){var n=this.$1.getUint8(t);e=256*e+n}return e},t.getFloat=function(){if(this.$1.byteLength==4)return this.$1.getFloat32(0);if(this.$1.byteLength==8)return this.$1.getFloat64(0);throw new RangeError("EbmlElement: floating point numbers must be 4 or 8 bytes.")},e})(),b=(function(){function e(e){this.$1=e,this.$2=new(r("oz-player/shims/OzDataViewReader"))(this.$1)}var t=e.prototype;return t.hasMoreData=function(){return this.$2.hasMoreData()},t.parseElement=function(){var t=this.$3(),n=this.$4(),r;e.$5(n)?r=this.$1.byteLength-this.$2.getCursor():r=e.$6(n);var o=this.$2.getCursor()+r<=this.$1.byteLength?r:this.$1.byteLength-this.$2.getCursor(),a=new DataView(this.$1.buffer,this.$1.byteOffset+this.$2.getCursor(),o);return this.$2.skip(o),new C(t,a)},t.$3=function(){var e=this.$4();if(e.length>7)throw new RangeError("EbmlParser: EBML ID must be at most 7 bytes.");for(var t=0,n=0;n<e.length;n++)t=256*t+e[n];return t},t.$4=function(){var e=this.$2.readUint8(),t;for(t=1;t<=8;t++){var n=1<<8-t;if(e&n)break}if(t>8)throw new RangeError("EbmlParser: Variable sized integer must fit within 8 bytes.");var r=new Uint8Array(t);r[0]=e;for(var o=1;o<t;o++)r[o]=this.$2.readUint8();return r},e.$6=function(t){if(t.length==8&&t[1]&224)throw new RangeError("EbmlParser: Variable sized integer value must be at most 53 bits.");for(var e=1<<8-t.length,n=t[0]&e-1,r=1;r<t.length;r++)n=256*n+t[r];return n},e.$5=function(t){for(var e=0;e<h.length;e++)if(y(t,h[e]))return!0;return!1},e})();function v(e){for(var t=e.createParser(),n=1e6,r=null;t.hasMoreData();){var o=t.parseElement();o.id==c?n=o.getUint():o.id==d&&(r=o.getFloat())}if(r==null)return null;var a=n/1e9,i=r*a;return{timecodeScale:a,duration:i}}function S(e,t,n,o,a,i){for(var l=[],s=t.createParser(),u=-1,c=-1;s.hasMoreData();){var d=s.parseElement();if(d.id==p){var m=R(d);if(m){var _=o*m.unscaledTime,f=n+m.relativeOffset;u>=0&&(c>=0||r("oz-player/shims/ozvariant")(0,4010),l.push(new(r("oz-player/manifests/OzDataSegment"))(i,u,_,c,f-1))),u=_,c=f}}}if(u>=0){c>=0||r("oz-player/shims/ozvariant")(0,4010);var g=a;l.push(new(r("oz-player/manifests/OzDataSegment"))(i,u,g,c,null))}return l}function R(e){var t=e.createParser(),n=t.parseElement();if(n.id!=_)return null;var r=n.getUint(),o=t.parseElement();if(o.id!=f)return null;for(var a=o.createParser(),i=0;a.hasMoreData();){var l=a.parseElement();if(l.id==g){i=l.getUint();break}}return{unscaledTime:r,relativeOffset:i}}function L(e){for(var t=e.createParser(),n=null;t.hasMoreData();){var r=t.parseElement();if(r.id==u){n=r;break}}return n?v(n):null}function E(t){var n=new b(t),r=n.parseElement();if(r.id!=e)return null;var o=n.parseElement();if(o.id!=s)return null;var a=o.getOffset(),i=L(o);return i?{segmentOffset:a,timecodeScale:i.timecodeScale,duration:i.duration}:null}function k(e,t,n,r){var o=new DataView(r.buffer),a=new DataView(n.buffer),i=E(o);if(!i)return[];var l=new b(a),s=l.parseElement();return s.id!=m?[]:S(e,s,i.segmentOffset,i.timecodeScale,i.duration,t)}l.parse=k}),98);
__d("oz-player/parsers/OzSidxSegmentsParser",["oz-player/loggings/OzLoggingUtils","oz-player/manifests/OzSegmentOptions","oz-player/manifests/OzZeroTimeRangeSegment","oz-player/networks/getOzBandwidthEstimatorPipeThroughReporter","oz-player/parsers/OzMp4SidxParser","oz-player/parsers/OzSidxSegmentsContainer","oz-player/parsers/OzWebmSidxParser","oz-player/shims/OzEventEmitter","oz-player/shims/OzMaybeNativePromise","oz-player/shims/OzURI","oz-player/utils/OzErrorEmitter","oz-player/utils/OzReadableStreamUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.split("-");return{startByte:Number.parseInt(t[0],10),endByte:Number.parseInt(t[1],10)}}var s=(function(){function t(e,t,n,o,a,i,l){this.$6=new(r("oz-player/utils/OzErrorEmitter")),this.$7=[],this.$9=new(r("oz-player/shims/OzEventEmitter")),this.$1=t,this.$2=new(r("oz-player/shims/OzURI"))(n),this.$3=o,this.$5=a,this.$4=i,this.$8=l.cloneContext().setType(a==="video"||a==="audio"?a+";sidx":"sidx"),this.$10=e}var n=t.prototype;return n.onError=function(t){return this.$6.onError(t)},n.parseInitializationSegment=function(){var t=this,n=this.$1.Initialization[0].$.range,o=e(n),a=new(r("oz-player/manifests/OzSegmentOptions"));return this.$10.getBool("sidx_parser_memory_optimization")?new(r("oz-player/manifests/OzZeroTimeRangeSegment"))(this.$2,o.startByte,o.endByte):{getData:function(){return null},getURI:function(){return t.$2},getTimeRange:function(){return{startTime:0,endTime:0}},getByteRange:function(){return o},getSequenceNumber:function(){return null},getOptions:function(){return a}}},n.parseSegmentsContainer=function(){var e=this,t=this.$11();return o("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(t,this.$8,"process_sidx"),t.catch(function(t){e.$6.emitError(t)}),new(r("oz-player/parsers/OzSidxSegmentsContainer"))(function(){return e.$7},this.$9)},n.$12=function(t,n,a){var e=new(r("oz-player/manifests/OzZeroTimeRangeSegment"))(t,n.startByte,n.endByte),i=this.$5+";sidx",l=this.$4.request({debugName:"OzSidxSegmentsParser/sidx/"+this.$5,segments:[e],pipeThroughRangeStreamProviders:[r("oz-player/networks/getOzBandwidthEstimatorPipeThroughReporter")(i,this.$4.getBandwidthEstimator())],loggerProvider:this.$8,requestOptions:{networkTimeoutMs:null,retryAttempts_SIDX_USE_ONLY:this.$10.getNumber("sidx_segment_retry_attempts"),retryTimeoutMs_SIDX_USE_ONLY:this.$10.getNumber("sidx_segment_retry_interval_ms")},mediaStreamType:a}),s=l.getStream().getReader();return o("oz-player/utils/OzReadableStreamUtils").pumpAllData(s)},n.$11=function(){var t=this,n=this.$1.$.indexRange,a=e(n),i=[this.$12(this.$2,a,null)],l;if(this.$3==="webm"){var s=e(this.$1.Initialization[0].$.range);i.push(this.$12(this.$2,s,null)),l=r("oz-player/shims/OzMaybeNativePromise").all(i).then(function(e){var n=e[0],r=e[1];t.$7=o("oz-player/parsers/OzWebmSidxParser").parse(t.$10,t.$2,n,r)})}else l=i[0].then(function(e){t.$7=o("oz-player/parsers/OzMp4SidxParser").parse(t.$10,t.$2,a.startByte,e)});return l.then(function(){t.$9.emit("segment_updated")})},t})();l.default=s}),98);
__d("oz-player/parsers/OzVideoContainerType",[],(function(t,n,r,o,a,i){"use strict";function e(e){return(e.split("/")[1]||"").trim()}i.parse=e}),66);
__d("oz-player/parsers/OzRepresentationParserBase",["oz-player/manifests/OzRepresentationBase","oz-player/parsers/OzSegmentTemplateParser","oz-player/parsers/OzSidxSegmentsParser","oz-player/parsers/OzVideoContainerType","oz-player/utils/OzErrorEmitter","oz-player/utils/OzErrorUtils","oz-player/utils/OzMimeUtil"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t,n,o,a,i,l,s,u,c,d,m,p,_,f){this.$9=new(r("oz-player/utils/OzErrorEmitter")),this.$1=t,this.$2=n,this.$10=a,this.$11=i,this.$13=o,this.$14=e,this.$15=l,this.$3=s,this.$4=u,this.$5=c,this.$6=d!=null?d:null,this.$7=m!=null?m:null,this.$8=p!=null?p:null,this.$16=_,this.$17=f;try{this.$11=this.$11.cloneContext().setRepresentationID(this.parseID())}catch(e){}}var t=e.prototype;return t.$18=function(){var e=this,t=this.$12;if(t)return t;if(this.$1.SegmentBase){var n=this.$1.SegmentBase[0],a=this.$1.BaseURL[0]._;if(typeof a!="string")throw o("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_REPRESENTATION_PARSER",description:"Missing representation BaseURL",extra:{code:"OZ_RP-9"}});t=new(r("oz-player/parsers/OzSidxSegmentsParser"))(this.$14,n,a,o("oz-player/parsers/OzVideoContainerType").parse(this.$1.$.mimeType),o("oz-player/utils/OzMimeUtil").getMimeType(this.$1.$.mimeType),this.$10,this.$11),t.onError(function(t){var n;if(!((n=e.$17)!=null&&n.handleError(e.parseID(),t)))return e.$9.emitError(t)})}else if(this.$1.SegmentTemplate)t=this.$19(this.$1.SegmentTemplate[0],{isShared:!1});else if(this.$3)t=this.$19(this.$3[0],{isShared:!0});else throw o("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_REPRESENTATION_PARSER",description:"Unrecognized representation type",extra:{code:"OZ_RP-7"}});return this.$12=t,t},t.$19=function(t,n){var e,a=t;n.isShared&&(a=babelHelpers.extends({},a,{$:babelHelpers.extends({},a.$,{initialization:a.$.initialization.replace("$RepresentationID$",this.$1.$.id),media:a.$.media.replace("$RepresentationID$",this.$1.$.id)})}));var i=this.$13.mpdUrl,l=this.$1.BaseURL&&this.$1.BaseURL[0]?this.$1.BaseURL[0]._:null,s=l!=null?l:i;if(s==null)throw o("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_REPRESENTATION_PARSER",description:"Missing mpd url for template manifest",extra:{code:"OZ_RP-6"}});var u=this.$13.customSegmentTimelineParser,c=(e=this.$13.customRepresentationParsers)==null?void 0:e.initializationBinary,d=c?c(this.$1):null;return new(r("oz-player/parsers/OzSegmentTemplateParser"))(this.$14,a,{baseUrl:s,mpdUrl:i,isStaticMpd:this.$15.manifestType==="static",isTemplatedMpd:this.$15.manifestIsTemplated},u,d)},t.onError=function(t){return this.$9.onError(t)},t.parseInitSegment=function(){return this.$18().parseInitializationSegment()},t.parseBandwidth=function(){return Number(this.$1.$.bandwidth)},t.parseMimeType=function(){var e,t;return(e=(t=this.$1.$.mimeType)!=null?t:this.$4)!=null?e:""},t.parseCodecs=function(){var e,t;return(e=(t=this.$1.$.codecs)!=null?t:this.$5)!=null?e:""},t.parseVariantKey=function(){return this.$6},t.parseLang=function(){return this.$7},t.parseRole=function(){return this.$8},t.parseSegmentsContainer=function(){return this.$18().parseSegmentsContainer()},t.parseID=function(){return""+this.$1.$.id},t.parseCustomFieldFirstSegment=function(){var e=this.$13.customRepresentationParsers?this.$13.customRepresentationParsers.firstSegmentParser:null;return e?e(this.$1):null},t.parse=function(){return new(r("oz-player/manifests/OzRepresentationBase"))(this.$1,this.$2,this.parseID(),this.parseMimeType(),this.parseCodecs(),this.parseVariantKey(),this.parseLang(),this.parseRole(),this.parseInitSegment(),this.parseSegmentsContainer(),this.parseBandwidth(),this.parseCustomFieldFirstSegment(),this.$13.customRepresentationParsers)},e})();l.default=e}),98);
__d("oz-player/parsers/OzApplicationRepresentationParser",["oz-player/manifests/OzApplicationRepresentation","oz-player/parsers/OzRepresentationParserBase"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t,n,r,o,a,i,l,s,u,c,d,m,p,_){var f;return f=e.call(this,t,n,r,o,a,i,l,s,u,c,d,m,p,_)||this,f.$OzApplicationRepresentationParser$p_1=n,f.$OzApplicationRepresentationParser$p_3=o,f}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.parse=function(){var e=this.$OzApplicationRepresentationParser$p_3.customRepresentationParsers;return new(r("oz-player/manifests/OzApplicationRepresentation"))(this.$OzApplicationRepresentationParser$p_1,this.$OzApplicationRepresentationParser$p_2,this.parseID(),this.parseMimeType(),this.parseCodecs(),this.parseVariantKey(),this.parseLang(),this.parseRole(),this.parseInitSegment(),this.parseSegmentsContainer(),this.parseBandwidth(),this.parseCustomFieldFirstSegment(),e)},t})(r("oz-player/parsers/OzRepresentationParserBase"));l.default=e}),98);
__d("oz-player/manifests/OzAudioRepresentation",["oz-player/manifests/OzRepresentationBase"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t,n,r,o,a,i,l,s,u,c,d,m,p){var _;return _=e.call(this,t,n,r,o,a,i,l,s,u,c,d,m,p)||this,_.$OzAudioRepresentation$p_1=r,_.$OzAudioRepresentation$p_2=d,_.$OzAudioRepresentation$p_3={id:r,displayLabel:_.getDisplayLabel(),mimeCodecs:_.getMimeCodecs(),variantKey:i,lang:l,role:s},_}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.getBitrateKbps=function(){var e=1024;return(this.$OzAudioRepresentation$p_2/e).toFixed(1)+"Kbps"},n.getDisplayLabel=function(){var t=e.prototype.getLang.call(this),n=e.prototype.getRole.call(this),r=t==null?"Default":t;return n==null?r:r+" - "+n},n.getAudioTrack=function(){return this.$OzAudioRepresentation$p_3},t})(r("oz-player/manifests/OzRepresentationBase"));l.default=e}),98);
__d("oz-player/parsers/OzAudioRepresentationParser",["oz-player/manifests/OzAudioRepresentation","oz-player/parsers/OzRepresentationParserBase"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t,n,r,o,a,i,l,s,u,c,d,m,p,_){var f;return f=e.call(this,t,n,r,o,a,i,l,s,u,c,d,m,p,_)||this,f.$OzAudioRepresentationParser$p_1=n,f.$OzAudioRepresentationParser$p_3=o,f}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.parse=function(){var e=this.$OzAudioRepresentationParser$p_3.customRepresentationParsers;return new(r("oz-player/manifests/OzAudioRepresentation"))(this.$OzAudioRepresentationParser$p_1,this.$OzAudioRepresentationParser$p_2,this.parseID(),this.parseMimeType(),this.parseCodecs(),this.parseVariantKey(),this.parseLang(),this.parseRole(),this.parseInitSegment(),this.parseSegmentsContainer(),this.parseBandwidth(),this.parseCustomFieldFirstSegment(),e)},t})(r("oz-player/parsers/OzRepresentationParserBase"));l.default=e}),98);
__d("oz-player/parsers/OzVideoRepresentationParser",["oz-player/manifests/OzVideoRepresentation","oz-player/parsers/OzRepresentationParserBase"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t,n,r,o,a,i,l,s,u,c,d,m,p,_,f){var g;return g=e.call(this,t,n,r,o,a,i,l,s,u,c,d,m,p,_,f)||this,g.$OzVideoRepresentationParser$p_1=n,g.$OzVideoRepresentationParser$p_2=r,g.$OzVideoRepresentationParser$p_3=o,g}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.parse=function(){var e=Number.parseInt(this.$OzVideoRepresentationParser$p_1.$.height,10),t=Number.parseInt(this.$OzVideoRepresentationParser$p_1.$.width,10),n=this.$OzVideoRepresentationParser$p_3.customRepresentationParsers;return new(r("oz-player/manifests/OzVideoRepresentation"))(this.$OzVideoRepresentationParser$p_1,this.$OzVideoRepresentationParser$p_2,this.parseID(),this.parseMimeType(),this.parseCodecs(),this.parseVariantKey(),this.parseLang(),this.parseRole(),this.parseInitSegment(),this.parseSegmentsContainer(),this.parseBandwidth(),this.parseCustomFieldFirstSegment(),n,t,e)},t})(r("oz-player/parsers/OzRepresentationParserBase"));l.default=e}),98);
__d("oz-player/utils/OzIbrUtils",["oz-player/networks/OzBandwidthEstimator"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t,n,o){var e=r("oz-player/networks/OzBandwidthEstimator").getAdjustedBandwidth(n.getLegacyConfig()),a=t.slice(0);a.sort(function(e,t){return e.getBandwidth()-t.getBandwidth()});for(var i=n.getNumber("live_audio_ibr_bandwidth_percentage"),l=e*i,s=a.length-1;s>=0;s--)if(a[s].getBandwidth()<=l)return o.getOperationLogger("audio_ibr_success").setRepresentationID(a[s].getID()).setReason(e.toString()).log(),a[s];return o.getOperationLogger("audio_ibr_no_op").setReason(e.toString()).log(),null};l.getInitialAudioRepresentation=e}),98);
__d("oz-player/parsers/OzMpdParser",["oz-player/manifests/Mpd","oz-player/parsers/OzApplicationRepresentationParser","oz-player/parsers/OzAudioRepresentationParser","oz-player/parsers/OzVideoRepresentationParser","oz-player/utils/OzErrorEmitter","oz-player/utils/OzErrorUtils","oz-player/utils/OzIbrUtils"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){var t=e.blockedRepresentationsManager,n=e.config,o=e.drmManager,a=e.enableAlternativeAudioTracks,i=e.initialRepresentationIDs,l=e.networkManager,s=e.ozParserContext,u=e.perfLoggerProvider,c=e.useManagedMediaSource;this.$2=new(r("oz-player/utils/OzErrorEmitter")),this.$5=n,this.$1=l,this.$3=u,this.$4=s,this.$6=o,this.$7=i!=null?i:[],this.$8=t!=null?t:null,this.$9=a,this.$10=c!=null?c:!1,this.$11=!0}var t=e.prototype;return t.onError=function(t){return this.$2.onError(t)},t.parse=function(t){var e=this,n=[],a=t,i=this.$4.createXmlParser().parse(a),l=i.MPD&&i.MPD.length>0?i.MPD[0]:null;if(!l){var s=2e3;throw o("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_MPD_PARSER",description:"parsed manifest XML missing MPD node; truncated xml ("+Math.min(s,a.length)+"/"+a.length+"): "+a.substring(0,s)})}var u=l.Period&&l.Period.length>0?l.Period[0]:null;if(!u){var c=2e3;throw o("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_MPD_PARSER",description:"parsed manifest XML missing Period node; truncated xml ("+Math.min(c,a.length)+"/"+a.length+"): "+a.substring(0,c)})}var d=u.AdaptationSet||[],m=this.$12(l);this.$11=m==="static";var p=this.$13(l),_=this.$14(this.$15(d,"video"),{manifestType:m,manifestIsTemplated:p},n),f;this.$9?f=this.$16(this.$15(d,"audio"),{manifestType:m,manifestIsTemplated:p},n).sort(function(e,t){return e.getBandwidth()-t.getBandwidth()}):f=this.$17(this.$18(d,"audio"),r("oz-player/parsers/OzAudioRepresentationParser"),{manifestType:m,manifestIsTemplated:p},n).sort(function(e,t){return e.getBandwidth()-t.getBandwidth()});var g=[];if(this.$5.getBool("vtt_caption_representation")){var h=this.$15(d,"application");g=this.$17(h[0],r("oz-player/parsers/OzApplicationRepresentationParser"),{manifestType:m,manifestIsTemplated:p},n)}var y=this.$4.mpdUrl,C=new(r("oz-player/manifests/Mpd"))(l,_,f,g,y,this.$19(l),this.$4.customParsers||new Map,this.$11);if(this.$6){var b=this.$6;b.startEME(_,f)}return n.forEach(function(t){t.onError(e.$2.emitError)}),C},t.$19=function(t){var e=t.$.minimumUpdatePeriod||"",n=/\d+/g.exec(e);if(n&&n.length){var r=n[0];return r?Number.parseInt(r,10):null}return null},t.$12=function(t){return t.$.type||"static"},t.$13=function(t){var e,n=(e=this.$4.customParsers)==null?void 0:e.get("isLiveTemplated");if(!n)return!1;var r=n(t);return typeof r=="boolean"&&r},t.$18=function(t,n){return t.find(this.$20(n))},t.$15=function(t,n){return t.filter(this.$20(n))},t.$20=function(t){return function(e){if(e.$.mimeType!=null)return e.$.mimeType.indexOf(t)!==-1;var n=e.Representation;return n&&n.length>0&&n[0].$.mimeType.indexOf(t)!==-1}},t.$17=function(t,n,r,o){var e=this;if(!t)return[];var a=t.Role,i=a!=null?a:[],l=i[0],s=l?l.$.value:null,u=t.$.lang,c=u==="und"?null:u,d=t.$.FBVariantKey,m=d==="und"?null:d!=null?d:null;return t.Representation.map(function(a){var i,l=new n(e.$5,a,(i=a.ContentProtection)!=null?i:t.ContentProtection,e.$4,e.$1,e.$3,r,t.SegmentTemplate,t.$.mimeType,t.$.codecs,m,c,s,e.$7,e.$8),u=l.parse();return o.push(l),u})},t.$21=function(t){return this.$10?ManagedMediaSource.isTypeSupported(t):MediaSource.isTypeSupported(t)},t.$14=function(t,n,o){var e=this,a=[],i=new Set;return t.filter(Boolean).forEach(function(t,l,s){var u=l===s.length-1;for(var c of t.Representation){var d,m;if(!((d=c.$.FBAbrPolicyTags)!=null&&d.includes("avoid_on_abr")&&!u)){var p=t.Role,_=p!=null?p:[],f=_[0],g=f?f.$.value:null,h=t.$.lang,y=h==="und"?null:h,C=t.$.FBVariantKey,b=C==="und"?null:C!=null?C:null,v=new(r("oz-player/parsers/OzVideoRepresentationParser"))(e.$5,c,(m=c.ContentProtection)!=null?m:t.ContentProtection,e.$4,e.$1,e.$3,n,t.SegmentTemplate,t.$.mimeType,t.$.codecs,b,y,g,e.$7,e.$8),S=v.parse();if(o.push(v),!e.$21(S.getMimeCodecs())){i.add(S.getMimeCodecs());continue}a.push(S)}}}),a.filter(Boolean)},t.$16=function(t,n,a){var e=this,i=[],l=new Set,s=t.filter(Boolean).map(function(t){var o=t.Role,i=o!=null?o:[],s=i[0],u=s?s.$.value:null,c=t.$.lang,d=c==="und"?null:c,m=t.$.FBVariantKey,p=m==="und"?null:m!=null?m:null,_=[];for(var f of t.Representation){var g,h=new(r("oz-player/parsers/OzAudioRepresentationParser"))(e.$5,f,(g=f.ContentProtection)!=null?g:t.ContentProtection,e.$4,e.$1,e.$3,n,t.SegmentTemplate,t.$.mimeType,t.$.codecs,p,d,u,e.$7),y=h.parse();if(a.push(h),!e.$21(y.getMimeCodecs())){l.add(y.getMimeCodecs());continue}_.push(y)}return _});return s.forEach(function(t){if(t.length>1){var n=o("oz-player/utils/OzIbrUtils").getInitialAudioRepresentation(t,e.$5,e.$3);i.push(n!=null?n:t[0])}else i.push.apply(i,t)}),i.filter(Boolean)},e})();l.default=e}),98);
__d("oz-player/utils/OzMpdUtils",[],(function(t,n,r,o,a,i){"use strict";function e(e){var t=null;return e.forEach(function(e){if(e){var n,r,o=e.endTime;o<((n=(r=t)==null?void 0:r.endTime)!=null?n:1/0)&&(t=e)}}),t}function l(t,n){var r=[];if(r.push.apply(r,t.getVideoRepresentations().concat(t.getAudioRepresentations())),r.length){var o=r.map(function(e){var t=e.getEndingSegment();return t?t.getTimeRange():null});return e(o)}return null}function s(e){var t=[];if(t.push.apply(t,e.getVideoRepresentations().concat(e.getAudioRepresentations())),t.length){var n=t[0].getEndingSegment();if(n)return n.getSequenceNumber()}return null}i.getLeastEndTimeTimeRange=e,i.getMpdLastTimeRange=l,i.getMpdLastSequenceNumber=s}),66);
__d("oz-player/utils/OzStreamInterruptChecker",["oz-player/shims/OzEventEmitter","oz-player/utils/OzMpdUtils"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t,n){var r;return r=e.call(this)||this,r.$OzStreamInterruptChecker$p_4=0,r.$OzStreamInterruptChecker$p_5=null,r.$OzStreamInterruptChecker$p_6=!1,r.$OzStreamInterruptChecker$p_2=t,r.$OzStreamInterruptChecker$p_3=n,r.$OzStreamInterruptChecker$p_1=r.$OzStreamInterruptChecker$p_3.getNumber("live_numerical_error_epsilon"),r}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.notifyMpdUpdated=function(){var e=o("oz-player/utils/OzMpdUtils").getMpdLastTimeRange(this.$OzStreamInterruptChecker$p_2,this.$OzStreamInterruptChecker$p_3),t=e?e.endTime:null,n=!1;t!==null&&(n=t===this.$OzStreamInterruptChecker$p_5),n?this.$OzStreamInterruptChecker$p_4++:(this.$OzStreamInterruptChecker$p_4=0,this.$OzStreamInterruptChecker$p_6&&this.$OzStreamInterruptChecker$p_5!==null&&this.$OzStreamInterruptChecker$p_5!==void 0&&e!==null&&e!==void 0&&this.emit("streamResumedAt",e.startTime),this.$OzStreamInterruptChecker$p_6=!1);var r=this.$OzStreamInterruptChecker$p_3.getNumber("stream_interrupt_check_mpd_stale_count_threshold");!this.$OzStreamInterruptChecker$p_6&&r>0&&this.$OzStreamInterruptChecker$p_4>=r&&t!==null&&t!==void 0&&(this.emit("streamInterruptAt",t),this.$OzStreamInterruptChecker$p_6=!0),this.$OzStreamInterruptChecker$p_5=t},t})(r("oz-player/shims/OzEventEmitter"));l.default=e}),98);
__d("oz-player/parsers/OzMpdUpdater",["oz-player/parsers/OzMpdParser","oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/OzURI","oz-player/shims/ozClearTimeout","oz-player/shims/ozSetTimeoutAcrossTransitions","oz-player/utils/OzErrorEmitter","oz-player/utils/OzErrorUtils","oz-player/utils/OzMpdUtils","oz-player/utils/OzReadableStreamUtils","oz-player/utils/OzStreamInterruptChecker"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t,n,a,i,l,s,u,c,d){var m;m=e.call(this)||this,m.$OzMpdUpdater$p_8=new(r("oz-player/utils/OzErrorEmitter")),m.$OzMpdUpdater$p_10=new(r("oz-player/shims/OzSubscriptionsHandler")),m.$OzMpdUpdater$p_11=!1,m.$OzMpdUpdater$p_16=0,m.$OzMpdUpdater$p_18=0,m.$OzMpdUpdater$p_19=null,m.$OzMpdUpdater$p_21=!0,m.$OzMpdUpdater$p_22=0,m.$OzMpdUpdater$p_26=function(){var e,t,n=m.$OzMpdUpdater$p_2.getLocation();if(m.$OzMpdUpdater$p_21=!1,!(n==null||n==="")){var a=new(r("oz-player/shims/OzURI"))(n),i=String((e=(t=a.getQueryData().ms)!=null?t:a.getQueryData().msdev)!=null?e:a.getQueryData().mstest);if(!m.$OzMpdUpdater$p_12.isPlaying()){m.setupUpdateLoop();return}var l=m.$OzMpdUpdater$p_5.getOperationLogger("update_manifest").start();m.$OzMpdUpdater$p_28(n).then(function(e){var t,a,s,u,c,d,p,_;if(m.$OzMpdUpdater$p_18=0,m.$OzMpdUpdater$p_29(),m.$OzMpdUpdater$p_7=0,!m.$OzMpdUpdater$p_21){var f=babelHelpers.extends({},m.$OzMpdUpdater$p_13,{mpdUrl:n}),g=new(r("oz-player/parsers/OzMpdParser"))({config:m.$OzMpdUpdater$p_6,ozParserContext:f,networkManager:m.$OzMpdUpdater$p_1,perfLoggerProvider:m.$OzMpdUpdater$p_5,drmManager:m.$OzMpdUpdater$p_14,initialRepresentationIDs:[],blockedRepresentationsManager:null,enableAlternativeAudioTracks:!1,useManagedMediaSource:m.$OzMpdUpdater$p_23});g.onError(function(e){m.$OzMpdUpdater$p_8.emitError(e),l.setError(e).log()});var h=g.parse(e),y=m.$OzMpdUpdater$p_2.isStaticMpd();m.$OzMpdUpdater$p_2.updateWith(h),m.$OzMpdUpdater$p_2.markRefreshed(),h.isStaticMpd()&&!y&&m.emit("streamTransitionToStatic");var C=o("oz-player/utils/OzMpdUtils").getMpdLastTimeRange(m.$OzMpdUpdater$p_2,m.$OzMpdUpdater$p_6),b=C&&C.endTime!=0?C.endTime:null,v=String((t=(a=m.$OzMpdUpdater$p_2)==null?void 0:a.getCustomField("currentServerTimeMs"))!=null?t:""),S=String((s=(u=m.$OzMpdUpdater$p_2)==null?void 0:u.getCustomField("lastVideoFrameTs"))!=null?s:""),R={currentServerTimeMs:v,ingestLastVideoFrameTs:S,nowMs:String(Date.now())},L=new Set(((c=(d=m.$OzMpdUpdater$p_2)==null?void 0:d.getVideoRepresentations())!=null?c:[]).map(function(e){return e.getCodecs()})).size>1,E=new Set(((p=(_=m.$OzMpdUpdater$p_2)==null?void 0:_.getAudioRepresentations())!=null?p:[]).map(function(e){return e.getCodecs()})).size>1;l.setLiveheadPosition(b).setLiveheadSeqNumMpd(o("oz-player/utils/OzMpdUtils").getMpdLastSequenceNumber(m.$OzMpdUpdater$p_2)).setManifestType(m.$OzMpdUpdater$p_2.isStaticMpd()?"static":"dynamic").setIsMixedCodecManifest(L||E).setIsTemplatedManifest(!!m.$OzMpdUpdater$p_2.getCustomField("isLiveTemplated")).setPlaybackFbmsParam(i).setUserInfo(R).log(),m.$OzMpdUpdater$p_9.notifyMpdUpdated(),m.setupUpdateLoop()}}).catch(function(e){m.$OzMpdUpdater$p_29(),l.setError(e).log();var t=null;if(o("oz-player/utils/OzErrorUtils").isOzError(e))t=e;else{var r,a=null,i="Caught an unknown error when fetching the manifest.";if(e!=null)if(m.$OzMpdUpdater$p_6.getBool("normalize_mpd_fetch_errors")){var s=o("oz-player/utils/OzErrorUtils").getNormalizedErrorAndCode(e),u=s[0],c=s[1];t=u}else r=e,a=r.code!=null?String(r.code):null,i=r.name+"; "+r.message+"; "+r.description+";";if(t==null){var d={originalError:r,url:n};a!==null&&(d.code=a),t=o("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_NETWORK",description:i,extra:d})}}m.$OzMpdUpdater$p_27(t,n)})}};var p=n.getMinimumUpdatePeriod();return m.$OzMpdUpdater$p_7=0,m.$OzMpdUpdater$p_1=a,m.$OzMpdUpdater$p_2=n,m.$OzMpdUpdater$p_12=i,m.$OzMpdUpdater$p_3=p,m.$OzMpdUpdater$p_5=l.cloneContext().setType("manifest"),m.$OzMpdUpdater$p_6=t,m.$OzMpdUpdater$p_13=s,m.$OzMpdUpdater$p_14=u,m.$OzMpdUpdater$p_15=c,m.$OzMpdUpdater$p_23=d,m.$OzMpdUpdater$p_2.addListener("locationUpdated",function(){m.$OzMpdUpdater$p_24(),m.setupUpdateLoop()}),m.$OzMpdUpdater$p_9=new(r("oz-player/utils/OzStreamInterruptChecker"))(m.$OzMpdUpdater$p_2,m.$OzMpdUpdater$p_6),m.$OzMpdUpdater$p_10.addSubscriptions(m.$OzMpdUpdater$p_9.addListener("streamResumedAt",function(e){m.emit("streamResumedAt",e)}),m.$OzMpdUpdater$p_9.addListener("streamInterruptAt",function(e){m.emit("streamInterruptAt",e)})),m}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.$OzMpdUpdater$p_24=function(){r("oz-player/shims/ozClearTimeout")(this.$OzMpdUpdater$p_4),this.$OzMpdUpdater$p_4=null,this.$OzMpdUpdater$p_25(),this.$OzMpdUpdater$p_21=!0},n.setupUpdateLoop=function(){var e,t=!this.$OzMpdUpdater$p_11;t&&(t=!this.$OzMpdUpdater$p_2.isStaticMpd(),this.$OzMpdUpdater$p_3=this.$OzMpdUpdater$p_2.getMinimumUpdatePeriod());var n=this.$OzMpdUpdater$p_17==null&&this.$OzMpdUpdater$p_6.getNumber("manifest_initial_update_delay_ms")>0?this.$OzMpdUpdater$p_6.getNumber("manifest_initial_update_delay_ms"):this.$OzMpdUpdater$p_6.getNumber("manifest_update_frequency_ms")||((e=this.$OzMpdUpdater$p_3)!=null?e:0)*1e3;t&&n&&this.$OzMpdUpdater$p_2.getLocation()&&(this.$OzMpdUpdater$p_4=r("oz-player/shims/ozSetTimeoutAcrossTransitions")(this.$OzMpdUpdater$p_26,n))},n.onError=function(t){return this.$OzMpdUpdater$p_8.onError(t)},n.$OzMpdUpdater$p_27=function(t,n){var e=this,r=!0,o=this.$OzMpdUpdater$p_18-1,a=t.getExtra().code;this.$OzMpdUpdater$p_19!==a?(this.$OzMpdUpdater$p_19=a,this.$OzMpdUpdater$p_16=1):this.$OzMpdUpdater$p_16++;var i=function(){r=!1},l={endStream:function(){i(),e.$OzMpdUpdater$p_11=!0,e.emit("streamGone")},consecutiveFailuresForErrorCode:this.$OzMpdUpdater$p_16,error:t,isInitialRequest:!1,retry:function(r){e.emit("manifestFetchErrorRetry",t),i(),e.setupUpdateLoop()},retryAttemptCount:o};this.emit("manifestFetchError",l),r&&this.$OzMpdUpdater$p_8.emitError(t)},n.$OzMpdUpdater$p_30=function(t,n){var e=new(r("oz-player/shims/OzURI"))(t);return e.addQueryData("_nc_expid",n),e.toString()},n.$OzMpdUpdater$p_31=function(t){if(!this.$OzMpdUpdater$p_15)return t;var e=new(r("oz-player/shims/OzURI"))(t);return e.addQueryData("_nc_tsid","mpd-"+this.$OzMpdUpdater$p_22++),e.toString()},n.$OzMpdUpdater$p_28=function(t){this.$OzMpdUpdater$p_25(),this.$OzMpdUpdater$p_18++;var e=this.$OzMpdUpdater$p_6.getString("cdn_experiment_id"),n=e.length===0?t:this.$OzMpdUpdater$p_30(t,e);n=this.$OzMpdUpdater$p_31(n);var r=this.$OzMpdUpdater$p_1.requestRawUrl({debugName:"OzMpdUpdater/requestMpd/mpd",url:n,options:{networkTimeoutMs:this.$OzMpdUpdater$p_6.getNumber("mpd_updater_network_request_timeout_ms")},loggerProvider:this.$OzMpdUpdater$p_5});this.$OzMpdUpdater$p_17=Date.now(),this.$OzMpdUpdater$p_20=r;var a=r.getStream().getReader();return o("oz-player/utils/OzReadableStreamUtils").pumpString(a)},n.$OzMpdUpdater$p_25=function(){this.$OzMpdUpdater$p_20&&(this.$OzMpdUpdater$p_20.cancel(),this.$OzMpdUpdater$p_18=0),this.$OzMpdUpdater$p_29()},n.$OzMpdUpdater$p_29=function(){this.$OzMpdUpdater$p_20=null},n.destroy=function(){this.$OzMpdUpdater$p_4&&r("oz-player/shims/ozClearTimeout")(this.$OzMpdUpdater$p_4),this.$OzMpdUpdater$p_10.release()},t})(r("oz-player/shims/OzEventEmitter"));l.default=e}),98);
__d("oz-player/shims/OzXmlParserTrustedTypesHTMLPolicy",["oz-player/shims/www/OzXmlParserTrustedTypesHTMLPolicyWWW"],(function(t,n,r,o,a,i,l){"use strict";l.createTrustedHTMLForDOMParser=o("oz-player/shims/www/OzXmlParserTrustedTypesHTMLPolicyWWW").createTrustedHTMLForDOMParser}),98);
__d("oz-player/parsers/OzXmlParserImplDOMParser",["oz-player/shims/OzXmlParserTrustedTypesHTMLPolicy","oz-player/utils/OzErrorUtils"],(function(t,n,r,o,a,i,l){function e(){return{$:{}}}function s(t){for(var n=e(),r=t.attributes,o=0;o<r.length;++o){var a=r[o];n.$[a.name]=a.value}for(var i=t.childNodes,l=0;l<i.length;++l){var u=i[l];if(u instanceof Element){var c=u.nodeName;Object.prototype.hasOwnProperty.call(n,c)||(n[c]=[]),n[c].push(s(u))}else{var d=u.nodeValue.trim();d&&(n._=d)}}return n}var u=(function(){function t(){this.$1=new DOMParser}var n=t.prototype;return n.parse=function(n){try{var t=e(),r=o("oz-player/shims/OzXmlParserTrustedTypesHTMLPolicy").createTrustedHTMLForDOMParser(n),a=this.$1.parseFromString(r,"application/xml"),i=a.querySelector("parsererror");if(i){var l=i.querySelector("h3"),u=l?l.nextElementSibling:null,c=u?u.innerHTML:i.innerHTML,d=2e3;throw o("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_XML_PARSER",description:"DOMParser parsererror: "+String(c).trim()+"; truncated xml ("+Math.min(d,n.length)+"/"+n.length+"): "+n.substring(0,d),extra:{}})}var m=a.documentElement;return m!=null&&(t[m.nodeName]=[s(m)]),t}catch(e){if(o("oz-player/utils/OzErrorUtils").isOzError(e))throw e;var p=2e3;throw o("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_XML_PARSER",description:"XML parse exception: "+String(e)+"; truncated xml ("+Math.min(p,n.length)+"/"+n.length+"): "+n.substring(0,p),extra:{originalError:e}})}},t})();l.default=u}),98);
__d("oz-player/playback_controls/OzClearSourceBufferOnSeekManager",["oz-player/shims/OzDeferred","oz-player/shims/OzMaybeNativePromise","oz-player/utils/OzCustomErrorCode","oz-player/utils/OzErrorEmitter","oz-player/utils/OzErrorUtils"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t,n,o){o===void 0&&(o=null),this.$3=new(r("oz-player/utils/OzErrorEmitter")),this.$4=new Map,this.$5=!1,this.$6=!1,this.$7=!1,this.$8=null,this.$9=[],this.$10=null,this.$11=null,this.$1=e,this.$2=t,this.$4=n,this.$11=o}var t=e.prototype;return t.$12=function(t){var e;return this.$5=!0,(e=this.$8)!=null?e:t.call(this.$1)},t.$13=function(t,n){this.$6=!0,this.$9.push({t:n}),this.$8=n,this.$9.length===1&&this.$14(t)},t.$15=function(t){return this.$7=!0,this.$8!=null?!0:t.call(this.$1)},t.$16=function(t,n){var e=new(r("oz-player/shims/OzDeferred"))(r("oz-player/shims/OzMaybeNativePromise")),o=[];this.$4.forEach(function(e,r){var a=e.clearSourceBufferRange(t,n);o.push(a)});var a=r("oz-player/shims/OzMaybeNativePromise").all(o);return a.then(function(){e.resolve()}).catch(function(t){e.reject(t)}),e.getPromise()},t.$14=function(t){var e=this,n=this.$9.length>0?this.$9[0]:null,a=this.$2.getNumber("clear_buffer_on_seek_epsilon_s");if(n){for(var i=n.t,l=this.$1.buffered,s=l.length,u=l.length<=0,c=-1,d=!1,m=0;c<0&&m<s;++m)c=i-a>=l.start(m)&&i+a<l.end(m)?m:c,d=i<l.start(m)-a;var p=c>-1,_=this.$2.getNumber("clear_buffer_on_seek_nudge_s");if(p&&c>=0&&c<s&&_>0&&(i=Math.min(i,l.end(c)-_),i=Math.max(i,l.start(c)+_)),u||p||!d)this.$11&&this.$11.getOperationLogger("seek_to_next_time").setLength(Math.round(i*1e3)).setInitiator("no_clear").log(),t.call(this.$1,i),this.$9.shift(),this.$14(t);else{var f=null;this.$11&&(f=this.$11.getOperationLogger("clear_buffer_before_seek").setLength(Math.round(i*1e3)).setUserInfo({bufferRangesLength:String(s),nudgeSec:String(_)}).start());var g=this.$16(Math.max(i-a,0),l.end(s-1)+a);g.then(function(){f&&f.log(),e.$11&&e.$11.getOperationLogger("seek_to_next_time").setLength(Math.round(i*1e3)).setInitiator("after_clear").log(),t.call(e.$1,i),e.$9.shift(),e.$14(t)}).catch(function(t){f&&f.setError(t).log(),e.$3.emitError(o("oz-player/utils/OzErrorUtils").isOzError(t)?t:o("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SOURCE_BUFFER",description:t?t.name+": "+t.message:"Unknown error while clearing the buffer.",extra:{code:r("oz-player/utils/OzCustomErrorCode").SOURCE_BUFFER_MANAGER_CLEAR_RANGE_FAILED,originalError:t}}))})}}else this.$8=null},t.maybeOverwriteVideoCurrentTimeProperty=function(){var e=this,t=Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(this.$1,"currentTime");t=t!=null?t:Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"currentTime");var n=Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(this.$1,"seeking");n=n!=null?n:Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"seeking");var r=t&&typeof t.get=="function"?t.get:null,o=t&&typeof t.set=="function"?t.set:null,a=n&&typeof n.get=="function"?n.get:null;if(r&&o&&a&&Object.defineProperty){try{Object.defineProperty(this.$1,"currentTime",{get:function(){return e.$12(r)},set:function(n){e.$13(o,n)},configurable:!0,enumerable:!0}),Object.defineProperty(this.$1,"seeking",{get:function(){return e.$15(a)},configurable:!0,enumerable:!0});var i=this.$1.currentTime;this.$1.currentTime=i,this.$1.seeking}catch(e){}this.$17(function(){e.getCurrentTimePropertyOverwriteSuccess()&&Object.defineProperty(e.$1,"currentTime",{get:r,set:o,configurable:!0,enumerable:!0}),e.getSeekingPropertyOverwriteSuccess()&&Object.defineProperty(e.$1,"seeking",{get:a,configurable:!0,enumerable:!0})})}},t.getCurrentTimePropertyOverwriteSuccess=function(){return this.$5&&this.$6},t.getSeekingPropertyOverwriteSuccess=function(){return this.$7},t.$17=function(t){this.$10=t},t.onError=function(t){return this.$3.onError(t)},t.destroy=function(){try{this.$10&&this.$10()}catch(e){}},e})();l.default=e}),98);
__d("oz-player/playback_controls/OzSteadyStateManager",["oz-player/shims/ozvariant"],(function(t,n,r,o,a,i,l){"use strict";function e(e){throw new TypeError('"'+e+'" is read-only')}var s=(function(){function e(e,t){this.$1=[],this.$2=e,this.$3=t}var t=e.prototype;return t.addSample=function(t){var e,n,r=Math.floor(Date.now()/(1e3*this.$3)),o=r%this.$2;((e=this.$1[o])==null?void 0:e.bucketNumber)!=r&&(this.$1[o]={bucketNumber:0,val:null}),this.$1[o]={bucketNumber:r,val:Math.min(t,(n=this.$1[o].val)!=null?n:t)}},t.min=function(){var e=this,t,n=Date.now(),o=this.$1.filter(function(t){return t!=null&&t.val!=null&&n-e.$2*1e3*e.$3<t.bucketNumber*1e3*e.$3});if(o.length<this.$2)return null;var a=o.reduce(function(e,t){if(e==null)return t;var n=t.val;n!=null||r("oz-player/shims/ozvariant")(0,56011);var o=e.val;return o!=null||r("oz-player/shims/ozvariant")(0,56011),n<o?t:e},null);return(t=a)==null?void 0:t.val},t.reset=function(){this.$1=[]},e})();l.default=s}),98);
__d("oz-player/playback_controls/OzLiveLatencyManager",["oz-player/playback_controls/OzSteadyStateManager","oz-player/shims/OzDOMEventListener","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/ozThrottle","oz-player/utils/OzSourceBufferUtil"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){var t=this;this.$8=new(r("oz-player/shims/OzSubscriptionsHandler")),this.$9=null,this.$10=!1,this.$11=null,this.$12=null,this.$13=null,this.$14=!0;var n=e.config,o=e.mpd,a=e.playbackState,i=e.bufferingDetector,l=e.video,s=e.loggerProvider,u=e.getUserSelectedPlaybackRate;if(this.$1=n,this.$2=o,this.$3=a,this.$15=u,n.getNumber("steadystate_minbuffer_buckets")>0&&(this.$7=new(r("oz-player/playback_controls/OzSteadyStateManager"))(this.$1.getNumber("steadystate_minbuffer_buckets"),this.$1.getNumber("steadystate_minbuffer_buckets_sec"))),i!=null&&(this.$8.addSubscriptions(i.addListener("enterBuffering",function(e){var n;if(e==="in_play"){var r;t.$9=0,(r=t.$7)==null||r.reset()}t.$10=!1,(n=t.$6)==null||n.log(),t.$6=null})),this.$8.addSubscriptions(i.addListener("leaveBuffering",function(){t.$9===0&&(t.$9=Date.now()),t.$10=!1}))),this.$4=l,this.$5=s,this.$16()){var c;this.$8.addSubscriptions((c=r("oz-player/shims/OzDOMEventListener")).listenDOMEvent(this.$4,"timeupdate",r("oz-player/shims/ozThrottle")(function(){t.$17(),t.$18()},this.$1.getNumber("playhead_manager_timeupdate_throttle_ms"))),c.listenDOMEvent(this.$4,"waiting",function(){t.$17()}),c.listenDOMEvent(this.$4,"durationchange",function(){t.$17()}),c.listenDOMEvent(this.$4,"seeking",function(){var e;t.$13=Date.now(),t.$11=null,(e=t.$7)==null||e.reset()}),c.listenDOMEvent(this.$4,"playing",function(){t.$13=Date.now(),t.$11=null}),c.listenDOMEvent(l,"pause",function(){var e;return(e=t.$7)==null?void 0:e.reset()}))}}var t=e.prototype;return t.enabled=function(){var e=this.$1.getNumber("catchup_timeout_after_buffering_sec");return e===0||this.$9==null||this.$9!==0&&this.$9+e*1e3<=Date.now()},t.isBehindPreferredLiveHeadLatencyWithTolerance=function(){return this.$3.getCurrentTime()<this.getInitialPlayHeadPosition()-this.getPreferredLiveHeadLatencyToleranceSec()},t.$19=function(){return this.$3.getCurrentTime()<this.getInitialPlayHeadPosition()},t.$20=function(){var e,t=(e=this.$7)==null?void 0:e.min();return!this.$21()&&t!=null&&t>this.$1.getNumber("steadystate_minbuffer_sec")},t.getInitialPlayHeadPosition=function(){return this.getLiveHeadTimeSec()-this.getPreferredLiveHeadLatencySec()},t.getLiveHeadTimeSec=function(){var e,t=this.$22();return(t==null||(e=t.getEndingSegment())==null?void 0:e.getTimeRange().endTime)||0},t.$21=function(){return this.$9!=null&&this.$1.getBool("latencymanager_stalled_edgelatency_sec_on")},t.getPreferredLiveHeadLatencySec=function(){var e=this.$21()?this.$1.getNumber("latencymanager_stalled_edgelatency_sec"):this.$1.getNumber("pdash_download_cursor_catchup_threshold_sec"),t=this.$23(e);return this.$5.getOperationLogger("latency_manager").setPreferredEdgeLatency(t*1e3),t},t.getPreferredLiveHeadLatencyToleranceSec=function(){return this.$1.getNumber("pdash_download_cursor_catchup_tolerance_sec")},t.shouldEnableManifestTimeRangeCatchup=function(){return!this.$1.getNumber("pdash_download_cursor_catchup_threshold_sec")},t.shouldEnableCursorBasedCatchup=function(){var e=this.$2.getVideoRepresentations()[0],t=e&&e.canPredict();return t&&this.$1.getNumber("pdash_download_cursor_catchup_threshold_sec")>0},t.setEnableCatchup=function(t){var e=this.$14;!this.$14&&t===!0&&(this.$9=null),this.$14=t,this.$1.getBool("fix_live_rewind_user_selected_playback_speed")&&t!==e&&this.$18()},t.$24=function(t,n,r){var e=this.$1.getNumber("playback_speed_min_sharpness_factor"),o=t*2/(1+Math.pow(Math.E,-(r-n)*e));return 1-t+o},t.$16=function(){return!this.$1.getBool("playback_speed_latency_adjustment_disabled")&&(this.$1.getNumber("playback_speed_latency_adjustment_rate")>0||this.$1.getNumber("playback_speed_latency_slowdown_adjustment_rate")>0||this.$1.getNumber("playback_speed_latency_speedup_adjustment_rate")>0)},t.$17=function(){var e,t=o("oz-player/utils/OzSourceBufferUtil").getBufferAheadInBufferedRanges(o("oz-player/utils/OzSourceBufferUtil").convertToBufferedTimeRangeArray(this.$4.buffered),this.$3.getCurrentTime(),this.$1).bufferAheadSec;(e=this.$7)==null||e.addSample(t)},t.$18=function(){var e=o("oz-player/utils/OzSourceBufferUtil").getBufferAheadInBufferedRanges(o("oz-player/utils/OzSourceBufferUtil").convertToBufferedTimeRangeArray(this.$4.buffered),this.$3.getCurrentTime(),this.$1),t=e.bufferAheadSec,n=e.bufferedOffset;this.$25(t,n)},t.$25=function(t,n){var e=this.$1.getNumber("playback_speed_enabled_delay_sec"),r=this.$1.getNumber("playback_speed_min_buffer_sec");t>r&&(this.$10=!0);var o=this.$1.getNumber("playback_speed_min_duration_sec"),a=this.$1.getNumber("playback_speed_restore_min_duration_sec"),i=this.$1.getNumber("playback_speed_latency_adjustment_rate"),l=this.$1.getNumber("playback_speed_latency_slowdown_adjustment_rate"),s=this.$1.getNumber("playback_speed_latency_speedup_adjustment_rate");if(this.$4.playbackRate===0){var u;(u=this.$6)==null||u.log(),this.$6=null}else if(this.$14&&this.$10&&t<r&&(i>0||l>0)&&n===0&&(e===0||this.$13!=null&&this.$13+e*1e3<Date.now())){var c=l>0?1-l:this.$24(i,r,t);this.$6==null&&(this.$6=this.$5.getOperationLogger("latency_manager").start().setInitiator("speed_adjustment").setReason("slow").setUserInfo({newPlaybackRate:String(c),oldPlaybackRate:String(this.$4.playbackRate)})),this.$26(c)}else if(this.$14&&this.$10&&(this.$19()||this.$20())&&s>0&&n===0&&(this.$12==null||this.$12+a*1e3<Date.now())&&(e===0||this.$13!=null&&this.$13+e*1e3<Date.now())){var d=1+s;this.$6==null&&(this.$6=this.$5.getOperationLogger("latency_manager").start().setInitiator("speed_adjustment").setReason("fast").setUserInfo({newPlaybackRate:String(d),oldPlaybackRate:String(this.$4.playbackRate)})),this.$26(d)}else if(this.$14===!1||this.$11==null||this.$11+o*1e3<Date.now()){var m,p=this.$4.playbackRate;this.$1.getBool("fix_live_rewind_user_selected_playback_speed")?this.$4.playbackRate=this.$14===!1?this.$15():1:this.$4.playbackRate=1,(m=this.$6)==null||m.log(),this.$6=null,p!==this.$4.playbackRate&&(this.$12=Date.now())}},t.$26=function(t){try{this.$4.playbackRate=t,this.$11=Date.now()}catch(t){var e;(e=this.$6)==null||e.setError(t).setResult("failed").log(),this.$6=null}},t.$22=function(){var e=this.$2.getVideoRepresentations().concat(this.$2.getAudioRepresentations());return e.length===0?null:e.reduce(function(e,t){var n,r;return(((n=e.getEndingSegment())==null?void 0:n.getTimeRange().endTime)||0)>(((r=t.getEndingSegment())==null?void 0:r.getTimeRange().endTime)||0)?e:t})},t.$23=function(t){var e,n;if(t<=0)return t;var r=this.$22(),o=r==null||(e=r.getEndingSegment())==null?void 0:e.getTimeRange();if(!o)return t;var a=r==null||(n=r.getSegmentByTime((o==null?void 0:o.endTime)-t))==null?void 0:n.getTimeRange();return a?(o==null?void 0:o.endTime)-(a==null?void 0:a.startTime):t},t.destroy=function(){this.$8.release()},e})();l.default=e}),98);
__d("oz-player/playback_controls/OzPlaybackTimeRangeManager",["oz-player/shims/OzSubscriptionsHandler","oz-player/utils/OzBufferingUtils"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){var t=this;this.$4=null,this.$5=0,this.$6=0,this.$7=!0,this.$8=0,this.$9=0,this.$10=!1,this.$12=0,this.$13=0,this.$15=new(r("oz-player/shims/OzSubscriptionsHandler")),this.$17=function(){t.$10!=t.$14.isPlaying()&&(t.$14.isPlaying()&&(t.$11=Date.now()),t.$10=t.$14.isPlaying())};var n=e.video,o=e.config,a=e.mpd,i=e.liveheadFallBehindBlockThreshold,l=e.liveheadFallBehindBlockMargin,s=e.playbackState,u=e.perfLoggerProvider;this.$1=o,this.$2=n,this.$3=a,this.$8=i,this.$9=l,this.$14=s,this.$16=u,this.$1.getNumber("catchup_timeout_after_play_sec")!==0&&this.$15.addSubscriptions(this.$14.addEventListener("play",this.$17),this.$14.addEventListener("pause",this.$17))}var t=e.prototype;return t.setTimelineBlockingEnabled=function(t){this.$7=t,this.$7||this.$3.unblockTimeRange()},t.setTimeRangeProvider=function(t){var e=this;this.$4!=null&&this.$4.remove(),this.$4=t.addUpdateListener(function(){var n=t.getTimeRanges(),r=0;if(n.length!==0){var o=n[n.length-1];r=o.endTime}e.$18(r)})},t.$18=function(t){var e;if(this.$7&&this.$5!==t&&(this.$5=t,!(this.$2.currentTime<=this.$6))){var n=this.$1.getBool("catchup_use_timeline_range_end_time_as_end")?t:this.$2.duration,r=this.$1.getNumber("overwrite_livehead_fall_behind_block_threshold")!==0?this.$1.getNumber("overwrite_livehead_fall_behind_block_threshold"):this.$8,a=this.$1.getNumber("overwrite_live_time_range_block_margin")!==0?this.$1.getNumber("overwrite_live_time_range_block_margin"):this.$9;this.$17(),this.$1.getBool("reset_catchup_timeout_after_play_sec_on_overwrite")&&(this.$13!=a||this.$12!=r)&&(this.$13=a,this.$12=r,this.$11=Date.now());var i=this.$1.getNumber("catchup_timeout_after_play_sec")===0||Date.now()-((e=this.$11)!=null?e:0)<this.$1.getNumber("catchup_timeout_after_play_sec")*1e3;if(i&&this.$1.getNumber("pdash_download_cursor_catchup_threshold_sec")===0&&a!==0&&r!==0&&n-this.$2.currentTime>r){for(var l=[],s=0;s<this.$2.buffered.length;s++)l.push({startTime:this.$2.buffered.start(s),endTime:this.$2.buffered.end(s)});var u=o("oz-player/utils/OzBufferingUtils").getBufferAheadFromCurrentTime(this.$2.currentTime,l);this.$6=this.$2.currentTime+Math.min(u,a);var c={startTime:this.$6,endTime:n-a};this.$16.getOperationLogger("latency_manager").setInitiator("time_range_manager").setReason("blocked_range").setLength(c.endTime-c.startTime).setUserInfo({blockedRangeStart:String(c.startTime),blockedRangeEnd:String(c.endTime)}).log(),this.$3.blockTimeRange(c)}}},t.destroy=function(){this.$4!=null&&(this.$4.remove(),this.$4=null),this.$15.release()},e})();l.default=e}),98);
__d("oz-player/strategies/LiveheadSeekaheadStrategy",[],(function(t,n,r,o,a,i){"use strict";var e=.05;function l(t,n){var r=Math.max.apply(Math,n.map(function(e){return e.startTime}));return r-t>0?r-t+e:0}i.computeSeekAhead=l}),66);
__d("oz-player/utils/OzTimelineGapUtil",["oz-player/utils/OzNumericalHelper","oz-player/utils/OzNumericalRangeUtil"],(function(t,n,r,o,a,i,l){"use strict";var e=1.5;function s(e,t,n,r){var a=t.map(function(e){return{rangeStart:e.startTime,rangeEnd:e.endTime}});return o("oz-player/utils/OzNumericalRangeUtil").findCurrentRangeIndex(n,e,a,r)===-1}function u(t,n,r,a,i){i===void 0&&(i=e);var l=n.map(function(e){return{rangeStart:e.startTime,rangeEnd:e.endTime}}),s=o("oz-player/utils/OzNumericalRangeUtil").findCurrentRangeIndex(r,t,l,a);if(s!==-1){var u=n[s];return o("oz-player/utils/OzNumericalHelper").lessThanOrEqual(t,u.endTime)&&u.endTime-t<i}return!1}l.isInGap=s,l.isNearGap=u}),98);
__d("oz-player/playback_controls/OzPlayheadManager",["oz-player/shims/OzDOMEventListener","oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/ozThrottle","oz-player/shims/ozvariant","oz-player/strategies/LiveheadSeekaheadStrategy","oz-player/utils/OzNumericalRangeUtil","oz-player/utils/OzSourceBufferUtil","oz-player/utils/OzTimelineGapUtil"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){this.$1=e.perfLoggerProvider,this.$2=e.video,this.$4=e.config}var t=e.prototype;return t.markState=function(t,n){var e=o("oz-player/utils/OzSourceBufferUtil").convertToBufferedTimeRangeArray(this.$2.buffered),r=this.$3;if(r==null){this.$3=e;return}var a=o("oz-player/utils/OzSourceBufferUtil").getBufferAheadInBufferedRanges(e,n.getCurrentTime(),this.$4),i=o("oz-player/utils/OzSourceBufferUtil").getBufferAheadInBufferedRanges(r,n.getCurrentTime(),this.$4);i.bufferedOffset!==-1&&a.bufferedOffset===-1&&this.$1.getOperationLogger("playhead_adjustment").setError("buffer_deleted").setResult("failed").setUserInfo({vidSeeking:String(this.$2.seeking),vidErrCode:this.$2.error?String(this.$2.error.code):null}).setInitiator(t).log(),this.$3=e},e})(),s=(function(){function e(e){this.$5=!1,this.$6={},this.$1=e.perfLoggerProvider,this.$2=e.video}var t=e.prototype;return t.markState=function(t,n){var e=this;if(this.$2.paused){this.$3=null,this.$4=null,this.$5=!1,this.$6={};return}(this.$3==null||this.$2.currentTime>this.$3)&&(this.$4=Date.now(),this.$3=this.$2.currentTime,this.$5=!1,this.$6={}),this.$6[t]=this.$6[t]==null?1:this.$6[t]+1;var r=this.$4;if(!this.$5&&!this.$2.paused&&r!=null&&r+1e4<Date.now()){this.$5=!0;var o={};Object.keys(this.$6).forEach(function(t){o[t]=String(e.$6[t])}),this.$1.getOperationLogger("playhead_adjustment").setError("not_advancing").setResult("failed").setLength(Date.now()-r).setUserInfo(babelHelpers.extends({},o,n,{lastCurrentTime:String(this.$3),lastCurrentTimeChanged:String(r-Date.now()),vidSeeking:String(this.$2.seeking),vidErrCode:this.$2.error?String(this.$2.error.code):null})).setInitiator(t).log()}},e})(),u=(function(t){function n(n){var a;a=t.call(this)||this,a.$OzPlayheadManager$p_2=new(r("oz-player/shims/OzSubscriptionsHandler")),a.$OzPlayheadManager$p_3=new(r("oz-player/shims/OzSubscriptionsHandler")),a.$OzPlayheadManager$p_4=new Set,a.$OzPlayheadManager$p_10=new Set,a.$OzPlayheadManager$p_12=function(e){a.$OzPlayheadManager$p_1.currentTime=e},a.$OzPlayheadManager$p_14=!1,a.$OzPlayheadManager$p_15=!1,a.$OzPlayheadManager$p_16=!0,a.$OzPlayheadManager$p_17=!1,a.$OzPlayheadManager$p_23=function(e,t){if(t===void 0&&(t=null),!(a.$OzPlayheadManager$p_20!=null&&!a.$OzPlayheadManager$p_20.shouldEnableManifestTimeRangeCatchup())){var n=a.$OzPlayheadManager$p_9;if(n&&n.isEnabled(a.$OzPlayheadManager$p_1,a.$OzPlayheadManager$p_8)){var r=n.computeNewPlayheadPosition(a.$OzPlayheadManager$p_1,a.$OzPlayheadManager$p_8);if(typeof r=="number"){a.$OzPlayheadManager$p_27(r,"live_catch_up_strategy",e,t);return}}var i=a.$OzPlayheadManager$p_6.getNumber("auto_seek_playhead_slack");if(i!==0){var l=a.$OzPlayheadManager$p_5;if(l){var s=a.$OzPlayheadManager$p_7.getCurrentTime(),u=l.getTimeRanges().map(function(e){return{rangeStart:e.startTime,rangeEnd:e.endTime}}),c=o("oz-player/utils/OzNumericalRangeUtil").findNextRangeIndex(s,u);if((o("oz-player/utils/OzTimelineGapUtil").isNearGap(s,l.getTimeRanges(),a.$OzPlayheadManager$p_6)||o("oz-player/utils/OzTimelineGapUtil").isInGap(s,l.getTimeRanges(),a.$OzPlayheadManager$p_6))&&c!==-1){var d=u[c];a.$OzPlayheadManager$p_27(d.rangeStart+i,"jump_over_timeline_gap",e,t)}}}}};var i=n.video,l=n.mpd,u=n.playheadCatchup,c=n.playbackState,d=n.config,m=n.perfLoggerProvider,p=n.seekHandler,_=n.initialPlaybackPosition,f=n.canSupportSkipVideobufferGaps,g=n.liveLatencyManager,h=n.dynamicVideoLibrary;return a.$OzPlayheadManager$p_1=i,a.$OzPlayheadManager$p_6=d,a.$OzPlayheadManager$p_7=c,a.$OzPlayheadManager$p_8=l,a.$OzPlayheadManager$p_9=u,a.$OzPlayheadManager$p_11=m,p&&(a.$OzPlayheadManager$p_12=p),a.$OzPlayheadManager$p_17=f,a.$OzPlayheadManager$p_20=g,a.$OzPlayheadManager$p_13=_,a.$OzPlayheadManager$p_21=h,a.$OzPlayheadManager$p_18=new s({video:i,perfLoggerProvider:m}),a.$OzPlayheadManager$p_19=new e({video:i,perfLoggerProvider:m,config:d}),a.$OzPlayheadManager$p_2.addSubscriptions(r("oz-player/shims/OzDOMEventListener").listenDOMEvent(a.$OzPlayheadManager$p_1,"durationchange",function(){a.setPlaybackPositionOnFirstDurationChange("durationchange",a.$OzPlayheadManager$p_1.duration),a.$OzPlayheadManager$p_23("durationchange"),a.$OzPlayheadManager$p_24("durationchange")}),r("oz-player/shims/OzDOMEventListener").listenDOMEvent(a.$OzPlayheadManager$p_1,"pause",function(){a.$OzPlayheadManager$p_23("pause")}),r("oz-player/shims/OzDOMEventListener").listenDOMEvent(a.$OzPlayheadManager$p_1,"play",function(){a.$OzPlayheadManager$p_23("play")}),r("oz-player/shims/OzDOMEventListener").listenDOMEvent(a.$OzPlayheadManager$p_1,"playing",function(){a.$OzPlayheadManager$p_23("playing")}),r("oz-player/shims/OzDOMEventListener").listenDOMEvent(a.$OzPlayheadManager$p_1,"waiting",function(){a.$OzPlayheadManager$p_24("waiting")}),r("oz-player/shims/OzDOMEventListener").listenDOMEvent(a.$OzPlayheadManager$p_1,"timeupdate",r("oz-player/shims/ozThrottle")(function(){a.$OzPlayheadManager$p_23("timeupdate"),a.$OzPlayheadManager$p_6.getBool("playhead_manager_buffered_timerange_update_on_timeupdate")&&a.$OzPlayheadManager$p_24("timeupdate")},a.$OzPlayheadManager$p_6.getNumber("playhead_manager_timeupdate_throttle_ms"))),r("oz-player/shims/OzDOMEventListener").listenDOMEvent(a.$OzPlayheadManager$p_1,"seeking",function(){a.$OzPlayheadManager$p_22=Date.now()})),a}babelHelpers.inheritsLoose(n,t);var a=n.prototype;return a.$OzPlayheadManager$p_25=function(){return this.$OzPlayheadManager$p_1.playbackRate===0},a.observeSourceBufferState=function(t,n){var e=this;!this.$OzPlayheadManager$p_4.has(t)||r("oz-player/shims/ozvariant")(0,4179),this.$OzPlayheadManager$p_4.add(t),this.$OzPlayheadManager$p_2.addSubscriptions(t.addEventListener("buffer_updated",function(){e.$OzPlayheadManager$p_26(t,n),e.$OzPlayheadManager$p_6.getBool("skip_videobuffer_gaps_on_buffer_updated")&&e.$OzPlayheadManager$p_17&&e.$OzPlayheadManager$p_24("buffer_updated")}))},a.$OzPlayheadManager$p_26=function(t,n){var e=[];this.$OzPlayheadManager$p_4.forEach(function(t){var n=t.getBufferedRanges();n.length&&e.push(n[0])}),e.length>0&&this.$OzPlayheadManager$p_10.add(t);var r=this.$OzPlayheadManager$p_1.currentTime,a=o("oz-player/strategies/LiveheadSeekaheadStrategy").computeSeekAhead(r,e),i=this.$OzPlayheadManager$p_6.getNumber("timeline_offset_threshold");a>0&&(i===0||a<i)&&this.$OzPlayheadManager$p_27(this.$OzPlayheadManager$p_1.currentTime+a,"first_available_buffer","source_buffer",n)},a.setTimeRangeProvider=function(t){var e=this;this.$OzPlayheadManager$p_3.release(),this.$OzPlayheadManager$p_3.engage(),this.$OzPlayheadManager$p_3.addSubscriptions(t.addUpdateListener(function(){e.$OzPlayheadManager$p_23("time_range_updated")})),this.$OzPlayheadManager$p_5=t,this.$OzPlayheadManager$p_23("time_range_set")},a.resetCurrentTime=function(){this.$OzPlayheadManager$p_15=!1,this.setPlaybackPositionOnFirstDurationChange("reset",this.$OzPlayheadManager$p_1.duration)},a.setPlaybackPositionOnFirstDurationChange=function(t,n){if(this.$OzPlayheadManager$p_13!==0&&!this.$OzPlayheadManager$p_15&&!isNaN(n)&&n!==1/0){var e=this.$OzPlayheadManager$p_13>0?this.$OzPlayheadManager$p_13:n+this.$OzPlayheadManager$p_13;if(this.$OzPlayheadManager$p_20!=null){var r;e=(r=this.$OzPlayheadManager$p_20)==null?void 0:r.getInitialPlayHeadPosition()}if(this.$OzPlayheadManager$p_15=!0,this.$OzPlayheadManager$p_6.getBool("playhead_manager_clamp_initial_playback_position")){var o,a=(o=this.$OzPlayheadManager$p_5)==null?void 0:o.getTimeRanges();a!=null&&a.length>0&&a[0].startTime>e&&(e=a[0].startTime)}this.$OzPlayheadManager$p_27(e,"initial_playback_position",t),this.emit("initialPlaybackPositionSet",e)}},a.$OzPlayheadManager$p_24=function(t){var e,n,r=this;if(this.$OzPlayheadManager$p_6.getBool("skip_videobuffer_gaps")&&this.$OzPlayheadManager$p_17){var a=this.$OzPlayheadManager$p_6.getNumber("playhead_manager_buffered_auto_seek_playhead_slack");if(a!==0){for(var i=this.$OzPlayheadManager$p_7.getCurrentTime(),l=[],s=0;s<this.$OzPlayheadManager$p_1.buffered.length;s++)l.push({startTime:this.$OzPlayheadManager$p_1.buffered.start(s),endTime:this.$OzPlayheadManager$p_1.buffered.end(s)});var u=l.map(function(e){return{rangeStart:e.startTime,rangeEnd:e.endTime}});this.$OzPlayheadManager$p_19&&this.$OzPlayheadManager$p_19.markState(t,this.$OzPlayheadManager$p_7);var c=o("oz-player/utils/OzNumericalRangeUtil").findNextRangeIndex(i,u),d=o("oz-player/utils/OzNumericalRangeUtil").findCurrentRangeIndex(this.$OzPlayheadManager$p_6,i,u),m=this.$OzPlayheadManager$p_16?0:this.$OzPlayheadManager$p_6.getNumber("skip_videobuffer_gaps_max_gap_size_sec"),p=this.$OzPlayheadManager$p_6.getNumber("playhead_manager_buffered_is_near_gap_threshold"),_=this.$OzPlayheadManager$p_6.getNumber("playhead_manager_buffered_numerical_error"),f=(e=this.$OzPlayheadManager$p_21)==null?void 0:e.getLastSegmentStartPTS(),g=f!=null?f/1e3:null,h=(n=this.$OzPlayheadManager$p_21)==null?void 0:n.getLast200RequestedUrlDecisionMinTime(),y=g!=null?o("oz-player/utils/OzNumericalRangeUtil").findCurrentRangeIndex(this.$OzPlayheadManager$p_6,g,u):-1,C=y>=0?u[y]:null,b=function(n){var e=r.$OzPlayheadManager$p_22==null||h==null||r.$OzPlayheadManager$p_22<h;return!e&&n!=null&&r.$OzPlayheadManager$p_11.getOperationLogger("playhead_adjustment").setError("ignore_before_seek_main_"+n).setResult("failed").setInitiator(t).setUserInfo({last200RequestedUrlDecisionMinTime:String(h),lastSeekTime:String(r.$OzPlayheadManager$p_22)}).log(),e};if(g!=null&&this.$OzPlayheadManager$p_25()&&this.$OzPlayheadManager$p_16==!1&&b("buf")){if(g<i&&C!=null&&C.rangeStart<=g&&C.rangeEnd!=null&&C.rangeEnd>g){this.$OzPlayheadManager$p_27(g,"reverse_jump_over_buffer_gap",t,null,{lastSegmentStartPTS:String(f),last200RequestedUrlDecisionMinTime:String(h),lastSeekTime:String(this.$OzPlayheadManager$p_22)});return}if(C!=null&&y!=d){this.$OzPlayheadManager$p_27(C.rangeStart,"jump_over_buffer_gap_last_dl_range",t,null,{lastSegmentStartPTS:String(f),last200RequestedUrlDecisionMinTime:String(h),lastSeekTime:String(this.$OzPlayheadManager$p_22)});return}}if((o("oz-player/utils/OzTimelineGapUtil").isNearGap(i,l,this.$OzPlayheadManager$p_6,_,p)||o("oz-player/utils/OzTimelineGapUtil").isInGap(i,l,this.$OzPlayheadManager$p_6,_))&&c!==-1&&(m===0||u[c].rangeStart-i<m)&&(this.$OzPlayheadManager$p_16==!0||b("main"))){var v=u[c];this.$OzPlayheadManager$p_6.getBool("enable_alternative_audio_tracks")&&this.$OzPlayheadManager$p_8.isStaticMpd()&&v.rangeStart!==0&&v.rangeEnd===this.$OzPlayheadManager$p_7.getDuration()?this.$OzPlayheadManager$p_27(0,"do_not_jump_over_buffer_gap",t,null,{lastSegmentStartPTS:String(f),last200RequestedUrlDecisionMinTime:String(h),lastSeekTime:String(this.$OzPlayheadManager$p_22)}):this.$OzPlayheadManager$p_27(v.rangeStart+a,"jump_over_buffer_gap",t,null,{lastSegmentStartPTS:String(f),last200RequestedUrlDecisionMinTime:String(h),lastSeekTime:String(this.$OzPlayheadManager$p_22)});return}this.$OzPlayheadManager$p_18&&this.$OzPlayheadManager$p_18.markState(t,{nextBufferedRangeIndex:String(c),limitMaxGapSize:String(m),rangeStart:c!==-1?String(u[c].rangeStart):null,isNearGapThreshold:String(p),numericalError:String(_)})}}},a.setEnableLiveheadCatchup=function(t){this.$OzPlayheadManager$p_16=t},a.destroy=function(){this.$OzPlayheadManager$p_2.release(),this.$OzPlayheadManager$p_3.release(),this.$OzPlayheadManager$p_4.clear()},a.$OzPlayheadManager$p_27=function(t,n,r,o,a){var e=t-this.$OzPlayheadManager$p_1.currentTime,i=this.$OzPlayheadManager$p_6.getNumber("seek_ahead_epsilon");i>0&&Math.abs(e)<=i||(this.$OzPlayheadManager$p_11.getOperationLogger("playhead_adjustment").setLength(Math.round(t*1e3)).setReason(n).setInitiator(r).setType(o).setUserInfo(babelHelpers.extends({},a,{seekAdjustment:String(Math.round(e*1e3))})).log(),this.$OzPlayheadManager$p_12(t),n==="initial_playback_position"&&(this.$OzPlayheadManager$p_14=!0))},n})(r("oz-player/shims/OzEventEmitter"));l.default=u}),98);
__d("oz-player/shims/www/OzUuidWWW",["uuidv4"],(function(t,n,r,o,a,i,l){"use strict";l.default=r("uuidv4")}),98);
__d("oz-player/shims/OzUuid",["oz-player/shims/www/OzUuidWWW"],(function(t,n,r,o,a,i,l){"use strict";l.default=r("oz-player/shims/www/OzUuidWWW")}),98);
__d("oz-player/states/OzObservedPlaybackState",["oz-player/loggings/OzMultiDestinationPerfLogger","oz-player/shims/OzDOMEventListener","oz-player/shims/OzSubscriptionsHandler"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t,n){var a=this;n===void 0&&(n=new(o("oz-player/loggings/OzMultiDestinationPerfLogger")).OzMultiDestinationPerfLoggerProvider([])),this.$2=new(r("oz-player/shims/OzSubscriptionsHandler")),this.$4=function(){a.$3.getOperationLogger("pause").setState("paused").log()},this.$5=function(){a.$3.getOperationLogger("playing").setState("playing").log()},this.$1=t,this.$3=n,this.$2.addSubscriptions(r("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"pause",this.$4),r("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"playing",this.$5))}var t=e.prototype;return t.isPlaying=function(){return!this.$1.paused},t.getCurrentTime=function(){return this.$1.currentTime},t.getCurrentTimeUpdateTime=function(){return Date.now()},t.getDuration=function(){return this.$1.duration},t.addEventListener=function(t,n){return r("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,t,n)},t.destroy=function(){this.$2.release()},e})();l.default=e}),98);
__d("oz-player/utils/OzPositionToViewportUtils",[],(function(t,n,r,o,a,i){"use strict";function e(e,t,n){var r=t.filter(function(e){var t=e.position;if(t==null)return!1;var r=t.y-window.scrollY;return r>=0||(t.height+r)/t.height>n}).sort(function(e,t){return e.position==null||t.position==null?0:e.position.y-t.position.y});return r.findIndex(function(t){return t.video===e})}function l(e){return e.isIntersecting!=null?e.isIntersecting:e.intersectionRatio>0||e.intersectionRect&&(e.intersectionRect.height>0||e.intersectionRect.width>0)}i.determinePositionIndexOfVideoFromViewportVertically=e,i.intersectionObserverEntryIsIntersecting=l}),66);
__d("oz-player/states/OzPositionToViewportTracker",["oz-player/shims/OzEventEmitter","oz-player/utils/OzPositionToViewportUtils"],(function(t,n,r,o,a,i,l){"use strict";var e=null,s=.5,u=(function(t){function n(e){var n;return n=t.call(this)||this,n.$OzPositionToViewportTracker$p_1=[],n.$OzPositionToViewportTracker$p_5=function(e){e.forEach(function(e){var t=n.$OzPositionToViewportTracker$p_1.find(function(t){return e.target===t.video});t!=null&&(o("oz-player/utils/OzPositionToViewportUtils").intersectionObserverEntryIsIntersecting(e)?t.position=n.$OzPositionToViewportTracker$p_7(e):n.$OzPositionToViewportTracker$p_1.map(function(t){e.target===t.video&&(t.position=null)})),n.$OzPositionToViewportTracker$p_1.forEach(function(e){e.positionIndexToViewportVertically=n.$OzPositionToViewportTracker$p_6(e.video)})}),n.emit("state_changed")},n.$OzPositionToViewportTracker$p_2=e,n}babelHelpers.inheritsLoose(n,t);var r=n.prototype;return r.$OzPositionToViewportTracker$p_4=function(){this.$OzPositionToViewportTracker$p_3==null&&(this.$OzPositionToViewportTracker$p_3=new IntersectionObserver(this.$OzPositionToViewportTracker$p_5,{rootMargin:this.$OzPositionToViewportTracker$p_2.getNumber("pixels_above_viewport_to_observe")+"px 0px "+this.$OzPositionToViewportTracker$p_2.getNumber("pixels_below_viewport_to_observe")+"px 0px",threshold:0}))},r.registerVideo=function(t){this.$OzPositionToViewportTracker$p_1.push({video:t,position:null,positionIndexToViewportVertically:-1}),this.$OzPositionToViewportTracker$p_4(),this.$OzPositionToViewportTracker$p_3!=null&&this.$OzPositionToViewportTracker$p_3.observe(t)},r.getPositionIndexOfVideoFromViewportVertically=function(t){var e=this.$OzPositionToViewportTracker$p_1.find(function(e){return e.video===t});return e!=null?e.positionIndexToViewportVertically:-1},r.$OzPositionToViewportTracker$p_6=function(t){return o("oz-player/utils/OzPositionToViewportUtils").determinePositionIndexOfVideoFromViewportVertically(t,this.$OzPositionToViewportTracker$p_1,s)},r.$OzPositionToViewportTracker$p_7=function(t){var e=t.boundingClientRect;return{x:e.x+window.scrollX,y:e.y+window.scrollY,width:e.width,height:e.height}},n.getInstance=function(r){return e==null&&(e=new n(r)),e},r.unregisterVideo=function(t){var e=this,n=[];this.$OzPositionToViewportTracker$p_1.forEach(function(r){r.video===t&&e.$OzPositionToViewportTracker$p_3!=null?e.$OzPositionToViewportTracker$p_3.unobserve(t):n.push(r)}),this.$OzPositionToViewportTracker$p_1=n,this.$OzPositionToViewportTracker$p_1.length===0&&this.$OzPositionToViewportTracker$p_3!=null&&(this.$OzPositionToViewportTracker$p_3.disconnect(),this.$OzPositionToViewportTracker$p_3=null)},n})(r("oz-player/shims/OzEventEmitter"));l.default=u}),98);
__d("oz-player/states/OzPositionToViewport",["oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler","oz-player/states/OzPositionToViewportTracker"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t,n){var o;return o=e.call(this)||this,o.$OzPositionToViewport$p_1=new(r("oz-player/shims/OzSubscriptionsHandler")),o.$OzPositionToViewport$p_3=t,o.$OzPositionToViewport$p_2=r("oz-player/states/OzPositionToViewportTracker").getInstance(n),o.$OzPositionToViewport$p_2.registerVideo(t),o.$OzPositionToViewport$p_1.addSubscriptions(o.$OzPositionToViewport$p_2.addListener("state_changed",function(){o.emit("state_changed")})),o}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.getPositionIndexOfVideoFromViewportVertically=function(){return this.$OzPositionToViewport$p_3!=null?this.$OzPositionToViewport$p_2.getPositionIndexOfVideoFromViewportVertically(this.$OzPositionToViewport$p_3):-1},n.destroy=function(){this.$OzPositionToViewport$p_3!=null&&this.$OzPositionToViewport$p_2.unregisterVideo(this.$OzPositionToViewport$p_3),this.$OzPositionToViewport$p_3=null},t})(r("oz-player/shims/OzEventEmitter"));l.default=e}),98);
__d("oz-player/strategies/OzPlaybackConfidenceUtils",[],(function(t,n,r,o,a,i){"use strict";var e=.8;function l(t,n,r,o,a,i){var l=Math.min(1,r/o),s=1+(1-l)*a,u=t.getBandwidth()*s;return u>n?e*(n/u):1-(1-e)*u/n}i.getPlaybackConfidence=l}),66);
__d("oz-player/strategies/OzAbrManager",["oz-player/networks/OzBandwidthEstimator","oz-player/strategies/OzPlaybackConfidenceUtils","oz-player/utils/OzAbrUtils","oz-player/utils/OzBufferingUtils","oz-player/utils/OzPlaybackRestrictionsUtils"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t,n,r,o,a,i,l,s){this.$2=0,this.$3=Date.now(),this.$4=!1,this.$10=null,this.$1=e,this.$5=t,this.$6=this.$15(t,n),this.$7=r,this.$8=o,this.$11=a,this.$12=i,this.$13=l,this.$14=s,this.$1.getBool("enable_abr_logging")&&this.$14.getOperationLogger("abr_initialized").setResult("success").setUserInfo({newRepresentationIds:n.map(function(e){return e.getID()}).join(","),newCodecs:n.map(function(e){return e.getCodecs()}).join("|"),newDisplayLabels:n.map(function(e){return e.getDisplayLabel()}).join(",")}).setRepresentationID(t.getID()).setType("video").setInitiator("OzAbrManager").log()}var t=e.prototype;return t.setSourceBuffer=function(t){this.$9=t},t.$15=function(t,n){var e=this.$1.getNumber("abr_restrict_from_index"),r=this.$1.getNumber("abr_restrict_to_index");if(r===0&&e===0)return n;var o=n.findIndex(function(e){return t.getID()===e.getID()});return o===-1?n:n.filter(function(t,n){return n-o>=e&&n-o<=r})},t.$16=function(t){var e=o("oz-player/utils/OzAbrUtils").excludeLargeRepresentations(t,this.$12(),this.$11,{resolutionConstraintFactor:this.$1.getNumber("resolution_constraint_factor")});return e=o("oz-player/utils/OzPlaybackRestrictionsUtils").applyVideoPlaybackRestrictions(this.$7,this.$12(),e),e},t.getBestRepresentation=function(t){var e,n,a,i=(e=t==null?void 0:t.length)!=null?e:null,l=(n=(a=this.$9)==null?void 0:a.getSourceBufferState().getBufferedRanges())!=null?n:null,s=this.$8.getCurrentTime(),u=o("oz-player/utils/OzBufferingUtils").getBufferAheadFromCurrentTime(s,l),c=o("oz-player/utils/OzAbrUtils").getReasonToPreventEvaluation(this.$1,this.$4,u,r("oz-player/networks/OzBandwidthEstimator").getSampleCount(),this.$2,this.$3);if(c!=null)return this.$10=c,this.$1.getBool("enable_abr_logging")&&this.$14.getOperationLogger("abr_best_representation_selected").setResult("failed").setReason(this.$10).setType("video").setInitiator("OzAbrManager").log(),this.$5;var d=Date.now();this.$2=d;var m=r("oz-player/networks/OzBandwidthEstimator").getAdjustedBandwidth(this.$1.getLegacyConfig()),p=this.$16(this.$6),_=this.$17(p,m,u,i),f=p[0];if(_=_||f,this.$18(u,_))return this.$10="high_buffer",this.$1.getBool("enable_abr_logging")&&this.$14.getOperationLogger("abr_best_representation_selected").setResult("failed").setUserInfo({filteredRepresentationIds:p.map(function(e){return e.getID()}).join(",")}).setPreviousRepresentationID(this.$5.getID()).setReason(this.$10).setType("video").setInitiator("OzAbrManager").log(),this.$5;var g=this.$5;return g!==_&&(this.$4=!0,this.$3=d,this.$5=_),this.$10="bandwidth",this.$1.getBool("enable_abr_logging")&&this.$14.getOperationLogger("abr_best_representation_selected").setResult("success").setUserInfo({filteredRepresentationIds:p.map(function(e){return e.getID()}).join(",")}).setRepresentationID(_.getID()).setPreviousRepresentationID(g==null?void 0:g.getID()).setReason(this.$10).setType("video").setInitiator("OzAbrManager").log(),_},t.$17=function(t,n,r,a){a===void 0&&(a=null);for(var e=null,i=0;i<t.length;i++){var l=o("oz-player/strategies/OzPlaybackConfidenceUtils").getPlaybackConfidence(t[i],n,r,this.$1.getNumber("low_buffer_bandwidth_target_threshold"),this.$1.getNumber("low_buffer_bandwidth_target_increase_factor"),a);l>this.$1.getNumber("abr_confidence_threshold")&&(!e||e.getBandwidth()<t[i].getBandwidth())&&(e=t[i])}return e},t.$18=function(t,n){var e=this.$1.getNumber("abr_prevent_down_switch_buffer_threshold");return e>0&&t>=e&&this.$5.getBandwidth()>n.getBandwidth()},t.getLastEvaluationReason=function(){return this.$10},t.updateRepresentations=function(t){var e=this,n=this.$6;this.$6=t;var r=this.$6.find(function(t){return t.getDisplayLabel()===e.$5.getDisplayLabel()}),o=this.$5;this.$5=r!=null?r:this.$6[0],this.$1.getBool("enable_abr_logging")&&this.$14.getOperationLogger("abr_representations_updated").setResult("success").setUserInfo({previousRepresentationIds:n.map(function(e){return e.getID()}).join(","),newRepresentationIds:t.map(function(e){return e.getID()}).join(","),newCodecs:t.map(function(e){return e.getCodecs()}).join("|"),newDisplayLabels:t.map(function(e){return e.getDisplayLabel()}).join(",")}).setRepresentationID(this.$5.getID()).setPreviousRepresentationID(o==null?void 0:o.getID()).setReason(this.$10).setType("video").setInitiator("OzAbrManager").log()},e})();l.default=e}),98);
__d("oz-player/strategies/getSegmentsCount",[],(function(t,n,r,o,a,i){"use strict";function e(e,t,n,r){for(var o=0,a=e.getTimeRange().startTime,i=e,l=i.getTimeRange().startTime;i!==null&&l<n+a;){var s=l;if(o++,i=t.getSegmentAfter(i),i)l=i.getTimeRange().startTime;else break;if(l<=s)return r}return Math.max(o,1)}i.default=e}),66);
__d("oz-player/strategies/OzStaticStreamSegmentsStrategy",["oz-player/strategies/getSegmentsCount"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){this.$1=e}var t=e.prototype;return t.isActive=function(){return!0},t.getSegmentsCount=function(t,n,o){var e=this.$1.getNumber("seconds_to_stream"),a=this.$1.getNumber("segments_to_stream");return e>0&&(a=r("oz-player/strategies/getSegmentsCount")(n,o,e,a)),a},e})();l.default=e}),98);
__d("oz-player/strategies/OzBandwidthBoundaryStreamSegmentsCountStrategy",["oz-player/networks/OzBandwidthEstimator","oz-player/strategies/OzStaticStreamSegmentsStrategy","oz-player/strategies/getSegmentsCount"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t){this.$1=e,this.$2=t,this.$3=new(r("oz-player/strategies/OzStaticStreamSegmentsStrategy"))(e)}var t=e.prototype;return t.isActive=function(t){return!0},t.getSegmentsCount=function(t,n,o){var e=r("oz-player/networks/OzBandwidthEstimator").getBandwidth(this.$1.getLegacyConfig()),a=r("oz-player/networks/OzBandwidthEstimator").getStandardDeviationOfBandwidth(),i=this.$1.getNumber("bandwidth_boundary_standard_deviation_factor"),l=this.$2.some(function(t){var n=t.getBandwidth();return Math.abs(n-e)<a*i}),s=l?this.$4(t,n,o):this.$3.getSegmentsCount(t,n,o),u=this.$5(n,e);return Math.min(s,u)},t.$4=function(t,n,o){var e=this.$1.getNumber("seconds_to_stream_near_bandwidth_boundary"),a=this.$1.getNumber("segments_to_stream_near_bandwidth_boundary");return e>0&&(a=r("oz-player/strategies/getSegmentsCount")(n,o,e,a)),a},t.$5=function(t,n){var e=1/0,r=t.getByteRange();if(r){var o=r.endByte;if(o!=null){var a=this.$1.getNumber("per_stream_duration_target"),i=o-r.startByte;a>1e-5&&i!==0&&(e=Math.ceil(a*n/(i*8)))}}return e},e})();l.default=e}),98);
__d("oz-player/strategies/OzBlockedRepresentationsManager",["oz-player/shims/OzEventEmitter","oz-player/shims/ozClearTimeout","oz-player/shims/ozSetTimeoutAcrossTransitions","oz-player/utils/OzErrorUtils"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t){this.$2=new Map,this.$3=new Set,this.$4=new Set,this.$5=new(r("oz-player/shims/OzEventEmitter")),this.$6=t===!0,this.$7(e),this.$8(e)}var t=e.prototype;return t.isBlocked=function(t){return this.$3.has(t)},t.handleError=function(t,n){if(this.$1!=null&&this.$3.size===this.$1-1)return!1;if(o("oz-player/utils/OzErrorUtils").isOzError(n)&&n.getType()==="OZ_NETWORK"){var e=Number(n.getExtra().code);if(!isNaN(e)&&this.$2.has(e))return this.$3.has(t)||this.$9(t,e),!0}return!1},t.$9=function(t,n){var e,o=this;this.$3.add(t),(e=this.$5)==null||e.emit("representation_blocked",t);var a=this.$2.get(n)||0;if(a>0){var i=r("oz-player/shims/ozSetTimeoutAcrossTransitions")(function(){o.$3.delete(t),o.$4.delete(i)},a);this.$4.add(i)}},t.applyRestriction=function(t){var e=this;return t.filter(function(t){return!e.$3.has(t.getID())})},t.onRepresentationBlocked=function(t){return this.$5?this.$5.addListener("representation_blocked",t):{remove:function(){}}},t.setAvailableRepresentationsCount=function(t){this.$1=t},t.destroy=function(){var e;(e=this.$5)==null||e.removeAllListeners(),this.$5=null;for(var t of this.$4)r("oz-player/shims/ozClearTimeout")(t);this.$4.clear()},t.$7=function(t){var e=this;try{var n=JSON.parse(t.getString("block_representation_status_codes_json"));if(Array.isArray(n)&&(n.forEach(function(t){var n=parseInt(t,10);isNaN(n)||e.$2.set(n,-1)}),this.$6))for(var r=500;r<=599;r++)this.$2.set(r,-1)}catch(e){}},t.$8=function(t){var e=this;try{var n=JSON.parse(t.getString("block_representation_status_codes_temporarily_json"));Object.entries(n).forEach(function(t){var n=t[0],r=t[1],o=parseInt(n,10),a=parseInt(r,10);!isNaN(o)&&!isNaN(a)&&e.$2.set(o,a)})}catch(e){}},e})();l.default=e}),98);
__d("oz-player/strategies/OzBufferAheadPriorityStrategy",["oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/ozThrottle","oz-player/utils/OzBufferingUtils"],(function(t,n,r,o,a,i,l){"use strict";var e=6,s=1e3,u=(function(t){function n(e,n){var o;return o=t.call(this)||this,o.$OzBufferAheadPriorityStrategy$p_3=new(r("oz-player/shims/OzSubscriptionsHandler")),o.$OzBufferAheadPriorityStrategy$p_5=function(){o.emit("state_changed")},o.$OzBufferAheadPriorityStrategy$p_4=e,o.$OzBufferAheadPriorityStrategy$p_1=n,o.$OzBufferAheadPriorityStrategy$p_3.addSubscriptions(o.$OzBufferAheadPriorityStrategy$p_1.addEventListener("progress",r("oz-player/shims/ozThrottle")(o.$OzBufferAheadPriorityStrategy$p_5,s)),o.$OzBufferAheadPriorityStrategy$p_1.addEventListener("timeupdate",r("oz-player/shims/ozThrottle")(o.$OzBufferAheadPriorityStrategy$p_5,s))),o}babelHelpers.inheritsLoose(n,t);var a=n.prototype;return a.getName=function(){return"buffer_ahead"},a.setSourceBufferState=function(t){this.$OzBufferAheadPriorityStrategy$p_2||(this.$OzBufferAheadPriorityStrategy$p_2=t,this.$OzBufferAheadPriorityStrategy$p_3.addSubscriptions(t.addEventListener("buffer_updated",r("oz-player/shims/ozThrottle")(this.$OzBufferAheadPriorityStrategy$p_5,s))))},a.isActive=function(){return!0},a.getPriority=function(){var t=this.$OzBufferAheadPriorityStrategy$p_2;if(!t)return 1;var n=this.$OzBufferAheadPriorityStrategy$p_1.getCurrentTime(),r=t.getBufferedRanges(),a=o("oz-player/utils/OzBufferingUtils").getBufferAheadFromCurrentTime(n,r);return a>=e?0:1},a.destroy=function(){this.$OzBufferAheadPriorityStrategy$p_3.release()},n})(r("oz-player/shims/OzEventEmitter"));l.default=u}),98);
__d("oz-player/strategies/OzBufferAheadTargetStrategy",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(e){this.$1=e}var t=e.prototype;return t.isActive=function(){return!0},t.getBufferTarget=function(){return this.$1.getNumber("buffer_ahead_target")},e})();i.default=e}),66);
__d("oz-player/strategies/OzBufferEndLimitStrategy",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(e,t){this.$1=e,this.$2=t}var t=e.prototype;return t.isActive=function(){return!0},t.getBufferTarget=function(){var e=this.$3();return this.$2>=e?this.$2-e:0},t.$3=function(){return this.$1.buffered.length===0?0:this.$1.buffered.end(0)},e})();i.default=e}),66);
__d("oz-player/strategies/OzBufferTargetBoundedStreamSegmentsCountStrategy",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(e,t){this.$1=e,this.$2=t}var t=e.prototype;return t.isActive=function(t){return!t.isPlaying()},t.getSegmentsCount=function(t,n,r){for(var e=t.getCurrentTime(),o=this.$1.computeBufferTarget(),a=1,i=n,l=n.getTimeRange().startTime;i!==null&&l<o+e&&(i=r.getSegmentAfter(i),!!i);)l=i.getTimeRange().startTime,a++;return a},e})();i.default=e}),66);
__d("oz-player/strategies/OzBufferTargetCalculator",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(e,t){this.$1=0,this.$2=e,this.$3=t}var t=e.prototype;return t.computeBufferTarget=function(){var e=this.$1;for(var t of this.$2)if(t.isActive()){e=t.getBufferTarget();break}for(var n of this.$3)e=n.adjustBufferTargetInSeconds(e);return this.$1=e,e},t.handleEvent=function(t){for(var e of this.$3)e.handleEvent(t)},e})();i.default=e}),66);
__d("oz-player/strategies/OzBufferTargetCalculatorQuotaExceededConstraint",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(e){var t=e.config,n=e.minimumBufferTargetSec;this.$2=1,this.$1=t,this.$3=n}var t=e.prototype;return t.adjustBufferTargetInSeconds=function(t){var e;return Math.max((e=this.$3)!=null?e:this.$1.getNumber("buffer_target_constraint_minimum_sec"),t*this.$2)},t.handleEvent=function(t){var e=this.$2;switch(t){case"append_succeeded":e=Math.max(0,Math.min(1,e+this.$1.getNumber("buffer_target_constraint_append_succeeded_reward")));break;case"append_quota_exceeded":e=Math.max(0,Math.min(1,e-this.$1.getNumber("buffer_target_constraint_quota_exceeded_penalty")));break;default:}this.$2=e},e})();i.default=e}),66);
__d("oz-player/strategies/OzPausedStreamSegmentsCountStrategy",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(e,t){this.$1=e,this.$2=t}var t=e.prototype;return t.isActive=function(){return!this.$1.isPlaying()},t.getSegmentsCount=function(t,n,r){return this.$2.getNumber("paused_stream_segments_count")},e})();i.default=e}),66);
__d("oz-player/strategies/OzPlayheadAtInterruptionDetector",["oz-player/shims/OzDOMEventListener","oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler"],(function(t,n,r,o,a,i,l){"use strict";var e=1,s=(function(t){function n(e,n){var o;o=t.call(this)||this,o.$OzPlayheadAtInterruptionDetector$p_2=null,o.$OzPlayheadAtInterruptionDetector$p_3=new(r("oz-player/shims/OzSubscriptionsHandler")),o.$OzPlayheadAtInterruptionDetector$p_4=null,o.$OzPlayheadAtInterruptionDetector$p_1=e;var a=n?n.addListener("enterBuffering",function(){o.$OzPlayheadAtInterruptionDetector$p_5()}):r("oz-player/shims/OzDOMEventListener").listenDOMEvent(o.$OzPlayheadAtInterruptionDetector$p_1,"waiting",function(){o.$OzPlayheadAtInterruptionDetector$p_5()});return o.$OzPlayheadAtInterruptionDetector$p_3.addSubscriptions(a),o.$OzPlayheadAtInterruptionDetector$p_4=n,o}babelHelpers.inheritsLoose(n,t);var o=n.prototype;return o.notifyStreamInterrupted=function(t){this.$OzPlayheadAtInterruptionDetector$p_2=t,this.$OzPlayheadAtInterruptionDetector$p_5()},o.notifyStreamResumed=function(){this.$OzPlayheadAtInterruptionDetector$p_2=null},o.$OzPlayheadAtInterruptionDetector$p_5=function(){if(this.$OzPlayheadAtInterruptionDetector$p_2!=null){var t=this.$OzPlayheadAtInterruptionDetector$p_2||0;Math.abs(this.$OzPlayheadAtInterruptionDetector$p_1.currentTime-t)<e&&this.emit("playheadAtInterruption",t)}},o.destroy=function(){this.$OzPlayheadAtInterruptionDetector$p_3.release(),this.$OzPlayheadAtInterruptionDetector$p_4=null},n})(r("oz-player/shims/OzEventEmitter"));l.default=s}),98);
__d("oz-player/strategies/OzPlayingStatePriorityStrategy",["oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t){var n;return n=e.call(this)||this,n.$OzPlayingStatePriorityStrategy$p_1=new(r("oz-player/shims/OzSubscriptionsHandler")),n.$OzPlayingStatePriorityStrategy$p_3=function(){n.emit("state_changed")},n.$OzPlayingStatePriorityStrategy$p_2=t,n.$OzPlayingStatePriorityStrategy$p_1.addSubscriptions(n.$OzPlayingStatePriorityStrategy$p_2.addEventListener("playing",n.$OzPlayingStatePriorityStrategy$p_3),n.$OzPlayingStatePriorityStrategy$p_2.addEventListener("play",n.$OzPlayingStatePriorityStrategy$p_3),n.$OzPlayingStatePriorityStrategy$p_2.addEventListener("pause",n.$OzPlayingStatePriorityStrategy$p_3)),n}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.isActive=function(){return!0},n.getName=function(){return"playing_state"},n.setSourceBufferState=function(t){},n.getPriority=function(){return this.$OzPlayingStatePriorityStrategy$p_2.isPlaying()?1:0},n.destroy=function(){this.$OzPlayingStatePriorityStrategy$p_1.release()},t})(r("oz-player/shims/OzEventEmitter"));l.default=e}),98);
__d("oz-player/strategies/OzPositionToViewportPriorityStrategy",["oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t,n){var o;return o=e.call(this)||this,o.$OzPositionToViewportPriorityStrategy$p_3=new(r("oz-player/shims/OzSubscriptionsHandler")),o.$OzPositionToViewportPriorityStrategy$p_4=function(){o.emit("state_changed")},o.$OzPositionToViewportPriorityStrategy$p_2=t,o.$OzPositionToViewportPriorityStrategy$p_1=n,o.$OzPositionToViewportPriorityStrategy$p_3.addSubscriptions(t.addListener("state_changed",o.$OzPositionToViewportPriorityStrategy$p_4)),o}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.isActive=function(){return!0},n.getName=function(){return"position_to_viewport"},n.setSourceBufferState=function(t){},n.getPriority=function(){var e=this.$OzPositionToViewportPriorityStrategy$p_1.getNumber("prioritize_by_viewport_static_penalty"),t=this.$OzPositionToViewportPriorityStrategy$p_2.getPositionIndexOfVideoFromViewportVertically();return e>0?t===-1?e*-1:0:t===-1?-1/0:-1*t},n.destroy=function(){this.$OzPositionToViewportPriorityStrategy$p_3.release()},t})(r("oz-player/shims/OzEventEmitter"));l.default=e}),98);
__d("oz-player/strategies/OzPriorityCalculator",["oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t){var n,o;return o=e.call(this)||this,o.$OzPriorityCalculator$p_2=new(r("oz-player/shims/OzSubscriptionsHandler")),o.$OzPriorityCalculator$p_1=t,(n=o.$OzPriorityCalculator$p_2).addSubscriptions.apply(n,o.$OzPriorityCalculator$p_1.map(function(e){return e.addListener("state_changed",function(){o.emit("state_changed",o.compute(),e.getName())})})),o}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.setSourceBufferState=function(t){this.$OzPriorityCalculator$p_1.forEach(function(e){return e.setSourceBufferState(t)}),this.emit("state_changed",this.compute(),"source_buffer")},n.compute=function(){var e=this.$OzPriorityCalculator$p_1.reduce(function(e,t){var n=t.isActive()?t.getPriority():0;return e+n},0);return Math.max(e,0)},n.destroy=function(){this.$OzPriorityCalculator$p_2.release()},t})(r("oz-player/shims/OzEventEmitter"));l.default=e}),98);
__d("oz-player/strategies/OzSingleCodecRestriction",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(){}var t=e.prototype;return t.applyRestriction=function(t){if(t.length<=0)return t.slice();var e=new Set(t.map(function(e){return l(e)})),n="av01",r=e.has(n)?n:e.values().next().value;return r==null?t.slice():t.filter(function(e){return l(e)===r})},e})();function l(e){return e.getMimeCodecs().replace(/\..*$/,"")}i.default=e}),66);
__d("oz-player/strategies/OzStaleManifestBufferTargetStrategy",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(e,t){this.$1=t,this.$2=e}var t=e.prototype;return t.isActive=function(){return this.$2.getRefreshDate()==null&&this.$1.getNumber("stale_mpd_buffer_ahead_target")>0},t.getBufferTarget=function(){return this.$1.getNumber("stale_mpd_buffer_ahead_target")},e})();i.default=e}),66);
__d("oz-player/strategies/OzStartupBufferTargetStrategy",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(e,t){this.$1=e,this.$3=t}var t=e.prototype;return t.isActive=function(){var e=this.$1.isPlaying();return e&&(this.$2=!0),!this.$2},t.getBufferTarget=function(){return this.$3.getNumber("pre_start_buffer_ahead_target")},e})();i.default=e}),66);
__d("oz-player/strategies/OzStreamSegmentsCountCalculator",[],(function(t,n,r,o,a,i){"use strict";var e=1,l=(function(){function t(e){this.$1=e}var n=t.prototype;return n.computeMin=function(n,r,o){var t=Number.MAX_VALUE;for(var a of this.$1)a.isActive(n)&&(t=Math.min(t,a.getSegmentsCount(n,r,o)));return t===Number.MAX_VALUE?e:Math.max(t,e)},t})();i.default=l}),66);
__d("oz-player/strategies/OzSupportedMimeCodecsRestriction",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(e){this.$1=e}var t=e.prototype;return t.applyRestriction=function(t){var e=this;return t.filter(function(t){var n=e.$1?ManagedMediaSource.isTypeSupported(t.getMimeCodecs()):MediaSource.isTypeSupported(t.getMimeCodecs());return!!n})},e})();i.default=e}),66);
__d("oz-player/streams/OzEndOfStreamWatcher",["oz-player/shims/OzEventEmitter","oz-player/shims/ozvariant"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t,n){var r;return r=e.call(this)||this,r.$OzEndOfStreamWatcher$p_1=new Map,r.$OzEndOfStreamWatcher$p_4=!1,r.$OzEndOfStreamWatcher$p_2=t,r.$OzEndOfStreamWatcher$p_3=n,r}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.registerMediaStream=function(t){!this.$OzEndOfStreamWatcher$p_1.has(t)||r("oz-player/shims/ozvariant")(0,5191),this.$OzEndOfStreamWatcher$p_1.set(t,!1)},n.notifyRepresentationSwitched=function(t){this.$OzEndOfStreamWatcher$p_1.has(t)||r("oz-player/shims/ozvariant")(0,5192),this.$OzEndOfStreamWatcher$p_1.get(t)===!0&&this.$OzEndOfStreamWatcher$p_1.set(t,!1),this.$OzEndOfStreamWatcher$p_5("end_of_stream_watcher","representation_switched")},n.notifyMediaStreamEnded=function(t,n){this.$OzEndOfStreamWatcher$p_1.has(t)||r("oz-player/shims/ozvariant")(0,5192),this.$OzEndOfStreamWatcher$p_1.set(t,!0),this.$OzEndOfStreamWatcher$p_5("end_of_stream_watcher","media_stream_ended:"+n)},n.$OzEndOfStreamWatcher$p_5=function(t,n){var e=this;if(this.$OzEndOfStreamWatcher$p_3.getBool("do_not_end_stream")){!this.$OzEndOfStreamWatcher$p_4&&this.$OzEndOfStreamWatcher$p_6()&&(this.$OzEndOfStreamWatcher$p_4=!0,this.emit("streamEnd"));return}var r=this.$OzEndOfStreamWatcher$p_2.getReadyState();r==="open"&&this.$OzEndOfStreamWatcher$p_6()&&this.$OzEndOfStreamWatcher$p_2.notifyEndOfStream(t,n).then(function(){e.emit("streamEnd")}).catch(function(){e.emit("streamEnd")})},n.$OzEndOfStreamWatcher$p_6=function(){if(this.$OzEndOfStreamWatcher$p_1.size===0)return!1;for(var e of this.$OzEndOfStreamWatcher$p_1.values())if(!e)return!1;return!0},n.destroy=function(){this.$OzEndOfStreamWatcher$p_1.clear()},t})(r("oz-player/shims/OzEventEmitter"));l.default=e}),98);
__d("oz-player/streams/OzHandleUserRepresentationSwitch",["oz-player/shims/OzSubscriptionsHandler","oz-player/shims/ozReportUnexpectedError","oz-player/utils/OzErrorEmitter"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t,n,o,a,i){var l=this;this.$2=new(r("oz-player/utils/OzErrorEmitter")),this.$5=null,this.$6=new(r("oz-player/shims/OzSubscriptionsHandler")),this.$1=e,this.$3=t,this.$4=n,this.$7=o,this.$8=i,a.then(function(e){l.$5=e},function(){}).catch(function(e){r("oz-player/shims/ozReportUnexpectedError")(e,"OzHandleUserRepresentationSwitch SBM promise then - create")}),this.$6.addSubscriptions(o.addListener("switchRepresentation",function(e,t){l.$9(e,t)}))}var t=e.prototype;return t.destroy=function(){this.$6.release(),this.$6.engage()},t.onError=function(t){return this.$2.onError(t)},t.$9=function(t,n){if(t==="user"){var e=this.$5;if(e!=null){for(var o=this.$7.getRepresentationIDAtTime(this.$3.getCurrentTime()),a,i=0;i<this.$4.length;i++)this.$4[i].getID()===o&&(a=this.$4[i]);if(a&&n&&(this.$8||a.getBandwidth()<n.getBandwidth())){var l=a.getSegmentByTime(this.$3.getCurrentTime());l&&e.clearRangeWithWait([{fromTime:this.$3.getCurrentTime(),toTime:this.$3.getDuration()}]).catch(function(e){r("oz-player/shims/ozReportUnexpectedError")(e,"OzHandleUserRepresentationSwitch clearRangeWithWait catch")})}}}},e})();l.default=e}),98);
__d("oz-player/manifests/IOzSegment",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){return((e==null?void 0:e.getSequenceNumber())||0)===((t==null?void 0:t.getSequenceNumber())||0)}function l(e,t){return((e==null?void 0:e.getSequenceNumber())||0)>=((t==null?void 0:t.getSequenceNumber())||0)}i.isSequenceNumberEqual=e,i.isSequenceNumberGreaterOrEqual=l}),66);
__d("oz-player/networks/OzReadableStreamDataReader",["oz-player/networks/OzTransformStream","oz-player/utils/ozConcatUint8Arrays"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t,n){var r;if(n===void 0&&(n=null),r=e.call(this)||this,r.$OzReadableStreamDataReader$p_1=[],r.$OzReadableStreamDataReader$p_3=1/0,r.$OzReadableStreamDataReader$p_4=0,r.$OzReadableStreamDataReader$p_2=t,n!=null){var o=n.getNumber("stream_reader_max_buffer_len");r.$OzReadableStreamDataReader$p_3=o>0?o:1/0}return r}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.onDataWritten=function(t){if(this.$OzReadableStreamDataReader$p_4+t.byteLength>=this.$OzReadableStreamDataReader$p_3){var e=r("oz-player/utils/ozConcatUint8Arrays")(this.$OzReadableStreamDataReader$p_1),n=e.buffer;this.$OzReadableStreamDataReader$p_2(n),this.$OzReadableStreamDataReader$p_1.length=0,this.$OzReadableStreamDataReader$p_4=0}this.$OzReadableStreamDataReader$p_1.push(t),this.$OzReadableStreamDataReader$p_4+=t.byteLength},n.onClose=function(){var e=this.$OzReadableStreamDataReader$p_1,t=r("oz-player/utils/ozConcatUint8Arrays")(e),n=t.buffer;e.length=0,this.$OzReadableStreamDataReader$p_4=0,this.$OzReadableStreamDataReader$p_2(n)},t})(r("oz-player/networks/OzTransformStream"));l.default=e}),98);
__d("oz-player/networks/OzStreamingTask",["oz-player/loggings/OzLoggingUtils","oz-player/shims/OzDeferred","oz-player/shims/OzMaybeNativePromise","oz-player/shims/OzPerformance","oz-player/utils/OzErrorUtils","oz-player/utils/OzNetworkRequestLoggingUtils"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t,n){this.$3=new(r("oz-player/shims/OzDeferred"))(r("oz-player/shims/OzMaybeNativePromise")),this.$5=!1,this.$9=null,this.$1=this.$2=new(r("oz-player/shims/OzDeferred"))(r("oz-player/shims/OzMaybeNativePromise")),this.$6=r("oz-player/shims/OzPerformance").now(),this.$7=t,this.$8=e,this.$9=n}var t=e.prototype;return t.run=function(){var e=this.$3.getPromise(),t=this.$7;if(t){var n=r("oz-player/shims/OzPerformance").now()-this.$6;o("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(e,t,"streaming_task",function(){},function(e){e.setTimeToRequestSent(Math.floor(n))})}return this.$2.resolve(),e},t.getPromise=function(){return this.$3.getPromise()},t.cancel=function(){this.$3.getPromise().catch(function(){}),this.$3.reject(o("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_STREAMING_TASK",description:"task cancelled",extra:{code:"OZ_ST-1"}})),this.$5=!0},t.finish=function(){this.$3.resolve()},t.isCancelled=function(){return this.$5},t.addStreamDeferred=function(t,n){var e=new(r("oz-player/shims/OzDeferred"))(r("oz-player/shims/OzMaybeNativePromise")),o=new(r("oz-player/shims/OzDeferred"))(r("oz-player/shims/OzMaybeNativePromise"));this.$10({createStreamResult:t,changeStatusDeferred:e,createStreamDeferred:o,loggerProviderWithStreamContext:n});var a=function(){return o.getPromise()};return{genStream:a,cancel:function(){if(t){var e=t.pausableStream;return e.pauseStream()}},getStatusChangePromise:function(){return e.getPromise()}}},t.$10=function(t){var e=this,n=t.createStreamResult,a=t.changeStatusDeferred,i=t.createStreamDeferred,l=t.loggerProviderWithStreamContext,s=t.loggingPayloads,u=this.$1.getPromise(),c=r("oz-player/shims/OzPerformance").now(),d=this.$1=new(r("oz-player/shims/OzDeferred"))(r("oz-player/shims/OzMaybeNativePromise"));d.getPromise().catch(function(){}),u.then(function(){if(n){var t=n.pausableStream;n.loggingPayloads&&(s=n.loggingPayloads),i.resolve(t.getStream()),e.$4=t;var a=r("oz-player/shims/OzPerformance").now(),u=e.$11(t.startStream());if(l){var d=function(r){var n=s;if(n){o("oz-player/utils/OzNetworkRequestLoggingUtils").setFetchStreamLoggingAttributes(r,n.getRequestUrl(),n.segments,a-c,t.getBytesStreamed(),n.getResponse());var i=e.$9;i&&i(r,n.getRequestUrl(),n.getResponse())}};o("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(u,l,"fetch_stream",d,d)}return u}return null}).then(function(t){e.$4=null,d.resolve(),a.resolve(t||"cancelled")}).catch(function(t){e.$4=null,e.$3.reject(t),d.reject(t),a.reject(t)})},t.$11=function(t){return t.then(function(e){var t=e.statusPromise;return t.then(function(e){return e==="stream_done"?"done":"error"})})},e})();l.default=e}),98);
__d("oz-player/scheduling/OzRoundRobinPriorityTaskQueue",["oz-player/shims/ozReportUnexpectedError"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t){t===void 0&&(t=-1),this.$3=function(){},this.$4=[],this.$5=new Map,this.$1=e,this.$2=t}var t=e.prototype;return t.getHighestPriority=function(){return Math.max.apply(Math,this.$4.map(function(e){return e.queue.length?e.priority:-1/0}))},t.enqueue=function(t,n){var e=this,o=n;o=this.$6(o);var a=this.$5.get(t);if(a!==o){this.$5.has(t)&&this.remove(t);var i=this.$7(o),l=this.$4[i];l&&l.priority===o||(l={priority:o,queue:[]},this.$4.splice(i,0,l)),this.$5.set(t,o),l.queue.push(t),t.getPromise().then(function(){e.remove(t)},function(){e.remove(t)}).catch(function(e){r("oz-player/shims/ozReportUnexpectedError")(e,"OzRoundRobinPriorityTaskQueue remove after task run")}),this.$3(t,o>=this.$1?"immediate":"normal")}},t.updatePriority=function(t,n){this.$5.has(t)&&this.enqueue(t,n)},t.dequeue=function(){for(var e=0;e<this.$4.length;e++){var t=this.$4[e];if(t.queue.length){var n=t.queue.shift();return this.$5.delete(n),n}}return null},t.remove=function(t){var e=this.$5.get(t);if(e!==void 0){var n=this.$7(e),r=this.$4[n];if(r&&r.queue){var o=r.queue.findIndex(function(e){return e===t});o>-1&&r.queue.splice(o,1)}this.$5.delete(t)}},t.setOnTaskUpdated=function(t){this.$3=t},t.clearOnTaskUpdated=function(){this.setOnTaskUpdated(function(){})},t.getLength=function(){return this.$5.size},t.test_isEmpty=function(){return this.$5.size===0&&this.$4.every(function(e){return e.queue.length===0})},t.$7=function(t){var e=t;e=this.$6(e);var n;for(n=0;n<this.$4.length;n++)if(e>=this.$4[n].priority)return n;return n},t.$6=function(t){var e=t;return this.$2>=0&&(e=Number.parseFloat(e.toFixed(this.$2))),e},e})();l.default=e}),98);
__d("oz-player/scheduling/OzSequentialTaskScheduler",["oz-player/shims/OzMaybeNativePromise","oz-player/shims/ozReportUnexpectedError","oz-player/shims/ozSetTimeoutAcrossTransitions"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t){this.$3=0,this.$1=e;var n=t||{},r=n.taskTimeout;this.$4=r||0}var t=e.prototype;return t.start=function(){var e=this;this.$1.setOnTaskUpdated(function(t,n){return e.$5(t,n)});var t=this.$1.dequeue();t&&this.$6(t,"immediate")},t.destroy=function(){this.$2&&this.$2.cancel(),this.$1.clearOnTaskUpdated()},t.$5=function(t,n){var e=this.$6(t,n);e&&this.$1.remove(t)},t.$6=function(t,n){var e=this;if(this.$2&&n!=="immediate")return!1;this.$2&&this.$2.cancel();var o=t.run().catch(function(e){});return this.$4>0&&(o=r("oz-player/shims/OzMaybeNativePromise").race([o,new(r("oz-player/shims/OzMaybeNativePromise"))(function(t,n){r("oz-player/shims/ozSetTimeoutAcrossTransitions")(t,e.$4)})])),this.$3++,this.$2=t,o=o.then(function(){if(e.$3--,e.$2===t&&(e.$2=null),e.$3===0){var n=e.$1.dequeue();n&&e.$6(n,"immediate")}}),o.catch(function(e){r("oz-player/shims/ozReportUnexpectedError")(e,"OzSequentialTaskScheduler task complete")}),!0},e})();l.default=e}),98);
__d("oz-player/networks/OzStreamingTaskQueueProvider",["oz-player/scheduling/OzRoundRobinPriorityTaskQueue","oz-player/scheduling/OzSequentialTaskScheduler"],(function(t,n,r,o,a,i,l){"use strict";var e=new Map,s=new Map,u=2,c=2,d=6e4;function m(t){var n=e.get(t);if(!n){n=new(r("oz-player/scheduling/OzRoundRobinPriorityTaskQueue"))(u,c);var o=new(r("oz-player/scheduling/OzSequentialTaskScheduler"))(n,{taskTimeout:d});e.set(t,n),s.set(t,o),o.start()}return n}l.OZ_QUEUE_MAX_PRIORITY=u,l.getQueue=m}),98);
__d("oz-player/networks/OzStreamingTaskStateManager",["Promise","oz-player/networks/OzStreamingTask","oz-player/networks/OzStreamingTaskQueueProvider","oz-player/networks/getOzBandwidthEstimatorPipeThroughReporter","oz-player/shims/OzSubscriptionsHandler"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){function t(e){var t=this;this.$3=new(r("oz-player/shims/OzSubscriptionsHandler")),this.$4=0,this.$9=!1,this.$10=null;var n=e.mimeType,a=e.priorityCalculator,i=e.loggerProvider,l=e.setCustomFetchStreamLoggingAttributes,s=e.config,u=e.bandwidthEstimator;this.$5=n,this.$1=a,this.$6=o("oz-player/networks/OzStreamingTaskQueueProvider").getQueue(this.$5),this.$7=i,this.$8=s,this.$11=u!=null?u:null,this.$10=l,this.$3.addSubscriptions(this.$1.addListener("state_changed",function(e,n){t.$12(e,n),t.$2&&t.$6.updatePriority(t.$2,t.$4)}))}var a=t.prototype;return a.$13=function(){var e=[];return e.push(r("oz-player/networks/getOzBandwidthEstimatorPipeThroughReporter")(this.$5,this.$11)),e},a.startStreamDeferred=function(t){var e=t.debugName,n=t.segments,r=t.networkManager,o=t.segmentsLoggerProvider,a=t.mediaStreamType,i=t.dataAppendedCallback,l=t.dataAppendedErrorCallback,s=this.$14(o),u=this.$13(),c;n.length>0?c=r.createPausableStream({debugName:e,segments:n,pipeThroughRangeStreamProviders:u,loggerProvider:o,mediaStreamType:a,dataAppendedCallback:i,dataAppendedErrorCallback:l}):c=null,this.$9=!0;var d=s.addStreamDeferred(c,o);return{genStream:d.genStream,cancel:d.cancel,getStatusChangePromise:this.$15(d.getStatusChangePromise)}},a.$14=function(t){var e=this.$2;return this.$12(this.$1.compute(),"start_stream"),!e||e.isCancelled()?(e=this.$2=new(r("oz-player/networks/OzStreamingTask"))(this.$8,t,this.$10),this.$6.enqueue(e,this.$4)):this.$6.updatePriority(e,this.$4),e},a.$15=function(r){var t=this;return function(){return r().then(function(e){return t.$16(),e}).catch(function(r){return t.$16(),(e||(e=n("Promise"))).reject(r)})}},a.finishTaskIfNoOngoingStream=function(){this.$9||this.$17()},a.destroy=function(){this.$3.release();var e=this.$2;this.$2=null,e&&this.$6.remove(e)},a.$16=function(){this.$9=!1,this.$12(this.$1.compute(),"end_stream"),this.$4<o("oz-player/networks/OzStreamingTaskQueueProvider").OZ_QUEUE_MAX_PRIORITY&&this.$17()},a.$17=function(){this.$2&&(this.$2.finish(),this.$2=null)},a.$12=function(t,n){t!==this.$4&&(this.$4=t,this.$7&&this.$7.getOperationLogger("priority_changed").setPriorityFloat(this.$4).setInitiator(n).log())},t})();l.default=s}),98);
__d("oz-player/strategies/OzStreamLengthStrategy",[],(function(t,n,r,o,a,i){"use strict";function e(e,t,n,r,o){var a=t,i=o,l=e.getNumber("segments_to_stream_under_playhead_threshold"),s=e.getNumber("low_segment_stream_playhead_threshold");l>0&&r.getCurrentTime()<s&&(a=l);var u=[];u.push(i);for(var c=1;c<a;c++){var d=n.getSegmentAfter(i);if(!d)break;i=d,u.push(i)}return u}i.getStreamingSegments=e}),66);
__d("oz-player/streams/OzMediaStreamLoopDriver",["oz-player/shims/ozClearTimeout","oz-player/shims/ozSetTimeoutAcrossTransitions","oz-player/utils/OzErrorUtils"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t){var n=this;this.$2=null,this.$3=!1,this.$6=function(){var e;if(n.$7(),!n.$3){(e=n.$5)==null||e.start();var t=n.$1.execute(),o=n.$1.getLoopInterval();o&&(n.$2=r("oz-player/shims/ozSetTimeoutAcrossTransitions")(function(){n.$6()},o)),t&&t.then(n.$6).catch(function(e){n.$7();var t=n.$1.handleError(e);if(t)n.$2=r("oz-player/shims/ozSetTimeoutAcrossTransitions")(n.$6,t);else{var o,a;(o=n.$5)==null||o.setError(e),(a=n.$5)==null||a.log(),n.$5=null,n.$3=!0}})}},this.$1=e,this.$4=t}var t=e.prototype;return t.start=function(){if(this.$3)throw o("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_NOT_IMPLEMENTED_ERROR",description:"restart is not implemented"});this.$5=this.$4.getOperationLogger("media_stream").start(),this.$6()},t.stop=function(){var e;this.$7(),this.$3=!0,(e=this.$5)==null||e.log(),this.$5=null},t.$7=function(){this.$2&&(r("oz-player/shims/ozClearTimeout")(this.$2),this.$2=null)},e})();l.default=e}),98);
__d("oz-player/utils/OzRangeUtils",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){var n=t.filter(function(t){return t.startTime<=e&&t.endTime>=e});return n!=null&&n.length>0?n[0]:null}i.getRangeForTime=e}),66);
__d("oz-player/streams/OzSegmentLocator",["oz-player/utils/OzNumericalRangeUtil","oz-player/utils/OzRangeUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.getEndingSegment();return t!=null&&t.getSequenceNumber()!=null?t.getSequenceNumber():0}var s=function(t,n){var e=t.getCurrentTime();return n?o("oz-player/utils/OzRangeUtils").getRangeForTime(e,n.getBufferedRanges()):null},u=function(t,n,r){var e=s(t,n),o=r?r.getTimeRange().endTime:0,a=t.getCurrentTime()||0;return o?a=o:e&&(a=e.endTime),a},c=function(t,n,r,a,i,l,s,c){var e=t.getPredictedSegmentAfter(l);if(e&&n.isPlaying())return e;var d=u(n,a,l),m=i.getTimeRanges(),p=o("oz-player/utils/OzNumericalRangeUtil").findDiffCoveredByRanges(n.getCurrentTime(),d,m.map(function(e){return{rangeStart:e.startTime,rangeEnd:e.endTime}}));if(p>r)return null;var _=t.getSegment(0);return _&&_.getTimeRange().startTime>d&&(d=_.getTimeRange().startTime),t.getSegmentByTime(d)};l.getEndingSequenceNumber=e,l.getTimeToQuery=u,l.getSegment=c}),98);
__d("oz-player/streams/OzSegmentUtils",["oz-player/manifests/OzSegmentOptions","oz-player/shims/OzURI"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return e.reduce(function(e,t){var n,r;return((n=t==null?void 0:t.getSequenceNumber())!=null?n:0)>((r=e==null?void 0:e.getSequenceNumber())!=null?r:0)?t:e})}function s(e,t){var n=new(r("oz-player/manifests/OzSegmentOptions"));return e.getPredictedSegmentAfter({getData:function(){return null},getByteRange:function(){return null},getSequenceNumber:function(){return t-1},getTimeRange:function(){return{endTime:0,startTime:0}},getURI:function(){return new(r("oz-player/shims/OzURI"))("")},getOptions:function(){return n}})}function u(e){return e.getOptions().setSegmentNumDecisionTime(Date.now()),e}l.getMaxSegment=e,l.getSegmentForSequenceNumber=s,l.markSegmentCreateTime=u}),98);
__d("oz-player/utils/OzTaggedTimeRanges",[],(function(t,n,r,o,a,i){var e=(function(){function e(e){this.$1=[],this.$2=0,this.$3=0,this.$4=e||function(e,t){return e===t}}var t=e.prototype;return t.add=function(t,n,r){if(!(n<t)&&n!==t){if(this.$1.length===0){this.$1.push({startTime:t,endTime:n,tag:r});return}for(var e=0,o=0,a=0;a<this.$1.length;a++){if(t===this.$1[a].startTime&&n===this.$1[a].endTime){e=a,o=a+1;break}if(t>=this.$1[a].startTime&&(e=a+1),n<=this.$1[a].endTime&&(o=a),n<this.$1[a].startTime)break}this.$1.splice(e,o-e,{startTime:t,endTime:n,tag:r}),this.$5(e)}},t.$5=function(t){var e=t,n=this.$1[e],r=null;e!==0&&(r=this.$1[e-1]),r!==null&&(this.$4(r.tag,n.tag)?r.endTime>=n.startTime&&(this.$1.splice(e-1,2,{startTime:r.startTime,endTime:Math.max(n.endTime,r.endTime),tag:n.tag}),e--):(r.endTime>n.startTime&&r.startTime===n.startTime?(this.$1.splice(e-1,1),e--):r.endTime>n.startTime&&this.$1.splice(e-1,1,{startTime:r.startTime,endTime:n.startTime,tag:r.tag}),r.endTime>n.endTime&&this.$1.splice(e+1,0,{startTime:n.endTime,endTime:r.endTime,tag:r.tag})));var o=null;e!==this.$1.length-1&&(o=this.$1[e+1]),o&&(this.$4(o.tag,n.tag)?o.startTime<=n.endTime&&this.$1.splice(e,2,{startTime:n.startTime,endTime:Math.max(o.endTime,n.endTime),tag:n.tag}):o.startTime<=n.endTime&&(o.endTime<n.endTime?(this.$1.splice(e,1,{startTime:n.startTime,endTime:o.startTime,tag:n.tag}),this.$1.push({startTime:o.endTime,endTime:n.endTime,tag:n.tag})):this.$1.splice(e+1,1,{startTime:n.endTime,endTime:o.endTime,tag:o.tag})))},t.get=function(t){for(var e=t>=this.$3?this.$2:0,n=null,r=e;r<this.$1.length;r++)if(this.$1[r].startTime<=t&&t<this.$1[r].endTime){n=r;break}return this.$2=n===null?0:n,this.$3=t,n===null?null:this.$1[n].tag},t.getLength=function(){return this.$1.length},e})();i.default=e}),66);
__d("oz-player/streams/OzMediaStream",["oz-player/manifests/IOzSegment","oz-player/networks/OzNetworkManager","oz-player/networks/OzReadableStreamDataReader","oz-player/networks/OzStreamingTaskStateManager","oz-player/networks/getOzBandwidthEstimatorPipeThroughReporter","oz-player/shims/OzDeferred","oz-player/shims/OzEventEmitter","oz-player/shims/OzMaybeNativePromise","oz-player/shims/OzNetworkDiagnostics","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/ozClearTimeout","oz-player/shims/ozReportUnexpectedError","oz-player/shims/ozSetTimeoutAcrossTransitions","oz-player/shims/ozvariant","oz-player/strategies/OzStreamLengthStrategy","oz-player/streams/OzMediaStreamLoopDriver","oz-player/streams/OzSegmentLocator","oz-player/streams/OzSegmentUtils","oz-player/utils/OzBufferingUtils","oz-player/utils/OzCustomErrorCode","oz-player/utils/OzErrorEmitter","oz-player/utils/OzErrorUtils","oz-player/utils/OzMimeUtil","oz-player/utils/OzTaggedTimeRanges"],(function(t,n,r,o,a,i,l){"use strict";var e=1e3,s=.2,u={AUDIO:1,CAPTION:3,VIDEO:0},c=(function(t){function n(e){var n,a;a=t.call(this)||this,a.$OzMediaStream$p_2=0,a.$OzMediaStream$p_3=0,a.$OzMediaStream$p_4=null,a.$OzMediaStream$p_13=null,a.$OzMediaStream$p_15=!1,a.$OzMediaStream$p_16=null,a.$OzMediaStream$p_17=new(r("oz-player/shims/OzSubscriptionsHandler")),a.$OzMediaStream$p_19=[],a.$OzMediaStream$p_22=0,a.$OzMediaStream$p_29=!0,a.$OzMediaStream$p_31=!1,a.$OzMediaStream$p_32=null,a.$OzMediaStream$p_33=new(r("oz-player/utils/OzErrorEmitter")),a.$OzMediaStream$p_35=!0,a.$OzMediaStream$p_38=0,a.$OzMediaStream$p_39=null,a.$OzMediaStream$p_40=null;var i=e.config,l=e.sourceBufferManagerPromise,s=e.networkManager,u=e.playbackState,c=e.endOfStreamWatcher,d=e.bufferTargetCalculator,m=e.priorityCalculator,p=e.streamSegmentsCountCalculator,_=e.abrManager,f=e.representation,g=e.loggerProvider,h=e.segmentLocator,y=e.setCustomFetchStreamLoggingAttributes,C=e.blockedRepresentationsManager,b=e.dynamicVideoLibrary,v=e.shouldAppendOncePerStream,S=e.mediaStreamType,R=e.warningEmitter,L=e.mpd;return a.$OzMediaStream$p_1=i,a.$OzMediaStream$p_5=l,a.$OzMediaStream$p_5.then(function(e){a.$OzMediaStream$p_6=e,a.$OzMediaStream$p_16&&a.$OzMediaStream$p_16.setSourceBuffer(e),a.$OzMediaStream$p_27.setSourceBufferState(e.getSourceBufferState()),a.$OzMediaStream$p_47()},function(){}).catch(function(e){r("oz-player/shims/ozReportUnexpectedError")(e,"OzMediaStream SBM promise then - create")}),a.$OzMediaStream$p_12=s,a.$OzMediaStream$p_7=u,a.$OzMediaStream$p_14=c,(n=a.$OzMediaStream$p_14)==null||n.registerMediaStream(a),a.$OzMediaStream$p_26=d,a.$OzMediaStream$p_27=m,a.$OzMediaStream$p_28=p,a.$OzMediaStream$p_16=_,a.$OzMediaStream$p_18=g.cloneContext(),a.$OzMediaStream$p_36=h,a.$OzMediaStream$p_25=new(r("oz-player/utils/OzTaggedTimeRanges"))(function(e,t){return e.id===t.id}),a.$OzMediaStream$p_39=y,a.$OzMediaStream$p_40=C,a.$OzMediaStream$p_42=b,a.$OzMediaStream$p_43=v,a.$OzMediaStream$p_44=S,a.$OzMediaStream$p_45=R,a.$OzMediaStream$p_46=L,a.$OzMediaStream$p_17.addSubscriptions(a.$OzMediaStream$p_7.addEventListener("seeking",function(){var e,t=u.getCurrentTime(),n=null;a.$OzMediaStream$p_1.getBool("ignore_reset_after_seek_if_bufferahead")&&a.$OzMediaStream$p_8.canPredict()&&(a.$OzMediaStream$p_6&&o("oz-player/utils/OzBufferingUtils").getBufferAheadFromCurrentTime(t,a.$OzMediaStream$p_6.getSourceBufferState().getBufferedRanges())>0)?n="no_reset_anchor":(n="reset_anchor",a.$OzMediaStream$p_41=Date.now(),a.$OzMediaStream$p_9!=null&&(a.$OzMediaStream$p_48(),a.$OzMediaStream$p_31=!1,a.$OzMediaStream$p_24&&a.$OzMediaStream$p_24.resolve())),a.$OzMediaStream$p_18.cloneContext().getOperationLogger("media_element_event").setInitiator("seeking").setLength(t*1e3).setReason(n).setUserInfo({streamAnchorSegmentNumber:String((e=a.$OzMediaStream$p_9)==null?void 0:e.getSequenceNumber())}).log()})),a.$OzMediaStream$p_40!=null&&a.$OzMediaStream$p_17.addSubscriptions(a.$OzMediaStream$p_40.onRepresentationBlocked(function(e){return a.$OzMediaStream$p_49(e)})),a.$OzMediaStream$p_21=o("oz-player/utils/OzMimeUtil").getMimeType(f.getMimeCodecs()),a.$OzMediaStream$p_30=new(r("oz-player/networks/OzStreamingTaskStateManager"))({mimeType:a.$OzMediaStream$p_21,priorityCalculator:a.$OzMediaStream$p_27,loggerProvider:a.$OzMediaStream$p_18,setCustomFetchStreamLoggingAttributes:a.$OzMediaStream$p_39,config:a.$OzMediaStream$p_1,bandwidthEstimator:a.$OzMediaStream$p_12.getBandwidthEstimator()}),a.$OzMediaStream$p_23=new(r("oz-player/streams/OzMediaStreamLoopDriver"))(a,a.$OzMediaStream$p_18),a.$OzMediaStream$p_50(f),a}babelHelpers.inheritsLoose(n,t);var a=n.prototype;return a.start=function(){this.$OzMediaStream$p_23.start()},a.getCurrentRepresentation=function(){return this.$OzMediaStream$p_8},a.switchRepresentation=function(t,n){n===void 0&&(n=null),this.$OzMediaStream$p_50(t,"user",n)},a.onError=function(t){return this.$OzMediaStream$p_33.onError(t)},a.updateRunTimeConfigs=function(t){var e=t.streamDataHandler,n=t.resetStreamAnchor;e!==void 0&&(this.$OzMediaStream$p_34=e),n===!0&&this.$OzMediaStream$p_8.canApproximateId()&&(this.$OzMediaStream$p_48(),this.$OzMediaStream$p_10=null)},a.$OzMediaStream$p_50=function(t,n,a){var e,i=this;if(n===void 0&&(n="internal"),a===void 0&&(a=null),t==null){if(this.$OzMediaStream$p_1.getBool("no_rep_to_switch_fallback_progressive")){var l=o("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_NO_AVAILABLE_REP_TO_SWITCH",description:"No available representation to switch to because all are blocked"});this.$OzMediaStream$p_33.emitError(l)}return}n==="user"&&this.$OzMediaStream$p_48(),(e=this.$OzMediaStream$p_20)==null||e.remove(),this.$OzMediaStream$p_20=null;var s=this.$OzMediaStream$p_18.cloneContext().setType(this.$OzMediaStream$p_21+";init"),u=s.cloneContext().setRepresentationID(t.getID()),c=t.getInitSegment(),d=c.getData(),m=s.getOperationLogger("stream_switch").setPreviousRepresentationID(this.$OzMediaStream$p_8?this.$OzMediaStream$p_8.getID():null).setInitiator(n).setRepresentationID(t.getID()).setReason(n==="internal"?this.$OzMediaStream$p_16&&this.$OzMediaStream$p_16.getLastEvaluationReason():n).start();this.$OzMediaStream$p_8=t;var p=function(){var e;m.log(),i.$OzMediaStream$p_26.handleEvent("append_succeeded"),i.emit("initAppended"),(e=i.$OzMediaStream$p_14)==null||e.notifyRepresentationSwitched(i)},_=function(n){var e;if(m.setError(n).log(),i.$OzMediaStream$p_51(n),(e=i.$OzMediaStream$p_40)==null||e.handleError(t.getID(),n),t.getID()!==i.$OzMediaStream$p_8.getID()){var r;(r=i.$OzMediaStream$p_24)==null||r.resolve()}};if(d==null){var f=this.$OzMediaStream$p_12.request({debugName:"OzMediaStream/init/"+this.$OzMediaStream$p_44,segments:[c],pipeThroughRangeStreamProviders:[r("oz-player/networks/getOzBandwidthEstimatorPipeThroughReporter")(this.$OzMediaStream$p_21,this.$OzMediaStream$p_12.getBandwidthEstimator())],loggerProvider:u,requestOptions:null,mediaStreamType:this.$OzMediaStream$p_44,dataAppendedCallback:p,dataAppendedErrorCallback:_});d=f.getStream()}if(this.emit("switchRepresentation",n,t),this.$OzMediaStream$p_52({data:d,mimeCodecs:t.getMimeCodecs(),clearSourceBufferRange:a,dataAppendedCallback:p,dataAppendedErrorCallback:_,loggerProvider:u.cloneContext(),appendTarget:0}),a){var g=t.getSegmentByTime(a[0]);if(g){var h=this.$OzMediaStream$p_12.request({debugName:"OzMediaStream/startingSegment/"+this.$OzMediaStream$p_44,segments:[g],pipeThroughRangeStreamProviders:[r("oz-player/networks/getOzBandwidthEstimatorPipeThroughReporter")(this.$OzMediaStream$p_21,this.$OzMediaStream$p_12.getBandwidthEstimator())],loggerProvider:u,requestOptions:null,mediaStreamType:this.$OzMediaStream$p_44,dataAppendedCallback:p,dataAppendedErrorCallback:_}),y=h.getStream();this.$OzMediaStream$p_52({data:y,mimeCodecs:t.getMimeCodecs(),clearSourceBufferRange:null,dataAppendedCallback:p,dataAppendedErrorCallback:_,loggerProvider:u.cloneContext(),appendTarget:1})}}},a.getLoopInterval=function(){return this.$OzMediaStream$p_22},a.execute=function(){var e=this.$OzMediaStream$p_53();if(e){var t=this.$OzMediaStream$p_24=new(r("oz-player/shims/OzDeferred"))(r("oz-player/shims/OzMaybeNativePromise"));return e.then(function(){return t.resolve()}).catch(function(e){return t.reject(e)}),t.getPromise()}return null},a.$OzMediaStream$p_54=function(t){if(this.$OzMediaStream$p_16&&this.$OzMediaStream$p_29&&this.$OzMediaStream$p_15){var e=this.$OzMediaStream$p_16.getBestRepresentation(t);if(this.$OzMediaStream$p_8!==e)return e}return null},a.$OzMediaStream$p_55=function(t){var e=this.$OzMediaStream$p_6?this.$OzMediaStream$p_6.getSourceBufferState():null,n=this.$OzMediaStream$p_26.computeBufferTarget();if(n<=0)return null;var r=null;if(t&&(r=this.$OzMediaStream$p_8.getCustomFieldFirstSegment()),!r&&this.$OzMediaStream$p_8.canPredict()&&this.$OzMediaStream$p_36!=null){var a=this.$OzMediaStream$p_35&&this.$OzMediaStream$p_7.isPlaying();return this.$OzMediaStream$p_36.getSegment(this.$OzMediaStream$p_8,this.$OzMediaStream$p_7,n,e,this.$OzMediaStream$p_9,this.$OzMediaStream$p_10,this.$OzMediaStream$p_1,a,this.$OzMediaStream$p_21)}else if(r||(r=o("oz-player/streams/OzSegmentLocator").getSegment(this.$OzMediaStream$p_8,this.$OzMediaStream$p_7,n,e,this.$OzMediaStream$p_8,this.$OzMediaStream$p_9,this.$OzMediaStream$p_1,this.$OzMediaStream$p_32)),this.$OzMediaStream$p_8.canPredict()){var i=this.$OzMediaStream$p_10&&this.$OzMediaStream$p_10.getSequenceNumber()||0,l=r&&r.getSequenceNumber()||0;if(r&&this.$OzMediaStream$p_10&&i>=l){var s=o("oz-player/streams/OzSegmentLocator").getEndingSequenceNumber(this.$OzMediaStream$p_8);return(s||0)>=i?this.$OzMediaStream$p_10:null}}if(!r&&!this.$OzMediaStream$p_56()){var u=this.$OzMediaStream$p_8.getEndingSegment();if(u&&this.$OzMediaStream$p_8.isEndingSegment(u)){var c=u.getTimeRange().endTime,d=o("oz-player/streams/OzSegmentLocator").getTimeToQuery(this.$OzMediaStream$p_7,e,this.$OzMediaStream$p_9);d>=c&&!this.$OzMediaStream$p_56()&&(r=u)}}return r},a.$OzMediaStream$p_57=function(){return!this.$OzMediaStream$p_15},a.$OzMediaStream$p_58=function(t,n){var e,a,i=(e=n.fetchSingleSegment)!=null?e:!1,l=(a=n.preventRepresentationSwitch)!=null?a:!1,s=[];if(i)s=[t];else{var u=this.$OzMediaStream$p_28.computeMin(this.$OzMediaStream$p_7,t,this.$OzMediaStream$p_8);if(s=o("oz-player/strategies/OzStreamLengthStrategy").getStreamingSegments(this.$OzMediaStream$p_1,u,this.$OzMediaStream$p_8,this.$OzMediaStream$p_7,t),s=r("oz-player/networks/OzNetworkManager").getStreamableSegmentsRange(s),!l){var c=this.$OzMediaStream$p_54(s);if(c){this.$OzMediaStream$p_50(c);var d=this.$OzMediaStream$p_55(!1);return d?this.$OzMediaStream$p_58(d,{fetchSingleSegment:!1,preventRepresentationSwitch:!0}):[]}}}return s},a.$OzMediaStream$p_59=function(){var e=this,t=function(n){n==null||n.remove(),e.$OzMediaStream$p_20===n&&(e.$OzMediaStream$p_20=null)};t(this.$OzMediaStream$p_20);var n=null;return new(r("oz-player/shims/OzMaybeNativePromise"))(function(r,o){n=e.getCurrentRepresentation().addUpdateListener(function(){t(n),r()}),e.$OzMediaStream$p_20=n}).catch(function(e){throw t(n),e})},a.$OzMediaStream$p_53=function(){var t=this,n=this.$OzMediaStream$p_6?this.$OzMediaStream$p_6.getSourceBufferState():null;if(this.$OzMediaStream$p_8.canPredict()&&this.$OzMediaStream$p_10&&this.$OzMediaStream$p_8.isEndingSegment(this.$OzMediaStream$p_10)){this.endStream("pdash_ending_segment_had_error"),this.$OzMediaStream$p_18.cloneContext().getOperationLogger("media_loop_end").setInitiator("end1").setRepresentationID(this.$OzMediaStream$p_8.getID()).log();return}if(this.$OzMediaStream$p_8.canPredict()&&this.$OzMediaStream$p_9&&this.$OzMediaStream$p_8.isEndingSegment(this.$OzMediaStream$p_9)){this.endStream("pdash_anchor_segment_is_ending_segment"),this.$OzMediaStream$p_18.cloneContext().getOperationLogger("media_loop_end").setInitiator("end2").setRepresentationID(this.$OzMediaStream$p_8.getID()).log();return}var a=this.$OzMediaStream$p_57(),i=this.$OzMediaStream$p_55(a);if(this.$OzMediaStream$p_8.canPredict()&&this.$OzMediaStream$p_11!=null&&o("oz-player/manifests/IOzSegment").isSequenceNumberGreaterOrEqual(i,this.$OzMediaStream$p_11)){this.$OzMediaStream$p_18.cloneContext().getOperationLogger("media_loop_end").setInitiator("segment_end").setRepresentationID(this.$OzMediaStream$p_8.getID()).log();return}if(o("oz-player/manifests/IOzSegment").isSequenceNumberEqual(i,this.$OzMediaStream$p_37)?this.$OzMediaStream$p_38++:this.$OzMediaStream$p_38=0,this.$OzMediaStream$p_37=i,this.$OzMediaStream$p_7.isPlaying()&&this.$OzMediaStream$p_38>0&&this.$OzMediaStream$p_18.cloneContext().getOperationLogger("get_segment_to_stream_same_segment").setReason((i==null?void 0:i.getSequenceNumber())!=null?String(i==null?void 0:i.getSequenceNumber()):null).setLength(this.$OzMediaStream$p_38).setRepresentationID(this.$OzMediaStream$p_8.getID()).setSegmentStartTime(i==null?void 0:i.getTimeRange().startTime).setSegmentEndTime(i==null?void 0:i.getTimeRange().endTime).log(),this.$OzMediaStream$p_31){var l,s;return this.$OzMediaStream$p_22=e,this.$OzMediaStream$p_18.cloneContext().getOperationLogger("media_loop_end").setInitiator("ongoing_stream").setReason(((l=this.$OzMediaStream$p_9)==null?void 0:l.getSequenceNumber())!=null?String((s=this.$OzMediaStream$p_9)==null?void 0:s.getSequenceNumber()):null).setRepresentationID(this.$OzMediaStream$p_8.getID()).log(),null}if(!i||this.$OzMediaStream$p_31){if(this.$OzMediaStream$p_8.canPredict()&&this.$OzMediaStream$p_1.getBool("ms_promise_for_null")){var u=this.$OzMediaStream$p_1.getNumber("ms_promise_for_null_ms");return new(r("oz-player/shims/OzMaybeNativePromise"))(function(e,n){var o=r("oz-player/shims/ozSetTimeoutAcrossTransitions")(function(){r("oz-player/shims/ozClearTimeout")(o),e()},u||(t.$OzMediaStream$p_8.getMaxGopSec()||1)*1e3)})}return this.$OzMediaStream$p_22=e,this.$OzMediaStream$p_31||this.$OzMediaStream$p_30.finishTaskIfNoOngoingStream(),this.$OzMediaStream$p_59()}this.$OzMediaStream$p_22=0;var c=this.$OzMediaStream$p_58(i,{fetchSingleSegment:a});if(c.length===0){var d,m;return this.$OzMediaStream$p_18.cloneContext().getOperationLogger("media_loop_end").setInitiator("no_stream_segments").setReason(((d=this.$OzMediaStream$p_9)==null?void 0:d.getSequenceNumber())!=null?String((m=this.$OzMediaStream$p_9)==null?void 0:m.getSequenceNumber()):null).setRepresentationID(this.$OzMediaStream$p_8.getID()).log(),this.$OzMediaStream$p_59()}this.$OzMediaStream$p_15=!0;var p=c[c.length-1]||null,_=this.$OzMediaStream$p_8,f=function(){return _.isEndingSegment(p)};c.length!==0||r("oz-player/shims/ozvariant")(0,23148);var g=c[0],h=g.getTimeRange().startTime,y=p.getTimeRange().endTime,C={startTime:h,endTime:y,tag:{id:this.$OzMediaStream$p_8.getID()}},b=function(n){k.setAppendedBufferMs(Math.round(n.appendedSec*1e3)),k.log(),t.$OzMediaStream$p_26.handleEvent("append_succeeded"),c.forEach(function(e){t.emit("SegmentAppended",t.$OzMediaStream$p_60(e,C))}),f()&&t.endStream("appended_ending_segment"),t.$OzMediaStream$p_61(C,n)},v=function(n){k.setError(n).log();var e=L||R;e&&e.cancel(),t.$OzMediaStream$p_51(n)},S=this.$OzMediaStream$p_18.cloneContext();S.setRepresentationID(this.$OzMediaStream$p_8.getID()),S.setSegmentStartTime(h).setSegmentEndTime(y);var R,L;a?(R=this.$OzMediaStream$p_12.request({debugName:"OzMediaStream/streamableSegments/"+this.$OzMediaStream$p_44+"/prefetch",segments:c,pipeThroughRangeStreamProviders:[r("oz-player/networks/getOzBandwidthEstimatorPipeThroughReporter")(this.$OzMediaStream$p_21,this.$OzMediaStream$p_12.getBandwidthEstimator())],loggerProvider:S.cloneContext(),requestOptions:null,mediaStreamType:this.$OzMediaStream$p_44,dataAppendedCallback:b,dataAppendedErrorCallback:v}),this.$OzMediaStream$p_13=R):(L=this.$OzMediaStream$p_30.startStreamDeferred({debugName:"OzMediaStream/streamableSegments/"+this.$OzMediaStream$p_44,segments:c,networkManager:this.$OzMediaStream$p_12,sourceBufferState:n,playbackState:this.$OzMediaStream$p_7,segmentsLoggerProvider:S.cloneContext(),mediaStreamType:this.$OzMediaStream$p_44,dataAppendedCallback:b,dataAppendedErrorCallback:v}),this.$OzMediaStream$p_13=R),this.$OzMediaStream$p_31=!0;var E=this.$OzMediaStream$p_62(g,p,c.length),k=S.getOperationLogger("queued_append");k.start().setReason(this.$OzMediaStream$p_16&&this.$OzMediaStream$p_16.getLastEvaluationReason());var I=function(n,r){t.$OzMediaStream$p_52({data:n,mimeCodecs:r,clearSourceBufferRange:null,dataAppendedCallback:b,dataAppendedErrorCallback:v,loggerProvider:S.cloneContext(),appendTarget:E})},T;L||R||r("oz-player/shims/ozvariant")(0,23147);var D=this.$OzMediaStream$p_8.getMimeCodecs();L?(L.genStream().then(function(e){return I(e,D)}).catch(function(e){return t.$OzMediaStream$p_33.emitError(e)}),T=L.getStatusChangePromise()):R&&(I(R.getStream(),D),T=R.getStatusChangePromise()),T||r("oz-player/shims/ozvariant")(0,51928);var x=T.then(function(e){return t.$OzMediaStream$p_63(e,p),t.$OzMediaStream$p_64()}).then(function(){t.$OzMediaStream$p_2=0});return x.catch(function(e){var n,r=t.$OzMediaStream$p_9;return t.$OzMediaStream$p_65(p),(n=t.$OzMediaStream$p_40)==null||n.handleError(_.getID(),e),t.$OzMediaStream$p_66(e,p,r)})},a.handleError=function(t){var e=this.$OzMediaStream$p_18.getOperationLogger("media_stream_loop_error");return e.setError(t).setResult("failed").log(),this.$OzMediaStream$p_1.getNumber("loop_body_handle_error_interval_ms")},a.$OzMediaStream$p_66=function(t,n,a){var e=this;this.$OzMediaStream$p_31=!1;var i=new(r("oz-player/shims/OzDeferred"))(r("oz-player/shims/OzMaybeNativePromise")),l=o("oz-player/utils/OzErrorUtils").getNormalizedErrorAndCode(t),s=l[0],u=l[1],c=o("oz-player/utils/OzErrorUtils").getOzErrorWithMIMEType(s,this.$OzMediaStream$p_21),d=function(l){if(e.$OzMediaStream$p_2++,e.$OzMediaStream$p_18.getOperationLogger("media_stream").setInitiator("fetch_stream_"+(l.behavior!=null?l.behavior:"default")).setLength(l.timeoutMs).setReason(""+c.getDescription()).setError(c).setCode(u.length>0?Number.parseInt(u,10):null).setType(e.$OzMediaStream$p_21).log(),l.behavior==="retry_failed_request")e.$OzMediaStream$p_9=a;else if(l.behavior==="recover_failed_request"&&o("oz-player/utils/OzErrorUtils").isOzError(t)){var n,s=(n=t.getExtra())==null?void 0:n.headers,d=r("oz-player/shims/OzNetworkDiagnostics").getNextValidSegmentId(s);d!=null&&(e.$OzMediaStream$p_9=o("oz-player/streams/OzSegmentUtils").getSegmentForSequenceNumber(e.$OzMediaStream$p_8,d-1))}r("oz-player/shims/ozSetTimeoutAcrossTransitions")(function(){return e.emit("streamErrorRetry",c),i.resolve()},l.timeoutMs)};this.$OzMediaStream$p_4!==u?(this.$OzMediaStream$p_4=u,this.$OzMediaStream$p_3=1):this.$OzMediaStream$p_3++;var m=!0,p=function(){m=!1},_={consecutiveFailuresForErrorCode:this.$OzMediaStream$p_3,endStream:function(){p(),e.$OzMediaStream$p_10=n,e.$OzMediaStream$p_11=n,e.endStream("streamError_event_object"),i.resolve()},error:c,isInitialRequest:!1,retry:function(t){var e;p(),d({timeoutMs:(e=t==null?void 0:t.waitMs)!=null?e:0,behavior:t==null?void 0:t.behavior})},retryAttemptCount:this.$OzMediaStream$p_2};return this.emit("streamError",_),m&&(this.$OzMediaStream$p_33.emitError(c),this.$OzMediaStream$p_2=0,i.resolve()),i.getPromise()},a.$OzMediaStream$p_65=function(t){this.$OzMediaStream$p_48(),this.$OzMediaStream$p_10=t,this.$OzMediaStream$p_30.finishTaskIfNoOngoingStream();var e=this.$OzMediaStream$p_6;e&&e.cancelOperationAndCleanQueue(this.$OzMediaStream$p_18)},a.$OzMediaStream$p_63=function(t,n){t==="done"&&(this.$OzMediaStream$p_9=n)},a.$OzMediaStream$p_64=function(){this.$OzMediaStream$p_31=!1},a.$OzMediaStream$p_52=function(t){this.$OzMediaStream$p_19.push(t),this.$OzMediaStream$p_6&&this.$OzMediaStream$p_47()},a.$OzMediaStream$p_61=function(t,n){t!=null&&(this.$OzMediaStream$p_8.canPredict()&&n.startTime_UNSAFE&&n.endTime_UNSAFE?this.$OzMediaStream$p_25.add(n.startTime_UNSAFE,n.endTime_UNSAFE,t.tag):this.$OzMediaStream$p_25.add(t.startTime,t.endTime,t.tag))},a.$OzMediaStream$p_47=function(){var e=this;this.$OzMediaStream$p_19.forEach(function(t){var n=t.data,o=t.mimeCodecs,a=t.clearSourceBufferRange,i=t.dataAppendedCallback,l=t.dataAppendedErrorCallback,s=t.loggerProvider,u=t.appendTarget,c=n instanceof Uint8Array||e.$OzMediaStream$p_34==null?n:n.pipeThrough(new(r("oz-player/networks/OzReadableStreamDataReader"))(e.$OzMediaStream$p_34.bind(e,e.$OzMediaStream$p_8),e.$OzMediaStream$p_1));e.$OzMediaStream$p_6&&e.$OzMediaStream$p_6.queueData(c,o,a,s,u).then(function(e){e&&i(e)}).catch(function(e){l(e)})}),this.$OzMediaStream$p_19=[]},a.$OzMediaStream$p_67=function(){var e=this.$OzMediaStream$p_6;if(!e)return r("oz-player/shims/OzMaybeNativePromise").resolve();var t=this.$OzMediaStream$p_7.getCurrentTime(),n=[{fromTime:0,toTime:t}],o=this.$OzMediaStream$p_1.getNumber("clear_buffer_around_playhead_boundary_ms");if(o>0){var a=o/1e3,i=e.getSourceBufferState(),l=i.getBufferedRanges(),s=l.length>=1?l[l.length-1].endTime:t;n=[{fromTime:0,toTime:Math.max(0,t-a)}],t+a<s&&n.push({fromTime:t+a,toTime:s})}return e.clearRangeWithWait(n)},a.$OzMediaStream$p_68=function(t){return!1},a.$OzMediaStream$p_51=function(t){var e=this;if(o("oz-player/utils/OzErrorUtils").isOzError(t)&&t.getType()==="OZ_SOURCE_BUFFER_QUOTA_EXCEEDED"){this.emit("streamErrorRetry",o("oz-player/utils/OzErrorUtils").getOzErrorWithMIMEType(t,this.$OzMediaStream$p_21)),this.$OzMediaStream$p_26.handleEvent("append_quota_exceeded");var n=this.$OzMediaStream$p_67();n.then(function(){e.restartLoopBody()}).catch(function(t){var n=o("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_STREAM_APPEND_QUOTA_EXCEEDED_HANDLER_ERROR",description:"Stream append quota exceeded: "+String(t),extra:{originalError:t,code:r("oz-player/utils/OzCustomErrorCode").STREAM_APPEND_QUOTA_EXCEEDED_HANDLER_ERROR}});e.$OzMediaStream$p_33.emitError(n)})}else{if(o("oz-player/utils/OzErrorUtils").isOzError(t)&&t.getType()==="OZ_CANCELLED")return;if(o("oz-player/utils/OzErrorUtils").isOzError(t)&&t.getType()==="OZ_SOURCE_BUFFER_CHANGE_TYPE")this.$OzMediaStream$p_33.emitError(t);else if(o("oz-player/utils/OzErrorUtils").isOzError(t)&&t.getType()==="OZ_SOURCE_BUFFER_CHANGE_TYPE_UNAVAILABLE")this.$OzMediaStream$p_33.emitError(t);else if(o("oz-player/utils/OzErrorUtils").isOzError(t)&&t.getType()==="OZ_WEBVTT_CAPTION_PARSE_ERROR"){var a;r("oz-player/shims/ozReportUnexpectedError")(t,"OzMediaStream append error callback: OZ_WEBVTT_CAPTION_PARSE_ERROR branch","warn"),(a=this.$OzMediaStream$p_45)==null||a.emitError(t)}else r("oz-player/shims/ozReportUnexpectedError")(t,"OzMediaStream append error callback","warn"),this.$OzMediaStream$p_68(t)&&this.$OzMediaStream$p_33.emitError(t)}},a.$OzMediaStream$p_62=function(t,n,r){var e=0;if(this.$OzMediaStream$p_43)return 1/0;var o=this.$OzMediaStream$p_1.getNumber("appends_per_segment");if(o>0){var a=t.getByteRange(),i=n.getByteRange();a&&i&&i.endByte!=null&&(e=Math.ceil((i.endByte-a.startByte+1)/(r*o)))}return e===0&&(e=this.$OzMediaStream$p_1.getNumber("append_byte_target_without_range")),e},a.getIsAdaptationEnabled=function(){return this.$OzMediaStream$p_29},a.enableAdaptation=function(){this.$OzMediaStream$p_29=!0},a.disableAdaptation=function(){this.$OzMediaStream$p_29=!1},a.destroy=function(){this.$OzMediaStream$p_23.stop(),this.$OzMediaStream$p_5.then(function(e){e.destroy()},function(){}).catch(function(e){r("oz-player/shims/ozReportUnexpectedError")(e,"OzMediaStream SBM promise then - destroy")}),this.$OzMediaStream$p_30.destroy(),this.$OzMediaStream$p_17.release(),this.$OzMediaStream$p_17.engage(),this.removeAllListeners(),this.$OzMediaStream$p_20&&(this.$OzMediaStream$p_20.remove(),this.$OzMediaStream$p_20=null)},a.getRepresentationIDAtTime=function(t){var e=this.$OzMediaStream$p_25.get(t);if(!e){var n=this.$OzMediaStream$p_8.getTimeRanges(),r=n[n.length-1],o=.001;r&&t>=r.endTime&&t<=this.$OzMediaStream$p_7.getDuration()+o&&(e=this.$OzMediaStream$p_25.get(r.endTime-o))}return e?e.id:null},a.endStream=function(t){var e;(e=this.$OzMediaStream$p_14)==null||e.notifyMediaStreamEnded(this,t),this.$OzMediaStream$p_69()},a.endStreamIfBufferedToEndTime=function(){var e=this.$OzMediaStream$p_8.getTimeRanges();if(e.length>0){var t=e[e.length-1].endTime;if(this.$OzMediaStream$p_6){var n=this.$OzMediaStream$p_6.getSourceBufferState().getBufferedRanges();n.length>0&&Math.abs(n[n.length-1].endTime-t)<s&&this.endStream("buffered_to_end_time")}}},a.$OzMediaStream$p_60=function(t,n){var e,r;return{type:this.$OzMediaStream$p_21.indexOf("audio")===0?u.AUDIO:this.$OzMediaStream$p_21.indexOf("video")===0?u.VIDEO:u.CAPTION,segment:t,sourceBuffer:(e=(r=this.$OzMediaStream$p_6)==null||(r=r.getDebug())==null?void 0:r.SourceBuffer)!=null?e:null,timeRange:n}},a.$OzMediaStream$p_48=function(){this.$OzMediaStream$p_9=null},a.restartLoopBody=function(){this.$OzMediaStream$p_48(),this.$OzMediaStream$p_31=!1,this.$OzMediaStream$p_13&&this.$OzMediaStream$p_13.cancel(),this.$OzMediaStream$p_22!==0&&this.$OzMediaStream$p_24&&this.$OzMediaStream$p_24.resolve()},a.$OzMediaStream$p_69=function(){if(this.$OzMediaStream$p_6){var e=this.$OzMediaStream$p_6.getSourceBufferState().getBufferedRanges();e.length>0&&(this.$OzMediaStream$p_32=e[e.length-1].endTime)}},a.$OzMediaStream$p_56=function(){return this.$OzMediaStream$p_32!==null},a.$OzMediaStream$p_49=function(t){this.$OzMediaStream$p_8.getID()===t&&this.$OzMediaStream$p_16!=null&&this.$OzMediaStream$p_50(this.$OzMediaStream$p_16.getBestRepresentation())},a.setEnableLiveheadCatchup=function(t){this.$OzMediaStream$p_35=t},a.clearSourceBufferRange=function(t,n){var e=this.$OzMediaStream$p_6;return e?e.clearRangeWithWait([{fromTime:t,toTime:n}]):r("oz-player/shims/OzMaybeNativePromise").resolve()},a.getDebug=function(){return{SourceBufferManager:this.$OzMediaStream$p_6,MediaStreamAbrManager:this.$OzMediaStream$p_16}},n})(r("oz-player/shims/OzEventEmitter"));l.default=c}),98);
__d("oz-player/streams/OzPredictedSegmentLocator",["oz-player/streams/OzSegmentLocator","oz-player/streams/OzSegmentUtils","oz-player/utils/OzSourceBufferUtil"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=0;for(var r in e){var o;r!==t&&(n=Math.max(n,(o=e[r].lastSkippedToSegmentNumber)!=null?o:0))}return n}function s(e,t){var n=null;for(var r in e)r!==t&&e[r].inBufferAheadTimeSince!=null&&(n=n!=null?Math.min(n,e[r].inBufferAheadTimeSince):e[r].inBufferAheadTimeSince);return n}var u=(function(){function t(e){this.$5={};var t=e.videoNode,n=e.liveLatencyManager,r=e.loggerProvider,o=e.dynamicVideoLibrary;this.$1=t,this.$2=n,this.$3=r,this.$4=o}var n=t.prototype;return n.getSegment=function(t,n,r,o,a,i,l,s,u){var e,c;this.$5[u]==null&&(this.$5[u]={lastSkippedToSegmentNumber:null,inBufferAheadTimeSince:null}),(e=this.$2)==null||e.setEnableCatchup(s);var d=this.$6(t,n,r,o,a,i,l,s,u);(c=d.segment)==null||c.getOptions().setSegmentNumDecisionTime(Date.now()),d.segment===null&&this.$3.getOperationLogger("segment_locator").setInitiator(d.initiator).setReason(d.reason).setType(u).setUserInfo(d.userInfo).log();var m=this.$4;if(d.segment&&m!=null){var p=d.segment.getOptions();p.setIsDVLEnabled(m.shouldRequestDynamicInfo(u))}return d.segment},n.$6=function(n,r,a,i,l,u,c,d,m){var t,p,_,f,g,h=r.getCurrentTime(),y=this.$2==null?!1:this.$2.shouldEnableCursorBasedCatchup(),C=i!=null?o("oz-player/utils/OzSourceBufferUtil").getTotalBufferAheadOfPosition(i.getBufferedRanges(),r.getCurrentTime(),c):{bufferAheadSec:0,bufferedOffset:0},b=C.bufferAheadSec,v=C.bufferedOffset,S=null,R=null,L=this.$2?this.$2.enabled():!0,E=n.getPredictedSegmentAfter(l),k=o("oz-player/streams/OzSegmentUtils").getSegmentForSequenceNumber(n,c.getNumber("pdash_download_cursor_between_catchups_seg")>0?e(this.$5):e(this.$5,m)),I=!0,T=null;if(y&&d&&((t=E)==null?void 0:t.getSequenceNumber())!=null&&((p=(_=E)==null?void 0:_.getSequenceNumber())!=null?p:0)<=((f=k==null?void 0:k.getSequenceNumber())!=null?f:0)){var D,x,$;E=k,S="paired_catchup",this.$3.getOperationLogger("segment_locator").setInitiator(S).setUserInfo({bufferAheadSec:String(b),bufferedOffset:String(v)}).setLength(((D=k==null?void 0:k.getSequenceNumber())!=null?D:0)-((x=($=E)==null?void 0:$.getSequenceNumber())!=null?x:0)).setType(m).log(),I=!1,T=S}else if(y&&d&&L&&E!=null&&(g=this.$2)!=null&&g.isBehindPreferredLiveHeadLatencyWithTolerance()){var P,N;if(this.$2&&b>this.$2.getPreferredLiveHeadLatencySec()&&v==0)return{segment:null,initiator:"catchup_pause",userInfo:{bufferAheadSec:String(b),bufferedOffset:String(v)}};var M=n.getEndingSegment(),w=o("oz-player/streams/OzSegmentUtils").getMaxSegment([M,E]),A=c.getNumber("pdash_download_cursor_between_catchups_seg")===0||((P=k==null?void 0:k.getSequenceNumber())!=null?P:0)+c.getNumber("pdash_download_cursor_between_catchups_seg")<((N=M==null?void 0:M.getSequenceNumber())!=null?N:0);if(A){var F,O,B;if(((F=w==null?void 0:w.getSequenceNumber())!=null?F:0)>((O=(B=E)==null?void 0:B.getSequenceNumber())!=null?O:0)){var W,q,U,V;this.$5[m].lastSkippedToSegmentNumber=(W=w==null?void 0:w.getSequenceNumber())!=null?W:0,this.$3.getOperationLogger("segment_locator").setInitiator("catchup").setUserInfo({bufferAheadSec:String(b),bufferedOffset:String(v)}).setLength(((q=w==null?void 0:w.getSequenceNumber())!=null?q:0)-((U=(V=E)==null?void 0:V.getSequenceNumber())!=null?U:0)).setType(m).log()}E=w,S="catchup",I=!1,T=S}}else if(l==null){var H,G;E=n.getSegmentByTime(h),S="1st_run";var z=n.getTimeRanges();R={approx:String(n.canApproximateId()),ranges:String(z.length),mpdStartTime:z.length>0?String(z[z.length-1].startTime):null,mpdEndTime:z.length>0?String(z[z.length-1].endTime):null},this.$5[m].lastSkippedToSegmentNumber=(H=(G=E)==null?void 0:G.getSequenceNumber())!=null?H:0}if(I&&(I=L,T="stream_state"),I&&b>a)return this.$5[m].inBufferAheadTimeSince==null&&(this.$5[m].inBufferAheadTimeSince=Date.now()),{segment:null,initiator:"buffer_ahead_rule",userInfo:{bufferAheadSec:String(b),bufferedOffset:String(v),lastMaxSegNum:String(e(this.$5,m)),segment:E?String(E.getSequenceNumber()):null,computedBufferAheadTarget:String(a)}};!I&&b>a&&this.$3.getOperationLogger("segment_locator").setUserInfo({bufferAheadSec:String(b),bufferedOffset:String(v),computedBufferAheadTarget:String(a)}).setReason("disabled_buffer_ahead_rule:"+(T||"")).setType(m).log();var j=u&&u.getSequenceNumber()||0,K=E&&E.getSequenceNumber()||0;if(E&&u&&j>=K){var Q=o("oz-player/streams/OzSegmentLocator").getEndingSequenceNumber(n);return(Q||0)>=j?{segment:u}:{segment:null,initiator:"mpd_refresh",userInfo:{leSegNum:String(j)}}}var X=i?o("oz-player/utils/OzSourceBufferUtil").getTotalInBufferedRanges(i.getBufferedRanges()):0,Y=i?o("oz-player/utils/OzSourceBufferUtil").getTotalBufferAheadOfPosition(i.getBufferedRanges(),r.getCurrentTime(),c).bufferAheadSec:0,J=s(this.$5,m),Z=Date.now();if(c.getNumber("download_cursor_total_buffer_max_sec")!=0&&c.getNumber("download_cursor_total_buffer_max_sec")<Y||c.getNumber("download_cursor_buffer_ahead_time_max_sec")!=0&&J!=null&&c.getNumber("download_cursor_buffer_ahead_time_max_sec")<(Z-J)/1e3){var ee,te;this.$5[m].lastSkippedToSegmentNumber=(ee=(te=E)==null?void 0:te.getSequenceNumber())!=null?ee:0,this.$3.getOperationLogger("segment_locator").setUserInfo({bufferAheadSec:String(b),bufferedOffset:String(v),totalBufferedSec:String(X),computedBufferAheadTarget:String(a),inBufferAheadElapsedTime:String((Z-(J!=null?J:0))/1e3)}).setReason("force_paired_catchup").setType(m).log()}return this.$5[m].inBufferAheadTimeSince=null,{segment:E,initiator:S||void 0,userInfo:R||void 0}},t})();l.OzPredictedSegmentLocator=u}),98);
__d("oz-player/utils/getRepresentationInCache",["oz-player/networks/RequestParamCreator"],(function(t,n,r,o,a,i,l){"use strict";var e=new(r("oz-player/networks/RequestParamCreator"));function s(t,n){return n===void 0&&(n=null),t.find(function(t){var r=t.getInitSegment(),o=r&&r.getByteRange();return r&&o&&n?n.hasCacheValue(e.createRequestParam(r.getURI(),o,"auto").uri.toString()):!1})||null}l.default=s}),98);
__d("oz-player/Player",["Promise","oz-player/configs/OzPlayerConfig","oz-player/drm/OzDrmManager","oz-player/loggings/OzDevConsolePerfLogger","oz-player/loggings/OzLoggingUtils","oz-player/loggings/OzMultiDestinationPerfLogger","oz-player/loggings/OzOperationLoggerObserver","oz-player/manifests/OzDynamicVideoLibrary","oz-player/manifests/OzVideoRepresentation","oz-player/media_source/MediaSourceManager","oz-player/media_source/OzMediaSeekableRangeManager","oz-player/networks/OzBandwidthEstimator","oz-player/networks/OzClientClock","oz-player/networks/OzNetworkManager","oz-player/parsers/OzMpdParser","oz-player/parsers/OzMpdUpdater","oz-player/parsers/OzXmlParserImplDOMParser","oz-player/playback_controls/OzClearSourceBufferOnSeekManager","oz-player/playback_controls/OzLiveLatencyManager","oz-player/playback_controls/OzPlaybackTimeRangeManager","oz-player/playback_controls/OzPlayheadManager","oz-player/shims/OzEventEmitter","oz-player/shims/OzMaybeNativePromise","oz-player/shims/OzPerformance","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/OzUuid","oz-player/shims/ozClearTimeout","oz-player/shims/ozReportUnexpectedError","oz-player/shims/ozSetTimeoutAcrossTransitions","oz-player/shims/ozvariant","oz-player/states/OzObservedPlaybackState","oz-player/states/OzPositionToViewport","oz-player/strategies/OzAbrManager","oz-player/strategies/OzBandwidthBoundaryStreamSegmentsCountStrategy","oz-player/strategies/OzBlockedRepresentationsManager","oz-player/strategies/OzBufferAheadPriorityStrategy","oz-player/strategies/OzBufferAheadTargetStrategy","oz-player/strategies/OzBufferEndLimitStrategy","oz-player/strategies/OzBufferTargetBoundedStreamSegmentsCountStrategy","oz-player/strategies/OzBufferTargetCalculator","oz-player/strategies/OzBufferTargetCalculatorQuotaExceededConstraint","oz-player/strategies/OzBufferingDetector","oz-player/strategies/OzPausedStreamSegmentsCountStrategy","oz-player/strategies/OzPlayheadAtInterruptionDetector","oz-player/strategies/OzPlayingStatePriorityStrategy","oz-player/strategies/OzPositionToViewportPriorityStrategy","oz-player/strategies/OzPriorityCalculator","oz-player/strategies/OzSingleCodecRestriction","oz-player/strategies/OzStaleManifestBufferTargetStrategy","oz-player/strategies/OzStartupBufferTargetStrategy","oz-player/strategies/OzStaticStreamSegmentsStrategy","oz-player/strategies/OzStreamSegmentsCountCalculator","oz-player/strategies/OzSupportedMimeCodecsRestriction","oz-player/streams/OzEndOfStreamWatcher","oz-player/streams/OzHandleUserRepresentationSwitch","oz-player/streams/OzMediaStream","oz-player/streams/OzPredictedSegmentLocator","oz-player/utils/OzCustomErrorCode","oz-player/utils/OzErrorEmitter","oz-player/utils/OzErrorUtils","oz-player/utils/OzIbrUtils","oz-player/utils/OzMimeUtil","oz-player/utils/OzMpdUtils","oz-player/utils/OzPlaybackRestrictionsUtils","oz-player/utils/OzReadableStreamUtils","oz-player/utils/getRepresentationInCache"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){return e||r("oz-player/shims/ozvariant")(0,21876),e}var u="av01",c="vp09",d="avc1",m=(function(t){function a(e){var n;n=t.call(this)||this,n.$Player$p_5=new Map,n.$Player$p_6=new Map,n.$Player$p_9=void 0,n.$Player$p_10=new(r("oz-player/shims/OzSubscriptionsHandler")),n.$Player$p_11=new(r("oz-player/utils/OzErrorEmitter")),n.$Player$p_12=new(r("oz-player/utils/OzErrorEmitter")),n.$Player$p_19=void 0,n.$Player$p_25=[],n.$Player$p_26=void 0,n.$Player$p_27=void 0,n.$Player$p_32=null,n.$Player$p_33=null,n.$Player$p_43=null,n.$Player$p_51=!1,n.$Player$p_54=0,n.$Player$p_55=null,n.$Player$p_56=null,n.$Player$p_57=0,n.$Player$p_58=null,n.$Player$p_59=null,n.$Player$p_60=!1,n.$Player$p_63=null,n.$Player$p_64=null,n.$Player$p_70=!1,n.$Player$p_71=!1,n.$Player$p_76=!1,n.$Player$p_77=null,n.$Player$p_78=!1,n.$Player$p_89=function(){var e=new(r("oz-player/parsers/OzXmlParserImplDOMParser"));return e},n.$Player$p_91=function(){n.$Player$p_5.forEach(function(e){return e.endStreamIfBufferedToEndTime()})},n.$Player$p_92=function(){n.$Player$p_5.forEach(function(e){return e.endStream("streamGone")})};var a=e.audioOnly,i=a===void 0?!1:a,l=e.bufferingDetector,s=e.videoNode,u=e.config,c=e.configMap,d=e.rawMpdXml,m=e.mpdUrl,p=m===void 0?null:m,_=e.loggerConfig,f=_===void 0?{perfLoggerProviders:[],observedOperationLoggers:[],isOzDevConsoleEnabled:!1}:_,g=e.bandwidthEstimatorOverride,h=g===void 0?null:g,y=e.customVTTBufferTargetStrategies,C=y===void 0?null:y,b=e.shouldBlockStatusCode5xx,v=b===void 0?!1:b,S=e.prefetchCache,R=S===void 0?null:S,L=e.getOverrideOzRequestImplementation,E=L===void 0?null:L,k=e.getUserSelectedPlaybackRate,I=e.networkRequestStreamHandlers,T=e.networkRequestStreamRetryHandler,D=e.networkRequestUrlRefreshHandler,x=e.getShouldIncludeCredentials,$=x===void 0?null:x,P=e.getCustomRequestParametersForURI,N=P===void 0?null:P,M=e.initialRepresentationIDs,w=M===void 0?[]:M,A=e.debugCreateInitiator,F=A===void 0?null:A,O=e.customParsers,B=O===void 0?new Map:O,W=e.videoPlaybackRestrictions,q=W===void 0?[]:W,U=e.customSegmentTimelineParser,V=U===void 0?null:U,H=e.customRepresentationParsers,G=H===void 0?{}:H,z=e.networkRequestFetchPriority,j=z===void 0?"auto":z,K=e.videoAbrManagerFactory,Q=K===void 0?null:K,X=e.seekHandler,Y=X===void 0?null:X,J=e.initialPlaybackPositionForDynamicMpd,Z=J===void 0?-20:J,ee=e.liveheadFallBehindBlockThreshold,te=ee===void 0?30:ee,ne=e.liveheadFallBehindBlockMargin,re=ne===void 0?5.9:ne,oe=e.startTimeStamp,ae=oe===void 0?0:oe,ie=e.drmProviders,le=ie===void 0?[]:ie,se=e.getVideoDimensions,ue=se===void 0?null:se,ce=e.setCustomFetchStreamLoggingAttributes,de=ce===void 0?null:ce,me=e.bufferEndLimit,pe=me===void 0?null:me,_e=e.configureCustomRequestParametersForSegment,fe=_e===void 0?null:_e,ge=e.isClientTriggeredTraceEnabled,he=ge===void 0?!1:ge,ye=e.enableImmediateQualityDownSwitch,Ce=ye===void 0?!1:ye,be=e.userPreferenceLang,ve=be===void 0?null:be,Se=e.initiateLivePlaybackFromStart,Re=Se===void 0?!1:Se;n.$Player$p_1=C,n.$Player$p_49=F;var Le=f.perfLoggerProviders,Ee=f.observedOperationLoggers,ke=f.isOzDevConsoleEnabled;if(n.$Player$p_17=ke||!1,n.$Player$p_16=new(o("oz-player/loggings/OzMultiDestinationPerfLogger")).OzMultiDestinationPerfLoggerProvider(n.$Player$p_79().concat(Le)),n.$Player$p_2=i,n.$Player$p_4=u!=null?u:new(r("oz-player/configs/OzPlayerConfig"))(c!=null?c:{}),n.$Player$p_78=n.$Player$p_4.getBool("enable_managed_media_source")&&!!window.ManagedMediaSource,n.$Player$p_75=n.$Player$p_78?"changeType"in window.ManagedSourceBuffer.prototype:"changeType"in window.SourceBuffer.prototype,n.$Player$p_12.onError(function(){}),n.$Player$p_22=new(r("oz-player/loggings/OzOperationLoggerObserver")),n.$Player$p_22.observe(Ee,n.$Player$p_16),n.$Player$p_16.getOperationLogger("player_initialization").setInitiator("player-"+r("oz-player/shims/OzUuid")()).log(),n.$Player$p_53=E,n.$Player$p_28=B,n.$Player$p_67=new(r("oz-player/strategies/OzBlockedRepresentationsManager"))(n.$Player$p_4,v),n.$Player$p_10.addSubscriptions(n.$Player$p_67.onRepresentationBlocked(function(e){n.emit("representationBlocked",e)})),n.$Player$p_31=[n.$Player$p_67,new(r("oz-player/strategies/OzSupportedMimeCodecsRestriction"))(n.$Player$p_78)].concat(q),n.$Player$p_75||n.$Player$p_31.push(new(r("oz-player/strategies/OzSingleCodecRestriction"))),n.$Player$p_29=G,n.$Player$p_30=V,n.$Player$p_35=Q,n.$Player$p_36=Y,n.$Player$p_37=ae,n.$Player$p_38=Re?ae:Z,n.$Player$p_41=k!=null?k:function(){return 1},n.$Player$p_39=te,n.$Player$p_42=re,n.$Player$p_66=pe,n.$Player$p_69=he,n.$Player$p_71=Ce,n.$Player$p_47=le,n.$Player$p_63=de,n.$Player$p_3=s,n.$Player$p_7=new(r("oz-player/media_source/MediaSourceManager"))({videoNode:n.$Player$p_3,config:n.$Player$p_4,perfLoggerProvider:n.$Player$p_16,isChangeTypeSupported:n.$Player$p_75,useManagedMediaSource:n.$Player$p_78,handleVttCaptionsUpdated:function(t){var e,r=(e=n.$Player$p_5.get("caption"))==null||(e=e.getCurrentRepresentation())==null?void 0:e.getLang();n.emit("vttCaptionsUpdated",t,r)},onClearVideoNodeError:function(){n.$Player$p_80()},onRetryVideoElementError:function(t){n.emit("videoNodeErrorRetry",t)}}),n.$Player$p_7.onError(function(e){n.$Player$p_11.emitError(e)}),n.$Player$p_4.getBool("clear_on_seek")){var Ie=new(r("oz-player/playback_controls/OzClearSourceBufferOnSeekManager"))(n.$Player$p_3,n.$Player$p_4,n.$Player$p_5,n.$Player$p_16);Ie.maybeOverwriteVideoCurrentTimeProperty(),n.$Player$p_10.addSubscriptions(Ie.onError(n.$Player$p_11.emitError)),n.$Player$p_64=Ie}n.$Player$p_24=R;var Te=n.$Player$p_24&&n.$Player$p_24.getCachedRepresentations();return n.$Player$p_25=Te||w,n.$Player$p_65=new(r("oz-player/manifests/OzDynamicVideoLibrary"))({config:n.$Player$p_4}),n.$Player$p_44=I,n.$Player$p_45=$,n.$Player$p_46=N,n.$Player$p_68=fe,n.$Player$p_77=h!=null?h:r("oz-player/networks/OzBandwidthEstimator"),n.$Player$p_13=new(r("oz-player/networks/OzNetworkManager"))({config:n.$Player$p_4,prefetchCache:n.$Player$p_24,networkRequestStreamHandlers:n.$Player$p_44,getOverrideOzRequestImplementation:n.$Player$p_53,getShouldIncludeCredentials:n.$Player$p_45,getCustomRequestParametersForURI:n.$Player$p_46,networkRequestFetchPriority:j,networkRequestStreamRetryHandler:T,networkRequestUrlRefreshHandler:D,setCustomFetchStreamLoggingAttributes:n.$Player$p_63,dynamicVideoLibrary:n.$Player$p_65,configureCustomRequestParametersForSegment:n.$Player$p_68,onResourceTimingBufferFull:function(){n.$Player$p_81()},bandwidthEstimator:n.$Player$p_77}),n.$Player$p_18=p,n.$Player$p_8=d,n.$Player$p_14=new(r("oz-player/states/OzObservedPlaybackState"))(n.$Player$p_4,n.$Player$p_3,n.$Player$p_16),n.$Player$p_52=ue,n.$Player$p_15=new(r("oz-player/streams/OzEndOfStreamWatcher"))(n.$Player$p_7,n.$Player$p_4),n.$Player$p_10.addSubscriptions(n.$Player$p_15.addListener("streamEnd",function(){n.$Player$p_51=!0,n.emit("streamEnd")})),n.$Player$p_50=l!=null?l:n.$Player$p_82(),n.$Player$p_4.getNumber("pixels_below_viewport_to_observe")>0&&(n.$Player$p_61=new(r("oz-player/states/OzPositionToViewport"))(n.$Player$p_3,n.$Player$p_4)),n.$Player$p_72=ve,n.$Player$p_73=null,n.$Player$p_74={lang:null,role:null},n}babelHelpers.inheritsLoose(a,t);var i=a.prototype;return i.$Player$p_81=function(){this.$Player$p_70||(r("oz-player/shims/ozReportUnexpectedError")(o("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_JAVASCRIPT_NATIVE",description:"ResourceTiming buffer is full"}),"ResourceTiming buffer is full","warn"),this.$Player$p_70=!0)},i.$Player$p_83=function(t){var e=this;this.$Player$p_84();var n=o("oz-player/loggings/OzLoggingUtils").executeOperationAndLog(this.$Player$p_16.cloneContext().setInitiator(this.$Player$p_49),"parse_manifest",function(n){var r,a,i=e.$Player$p_85(t),l=String((r=i.getCustomField("currentServerTimeMs"))!=null?r:""),s=String((a=i.getCustomField("lastVideoFrameTs"))!=null?a:""),u={currentServerTimeMs:l,ingestLastVideoFrameTs:s,nowMs:String(Date.now())},c=o("oz-player/utils/OzMpdUtils").getMpdLastTimeRange(i,e.$Player$p_4),d=c&&c.endTime!=0?c.endTime:null;return n.setLiveheadPosition(d).setLiveheadSeqNumMpd(o("oz-player/utils/OzMpdUtils").getMpdLastSequenceNumber(i)).setManifestType(i.isStaticMpd()?"static":"dynamic").setIsMixedCodecManifest(e.$Player$p_76).setIsTemplatedManifest(!!i.getCustomField("isLiveTemplated")).setUserInfo(u),i});this.$Player$p_86(n)},i.$Player$p_86=function(t){var e=this,n,a;if(this.$Player$p_9=s(t),this.$Player$p_4.getBool("player_emit_mpdparsed_early")&&this.emit("mpdParsed",t),this.$Player$p_26=this.$Player$p_87(),this.$Player$p_27=this.$Player$p_88(),this.$Player$p_67.setAvailableRepresentationsCount(t.getVideoRepresentations().length),this.$Player$p_18!=null){var i=new(r("oz-player/parsers/OzMpdUpdater"))(this.$Player$p_4,t,this.$Player$p_13,this.$Player$p_14,this.$Player$p_16,{mpdUrl:null,createXmlParser:this.$Player$p_89,customParsers:this.$Player$p_28,customRepresentationParsers:this.$Player$p_29,customSegmentTimelineParser:this.$Player$p_30},this.$Player$p_48,this.$Player$p_69,this.$Player$p_78);this.$Player$p_90(i),this.$Player$p_10.addSubscriptions(i.onError(this.$Player$p_11.emitError),i.addListener("manifestFetchError",function(t){return e.emit("manifestFetchError",t)}),i.addListener("manifestFetchErrorRetry",function(t){return e.emit("manifestFetchErrorRetry",t)}),i.addListener("streamTransitionToStatic",this.$Player$p_91),i.addListener("streamGone",this.$Player$p_92)),i.setupUpdateLoop(),this.$Player$p_21=i}this.$Player$p_4.getBool("use_live_latency_manager")?t.isStaticMpd()?this.$Player$p_37=this.$Player$p_37:(this.$Player$p_40=new(r("oz-player/playback_controls/OzLiveLatencyManager"))({config:this.$Player$p_4,mpd:t,playbackState:this.$Player$p_14,bufferingDetector:this.$Player$p_50,video:this.$Player$p_3,loggerProvider:this.$Player$p_16,getUserSelectedPlaybackRate:this.$Player$p_41}),this.$Player$p_37=this.$Player$p_40.getPreferredLiveHeadLatencySec()*-1):this.$Player$p_37=t.isStaticMpd()?this.$Player$p_37:this.$Player$p_93(t),this.$Player$p_19=new(r("oz-player/playback_controls/OzPlayheadManager"))({video:this.$Player$p_3,mpd:t,dynamicVideoLibrary:this.$Player$p_65,playheadCatchup:this.$Player$p_34,playbackState:this.$Player$p_14,config:this.$Player$p_4,perfLoggerProvider:this.$Player$p_16,seekHandler:this.$Player$p_36,initialPlaybackPosition:this.$Player$p_37,canSupportSkipVideobufferGaps:(n=(a=this.$Player$p_64)==null?void 0:a.getCurrentTimePropertyOverwriteSuccess())!=null?n:!1,liveLatencyManager:this.$Player$p_40}),this.$Player$p_20=new(r("oz-player/playback_controls/OzPlaybackTimeRangeManager"))({config:this.$Player$p_4,video:this.$Player$p_3,mpd:t,liveheadFallBehindBlockThreshold:this.$Player$p_39,liveheadFallBehindBlockMargin:this.$Player$p_42,playbackState:this.$Player$p_14,perfLoggerProvider:this.$Player$p_16}),this.$Player$p_94().catch(function(t){var n=o("oz-player/utils/OzErrorUtils").isOzError(t)?t:null;e.$Player$p_11.emitError(o("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_INITIALIZATION",description:"Failed to setup streams: "+String(t),extra:babelHelpers.extends({},n==null?void 0:n.getExtra(),{originalError:t,code:r("oz-player/utils/OzCustomErrorCode").SETUP_STREAMS_PROMISE_REJECTION.toString()})}))}),this.emit("mpdReady",t)},i.load=function(t){var e=this;this.$Player$p_18=t;try{var n=this.$Player$p_8;n!=null?this.$Player$p_83(n):t!=null?this.$Player$p_95(t).then(function(t){if(e.$Player$p_60){e.$Player$p_60=!1,e.load(e.$Player$p_18);return}e.$Player$p_8=t,e.$Player$p_54=0,e.$Player$p_83(t)}).catch(function(n){if(e.$Player$p_60){e.$Player$p_60=!1,e.load(e.$Player$p_18);return}var r=o("oz-player/utils/OzErrorUtils").isOzError(n)?n:null,a=o("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_INITIALIZATION",description:"Failed to setup player with fetched MPD: "+String(n),extra:babelHelpers.extends({},r==null?void 0:r.getExtra(),{originalError:n,url:t})});e.$Player$p_96(a,t)}):this.$Player$p_11.emitError(o("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_INITIALIZATION",description:"Cannot start Oz without a raw mpd xml or mpd url"}))}catch(e){var r=o("oz-player/utils/OzErrorUtils").isOzError(e)?e:null;this.$Player$p_11.emitError(o("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_INITIALIZATION",description:"Failed to setup player: "+String(e),extra:babelHelpers.extends({},r==null?void 0:r.getExtra(),{originalError:e})}))}},i.$Player$p_93=function(t){var e,n,r=(e=t.getVideoRepresentations()[0].getMaxGopSec())!=null?e:0,o=(n=t.getVideoRepresentations()[0].getEndingSegment())==null?void 0:n.getTimeRange(),a=o!=null?o.endTime-o.startTime:0;return a>0&&(r=a),Math.min(this.$Player$p_38+this.$Player$p_4.getNumber("dynamic_mpd_initial_playback_position_offset_modifier"),-1*r*this.$Player$p_4.getNumber("pdash_download_cursor_catchup_threshold_gop_multiplier"))},i.$Player$p_95=function(t){this.$Player$p_54++;var e=this.$Player$p_13.requestRawUrl({debugName:"OzPlayer/fetchMpdXml/mpd",url:t,options:null,loggerProvider:this.$Player$p_16}),n=e.getStream().getReader();return o("oz-player/utils/OzReadableStreamUtils").pumpString(n)},i.$Player$p_97=function(){this.$Player$p_55!=null&&(r("oz-player/shims/ozClearTimeout")(this.$Player$p_55),this.$Player$p_55=null)},i.$Player$p_96=function(t,n){var e=this,o=!0,a=this.$Player$p_54-1,i=t.getExtra().code;this.$Player$p_56!==i?(this.$Player$p_56=i,this.$Player$p_57=1):this.$Player$p_57++;var l=function(){o=!1},s={endStream:function(){l(),e.$Player$p_51=!0,e.emit("streamGoneBeforeStart")},consecutiveFailuresForErrorCode:this.$Player$p_57,error:t,isInitialRequest:!0,retry:function(o){l(),e.$Player$p_97(),e.$Player$p_55=r("oz-player/shims/ozSetTimeoutAcrossTransitions")(function(){e.$Player$p_97(),e.load(n)},(o==null?void 0:o.waitMs)!=null?o==null?void 0:o.waitMs:1e3)},retryAttemptCount:a};this.$Player$p_4.getNumber("initial_manifest_request_retry_count")>0&&this.emit("manifestFetchError",s),o&&this.$Player$p_11.emitError(t)},i.updatePlayerRunTimeConfig=function(t){var e=t.manifestUrl,n=t.audioStreamDataHandler,r=t.videoStreamDataHandler,o=t.applicationStreamDataHandler,a=t.resetStreamAnchor;if(r!==void 0){var i=this.$Player$p_5.get("video");i&&i.updateRunTimeConfigs({streamDataHandler:r})}if(a!==void 0){var l,s=this.$Player$p_5.get("video");s&&s.updateRunTimeConfigs({resetStreamAnchor:a});var u=this.$Player$p_5.get("audio");u&&u.updateRunTimeConfigs({resetStreamAnchor:a}),(l=this.$Player$p_19)==null||l.resetCurrentTime()}if(n!==void 0){var c=this.$Player$p_5.get("audio");c&&c.updateRunTimeConfigs({streamDataHandler:n})}if(o!==void 0){var d=this.$Player$p_5.get("caption");d&&d.updateRunTimeConfigs({streamDataHandler:o,resetStreamAnchor:a})}e!=null&&e!==""&&this.$Player$p_98(e)},i.$Player$p_99=function(t,n){var e=this,r=t.getMimeCodecs(),a=this.$Player$p_7.createSourceBufferManager(n+"/"+t.getMimeType()+"/"+t.getCodecs(),r,n,t.getInitSegment().getData());this.$Player$p_100(a,n,t);var i=a.then(function(t){return e.$Player$p_50&&n!=="caption"&&e.$Player$p_50.setSourceBufferState(n,t.getSourceBufferState()),t});return o("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(i,this.$Player$p_16,"source_attach",function(e){e.setType(n)}),i.then(function(t){if(n!=="caption"){var r;(r=e.$Player$p_19)==null||r.observeSourceBufferState(t.getSourceBufferState(),n)}})},i.isDrm=function(){var e=this.$Player$p_48;if(e!=null){var t=e.hasContentProtections();return t!=null?t:!1}return!1},i.$Player$p_84=function(){var e=this.$Player$p_47;if(e.length>0){var t=this.$Player$p_48=new(o("oz-player/drm/OzDrmManager")).OzDrmManager(this.$Player$p_16,this.$Player$p_3,{maxStartEMEAttempts:this.$Player$p_4.getNumber("max_start_eme_attempts"),throwNoLicenseError:!0});e.forEach(function(e){t.addProvider(e)}),this.$Player$p_10.addSubscriptions(t.onError(this.$Player$p_11.emitError))}},i.$Player$p_101=function(t){var e=this,n=s(this.$Player$p_9),o=[this.$Player$p_4,t,this.$Player$p_102(),this.$Player$p_31,this.$Player$p_14,window.devicePixelRatio||1,function(){return e.$Player$p_103()},n.isStaticMpd()?"static":"dynamic",this.$Player$p_16],a=this.$Player$p_35&&this.$Player$p_35.apply(this,o);return a!=null?a:babelHelpers.construct(r("oz-player/strategies/OzAbrManager"),o)},i.$Player$p_104=function(t){return t==="caption"},i.$Player$p_100=function(t,n,a){var e=this,i=s(this.$Player$p_9),l=this.$Player$p_6.get(n),u=new(r("oz-player/streams/OzMediaStream"))({config:this.$Player$p_4,sourceBufferManagerPromise:t,networkManager:this.$Player$p_13,playbackState:this.$Player$p_14,endOfStreamWatcher:n!=="caption"?this.$Player$p_15:null,bufferTargetCalculator:this.$Player$p_105(n),priorityCalculator:this.$Player$p_106(),streamSegmentsCountCalculator:this.$Player$p_107(n),abrManager:l,representation:a,loggerProvider:this.$Player$p_16.cloneContext().setType(n),segmentLocator:this.$Player$p_62,setCustomFetchStreamLoggingAttributes:this.$Player$p_63,blockedRepresentationsManager:this.$Player$p_67,dynamicVideoLibrary:this.$Player$p_65,shouldAppendOncePerStream:this.$Player$p_104(n),mediaStreamType:n,warningEmitter:this.$Player$p_12,mpd:i});this.$Player$p_37===0?u.start():(s(this.$Player$p_9),this.$Player$p_19&&this.$Player$p_10.addSubscriptions(this.$Player$p_19.addListener("initialPlaybackPositionSet",function(){u.start()}))),this.$Player$p_10.addSubscriptions(u.onError(this.$Player$p_11.emitError)),this.$Player$p_23&&this.$Player$p_10.addSubscriptions(this.$Player$p_23.listenToMediaStreamInitAppended(u)),n==="video"&&(this.$Player$p_33=new(r("oz-player/streams/OzHandleUserRepresentationSwitch"))(this.$Player$p_4,this.$Player$p_14,o("oz-player/utils/OzPlaybackRestrictionsUtils").applyVideoPlaybackRestrictions(this.$Player$p_31,this.$Player$p_103(),this.$Player$p_102()),u,t,this.$Player$p_71),this.$Player$p_10.addSubscriptions(this.$Player$p_33.onError(this.$Player$p_11.emitError))),this.$Player$p_5.set(n,u),this.$Player$p_10.addSubscriptions(u.addListener("switchRepresentation",function(){var t,r,o,a=u.getCurrentRepresentation();(t=e.$Player$p_23)==null||t.setTimeRangeProvider(a),(r=e.$Player$p_19)==null||r.setTimeRangeProvider(a),(o=e.$Player$p_20)==null||o.setTimeRangeProvider(a),n==="video"&&e.emit("switchVideoRepresentation")}),u.addListener("SegmentAppended",function(t){e.$Player$p_108("SegmentAppended",t)}),u.addListener("streamError",function(t){e.emit("streamError",t)}),u.addListener("streamErrorRetry",function(t){e.emit("streamErrorRetry",t)}))},i.$Player$p_109=function(){return this.$Player$p_66!=null?[new(r("oz-player/strategies/OzBufferEndLimitStrategy"))(this.$Player$p_3,this.$Player$p_66)]:[new(r("oz-player/strategies/OzStaleManifestBufferTargetStrategy"))(s(this.$Player$p_9),this.$Player$p_4),new(r("oz-player/strategies/OzStartupBufferTargetStrategy"))(this.$Player$p_14,this.$Player$p_4),new(r("oz-player/strategies/OzBufferAheadTargetStrategy"))(this.$Player$p_4)]},i.$Player$p_110=function(){return this.$Player$p_66==null?[new(r("oz-player/strategies/OzBufferTargetCalculatorQuotaExceededConstraint"))({config:this.$Player$p_4,minimumBufferTargetSec:this.$Player$p_4.getNumber("buffer_target_constraint_minimum_sec")})]:[]},i.$Player$p_111=function(){return this.$Player$p_66==null?[new(r("oz-player/strategies/OzBufferTargetCalculatorQuotaExceededConstraint"))({config:this.$Player$p_4,minimumBufferTargetSec:0})]:[]},i.$Player$p_87=function(){return new(r("oz-player/strategies/OzBufferTargetCalculator"))(this.$Player$p_109(),this.$Player$p_110())},i.$Player$p_88=function(){return this.$Player$p_1!=null?new(r("oz-player/strategies/OzBufferTargetCalculator"))([].concat(this.$Player$p_1,this.$Player$p_109()),this.$Player$p_111()):this.$Player$p_87()},i.$Player$p_105=function(t){var e=t==="caption"?this.$Player$p_27:this.$Player$p_26;return e||r("oz-player/shims/ozvariant")(0,76764,t),e},i.$Player$p_90=function(t){var e=this;if(this.$Player$p_4.getNumber("stream_interrupt_check_mpd_stale_count_threshold")>0){var n=this.$Player$p_50,o=new(r("oz-player/strategies/OzPlayheadAtInterruptionDetector"))(this.$Player$p_3,n);this.$Player$p_10.addSubscriptions(o.addListener("playheadAtInterruption",function(t){e.$Player$p_16.getOperationLogger("stream_interrupted").log(),e.emit("streamInterruptAt",t)}),t.addListener("streamInterruptAt",function(t){var n;(n=e.$Player$p_50)==null||n.notifyStreamInterrupted(),o.notifyStreamInterrupted(t)}),t.addListener("streamResumedAt",function(t){var n;e.$Player$p_16.getOperationLogger("stream_resumed").log(),(n=e.$Player$p_50)==null||n.notifyStreamResumed(),o.notifyStreamResumed(),e.emit("streamResumedAt",t)})),this.$Player$p_32=o}},i.$Player$p_106=function(){var e=[new(r("oz-player/strategies/OzPlayingStatePriorityStrategy"))(this.$Player$p_14),new(r("oz-player/strategies/OzBufferAheadPriorityStrategy"))(this.$Player$p_4,this.$Player$p_14)].concat(this.$Player$p_4.getNumber("pixels_below_viewport_to_observe")>0&&this.$Player$p_61!=null?new(r("oz-player/strategies/OzPositionToViewportPriorityStrategy"))(this.$Player$p_61,this.$Player$p_4):[]);return new(r("oz-player/strategies/OzPriorityCalculator"))(e)},i.$Player$p_107=function(t){var e=[new(r("oz-player/strategies/OzStaticStreamSegmentsStrategy"))(this.$Player$p_4),new(r("oz-player/strategies/OzBufferTargetBoundedStreamSegmentsCountStrategy"))(this.$Player$p_105(t),this.$Player$p_4)];return this.$Player$p_4.getNumber("paused_stream_segments_count")!==0&&e.push(new(r("oz-player/strategies/OzPausedStreamSegmentsCountStrategy"))(this.$Player$p_14,this.$Player$p_4)),t==="video"&&e.push(new(r("oz-player/strategies/OzBandwidthBoundaryStreamSegmentsCountStrategy"))(this.$Player$p_4,this.$Player$p_102())),new(r("oz-player/strategies/OzStreamSegmentsCountCalculator"))(e)},i.onError=function(t){return this.$Player$p_11.onError(t)},i.onWarning=function(t){return this.$Player$p_12.onError(t)},i.getSelectedVideoQuality=function(){var e=this.$Player$p_9;if(!e||this.$Player$p_2)return null;var t=this.$Player$p_5.get("video"),n=t&&t.getCurrentRepresentation();if(n instanceof r("oz-player/manifests/OzVideoRepresentation"))return n.getDisplayLabel();var o=this.$Player$p_102(),a=o[0];return a?a.getDisplayLabel():null},i.getTargetAudioTrack=function(){var e=this.$Player$p_9;if(!e)return null;var t=this.$Player$p_5.get("audio"),n=t&&t.getCurrentRepresentation();if(n){var r;return{id:n.getID(),displayLabel:n.getDisplayLabel(),lang:(r=n.getLang())!=null?r:null,role:n.getRole(),mimeCodecs:n.getMimeCodecs(),variantKey:n.getVariantKey()}}var o=this.$Player$p_112(),a=o[0];return a?a.getAudioTrack():null},i.getCurrentPlayingVideoVariant=function(){return this.$Player$p_73},i.getTargetVideoVariant=function(){return this.$Player$p_74},i.switchToVideoQuality=function(t){var e=this.$Player$p_102().find(function(e){return e.getDisplayLabel()===t});if(e){var n=this.$Player$p_5.get("video");n&&(n.switchRepresentation(e),n.disableAdaptation())}},i.switchToVideoVariant=function(t){var e,n,a,i;if(this.$Player$p_74=t===null?{lang:null,role:null}:t,this.$Player$p_74.lang===((e=(n=this.$Player$p_73)==null?void 0:n.lang)!=null?e:null)&&this.$Player$p_74.role===((a=(i=this.$Player$p_73)==null?void 0:i.role)!=null?a:null)){var l,s,u,c;r("oz-player/shims/ozReportUnexpectedError")(o("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SWITCH_VARIANT",description:"switchToVideoVariant switch to the same lang: "+((l=this.$Player$p_74.lang)!=null?l:"default lang")+", same role: "+((s=this.$Player$p_74.role)!=null?s:"default role")}),"switchToVideoVariant switch to the same lang: "+((u=this.$Player$p_74.lang)!=null?u:"default lang")+", same role: "+((c=this.$Player$p_74.role)!=null?c:"default role"),"warn");return}else if(this.$Player$p_9){if(!this.$Player$p_113(this.$Player$p_74.lang)){var d,m,p,_;r("oz-player/shims/ozReportUnexpectedError")(o("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SWITCH_VARIANT",description:"switchToVideoVariant lang not exist in mpd: "+((d=this.$Player$p_74.lang)!=null?d:"default lang")+", same role: "+((m=this.$Player$p_74.role)!=null?m:"default role")}),"switchToVideoVariant lang not exist in mpd: "+((p=this.$Player$p_74.lang)!=null?p:"default lang")+", same role: "+((_=this.$Player$p_74.role)!=null?_:"default role"),"warn");return}}else{r("oz-player/shims/ozReportUnexpectedError")(o("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SWITCH_VARIANT",description:"switchToVideoVariant mpd is void"}),"switchToVideoVariant mpd is void","warn");return}this.$Player$p_114(),this.$Player$p_4.getBool("enable_lip_sync_abr_select_quality")&&this.$Player$p_4.getBool("enable_alternative_audio_tracks")&&this.$Player$p_75&&this.$Player$p_115(),this.$Player$p_73=this.$Player$p_74},i.$Player$p_114=function(){var e=this.$Player$p_112()[0];if(e){var t=this.$Player$p_5.get("audio");t&&(t.switchRepresentation(e,[0,this.$Player$p_14.getDuration()]),t.disableAdaptation())}},i.$Player$p_115=function(){var e=this.$Player$p_5.get("video");if(e){var t=e.getCurrentRepresentation();if(!(t.getLang()===this.$Player$p_74.lang&&t.getRole()===this.$Player$p_74.role)){var n=this.$Player$p_102();if(n.length===0){r("oz-player/shims/ozReportUnexpectedError")(o("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SWITCH_VARIANT",description:"switchVideoByTargetVariant no representations with target variant: "+JSON.stringify(this.$Player$p_74)}),"switchVideoByTargetVariant no representations with target variant: "+JSON.stringify(this.$Player$p_74),"warn");return}var a,i=this.$Player$p_6.get("video");if(i?(i.updateRepresentations(n),a=i.getBestRepresentation()):a=n[0],!a){r("oz-player/shims/ozReportUnexpectedError")(o("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SWITCH_VARIANT",description:"switchVideoByTargetVariant unable to update representations given target variant: "+JSON.stringify(this.$Player$p_74)}),"switchVideoByTargetVariant unable to update representations given target variant: "+JSON.stringify(this.$Player$p_74));return}e.switchRepresentation(a,[0,this.$Player$p_14.getDuration()])}}},i.getIsVideoQualityAdaptationEnabled=function(){var e=this.$Player$p_5.get("video");return e?e.getIsAdaptationEnabled():!1},i.enableVideoQualityAdaptation=function(){var e=this.$Player$p_5.get("video");e&&e.enableAdaptation()},i.getVideoQualities=function(){var e=this,t=this.$Player$p_9;if(!t)return[];var n=this.$Player$p_102().filter(function(t){var n;return!((n=e.$Player$p_67)!=null&&n.isBlocked(t.getID()))}),r=n.some(function(e){return o("oz-player/utils/OzMimeUtil").getParsedCodecFamily(e.getCodecs())===u}),a=n.some(function(e){return o("oz-player/utils/OzMimeUtil").getParsedCodecFamily(e.getCodecs())===c}),i=r?n.filter(function(e){return o("oz-player/utils/OzMimeUtil").getParsedCodecFamily(e.getCodecs())===u}):a?n.filter(function(e){return o("oz-player/utils/OzMimeUtil").getParsedCodecFamily(e.getCodecs())===c}):n.filter(function(e){return o("oz-player/utils/OzMimeUtil").getParsedCodecFamily(e.getCodecs())===d});return i.sort(function(e,t){return e.getBandwidth()-t.getBandwidth()}).map(function(e){return e.getDisplayLabel()})},i.getVideoTracks=function(){var e=this,t=this.$Player$p_9;return t?this.$Player$p_102().filter(function(t){var n;return!((n=e.$Player$p_67)!=null&&n.isBlocked(t.getID()))}).map(function(e){return{mimeCodecs:e.getMimeCodecs(),codec:e.getCodecs(),codecFamily:o("oz-player/utils/OzMimeUtil").getParsedCodecFamily(e.getMimeCodecs()),displayLabel:e.getDisplayLabel(),qualityLabel:e.getDisplayLabel(),height:e.getHeight(),id:e.getID(),qualityScoreCurveString:e.getQualityScoreCurveString("csvqm"),width:e.getWidth(),lang:e.getLang(),role:e.getRole(),variantKey:e.getVariantKey()}}):[]},i.getAudioTracks=function(){var e=this,t=this.$Player$p_9;return t?t.getAudioRepresentations().filter(function(t){var n;return!((n=e.$Player$p_67)!=null&&n.isBlocked(t.getID()))}).map(function(e){return e.getAudioTrack()}):[]},i.setEnableLiveheadCatchup=function(t){var e;if(this.$Player$p_20){var n;t?this.$Player$p_16.getOperationLogger("live_catchup_enabled").setIsLatencyCachupEnabled(!0).log():this.$Player$p_16.getOperationLogger("live_catchup_disabled").setIsLatencyCachupEnabled(!1).log(),(n=this.$Player$p_20)==null||n.setTimelineBlockingEnabled(t)}this.$Player$p_5.forEach(function(e){e.setEnableLiveheadCatchup(t)}),(e=this.$Player$p_19)==null||e.setEnableLiveheadCatchup(t)},i.$Player$p_94=function(){var t=this;if(this.$Player$p_4.getBool("enable_alternative_audio_tracks")&&this.$Player$p_113(this.$Player$p_72)){var r;this.$Player$p_74=babelHelpers.extends({},this.$Player$p_74,{lang:(r=this.$Player$p_72)!=null?r:null,role:this.$Player$p_72!=null?"dub":null})}var a=this.$Player$p_102()[0];this.$Player$p_62=a&&a.canPredict()&&this.$Player$p_4.getBool("pdash_use_pdash_segmentlocator")||a&&a.canApproximateId()?new(o("oz-player/streams/OzPredictedSegmentLocator")).OzPredictedSegmentLocator({videoNode:this.$Player$p_3,liveLatencyManager:this.$Player$p_40,loggerProvider:this.$Player$p_16,dynamicVideoLibrary:this.$Player$p_65}):null;var i=this.$Player$p_2?[this.$Player$p_116({liveConfigsFromAudioStream:!0}),this.$Player$p_117()]:[this.$Player$p_118(),this.$Player$p_116({liveConfigsFromAudioStream:!1}),this.$Player$p_117()],l=[];return(e||(e=n("Promise"))).all(i).then(function(){var e=t.$Player$p_5.get("video"),n=t.$Player$p_5.get("audio"),r=t.$Player$p_5.get("caption");e&&l.push(e.getCurrentRepresentation()),n&&l.push(n.getCurrentRepresentation()),r&&l.push(r.getCurrentRepresentation()),l.forEach(function(e){t.$Player$p_10.addSubscriptions(e.addUpdateListener(function(){t.$Player$p_108("SegmentIndexesUpdated",l)}))}),t.$Player$p_108("InitialSegmentIndexes",l),t.$Player$p_3&&t.$Player$p_3.style&&(t.$Player$p_3.style.display=t.$Player$p_2?"none":"block"),t.$Player$p_73=t.$Player$p_74,t.emit("initialized")})},i.$Player$p_119=function(t){if(!t.getTimeRanges().length){this.$Player$p_16.getOperationLogger("playhead_adjustment").setInitiator("setup_initial_duration").setResult("failed").log();return}var e=t.getTimeRanges()[t.getTimeRanges().length-1].endTime;this.$Player$p_7.updateDuration(e,!0)},i.$Player$p_120=function(t){var e,n,o;this.$Player$p_23=new(r("oz-player/media_source/OzMediaSeekableRangeManager"))(this.$Player$p_7,this.$Player$p_4),this.$Player$p_119(t),(e=this.$Player$p_23)==null||e.setTimeRangeProvider(t),(n=this.$Player$p_19)==null||n.setTimeRangeProvider(t),(o=this.$Player$p_20)==null||o.setTimeRangeProvider(t)},i.$Player$p_118=function(){var e=this.$Player$p_102();if(!e.length)return r("oz-player/shims/OzMaybeNativePromise").reject(o("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_INITIALIZATION",description:"No video representations in the manifest",extra:{code:r("oz-player/utils/OzCustomErrorCode").SETUP_STREAMS_PROMISE_REJECTION.toString()}}));var t=o("oz-player/utils/OzPlaybackRestrictionsUtils").applyVideoPlaybackRestrictions(this.$Player$p_31,this.$Player$p_103(),e);if(!t.length){var n=e.map(function(e){return e.getDisplayLabel()+"@"+e.getWidth()+"x"+e.getHeight()+"("+e.getMimeCodecs()+")"});return r("oz-player/shims/OzMaybeNativePromise").reject(o("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_INITIALIZATION",description:"Restricted all video representations: "+n.join(", "),extra:{code:r("oz-player/utils/OzCustomErrorCode").SETUP_STREAMS_PROMISE_REJECTION.toString()}}))}this.$Player$p_120(t[0]);var a=this.$Player$p_121(t);a&&this.$Player$p_4.getBool("enable_abr_logging")&&this.$Player$p_16.getOperationLogger("video_stream_setup_initial_representation_from_prefetch").setResult("success").setReason("player_initialized").setRepresentationID(a.getID()).setPreviousRepresentationID(null).setUserInfo({initialRepresentationIDs:JSON.stringify(this.$Player$p_25)}).setType("video").setInitiator("Player").log();var i=this.$Player$p_101(a||t[0]);return this.$Player$p_6.set("video",i),a||(a=i.getBestRepresentation()),this.$Player$p_99(a||t[0],"video")},i.$Player$p_102=function(){var e=this.$Player$p_9;if(!e)return[];var t=e.getVideoRepresentations();if(this.$Player$p_4.getBool("enable_lip_sync_abr_select_quality")&&this.$Player$p_4.getBool("enable_alternative_audio_tracks")&&this.$Player$p_75){var n=e.getVideoRepresentationsByVariant(this.$Player$p_74);t=n.length>0?n:e.getVideoRepresentationsByVariant({lang:null,role:null})}var r=o("oz-player/utils/OzPlaybackRestrictionsUtils").applyVideoPlaybackRestrictions(this.$Player$p_31,this.$Player$p_103(),t);return t.filter(function(e){return r.includes(e)})},i.$Player$p_112=function(){var e=this.$Player$p_9;return e?this.$Player$p_4.getBool("enable_alternative_audio_tracks")?e.getAudioRepresentationsByVariant(this.$Player$p_74):e.getAudioRepresentations():[]},i.$Player$p_113=function(t){var e=this.$Player$p_9;if(!e)return!1;var n=e.getAudioRepresentations();if(t==null)return!0;if(this.$Player$p_4.getBool("enable_alternative_audio_tracks")&&e.isStaticMpd()){var r=-1;return r=n.findIndex(function(e){return e.getLang()===t}),r>-1}return!1},i.$Player$p_116=function(t){var e=this,n=t.liveConfigsFromAudioStream,o=n===void 0?!1:n,a=s(this.$Player$p_9),i=a.getAudioRepresentations();o&&this.$Player$p_120(i[0]);var l=-1;if(this.$Player$p_4.getBool("enable_alternative_audio_tracks")&&i.length>1&&a.isStaticMpd()&&this.$Player$p_72!=null&&(l=i.findIndex(function(t){return t.getLang()===e.$Player$p_72})),i.length){var u=l>-1?l:i.findIndex(function(e){return e.getLang()==null&&e.getRole()==null}),c=u>-1?u:0;return this.$Player$p_99(l>=0&&l<i.length?i[l]:this.$Player$p_122(i)||i[c],"audio")}return r("oz-player/shims/OzMaybeNativePromise").resolve()},i.$Player$p_117=function(){var e=s(this.$Player$p_9),t=e.getApplicationRepresentations();return t.length?this.$Player$p_99(this.$Player$p_123(t)||t[0],"caption"):r("oz-player/shims/OzMaybeNativePromise").resolve()},i.getMpd=function(){return this.$Player$p_9},i.destroy=function(o){var t,a,i=this,l=this.$Player$p_16.getOperationLogger("unload").setInitiator(o).start();(t=this.$Player$p_64)==null||t.destroy(),this.$Player$p_97(),this.$Player$p_5.forEach(function(e){e.destroy()}),this.$Player$p_33&&(this.$Player$p_33.destroy(),this.$Player$p_33=null),this.$Player$p_5=new Map,this.$Player$p_10.release(),this.$Player$p_10.engage(),this.$Player$p_14.destroy(),this.$Player$p_19&&this.$Player$p_19.destroy(),this.$Player$p_40&&(this.$Player$p_40.destroy(),this.$Player$p_40=null),this.$Player$p_20&&(this.$Player$p_20.destroy(),this.$Player$p_20=null),this.$Player$p_48&&this.$Player$p_48.destroy(),this.$Player$p_61&&this.$Player$p_61.destroy(),this.$Player$p_13&&this.$Player$p_13.destroy(),this.$Player$p_52&&(this.$Player$p_52=null),this.$Player$p_7&&this.$Player$p_7.detach(),this.$Player$p_3.pause(),this.$Player$p_4.getBool("enable_revoke_object_url_on_destroy")&&URL.revokeObjectURL(this.$Player$p_3.src),this.$Player$p_3.setAttribute("src",""),this.$Player$p_3.removeAttribute("src"),this.$Player$p_3.removeAttribute("srcObject");var s=(e||(e=n("Promise"))).resolve();return typeof this.$Player$p_3.setMediaKeys=="function"&&(s=this.$Player$p_3.setMediaKeys(null)),this.$Player$p_21&&this.$Player$p_21.destroy(),this.$Player$p_32&&this.$Player$p_32.destroy(),this.$Player$p_22.destroy(),(a=this.$Player$p_23)==null||a.destroy(),this.$Player$p_50&&this.$Player$p_50.destroy(),this.$Player$p_67&&this.$Player$p_67.destroy(),l.log(),this.emit("destroyed"),s.catch(function(e){r("oz-player/shims/ozReportUnexpectedError")(e,"Player.destroy","warn")}).then(function(){i.$Player$p_3.load()})},i.$Player$p_121=function(t){var e=this,n=t.find(function(t){return e.$Player$p_25.indexOf(t.getID())!==-1});return n||(n=r("oz-player/utils/getRepresentationInCache")(t,this.$Player$p_24)),n||null},i.$Player$p_122=function(t){var e=this,n,a=t.find(function(t){return e.$Player$p_25.indexOf(t.getID())!==-1});return a||(a=r("oz-player/utils/getRepresentationInCache")(t,this.$Player$p_24)),!a&&!((n=this.$Player$p_9)!=null&&n.isStaticMpd())&&t.length>1&&(a=o("oz-player/utils/OzIbrUtils").getInitialAudioRepresentation(t,this.$Player$p_4,this.$Player$p_16)),a||null},i.$Player$p_123=function(t){return null},i.$Player$p_85=function(t){var e=new(r("oz-player/parsers/OzMpdParser"))({config:this.$Player$p_4,ozParserContext:{mpdUrl:this.$Player$p_18,createXmlParser:this.$Player$p_89,customParsers:this.$Player$p_28,customRepresentationParsers:this.$Player$p_29,customSegmentTimelineParser:this.$Player$p_30},networkManager:this.$Player$p_13,perfLoggerProvider:this.$Player$p_16,drmManager:this.$Player$p_48,initialRepresentationIDs:this.$Player$p_25,blockedRepresentationsManager:this.$Player$p_67,enableAlternativeAudioTracks:this.$Player$p_4.getBool("enable_alternative_audio_tracks"),useManagedMediaSource:this.$Player$p_78}),n=e.parse(t);this.$Player$p_10.addSubscriptions(e.onError(this.$Player$p_11.emitError));var a=o("oz-player/utils/OzPlaybackRestrictionsUtils").applyVideoPlaybackRestrictions(this.$Player$p_31,this.$Player$p_103(),n.getVideoRepresentations());if(a.length>1){var i=o("oz-player/utils/OzMimeUtil").getParsedCodecFamily(a[0].getMimeCodecs());this.$Player$p_76=!a.reduce(function(e,t){return e&&o("oz-player/utils/OzMimeUtil").getParsedCodecFamily(t.getMimeCodecs())===i},!0)}return n},i.$Player$p_79=function(){var e=[];return this.$Player$p_17&&e.push(new(o("oz-player/loggings/OzDevConsolePerfLogger")).OzDevConsolePerfLoggerProvider),e},i.$Player$p_124=function(t,n){var e=this.$Player$p_5.get(n);return e?e.getRepresentationIDAtTime(t):null},i.getAudioRepresentationIDAtTime=function(t){return this.$Player$p_124(t,"audio")},i.getVideoRepresentationIDAtTime=function(t){return this.$Player$p_124(t,"video")},i.getCurrentVideoRepresentation=function(){return this.$Player$p_125("video")},i.getCurrentAudioRepresentation=function(){return this.$Player$p_125("audio")},i.getCurrentPlayingAudioTrackID=function(){var e=this.getCurrentAudioRepresentation();return e==null?void 0:e.getID()},i.$Player$p_125=function(t){var e,n=this.$Player$p_124(this.$Player$p_14.getCurrentTime(),t),r=this.$Player$p_9;if(!r)return null;var o=[];return t==="audio"?o=this.$Player$p_112():t==="video"&&(o=this.$Player$p_102()),(e=o.find(function(e){return e.getID()===n}))!=null?e:null},i.getSelectedVideoRepresentation=function(){var e=this.$Player$p_5.get("video");return e!=null?e.getCurrentRepresentation():null},i.getSelectedAudioRepresentation=function(){var e=this.$Player$p_5.get("audio");return e!=null?e.getCurrentRepresentation():null},i.getDebug=function(){var e=this,t=this.$Player$p_5.get("video"),n=this.$Player$p_5.get("audio"),r=this.$Player$p_5.get("caption"),o,a,i,l,u,c,d;if(t){var m,p;if(o=(m=t.getDebug())==null?void 0:m.MediaStreamAbrManager,a=(p=t.getDebug())==null?void 0:p.SourceBufferManager,a){var _;i=(_=a.getDebug())==null?void 0:_.SourceBuffer}}if(n){var f;if(l=(f=n.getDebug())==null?void 0:f.SourceBufferManager,l){var g;u=(g=l.getDebug())==null?void 0:g.SourceBuffer}}if(r){var h;if(c=(h=r.getDebug())==null?void 0:h.SourceBufferManager,c){var y;d=(y=c.getDebug())==null?void 0:y.SourceBuffer}}return{getManifest:function(){return s(e.$Player$p_9)},DashManifestParsed:this.$Player$p_9,VideoSourceStream:t,VideoAbrManager:o,VideoBufferManager:a,VideoSourceBuffer:i,AudioSourceStream:n,AudioBufferManager:l,AudioSourceBuffer:u,CaptionSourceStream:r,CaptionBufferManager:c,CaptionSourceBuffer:d}},i.injectExternalDebugEvent=function(t,n){this.$Player$p_108(t,n)},i.$Player$p_108=function(t,n){this.emit("debug/dashPlayerEvent",{detail:{type:t,event:n}})},i.$Player$p_82=function(){var e=this,t=new(r("oz-player/strategies/OzBufferingDetector"))(this.$Player$p_3,this.$Player$p_4.getLegacyConfig(),function(){return e.$Player$p_51?e.$Player$p_3.duration:1/0});return t.attachPerfLoggerProvider(this.$Player$p_16),this.$Player$p_10.addSubscriptions(t.addListener("enterBuffering",function(t){e.emit("enterBuffering",t)}),t.addListener("leaveBuffering",function(t){e.emit("leaveBuffering",t)})),t},i.$Player$p_103=function(){var e=this.$Player$p_52?this.$Player$p_52():{width:this.$Player$p_3.offsetWidth,height:this.$Player$p_3.offsetHeight};return e},i.getMpdUrl=function(){return this.$Player$p_18},i.$Player$p_98=function(t){var e=this;this.$Player$p_18=t;var n=this.$Player$p_9;if(n){n.updateLocation(t),this.$Player$p_43&&(this.$Player$p_10.releaseOne(this.$Player$p_43),this.$Player$p_43=null);var r=function(){e.$Player$p_43&&(e.$Player$p_10.releaseOne(e.$Player$p_43),e.$Player$p_43=null),e.$Player$p_5.forEach(function(t,r){var o=t.getCurrentRepresentation(),a=o.getDisplayLabel(),i=(r==="video"?e.$Player$p_102():n.getAudioRepresentations()).slice();if(r==="video"){var l=e.$Player$p_6.get(r);l&&l.updateRepresentations(e.$Player$p_102())}var s=i[0];i.forEach(function(e){var t=e.getDisplayLabel();t===a&&(s=e)}),t.switchRepresentation(s),t.restartLoopBody()})};this.$Player$p_43=n.addListener("updated",r),this.$Player$p_10.addSubscriptions(this.$Player$p_43)}else{this.$Player$p_60=!0;return}},i.getPerfLoggerProvider=function(){return this.$Player$p_16},i.getApproximateFBLSToPlayerDisplayLatency=function(){var e,t,n,r,o=Number((e=(t=this.$Player$p_9)==null?void 0:t.getCustomField("lastVideoFrameTs"))!=null?e:void 0),a=Number((n=(r=this.$Player$p_9)==null?void 0:r.getCustomField("currentServerTimeMs"))!=null?n:void 0),i=this.$Player$p_126(o,a),l=this.$Player$p_127(o,a);return{latencyFromClockSync:l,latencyFromMpdUpdate:i}},i.$Player$p_126=function(t,n){if(!this.$Player$p_14.getCurrentTime()||isNaN(t)||isNaN(n))return null;var e=0;this.$Player$p_58===t?e=(r("oz-player/shims/OzPerformance").now()-Number(this.$Player$p_59))/1e3:(this.$Player$p_59=r("oz-player/shims/OzPerformance").now(),this.$Player$p_58=t);var o=t/1e3+e-this.$Player$p_14.getCurrentTime();return o},i.$Player$p_127=function(t,n){var e;if(!this.$Player$p_14.getCurrentTime()||isNaN(t)||isNaN(n)||r("oz-player/networks/OzClientClock").getClientClockOffsetMs()==null||!r("oz-player/networks/OzClientClock").getClientClockOffsetMs())return null;var o=this.$Player$p_14.getCurrentTimeUpdateTime()+((e=r("oz-player/networks/OzClientClock").getClientClockOffsetMs())!=null?e:0),a=n,i=this.$Player$p_14.getCurrentTime()*1e3,l=t,s=(o-a-(i-l))/1e3;return s},i.$Player$p_80=function(){this.$Player$p_5.forEach(function(e){e.restartLoopBody();var t=e.getCurrentRepresentation();e.switchRepresentation(t)})},a})(r("oz-player/shims/OzEventEmitter"));l.default=m}),98);
__d("oz-player",["oz-player/Player"],(function(t,n,r,o,a,i,l){"use strict";l.default=r("oz-player/Player")}),98);