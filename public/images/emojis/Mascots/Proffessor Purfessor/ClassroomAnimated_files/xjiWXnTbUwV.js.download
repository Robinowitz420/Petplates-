;/*FB_PKG_DELIM*/

__d("GenAIPromptGalleryDownload",[],(function(t,n,r,o,a,i){"use strict";var e=function(t){var e="data:",n=t.indexOf("/"),r=t.indexOf(";");if(n>0&&n<r){var o=t.substring(e.length,r),a=o.split("/");return a[1]||null}return null},l=function(t){var e="data:",n=t.indexOf("/"),r=t.indexOf(";");if(n>0&&n<r){var o=t.substring(e.length,r);return o}return"application/octet-stream"},s=function(t){return t.replace(/[^A-Z0-9]/gi,"_").replace(/_+/g,"_").toLowerCase().replace(/^_+|_+$/g,"").substr(0,255)},u=function(n,r){var t,o=document.createElement("a");o.href=n;var a=s(r),i=(t=e(n))!=null?t:"jpeg";o.download=a+"."+i,o.click()};i.getExtensionFromDataUrl=e,i.getMimeTypeFromDataUrl=l,i.sanitizeFilename=s,i.downloadDataUrl=u}),66);
__d("AbraDownloadImagineImageUtil",["FBLogger","GenAIPromptGalleryDownload","asyncToGeneratorRuntime","file-saver"],(function(t,n,r,o,a,i,l){"use strict";function e(e){if(e!=null)switch(e){case"IMAGE":case"FLASH_IMAGE":return"jpeg";case"VIDEO":case"REEL":case"FLASH_RECAP_VIDEO":return"mp4";case"GIF":return"gif";default:break}return"jpeg"}var s=function(a,i,l){var t;l===void 0&&(l="IMAGE");var s=i!=null?i:"";(i===null||!(i!=null&&i.trim()))&&(s="untitled"),s=s.split(" ").slice(0,7).join(" ");var u=o("GenAIPromptGalleryDownload").sanitizeFilename(s),c=(t=o("GenAIPromptGalleryDownload").getExtensionFromDataUrl(a))!=null?t:e(l),d=u+"."+c,m=o("GenAIPromptGalleryDownload").getMimeTypeFromDataUrl(a),p=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield window.fetch(a),t=yield e.blob(),n=new Blob([t],{type:m});o("file-saver").saveAs(n,d)});return function(){return e.apply(this,arguments)}})();p().catch(function(e){var t=document.createElement("a");t.href=a,t.download=u+"."+c,t.click(),r("FBLogger")("kadabra_core").catching(e)})},u=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n,r){var a;r===void 0&&(r="IMAGE");var i=(a=o("GenAIPromptGalleryDownload").getExtensionFromDataUrl(t))!=null?a:e(r),l=(n!=null?n:"untitled")+"."+i,s=yield window.fetch(t),u=yield s.blob();return new File([u],l,{type:u.type})});return function(n,r,o){return t.apply(this,arguments)}})();l.downloadDataUrl=s,l.fetchFileFromUrl=u}),98);
__d("AlakazamProgressIndicatorVideoContent_video.graphql",["XFBAbraMediaLibraryCombinedAspectRatio-resolver"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{argumentDefinitions:[{kind:"RootArgument",name:"__relay_internal__pv__enable_kadabra_partial_resultsrelayprovider"}],kind:"Fragment",metadata:null,name:"AlakazamProgressIndicatorVideoContent_video",selections:[{alias:null,args:null,kind:"ScalarField",name:"prompt",storageKey:null},{kind:"InlineFragment",selections:[e,{condition:"__relay_internal__pv__enable_kadabra_partial_resultsrelayprovider",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media_container",plural:!1,selections:[{kind:"InlineFragment",selections:[{kind:"ClientExtension",selections:[{alias:null,args:null,concreteType:"XFBGENAIEntProgressiveImagineEventStreamResponse",kind:"LinkedField",name:"client_partial_results",plural:!0,selections:[e,{args:null,kind:"FragmentSpread",name:"KadabraImaginePartialResultsLoader_partial_result"}],storageKey:null}]}],type:"AbraMessage",abstractKey:null}],storageKey:null}]},{alias:null,args:null,kind:"ScalarField",name:"aspect_ratio",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"XFBGENAIImagineMediaGenerationStatus",kind:"LinkedField",name:"generation_status",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"preview_media_uri",storageKey:null}],storageKey:null}],type:"XFBImagineMediaWithGenerationStatus",abstractKey:"__isXFBImagineMediaWithGenerationStatus"},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media_generation_source",plural:!1,selections:[{alias:null,args:null,fragment:{args:null,kind:"FragmentSpread",name:"XFBAbraMediaLibraryCombinedAspectRatioResolver"},kind:"RelayResolver",name:"combined_aspect_ratio",resolverModule:n("XFBAbraMediaLibraryCombinedAspectRatio-resolver").combined_aspect_ratio,path:"media_generation_source.combined_aspect_ratio"}],storageKey:null},{fragment:{kind:"InlineFragment",selections:[{args:null,kind:"FragmentSpread",name:"useAlakazamVideoGenerationProgress_video"}],type:"XFBImagineMediaWithGenerationStatus",abstractKey:"__isXFBImagineMediaWithGenerationStatus"},kind:"AliasedInlineFragmentSpread",name:"useAlakazamVideoGenerationProgress_video"}],type:"XFBGenAIVideo",abstractKey:"__isXFBGenAIVideo"}],type:"XFBGenAIPostVideo",abstractKey:"__isXFBGenAIPostVideo"}})();a.exports=e}),null);
__d("AlakazamProgressIndicatorVideoContent.react",["fbt","AlakazamProgressIndicatorVideoContent_video.graphql","CometRelay","KDSFlexbox.react","KDSIcon.react","KDSImageGridItem.react","KadabraImagineAspectRatioUtils","KadabraImagineCreateSandLoader.react","KadabraImagineVideoLazyImage.react","KadabraImagineVideoProgressRing.react","MetaBrandTriangleRightFilled24Icon.react","cr:582","react","react-compiler-runtime","stylex","useAlakazamVideoGenerationProgress"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d=c||(c=o("react")),m={backdropFilter:"x1wyumla",$$css:!0},p={blur:function(t){return[m,{"--x-backdropFilter":"blur("+(18-t*17)+"px)"!=null?"blur("+(18-t*17)+"px)":void 0}]},borderRadius:{borderStartStartRadius:"x1obq294",borderStartEndRadius:"x5a5i1n",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",$$css:!0},container:{borderStartStartRadius:"x1obq294",borderStartEndRadius:"x5a5i1n",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",height:"x5yr21d",overflowX:"x6ikm8r",overflowY:"x10wlt62",position:"x1n2onr6",width:"xh8yej3",$$css:!0},cover:{background:"xgzuhx1",bottom:"x1ey2m1c",insetInlineEnd:"xtijo5x",insetInlineStart:"x1o0tod",position:"x10l6tqk",top:"x13vifvy",$$css:!0}};function _(t){var a,i,l,c,m,_=o("react-compiler-runtime").c(42),f=t.defaultAspectRatio,g=t.isSandLoaderEnabled,h=t.isSandLoaderGenerating,y=t.linkProps,C=t.onPress,b=t.onSandLoaderComplete,v=t.videoKey,S=t.xstyleContainer,R=g===void 0?!1:g,L=h===void 0?!1:h,E=o("CometRelay").useFragment(e!==void 0?e:e=n("AlakazamProgressIndicatorVideoContent_video.graphql"),v),k=(a=(i=E==null?void 0:E.aspect_ratio)!=null?i:E==null||(l=E.media_generation_source)==null?void 0:l.combined_aspect_ratio)!=null?a:f,I=r("useAlakazamVideoGenerationProgress")(E==null?void 0:E.useAlakazamVideoGenerationProgress_video),T=I[0],D=I[1],x=D==="COMPLETE",$;_[0]!==k?($=o("KadabraImagineAspectRatioUtils").getNormalizedAspectRatio(k),_[0]=k,_[1]=$):$=_[1];var P=$,N=E==null?void 0:E.id,M=E==null||(c=E.media_container)==null?void 0:c.client_partial_results,w;_[2]!==M||_[3]!==N?(w=N!=null?M==null?void 0:M.find(function(e){var t;return e==null||(t=e.id)==null?void 0:t.startsWith(N)}):null,_[2]=M,_[3]=N,_[4]=w):w=_[4];var A=w,F=A==null||x,O=F?E==null||(m=E.generation_status)==null?void 0:m.preview_media_uri:void 0,B;_[5]!==R||_[6]!==L||_[7]!==b||_[8]!==O?(B=R?d.jsx(r("KadabraImagineCreateSandLoader.react"),{isGenerating:L,onComplete:b,src:O!=null?O:void 0}):O!=null?d.jsx(r("KadabraImagineVideoLazyImage.react"),{src:O}):null,_[5]=R,_[6]=L,_[7]=b,_[8]=O,_[9]=B):B=_[9];var W=B,q;if(_[10]!==(E==null?void 0:E.prompt)){var U;q=(U=E==null?void 0:E.prompt)!=null?U:s._(/*BTDS*/"Video generated by Meta AI"),_[10]=E==null?void 0:E.prompt,_[11]=q}else q=_[11];var V;_[12]!==q?(V={"aria-label":q,role:"listitem"},_[12]=q,_[13]=V):V=_[13];var H;_[14]!==W||_[15]!==F||_[16]!==A?(H=n("cr:582")!=null?d.jsx(n("cr:582"),{disablePartialResults:F,mode:"video",partialResultKey:A,children:W}):W,_[14]=W,_[15]=F,_[16]=A,_[17]=H):H=_[17];var G;_[18]!==x||_[19]!==F||_[20]!==R||_[21]!==T?(G=(u||(u=r("stylex"))).props(p.cover,!R&&!x&&F&&p.blur(T!=null?T:0)),_[18]=x,_[19]=F,_[20]=R,_[21]=T,_[22]=G):G=_[22];var z;_[23]!==G?(z=d.jsx("div",babelHelpers.extends({},G)),_[23]=G,_[24]=z):z=_[24];var j;_[25]!==x||_[26]!==T?(j=!x&&T!=null&&d.jsx("div",babelHelpers.extends({},{0:{className:"xbudbmw xg01cxk x10l6tqk xwa60dl x11lhmoz xkvlk6t"},1:{className:"xbudbmw x10l6tqk xwa60dl x11lhmoz xkvlk6t x1hc1fzr"}}[(T>0)<<0],{children:d.jsx(r("KadabraImagineVideoProgressRing.react"),{progress:T,size:"medium"})})),_[25]=x,_[26]=T,_[27]=j):j=_[27];var K;_[28]!==z||_[29]!==j||_[30]!==H?(K=d.jsxs(r("KDSFlexbox.react"),{xstyle:p.container,children:[H,z,j]}),_[28]=z,_[29]=j,_[30]=H,_[31]=K):K=_[31];var Q;_[32]===Symbol.for("react.memo_cache_sentinel")?(Q=d.jsx("div",{className:"xrb244j x1n86rs4 xrr41r3 x10l6tqk",children:d.jsx(r("KDSIcon.react"),{color:"white",icon:r("MetaBrandTriangleRightFilled24Icon.react")})}),_[32]=Q):Q=_[32];var X;_[33]!==K?(X=d.jsxs(d.Fragment,{children:[K,Q]}),_[33]=K,_[34]=X):X=_[34];var Y;return _[35]!==y||_[36]!==P||_[37]!==C||_[38]!==X||_[39]!==V||_[40]!==S?(Y=d.jsx(r("KDSImageGridItem.react"),{accessibilityProps:V,aspectRatio:P,linkProps:y,onPress:C,pressedXStyle:p.borderRadius,xstyle:p.borderRadius,xstyleContainer:S,children:X}),_[35]=y,_[36]=P,_[37]=C,_[38]=X,_[39]=V,_[40]=S,_[41]=Y):Y=_[41],Y}l.default=_}),226);
__d("KadabraImagineDownloadButton_media.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"KadabraImagineDownloadButton_media",selections:[{args:null,kind:"FragmentSpread",name:"useKadabraImagineMediaDownload_media"}],type:"XFBAbraMediaLibrary",abstractKey:"__isXFBAbraMediaLibrary"};a.exports=e}),null);
__d("MetaBrandArrowDownShallowUOutline24Icon.react",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs("svg",babelHelpers.extends({viewBox:"0 0 24 24",fill:"currentColor",width:"1em",height:"1em"},e,{children:[e.title!=null&&s.jsx("title",{children:e.title}),e.children!=null&&s.jsx("defs",{children:e.children}),s.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 19c2.579 0 4.514-.242 5.792-.48.69-.13 1.208-.76 1.208-1.608V14a1 1 0 1 1 2 0v2.912c0 1.662-1.064 3.242-2.841 3.573-1.397.26-3.454.515-6.159.515-2.705 0-4.762-.255-6.159-.515C4.064 20.155 3 18.573 3 16.912V14a1 1 0 1 1 2 0v2.912c0 .848.518 1.479 1.208 1.607C7.486 18.758 9.42 19 12 19zm-1-7.414-1.293-1.293a1 1 0 1 0-1.414 1.414l3 3a1 1 0 0 0 1.414 0l3-3a1 1 0 0 0-1.414-1.414L13 11.586V4a1 1 0 1 0-2 0v7.586z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("useKadabraImagineMediaDownloadMutation_abraRelayOperation",[],(function(t,n,r,o,a,i){a.exports="24973364655605692"}),null);
__d("useKadabraImagineMediaDownloadMutation.graphql",["useKadabraImagineMediaDownloadMutation_abraRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],t=[{alias:null,args:[{kind:"Variable",name:"params",variableName:"input"}],concreteType:"XFBGenAIImagineMediaDownloadResponse",kind:"LinkedField",name:"xfb_genai_imagine_download_media",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"success",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"useKadabraImagineMediaDownloadMutation",selections:t,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"useKadabraImagineMediaDownloadMutation",selections:t},params:{id:n("useKadabraImagineMediaDownloadMutation_abraRelayOperation"),metadata:{},name:"useKadabraImagineMediaDownloadMutation",operationKind:"mutation",text:null}}})();a.exports=e}),null);
__d("useKadabraImagineMediaDownload_media.graphql",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"media_type",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"prompt",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"viewer_actions",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useKadabraImagineMediaDownload_media",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{kind:"InlineFragment",selections:[e,t,n,r,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media_generation_source",plural:!1,selections:[{alias:"source_prompt",args:null,kind:"ScalarField",name:"prompt",storageKey:null}],storageKey:null}],type:"XFBGENAIVideoGen",abstractKey:null},{kind:"InlineFragment",selections:[e,t,n,r,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media_generation_source",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:"source_prompt",args:null,kind:"ScalarField",name:"user_prompt",storageKey:null}],type:"XFBGENAIVideoGen",abstractKey:null}],storageKey:null}],type:"XFBGENAIImagineComposedMedia",abstractKey:null},{kind:"InlineFragment",selections:[e,n,t,r],type:"XFBGENAIImagineImage",abstractKey:null},{args:null,kind:"FragmentSpread",name:"useKadabraGetPostIdByMedia_media"}],type:"XFBAbraMediaLibrary",abstractKey:"__isXFBAbraMediaLibrary"}})();a.exports=e}),null);
__d("useKadabraImagineMediaDownload",["AbraDownloadImagineImageUtil","CometRelay","gkx","nullthrows","react","react-compiler-runtime","useKadabraGetPostIdByMedia","useKadabraImagineMediaDownloadMutation.graphql","useKadabraImagineMediaDownload_media.graphql","useKadabraInteractionLogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=(u||(u=o("react"))).useCallback,d=r("gkx")("5958"),m=e!==void 0?e:e=n("useKadabraImagineMediaDownloadMutation.graphql");function p(e){var t=o("react-compiler-runtime").c(13),a=o("CometRelay").useFragment(s!==void 0?s:s=n("useKadabraImagineMediaDownload_media.graphql"),e),i=o("CometRelay").useMutation(m),l=i[0],u=r("useKadabraInteractionLogger")(),c=r("useKadabraGetPostIdByMedia")(a),p=c.postId,_;if(t[0]!==(a==null?void 0:a.media_type)||t[1]!==(a==null?void 0:a.uri)||t[2]!==(a==null?void 0:a.viewer_actions)){var f;_=(a==null||(f=a.viewer_actions)==null?void 0:f.includes("CAN_DOWNLOAD"))===!0&&(a==null?void 0:a.uri)!=null&&(a==null?void 0:a.media_type)!=null,t[0]=a==null?void 0:a.media_type,t[1]=a==null?void 0:a.uri,t[2]=a==null?void 0:a.viewer_actions,t[3]=_}else _=t[3];var g=_,h;t[4]!==g||t[5]!==l||t[6]!==u||t[7]!==a||t[8]!==p?(h=function(){var e,t;if(!(!g||a==null)){var n=a.uri,i=a.media_type,s=a.prompt,c=(e=a.media_generation_source)==null?void 0:e.source_prompt;if(!(n==null||i==null)){var m=i==="VIDEO"?"imagine_video_download_click":"imagine_download_button_click";if(u.log({action_target:"download_button",action_type:"click",event_name:m,imagine_media_info:{media_id:(t=a==null?void 0:a.id)!=null?t:""},post_id:p}),d===!0)l({onCompleted:function(t){var e,n=(e=t.xfb_genai_imagine_download_media)!=null?e:{},r=n.url;if(r!=null){var a;o("AbraDownloadImagineImageUtil").downloadDataUrl(r,(a=s!=null?s:c)!=null?a:"media",i)}},variables:{input:{media_id:r("nullthrows")(a==null?void 0:a.id)}}});else{var _;o("AbraDownloadImagineImageUtil").downloadDataUrl(n,(_=s!=null?s:c)!=null?_:"media",i)}}}},t[4]=g,t[5]=l,t[6]=u,t[7]=a,t[8]=p,t[9]=h):h=t[9];var y=h,C;return t[10]!==g||t[11]!==y?(C={canDownload:g,handleDownload:y},t[10]=g,t[11]=y,t[12]=C):C=t[12],C}l.default=p}),98);
__d("KadabraImagineDownloadButton.react",["fbt","CometRelay","KDSIconButton.react","KadabraImagineDownloadButton_media.graphql","MetaBrandArrowDownShallowUOutline24Icon.react","react","react-compiler-runtime","useKadabraImagineMediaDownload"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=u||(u=o("react"));function d(t){var a=o("react-compiler-runtime").c(4),i=t.mediaKey,l=o("CometRelay").useFragment(e!==void 0?e:e=n("KadabraImagineDownloadButton_media.graphql"),i),u=r("useKadabraImagineMediaDownload")(l),d=u.canDownload,m=u.handleDownload;if(!d)return null;var p;a[0]===Symbol.for("react.memo_cache_sentinel")?(p=s._(/*BTDS*/"Download media"),a[0]=p):p=a[0];var _;a[1]===Symbol.for("react.memo_cache_sentinel")?(_=s._(/*BTDS*/"Download"),a[1]=_):_=a[1];var f;return a[2]!==m?(f=c.jsx(r("KDSIconButton.react"),{"aria-label":p,icon:r("MetaBrandArrowDownShallowUOutline24Icon.react"),label:_,onPress:m,size:"28",variant:"onMedia"}),a[2]=m,a[3]=f):f=a[3],f}l.default=d}),226);
__d("KadabraUnifiedCanvasFilmStripWrapper.react",["KDSFlexbox.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=r("react")),u={root:{WebkitMaskImage:"x1v8a0vw",boxSizing:"x9f619",height:"x5yr21d",maskImage:"x162bp71",overflowX:"x6ikm8r",overflowY:"x10wlt62",width:"x1hkic0m",$$css:!0},scroll:{bottom:"x1ey2m1c",height:"xt7dq6l",insetInlineEnd:"xtijo5x",insetInlineStart:"x1o0tod",left:null,right:null,overflowX:"x6ikm8r",overflowY:"x1odjw0f",paddingBottom:"xwxc41k",paddingTop:"x1p5oq8j",position:"x10l6tqk",scrollbarWidth:"x1rohswg",top:"x13vifvy",width:"xh8yej3",$$css:!0}};function c(e){var t=o("react-compiler-runtime").c(3),n=e.children,a=e.containerRef,i;return t[0]!==n||t[1]!==a?(i=s.jsx(r("KDSFlexbox.react"),{xstyle:u.root,children:s.jsx(r("KDSFlexbox.react"),{alignItems:"center",direction:"column",gap:12,justifyContent:"start",ref:a,xstyle:u.scroll,children:n})}),t[0]=n,t[1]=a,t[2]=i):i=t[2],i}l.default=c}),98);