;/*FB_PKG_DELIM*/

__d("BingLogo.react",["react"],(function(t,n,r,o,a,i,l){"use strict";var e=["isDecorative"],s,u=s||(s=o("react"));function c(t){var n=t.isDecorative,r=babelHelpers.objectWithoutPropertiesLoose(t,e);return u.jsxs("svg",babelHelpers.extends({},r,{"aria-hidden":n,viewBox:"0 0 40 62",children:[u.jsxs("g",{clipPath:"url(#a)",children:[u.jsx("path",{d:"M39.998 39.843c0 .603-.031 1.204-.095 1.796a16.627 16.627 0 0 1-4.151 9.398c.285-.329.543-.682.769-1.06.174-.288.329-.588.46-.901.047-.103.09-.21.126-.316.044-.103.08-.21.111-.316a3.64 3.64 0 0 0 .095-.305c.028-.107.056-.213.08-.32a.664.664 0 0 0 .011-.037c.024-.107.043-.214.063-.32.02-.111.04-.223.056-.334v-.007a7.374 7.374 0 0 0 .072-1.045 7.543 7.543 0 0 0-1.503-4.542 7.02 7.02 0 0 0-.681-.785 7.075 7.075 0 0 0-2.114-1.468 6.46 6.46 0 0 0-1.062-.378c-.004 0-.012-.005-.016-.005l-.127-.045-1.847-.657v-.004l-4.834-1.723c-.015-.005-.035-.005-.047-.008l-.302-.115a4.539 4.539 0 0 1-2.28-2.076l-1.764-4.666-2.022-5.345-.389-1.032-.099-.21c-.11-.28-.17-.584-.17-.9 0-.082 0-.164.008-.238.115-1.176 1.078-2.097 2.244-2.097.31 0 .607.066.877.185l9.006 4.788 1.777.942a15.62 15.62 0 0 1 2.617 2.031c2.902 2.763 4.805 6.635 5.091 10.965.024.382.04.763.04 1.15Z",fill:"url(#b)"}),u.jsx("path",{d:"M37.591 46.075c0 .477-.043.938-.123 1.386a8.055 8.055 0 0 1-.36 1.298c-.04.108-.084.21-.127.317a7.46 7.46 0 0 1-1.23 1.961c-1.311 1.505-5.769 4.189-7.411 5.279l-3.647 2.31c-2.672 1.707-5.198 2.915-8.383 2.997-.15.005-.297.009-.444.009-.205 0-.408-.004-.61-.012-5.393-.213-10.096-3.215-12.808-7.65a16.618 16.618 0 0 1-2.34-6.854c.583 3.416 3.455 6.007 6.917 6.007a6.793 6.793 0 0 0 3.37-.889l.357-.221 1.452-.889 1.847-1.134v-.054l.239-.147L30.82 39.634l1.273-.78.126.044c.005 0 .012.005.016.005.365.094.722.222 1.063.378.789.353 1.502.855 2.113 1.468.246.243.472.505.682.785a7.586 7.586 0 0 1 1.498 4.541Z",fill:"url(#c)"}),u.jsx("path",{d:"m14.056 12.188-.006 37.8-1.848 1.136-1.452.887-.358.224a6.843 6.843 0 0 1-3.37.888c-3.463 0-6.33-2.59-6.916-6.006a7.219 7.219 0 0 1-.065-.477 16.67 16.67 0 0 1-.043-.889V3.21C-.002 1.867 1.05.771 2.35.771c.487 0 .942.157 1.316.416l7.191 4.87a.96.96 0 0 0 .125.09c1.86 1.315 3.074 3.529 3.074 6.04Z",fill:"url(#d)"}),u.jsx("path",{d:"M37.591 46.075c0 .477-.043.938-.123 1.386a8.055 8.055 0 0 1-.36 1.298c-.04.108-.084.21-.127.317-.13.313-.286.612-.46.9a7.391 7.391 0 0 1-.769 1.061c-1.313 1.505-5.77 4.189-7.412 5.279l-3.647 2.31c-2.672 1.707-5.198 2.915-8.383 2.997-.15.005-.297.009-.444.009-.205 0-.408-.004-.61-.012-5.393-.213-10.096-3.215-12.808-7.65a16.618 16.618 0 0 1-2.34-6.854c.583 3.416 3.455 6.007 6.917 6.007a6.793 6.793 0 0 0 3.37-.889l.357-.221 1.452-.889 1.847-1.134v-.054l.239-.147L30.82 39.634l1.273-.78.126.044c.005 0 .012.005.016.005.365.094.722.222 1.063.378.789.353 1.502.855 2.113 1.468.246.243.472.505.682.785a7.586 7.586 0 0 1 1.498 4.541Z",fill:"url(#e)",opacity:".15"}),u.jsx("path",{d:"m14.056 12.188-.006 37.8-1.848 1.136-1.452.887-.358.224a6.843 6.843 0 0 1-3.37.888c-3.463 0-6.33-2.59-6.916-6.006a7.219 7.219 0 0 1-.065-.477 16.67 16.67 0 0 1-.043-.889V3.21C-.002 1.867 1.05.771 2.35.771c.487 0 .942.157 1.316.416l7.191 4.87a.96.96 0 0 0 .125.09c1.86 1.315 3.074 3.529 3.074 6.04Z",fill:"url(#f)",opacity:".1"})]}),u.jsxs("defs",{children:[u.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:"b",x1:"15.201",x2:"41.413",y1:"27.114",y2:"41.711",children:[u.jsx("stop",{stopColor:"#37BDFF"}),u.jsx("stop",{offset:".183",stopColor:"#33BFFD"}),u.jsx("stop",{offset:".358",stopColor:"#28C5F5"}),u.jsx("stop",{offset:".528",stopColor:"#15D0E9"}),u.jsx("stop",{offset:".547",stopColor:"#12D1E7"}),u.jsx("stop",{offset:".59",stopColor:"#1CD2E5"}),u.jsx("stop",{offset:".768",stopColor:"#42D8DC"}),u.jsx("stop",{offset:".911",stopColor:"#59DBD6"}),u.jsx("stop",{offset:"1",stopColor:"#62DCD4"})]}),u.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:"c",x1:".107",x2:"37.591",y1:"50.242",y2:"50.242",children:[u.jsx("stop",{stopColor:"#39D2FF"}),u.jsx("stop",{offset:".15",stopColor:"#38CEFE"}),u.jsx("stop",{offset:".293",stopColor:"#35C3FA"}),u.jsx("stop",{offset:".433",stopColor:"#2FB0F3"}),u.jsx("stop",{offset:".547",stopColor:"#299AEB"}),u.jsx("stop",{offset:".583",stopColor:"#2692EC"}),u.jsx("stop",{offset:".763",stopColor:"#1A6CF1"}),u.jsx("stop",{offset:".909",stopColor:"#1355F4"}),u.jsx("stop",{offset:"1",stopColor:"#104CF5"})]}),u.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:"d",x1:"7.027",x2:"7.027",y1:"53.658",y2:"1.693",children:[u.jsx("stop",{stopColor:"#1B48EF"}),u.jsx("stop",{offset:".122",stopColor:"#1C51F0"}),u.jsx("stop",{offset:".321",stopColor:"#1E69F5"}),u.jsx("stop",{offset:".568",stopColor:"#2190FB"}),u.jsx("stop",{offset:"1",stopColor:"#26B8F4"})]}),u.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:"e",x1:"7.558",x2:"31.525",y1:"59.833",y2:"36.716",children:[u.jsx("stop",{stopColor:"#fff"}),u.jsx("stop",{offset:".373",stopColor:"#FDFDFD"}),u.jsx("stop",{offset:".507",stopColor:"#F6F6F6"}),u.jsx("stop",{offset:".603",stopColor:"#EBEBEB"}),u.jsx("stop",{offset:".68",stopColor:"#DADADA"}),u.jsx("stop",{offset:".746",stopColor:"#C4C4C4"}),u.jsx("stop",{offset:".805",stopColor:"#A8A8A8"}),u.jsx("stop",{offset:".858",stopColor:"#888"}),u.jsx("stop",{offset:".907",stopColor:"#626262"}),u.jsx("stop",{offset:".952",stopColor:"#373737"}),u.jsx("stop",{offset:".993",stopColor:"#090909"}),u.jsx("stop",{offset:"1"})]}),u.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:"f",x1:"7.027",x2:"7.027",y1:".771",y2:"53.123",children:[u.jsx("stop",{stopColor:"#fff"}),u.jsx("stop",{offset:".373",stopColor:"#FDFDFD"}),u.jsx("stop",{offset:".507",stopColor:"#F6F6F6"}),u.jsx("stop",{offset:".603",stopColor:"#EBEBEB"}),u.jsx("stop",{offset:".68",stopColor:"#DADADA"}),u.jsx("stop",{offset:".746",stopColor:"#C4C4C4"}),u.jsx("stop",{offset:".805",stopColor:"#A8A8A8"}),u.jsx("stop",{offset:".858",stopColor:"#888"}),u.jsx("stop",{offset:".907",stopColor:"#626262"}),u.jsx("stop",{offset:".952",stopColor:"#373737"}),u.jsx("stop",{offset:".993",stopColor:"#090909"}),u.jsx("stop",{offset:"1"})]}),u.jsx("clipPath",{id:"a",children:u.jsx("path",{d:"M0 0h40v62H0z",fill:"#fff"})})]})]}))}c.displayName=c.name+" [from "+i.id+"]",c._isSVG=!0,l.default=c}),98);
__d("CometAIVoiceCallTimerContextUpdater.react",["ZenonCallsModelTypes","ZenonGenAICallHooks","react","react-compiler-runtime","useCometAIVoiceContext"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useEffect,c=s.useRef;function d(){var e=o("react-compiler-runtime").c(8),t=o("ZenonGenAICallHooks").useCallTranscripts(),n=o("ZenonGenAICallHooks").useCallState(),a=r("useCometAIVoiceContext")(),i=a.setCallStartTime,l=c(!1),s,d;e[0]!==i||e[1]!==t?(s=function(){return t(function(){l.current||(i(Date.now()),l.current=!0)})},d=[i,t],e[0]=i,e[1]=t,e[2]=s,e[3]=d):(s=e[2],d=e[3]),u(s,d);var m,p;return e[4]!==n||e[5]!==i?(m=function(){n!==o("ZenonCallsModelTypes").ZenonCallState.Connected&&(i(null),l.current=!1)},p=[n,i],e[4]=n,e[5]=i,e[6]=m,e[7]=p):(m=e[6],p=e[7]),u(m,p),null}l.default=d}),98);
__d("CometAIVoiceInteraction",["FBLogger","InteractionTracing"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e,t=Array.from(r("InteractionTracing").getPendingInteractions()).filter(function(e){var t,n=(t=e.getTrace())==null||(t=t.annotations)==null?void 0:t.string;if((n==null?void 0:n.voice)==="true")return e});return t.length>1&&r("FBLogger")("kadabra_core").mustfix("Didn't expect multiple interactions, but got %s.",t.length),(e=t[0])!=null?e:null}function s(e){var t;if(e==null)return null;var n=r("InteractionTracing").getPendingInteractionById(e);return(n==null||(t=n.getTrace())==null?void 0:t.type)==="NAVIGATION"?n:null}function u(e,t){var n;if(t==null)return null;var o=r("InteractionTracing").getPendingInteractionById(t);return(o==null||(n=o.getTrace())==null?void 0:n.tracePolicy)===e?o:null}function c(e,t,n){e==null||e.addAnnotation("callState",n),e==null||e.failTrace(t,!0)}l.getPendingVoiceInteraction=e,l.getPendingVoiceNavigationByID=s,l.getPendingVoiceTurnInteractionByID=u,l.failVoiceTrace=c}),98);
__d("CometAIVoiceInteractionTracker.react",["CometAIVoiceInteraction","CometHeroHoldTrigger.react","RpGenaiSctpCaptionsGenAIBotStateTypes","ZenonCallsModelTypes","ZenonGenAICallHooks","ZenonProductConnectFunnel","react","react-compiler-runtime","useCometAIVoiceContext"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=e||(e=r("react")),d=u.useEffect,m=u.useRef,p=u.useState;function _(e){var t=o("react-compiler-runtime").c(75),n=e.isZenonConnectionState,a=e.onTurnChange,i=e.voiceConnectionInteraction,l=e.voiceTurnInteraction,s=n===void 0?!1:n,u=r("useCometAIVoiceContext")(),_=u.callStartTime,g=u.currentCallInstance,h=u.isE2EConnected,y=u.lastMessage,C=u.previousCallID,b=o("ZenonGenAICallHooks").useCurrentCall(),v=o("ZenonGenAICallHooks").useCallState(),S=y==null?void 0:y.role,R=o("ZenonGenAICallHooks").useCallTranscripts(),L=m(null),E=m(null),k=p(o("RpGenaiSctpCaptionsGenAIBotStateTypes").BotStateType.AMBIENT),I=k[0],T=k[1],D=p(null),x=D[0],$=D[1],P=o("ZenonGenAICallHooks").useBotState(),N=m(!1),M,w;t[0]!==P?(M=function(){return P(T)},w=[P],t[0]=P,t[1]=M,t[2]=w):(M=t[1],w=t[2]),d(M,w);var A=C===(b==null?void 0:b.clientCallId),F;t[3]!==v||t[4]!==(b==null?void 0:b.endCallReason)||t[5]!==(b==null?void 0:b.sharedCallId)||t[6]!==g||t[7]!==h||t[8]!==A||t[9]!==s||t[10]!==i?(F=function(){var e;if(!A){(b==null?void 0:b.sharedCallId)!=null&&(i==null||i.addJoinId(b==null?void 0:b.sharedCallId));var t="call_state_change_"+v;if((i==null||(e=i.getTrace())==null?void 0:e.markerPoints[t])==null&&(i==null||i.addMarkerPoint(t,"AppTiming")),v===o("ZenonCallsModelTypes").ZenonCallState.Connecting)r("ZenonProductConnectFunnel").setUIConnecting(g),N.current=!1;else if((s&&v===o("ZenonCallsModelTypes").ZenonCallState.Connected||h)&&N.current===!1)r("ZenonProductConnectFunnel").setUIConnected(g),i==null||i.addMarkerPoint("call_state_change_e2eConnected","AppTiming");else if(v===o("ZenonCallsModelTypes").ZenonCallState.Terminated){var n;o("CometAIVoiceInteraction").failVoiceTrace(o("CometAIVoiceInteraction").getPendingVoiceInteraction(),(n=b==null?void 0:b.endCallReason)!=null?n:"call_terminated",v)}}},t[3]=v,t[4]=b==null?void 0:b.endCallReason,t[5]=b==null?void 0:b.sharedCallId,t[6]=g,t[7]=h,t[8]=A,t[9]=s,t[10]=i,t[11]=F):F=t[11];var O=b==null?void 0:b.endCallReason,B=b==null?void 0:b.sharedCallId,W;t[12]!==v||t[13]!==g||t[14]!==h||t[15]!==A||t[16]!==s||t[17]!==O||t[18]!==B||t[19]!==i?(W=[v,O,B,g,h,A,s,i],t[12]=v,t[13]=g,t[14]=h,t[15]=A,t[16]=s,t[17]=O,t[18]=B,t[19]=i,t[20]=W):W=t[20],d(F,W);var q,U;t[21]!==R?(q=function(){return R(function(e){var t;L.current=e.stateMessage.turnMetaData,$((t=e.stateMessage)==null||(t=t.botContent)==null||(t=t.llmResp)==null?void 0:t.genaiViewModels)})},U=[R],t[21]=R,t[22]=q,t[23]=U):(q=t[22],U=t[23]),d(q,U);var V,H;t[24]!==_||t[25]!==i?(V=function(){_!=null&&(i==null||i.forceCompleteTrace())},H=[_,i],t[24]=_,t[25]=i,t[26]=V,t[27]=H):(V=t[26],H=t[27]),d(V,H);var G;t[28]!==v||t[29]!==(b==null?void 0:b.sharedCallId)||t[30]!==S||t[31]!==a||t[32]!==l?(G=function(){var e,t,n=l==null?void 0:l.getTrace(),r=(e=L.current)==null?void 0:e.turnUuid,i=r!=null&&((t=E.current)==null?void 0:t.turnUuid)!==r;(n==null||n.completed!=null)&&S==="user"&&v===o("ZenonCallsModelTypes").ZenonCallState.Connected&&i&&(E.current=L.current,a(function(e){r!=null&&e.addAnnotation("turnID",r),(b==null?void 0:b.sharedCallId)!=null&&e.addJoinId(b==null?void 0:b.sharedCallId)}))},t[28]=v,t[29]=b==null?void 0:b.sharedCallId,t[30]=S,t[31]=a,t[32]=l,t[33]=G):G=t[33];var z=b==null?void 0:b.sharedCallId,j;t[34]!==v||t[35]!==S||t[36]!==a||t[37]!==z||t[38]!==l?(j=[v,z,S,a,l],t[34]=v,t[35]=S,t[36]=a,t[37]=z,t[38]=l,t[39]=j):j=t[39],d(G,j);var K;t[40]!==v||t[41]!==A||t[42]!==(y==null?void 0:y.text)||t[43]!==S||t[44]!==i||t[45]!==l?(K=function(){A||S==="assistant"&&y!=null&&y.text.includes("Something went wrong.")&&[l,i].forEach(function(e){o("CometAIVoiceInteraction").failVoiceTrace(e,"AAPI Error",v)})},t[40]=v,t[41]=A,t[42]=y==null?void 0:y.text,t[43]=S,t[44]=i,t[45]=l,t[46]=K):K=t[46];var Q=y==null?void 0:y.text,X;t[47]!==v||t[48]!==A||t[49]!==S||t[50]!==Q||t[51]!==i||t[52]!==l?(X=[v,A,Q,S,i,l],t[47]=v,t[48]=A,t[49]=S,t[50]=Q,t[51]=i,t[52]=l,t[53]=X):X=t[53],d(K,X);var Y;t[54]!==v?(Y=[o("ZenonCallsModelTypes").ZenonCallState.New,o("ZenonCallsModelTypes").ZenonCallState.Connecting,o("ZenonCallsModelTypes").ZenonCallState.PendingApproval].includes(v)?c.jsx(r("CometHeroHoldTrigger.react"),{description:"Call State: "+v,hold:!0}):null,t[54]=v,t[55]=Y):Y=t[55];var J=Y,Z;t[56]!==_?(Z=_==null?c.jsx(r("CometHeroHoldTrigger.react"),{description:"Waiting for user to speak",hold:!0}):null,t[56]=_,t[57]=Z):Z=t[57];var ee=Z,te;t[58]!==A?(te=A?c.jsx(r("CometHeroHoldTrigger.react"),{description:"Transitioning to new call",hold:!0}):null,t[58]=A,t[59]=te):te=t[59];var ne=te,re;t[60]!==v||t[61]!==S?(re=S==="user"&&v===o("ZenonCallsModelTypes").ZenonCallState.Connected?c.jsx(r("CometHeroHoldTrigger.react"),{description:"[User Turn]",hold:!0}):null,t[60]=v,t[61]=S,t[62]=re):re=t[62];var oe=re,ae;t[63]!==I||t[64]!==v||t[65]!==S||t[66]!==x||t[67]!==l?(ae=c.jsx(f,{botState:I,callState:v,getPendingVoiceInteraction_:o("CometAIVoiceInteraction").getPendingVoiceInteraction,lastMessageRole:S,viewModels:x,voiceInteraction:l}),t[63]=I,t[64]=v,t[65]=S,t[66]=x,t[67]=l,t[68]=ae):ae=t[68];var ie;return t[69]!==J||t[70]!==ne||t[71]!==ae||t[72]!==ee||t[73]!==oe?(ie=c.jsxs(c.Fragment,{children:[J,ee,ne,oe,ae]}),t[69]=J,t[70]=ne,t[71]=ae,t[72]=ee,t[73]=oe,t[74]=ie):ie=t[74],ie}function f(e){var t=o("react-compiler-runtime").c(10),n=e.botState,a=e.callState,i=e.getPendingVoiceInteraction_,l=e.lastMessageRole,s=e.viewModels,u=e.voiceInteraction,m,p;t[0]!==n||t[1]!==i||t[2]!==s||t[3]!==u?(m=function(){var e=u==null?void 0:u.getTrace(),t=e!=null&&e.completed==null,r="bot_state_change_"+n;if(t&&((e==null?void 0:e.markerPoints[r])==null&&(u==null||u.addMarkerPoint(r,"AppTiming")),u==null||u.addAnnotationStringArray("viewModels",Object.keys(s!=null?s:{})),n===o("RpGenaiSctpCaptionsGenAIBotStateTypes").BotStateType.AMBIENT&&u)){u.forceCompleteTrace();var a=i();a==null||a.addAnnotationInt("forceCompleteFromVoiceTurn",1),a==null||a.forceCompleteTrace()}},p=[n,i,s,u],t[0]=n,t[1]=i,t[2]=s,t[3]=u,t[4]=m,t[5]=p):(m=t[4],p=t[5]),d(m,p);var _;t[6]!==n||t[7]!==a||t[8]!==l?(_=l==="assistant"&&a===o("ZenonCallsModelTypes").ZenonCallState.Connected&&n!==o("RpGenaiSctpCaptionsGenAIBotStateTypes").BotStateType.AMBIENT?c.jsx(r("CometHeroHoldTrigger.react"),{description:"[AI Turn] Bot state: "+(n!=null?n:"Unknown"),hold:!0}):null,t[6]=n,t[7]=a,t[8]=l,t[9]=_):_=t[9];var f=_;return f}l.default=_}),98);
__d("cometAIVoiceTranscriptionUtils",["RpGenaiSctpCaptionsGenAIBotStateTypes"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=[],n=e.stateMessage.userContent,r=e.stateMessage.botContent;return n!=null&&t.push(u(n)),r!=null&&t.push(c(r)),e!==null&&m(e)==="USER"&&t.reverse(),t}function s(t){var n=[];for(var r of e(t)){var o=r.otid;o!=null&&n.push(babelHelpers.extends({},r,{otid:o}))}return n}function u(e){var t,n;return{otid:e.otid,role:"user",text:(t=(n=e.caption)==null?void 0:n.text)!=null?t:""}}function c(e){var t,n;return{botContent:e,otid:e.otid,role:"assistant",text:(t=(n=e.caption)==null?void 0:n.text)!=null?t:""}}function d(e,t){var n,r;return m(e)===m(t)&&((n=e.stateMessage.botContent)==null?void 0:n.isProactive)===((r=t.stateMessage.botContent)==null?void 0:r.isProactive)}function m(e){var t,n,r,a=e.stateMessage,i=(t=a.turnMetaData)==null?void 0:t.userSpeechStartTimestamp,l=(n=a.turnMetaData)==null?void 0:n.botSpeechStartTimestamp;return i==null||l!=null&&Number(l)>Number(i)||a.state===o("RpGenaiSctpCaptionsGenAIBotStateTypes").BotStateType.THINKING&&((r=a.botContent)==null||(r=r.llmResp)==null||(r=r.genaiViewModels)==null||(r=r.streaming_state_view_model)==null?void 0:r.streaming_state)==="Imagining"?"AI":"USER"}function p(e){return e.stateMessage.state===o("RpGenaiSctpCaptionsGenAIBotStateTypes").BotStateType.LISTENING||e.stateMessage.state===o("RpGenaiSctpCaptionsGenAIBotStateTypes").BotStateType.THINKING}l.getMessages=e,l.getOTIDMessages=s,l.getUserMessage=u,l.getAIMessage=c,l.isSameMessage=d,l.isListeningOrThinking=p}),98);
__d("CometAIVoiceLastMessageContextUpdater.react",["ZenonGenAICallHooks","cometAIVoiceTranscriptionUtils","react","react-compiler-runtime","useCometAIVoiceContext"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useEffect;function u(){var e=o("react-compiler-runtime").c(5),t=o("ZenonGenAICallHooks").useCallTranscripts(),n=r("useCometAIVoiceContext")(),a=n.setLastMessage,i=n.setLastOTIDMessage,l,u;return e[0]!==a||e[1]!==i||e[2]!==t?(l=function(){return t(function(e){var t=o("cometAIVoiceTranscriptionUtils").getMessages(e).at(-1),n=o("cometAIVoiceTranscriptionUtils").getOTIDMessages(e).at(-1);t!=null&&a(t),n!=null&&i(n)})},u=[a,i,t],e[0]=a,e[1]=i,e[2]=t,e[3]=l,e[4]=u):(l=e[3],u=e[4]),s(l,u),null}l.default=u}),98);
__d("CometAIVoiceManagerDev.react",["ZenonGenAICallHooks","cometAIVoiceTranscriptionUtils","filterNulls","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useEffect;function u(){var e=o("react-compiler-runtime").c(6),t=o("ZenonGenAICallHooks").useCallTranscripts(),n=o("ZenonGenAICallHooks").useCallState(),r,a;e[0]!==n?(r=function(){},a=[n],e[0]=n,e[1]=r,e[2]=a):(r=e[1],a=e[2]),s(r,a);var i,l;return e[3]!==t?(i=function(){},l=[t],e[3]=t,e[4]=i,e[5]=l):(i=e[4],l=e[5]),s(i,l),null}l.default=u}),98);
__d("CometAIVoiceMonitorE2EConnection.react",["ZenonGenAICallHooks"],(function(t,n,r,o,a,i,l){"use strict";function e(){return o("ZenonGenAICallHooks").useSubscribeGenAICallConnectState(),null}l.default=e}),98);
__d("CometAIVoiceVisualizerBar.react",["react","react-compiler-runtime","stylex"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c={transform:"xsqj5wx",$$css:!0},d={bar:{backgroundColor:"xtija5b",borderStartStartRadius:"x147q5yw",borderStartEndRadius:"x1g89ijd",borderEndEndRadius:"x1fbcjdk",borderEndStartRadius:"x1ks6zui",height:"xiviw22",transformOrigin:"x1g0ag68",transition:"xhmzn6o",width:"xo0ibdm",willChange:"x1so62im",$$css:!0},transform:function(t){return[c,{"--x-transform":"scaleY("+t*100+"%)"!=null?"scaleY("+t*100+"%)":void 0}]}};function m(t){var n=o("react-compiler-runtime").c(4),a=t.scaleFactor,i=a===void 0?0:a,l;n[0]!==i?(l=(e||(e=r("stylex"))).props([d.bar,d.transform(i)]),n[0]=i,n[1]=l):l=n[1];var s;return n[2]!==l?(s=u.jsx("div",babelHelpers.extends({},l)),n[2]=l,n[3]=s):s=n[3],s}l.default=m}),98);
__d("useCometAIVoiceVisualizer",["KadabraAudioContext","ZenonCallsModelTypes","ZenonGenAICallHooks","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useEffect,c=s.useState;function d(){var e=o("react-compiler-runtime").c(4),t=o("ZenonGenAICallHooks").useLocalAudioTrack(),n=o("ZenonGenAICallHooks").useCallState(),r=n===o("ZenonCallsModelTypes").ZenonCallState.Connected?t==null?void 0:t.webrtcStream:null,a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=new Array(3).fill(0),e[0]=a):a=e[0];var i=c(a),l=i[0],s=i[1],d,m;return e[1]!==r?(d=function(){if(!o("KadabraAudioContext").isAudioContextSupported())return;var e=o("KadabraAudioContext").getAudioContext(),t=e.createAnalyser();if(t.fftSize=256,t.smoothingTimeConstant=.85,r!=null){var n=e.createMediaStreamSource(r);n.connect(t)}var a=t.frequencyBinCount,i=new Uint8Array(a),l=[[750,1e3],[1e3,2e3]],u=[1,1.5],c=null;function d(){t.getByteFrequencyData(i);var e=l.map(function(e,t){var n=e[0],r=e[1],o=Math.floor(n/i.length),a=Math.floor(r/i.length),l=Math.floor((o+a)/2),s=i[l];return(s*u[t]+127.5)/382.5});s([e[0],e[1],e[0]]),c=window.requestAnimationFrame(d)}return d(),(function(){o("KadabraAudioContext").cleanupAudioContext(),c!=null&&window.cancelAnimationFrame(c)})},m=[127.5,r],e[1]=r,e[2]=d,e[3]=m):(d=e[2],m=e[3]),u(d,m),l}l.default=d}),98);
__d("CometAIVoiceVisualizer.react",["CometAIVoiceVisualizerBar.react","react","react-compiler-runtime","useCometAIVoiceVisualizer"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(){var e=o("react-compiler-runtime").c(5),t=r("useCometAIVoiceVisualizer")(),n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n={className:"x6s0dn4 x13nxmdd x78zum5 xl56j7k"},e[0]=n):n=e[0];var a;e[1]!==t?(a=t.map(c),e[1]=t,e[2]=a):a=e[2];var i;return e[3]!==a?(i=s.jsx("div",babelHelpers.extends({},n,{children:a})),e[3]=a,e[4]=i):i=e[4],i}function c(e,t){return s.jsx(r("CometAIVoiceVisualizerBar.react"),{scaleFactor:e},t)}c.displayName=c.name+" [from "+i.id+"]",l.default=u}),98);
__d("GoogleSuperGLogo.react",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs("svg",babelHelpers.extends({viewBox:"0 0 20 21"},e,{children:[e.title!=null&&s.jsx("title",{children:e.title}),s.jsx("path",{d:"M20 10.436c0-.724-.065-1.42-.186-2.087h-9.61V12.3h5.492a4.705 4.705 0 0 1-2.05 3.071v2.57h3.311C18.887 16.16 20 13.544 20 10.436Z",fill:"#4285F4"}),s.jsx("path",{d:"M10.204 20.408c2.755 0 5.065-.909 6.753-2.467l-3.311-2.57c-.91.612-2.069.983-3.442.983-2.653 0-4.907-1.79-5.714-4.202H1.095v2.635c1.679 3.33 5.12 5.621 9.11 5.621Z",fill:"#34A853"}),s.jsx("path",{d:"M4.49 12.143a6.114 6.114 0 0 1-.325-1.939c0-.677.12-1.327.325-1.939V5.631H1.095A10.078 10.078 0 0 0 0 10.204c0 1.651.399 3.2 1.095 4.573l2.643-2.06.752-.574Z",fill:"#FBBC05"}),s.jsx("path",{d:"M10.204 4.063c1.503 0 2.839.52 3.905 1.521l2.923-2.922C15.26 1.012 12.959 0 10.204 0c-3.989 0-7.43 2.291-9.11 5.63L4.49 8.266c.807-2.412 3.061-4.202 5.714-4.202Z",fill:"#EA4335"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0,l.default=u}),98);
__d("KadabraCommentFooter.react",["KDSFlexbox.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={root:{":empty_display":"xjl7jj",$$css:!0}};function c(e){var t=o("react-compiler-runtime").c(2),n=e.children;if(n==null)return null;var a;return t[0]!==n?(a=s.jsx(r("KDSFlexbox.react"),{gap:8,xstyle:u.root,children:n}),t[0]=n,t[1]=a):a=t[1],a}l.default=c}),98);
__d("KadabraCommentFooterButton.react",["KDSChip.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["ref"],s,u=s||(s=o("react"));function c(t){var n=o("react-compiler-runtime").c(6),a,i;n[0]!==t?(i=t.ref,a=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i):(a=n[1],i=n[2]);var l;return n[3]!==a||n[4]!==i?(l=u.jsx(r("KDSChip.react"),babelHelpers.extends({},a,{ref:i,size:"small",variant:"button"})),n[3]=a,n[4]=i,n[5]=l):l=n[5],l}l.default=c}),98);
__d("MetaBrandFacebookFilled24Icon.react",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs("svg",babelHelpers.extends({viewBox:"0 0 24 24",fill:"currentColor",width:"1em",height:"1em"},e,{children:[e.title!=null&&s.jsx("title",{children:e.title}),e.children!=null&&s.jsx("defs",{children:e.children}),s.jsx("path",{d:"M22 12.037C22 6.494 17.523 2 12 2S2 6.494 2 12.037c0 4.707 3.229 8.656 7.584 9.741v-6.674H7.522v-3.067h2.062v-1.322c0-3.416 1.54-5 4.882-5 .634 0 1.727.125 2.174.25v2.78a12.807 12.807 0 0 0-1.155-.037c-1.64 0-2.273.623-2.273 2.244v1.085h3.266l-.56 3.067h-2.706V22C18.164 21.4 22 17.168 22 12.037z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("XFBGenAIOrchestratorSearchEngine.facebook",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum").Mirrored(["BING","BRAVE","GOOGLE","GOOGLE_VERTEX","HELP_CENTER","IN_HOUSE","KSS","MASE","NEFIRA","ONYXIA","PERPLEXITY","VSERP"]),l=e;i.default=l}),66);
__d("KadabraSearchEngineIcon.react",["fbt","BingLogo.react","FBLogger","GoogleSuperGLogo.react","KDSIcon.react","MetaBrandFacebookFilled24Icon.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c={fbLogo:{fill:"x15axj24",$$css:!0}};function d(e){var t=o("react-compiler-runtime").c(9),n=e.searchEngine,a=e.size,i=a===void 0?"large":a,l=i==="small"?12:24;switch(n){case"GOOGLE":{var d;t[0]===Symbol.for("react.memo_cache_sentinel")?(d=s._(/*BTDS*/"Result from Google"),t[0]=d):d=t[0];var m;return t[1]!==l?(m=u.jsx(r("KDSIcon.react"),{alt:d,icon:r("GoogleSuperGLogo.react"),size:l}),t[1]=l,t[2]=m):m=t[2],m}case"BING":{var p;t[3]===Symbol.for("react.memo_cache_sentinel")?(p=s._(/*BTDS*/"Result from Bing"),t[3]=p):p=t[3];var _;return t[4]!==l?(_=u.jsx(r("KDSIcon.react"),{alt:p,icon:r("BingLogo.react"),size:l}),t[4]=l,t[5]=_):_=t[5],_}case"HELP_CENTER":{var f;t[6]===Symbol.for("react.memo_cache_sentinel")?(f=s._(/*BTDS*/"Result from Meta AI"),t[6]=f):f=t[6];var g=i==="small"?16:32,h;return t[7]!==g?(h=u.jsx(r("KDSIcon.react"),{alt:f,icon:r("MetaBrandFacebookFilled24Icon.react"),size:g,xstyle:c.fbLogo}),t[7]=g,t[8]=h):h=t[8],h}default:throw r("FBLogger")("kadabra_core").mustfixThrow("Missing icon for search engine in the Abra search plugin")}}l.default=d}),226);
__d("KadabraSearchUtils",[],(function(t,n,r,o,a,i,l){"use strict";function e(e){return e==="GOOGLE"||e==="BING"}l.showSearchEngineAttribution=e}),98);
__d("KadabraVoiceAbftTracker.react",["KadabraPromptSessionManager","RpGenaiSctpCaptionsGenAIBotStateTypes","ZenonGenAICallHooks","react","react-compiler-runtime","useKadabraABFTLogging"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useEffect,c=s.useRef;function d(){var e=o("react-compiler-runtime").c(5),t=o("ZenonGenAICallHooks").useCallTranscripts(),n=r("useKadabraABFTLogging")(),a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=new Set,e[0]=a):a=e[0];var i=c(a),l,s;e[1]!==n||e[2]!==t?(l=function(){return t(function(e){var t,a=(t=e.stateMessage.turnMetaData)==null?void 0:t.turnUuid;if(e.stateMessage.state===o("RpGenaiSctpCaptionsGenAIBotStateTypes").BotStateType.LISTENING&&!i.current.has(a!=null?a:"")){var l,s,u;n({botResponseId:(l=(s=e.stateMessage.turnMetaData)==null?void 0:s.turnUuid)!=null?l:"",destinationName:"meta_ai_thread_view",destinationSessionId:(u=r("KadabraPromptSessionManager").getPromptSessionId())!=null?u:"",eventName:"first_response_token_vpv",referrerSessionId:""}),i.current.add(a!=null?a:"")}if(e.stateMessage.state===o("RpGenaiSctpCaptionsGenAIBotStateTypes").BotStateType.RESPONDING){var c,d,m;n({botResponseId:(c=(d=e.stateMessage.turnMetaData)==null?void 0:d.turnUuid)!=null?c:"",destinationName:"meta_ai_thread_view",destinationSessionId:(m=r("KadabraPromptSessionManager").getPromptSessionId())!=null?m:"",eventName:"response_vpv",referrerSessionId:""})}})},s=[n,t],e[1]=n,e[2]=t,e[3]=l,e[4]=s):(l=e[3],s=e[4]),u(l,s)}l.default=d}),98);
__d("VoiceEmbodimentViewShader",[],(function(t,n,r,o,a,i){"use strict";var e="#version 300 es\nprecision highp float;\nprecision highp int;\n\n// Input from vertex shader\nin vec2 v_TexCoord;\n\n// Output color\nout vec4 FragColor;\n\n// Uniforms matching the Metal shader\nuniform float u_Time;\nuniform float u_OuterDistortionIntensity;\nuniform float u_InnerDistortionIntensity;\nuniform vec3 u_InnerWaviness;\nuniform vec3 u_OuterWaviness;\nuniform float u_CircleProgress;\nuniform float u_AnimationSpeed;\nuniform float u_Frequencies[5];\nuniform float u_Speeds[5];\nuniform float u_OuterBlurRadius;\nuniform float u_InnerBlurRadius;\nuniform float u_FullScale;\nuniform float u_ContainerScale;\nuniform float u_ViewWidth;\nuniform float u_ViewHeight;\nuniform float u_ContainerSize;\nuniform vec3 u_OuterScale;\nuniform vec3 u_InnerScale;\nuniform vec3 u_GradientPosition;\nuniform vec3 u_BlobOpacity;\nuniform float u_DefaultLayerOpacity;\nuniform float u_DefaultLayerRotation;\nuniform float u_RespondingEdgeBlur;\nuniform float u_DisconnectedOverlayOpacity;\nuniform bool u_ShowGradientDebug;\nuniform int u_ActiveBlob;\n\n// Helper function for proper alpha compositing\nvec3 mai_voice_embodiment_compositeOver(vec3 top, float aTop, vec3 bottom, float aBottom) {\n    float aOut = aTop + aBottom * (1.0 - aTop);\n    return (top * aTop + bottom * aBottom * (1.0 - aTop)) / max(aOut, 0.0001);\n}\n\n// Constants\nconst float M_PI = 3.14159265359;\nconst float MAIVE_ROTATION_SPEED_1 = 75.0;\nconst float MAIVE_ROTATION_SPEED_2 = 90.0;\nconst float MAIVE_ROTATION_SPEED_3 = 70.0;\nconst float MAIVE_BLOB2_TIME_OFFSET = 1.15;\nconst float MAIVE_BLOB3_TIME_OFFSET = 0.25;\nconst float MAIVE_GRADIENT_CYCLE_DURATION = 6.0;\nconst float MAIVE_GRADIENT_HALF_CYCLE = 3.0;\nconst float MAIVE_GRADIENT_STEEPNESS = 10.0;\n\n// Structure for defining ellipse shapes in the gradient\nstruct MAIVoiceEmbodimentEllipseParams {\n    vec2 center;    // Center position relative to canvas height\n    vec2 size;      // Width and height relative to canvas height\n    vec3 color;     // RGB color values (0-1)\n    bool isScreen;  // Whether to use screen blend mode instead of normal\n    float blur;     // Gaussian blur radius as percentage of canvas height\n};\n\n// Structure for blob shape calculations\nstruct MAIVoiceEmbodimentBlobShapeInfo {\n    float alpha;\n    float outerDistance;\n    float innerDistance;\n    bool isOuterRing;\n};\n\n// Define the gradient ellipses from bottom to top layer\nconst MAIVoiceEmbodimentEllipseParams ellipses[15] = MAIVoiceEmbodimentEllipseParams[15](\n    // Light blue screen-blended background ellipses\n    MAIVoiceEmbodimentEllipseParams(vec2(0.625, 0.0), vec2(0.96, 0.96), vec3(0.0, 0.502, 1.0), true, 0.48),    // #0080FF with 48% blur\n    MAIVoiceEmbodimentEllipseParams(vec2(1.73, 1.1), vec2(0.96, 0.96), vec3(0.0, 0.502, 1.0), true, 0.48),     // #0080FF with 48% blur\n    MAIVoiceEmbodimentEllipseParams(vec2(3.04, 0.0), vec2(0.96, 0.96), vec3(0.0, 0.502, 1.0), true, 0.48),     // #0080FF with 48% blur\n\n    // First set of normal-blended cyan ellipses\n    MAIVoiceEmbodimentEllipseParams(vec2(0.0, 0.5), vec2(1.0, 1.0), vec3(0.071, 0.714, 0.949), false, 0.42),   // #12B6F2 with 42% blur\n    MAIVoiceEmbodimentEllipseParams(vec2(0.0, 0.5), vec2(0.44, 1.0), vec3(0.486, 0.953, 0.737), false, 0.34),  // #7CF3BC with 34% blur\n    MAIVoiceEmbodimentEllipseParams(vec2(0.0, 0.5), vec2(0.07, 0.42), vec3(0.545, 1.0, 0.831), false, 0.64),   // #8BFFD4 with 64% blur\n\n    // Second set of normal-blended cyan ellipses\n    MAIVoiceEmbodimentEllipseParams(vec2(2.39, 0.5), vec2(1.0, 1.0), vec3(0.071, 0.714, 0.949), false, 0.42),  // #12B6F2 with 42% blur\n    MAIVoiceEmbodimentEllipseParams(vec2(2.39, 0.5), vec2(0.44, 1.0), vec3(0.486, 0.953, 0.737), false, 0.34), // #7CF3BC with 34% blur\n    MAIVoiceEmbodimentEllipseParams(vec2(2.39, 0.5), vec2(0.07, 0.42), vec3(0.545, 1.0, 0.831), false, 0.64),  // #8BFFD4 with 64% blur\n\n    // First set of normal-blended purple-pink ellipses\n    MAIVoiceEmbodimentEllipseParams(vec2(1.18, 0.5), vec2(0.6, 1.0), vec3(0.431, 0.098, 0.882), false, 0.30),  // #6E19E1 with 30% blur\n    MAIVoiceEmbodimentEllipseParams(vec2(1.18, 0.5), vec2(0.48, 1.0), vec3(0.980, 0.431, 0.871), false, 0.30), // #FA6EDE with 30% blur\n    MAIVoiceEmbodimentEllipseParams(vec2(1.18, 0.5), vec2(0.15, 0.29), vec3(1.0, 0.667, 0.902), false, 0.60),  // #FFAAE6 with 60% blur\n\n    // Second set of normal-blended purple-pink ellipses\n    MAIVoiceEmbodimentEllipseParams(vec2(3.6, 0.5), vec2(0.6, 1.0), vec3(0.431, 0.098, 0.882), false, 0.30),   // #6E19E1 with 30% blur\n    MAIVoiceEmbodimentEllipseParams(vec2(3.6, 0.5), vec2(0.48, 1.0), vec3(0.980, 0.431, 0.871), false, 0.30),  // #FA6EDE with 30% blur\n    MAIVoiceEmbodimentEllipseParams(vec2(3.6, 0.5), vec2(0.15, 0.29), vec3(1.0, 0.667, 0.902), false, 0.60)    // #FFAAE6 with 60% blur\n);\n\n// Helper function for calculating gradient animation timing and position\nfloat mai_voice_embodiment_computeGradientOffset(float time, float timeOffset) {\n    float offsetTime = max(0.0, time - timeOffset);\n    float cycleTime = mod(offsetTime, MAIVE_GRADIENT_CYCLE_DURATION);\n\n    if (cycleTime < MAIVE_GRADIENT_HALF_CYCLE) {\n        // Forward phase: Moves gradient from 0 to 2.6 units using S-curve easing\n        float t = cycleTime / MAIVE_GRADIENT_HALF_CYCLE;\n\n        // Apply sigmoid-based S-curve easing for smooth acceleration and deceleration\n        // Maps linear time to a smooth S-curve using configurable steepness\n        float k = MAIVE_GRADIENT_STEEPNESS;\n        float sigmoid = 1.0 / (1.0 + exp(-k * (t - 0.5)));\n        float normalizedSigmoid = (sigmoid - 1.0/(1.0 + exp(k * 0.5))) /\n                                 (1.0/(1.0 + exp(-k * 0.5)) - 1.0/(1.0 + exp(k * 0.5)));\n\n        return 2.6 * normalizedSigmoid;\n    } else {\n        // Reverse phase: Moves gradient from 2.6 to 0 units using S-curve easing\n        float t = (cycleTime - MAIVE_GRADIENT_HALF_CYCLE) / MAIVE_GRADIENT_HALF_CYCLE;\n\n        // Apply the same S-curve easing for the reverse movement\n        float k = MAIVE_GRADIENT_STEEPNESS;\n        float sigmoid = 1.0 / (1.0 + exp(-k * (t - 0.5)));\n        float normalizedSigmoid = (sigmoid - 1.0/(1.0 + exp(k * 0.5))) /\n                                 (1.0/(1.0 + exp(-k * 0.5)) - 1.0/(1.0 + exp(k * 0.5)));\n\n        return 2.6 * (1.0 - normalizedSigmoid);\n    }\n}\n\n// Helper function for calculating rotation angles for all three blobs\nvec3 mai_voice_embodiment_computeRotationAngles(float time) {\n    // Initial rotation angles in radians (35\xB0, 315\xB0, 135\xB0)\n    float startAngle1 = 35.0 * M_PI / 180.0;\n    float startAngle2 = 315.0 * M_PI / 180.0;\n    float startAngle3 = 135.0 * M_PI / 180.0;\n\n    // Calculate continuous rotation with different speeds and start delays\n    float rotation1 = startAngle1 - (MAIVE_ROTATION_SPEED_1 * time);\n    float rotation2 = startAngle2 - (MAIVE_ROTATION_SPEED_2 * max(0.0, time - MAIVE_BLOB2_TIME_OFFSET));\n    float rotation3 = startAngle3 - (MAIVE_ROTATION_SPEED_3 * max(0.0, time - MAIVE_BLOB3_TIME_OFFSET));\n\n    return vec3(rotation1, rotation2, rotation3);\n}\n\n// Helper function for calculating gradient positions for all three blobs\nvec3 mai_voice_embodiment_computeGradientPositions(float time) {\n    return vec3(\n        mai_voice_embodiment_computeGradientOffset(time, 0.0),\n        mai_voice_embodiment_computeGradientOffset(time, MAIVE_BLOB2_TIME_OFFSET),\n        mai_voice_embodiment_computeGradientOffset(time, MAIVE_BLOB3_TIME_OFFSET)\n    );\n}\n\n// Helper function for 2D rotation around origin\nvec2 mai_voice_embodiment_rotate2D(vec2 position, float angle) {\n    float s = sin(angle);\n    float c = cos(angle);\n    mat2 rotationMatrix = mat2(c, -s, s, c);\n    return rotationMatrix * position;\n}\n\n// Helper function: Approximation of the error function (erf)\n// Used for smooth transitions in Gaussian-based effects\nfloat mai_voice_embodiment_erf_approx(float x) {\n    // Constants for Abramowitz and Stegun approximation formula 7.1.26\n    // Provides accuracy to ~1e-7\n    float a1 =  0.254829592;\n    float a2 = -0.284496736;\n    float a3 =  1.421413741;\n    float a4 = -1.453152027;\n    float a5 =  1.061405429;\n    float p  =  0.3275911;\n    float sign = (x < 0.0) ? -1.0 : 1.0;\n    x = abs(x);\n    float t = 1.0 / (1.0 + p*x);\n    float y = 1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)* t * exp(-x*x);\n    return sign * y;\n}\n\n// Helper function for creating radial gradients with Gaussian blur\n// Simulates the convolution of a binary circle with a Gaussian kernel\nvec4 mai_voice_embodiment_radialGradient(vec2 uv, vec2 center, float circleRadius, float blurSigma, vec4 fullColor) {\n    float dist = length(uv - center);\n    // Calculate alpha using error function for smooth Gaussian falloff\n    // At dist == circleRadius, alpha = 0.5, creating a smooth transition\n    float alpha = 0.5 * (1.0 + mai_voice_embodiment_erf_approx((circleRadius - dist) / (blurSigma * sqrt(2.0))));\n    return vec4(fullColor.rgb, clamp(alpha, 0.0, 1.0));\n}\n\n// Helper function for calculating ellipse value with Gaussian blur\nfloat mai_voice_embodiment_ellipseValue(vec2 pos, vec2 center, vec2 size, float sigma) {\n    // Calculate normalized distance from point to ellipse center\n    vec2 delta = (pos - center) / (size * 0.5);\n    // Compute radial distance considering elliptical shape\n    float dist = length(delta);\n    // Apply Gaussian blur using error function for smooth falloff\n    return 0.5 * (1.0 + mai_voice_embodiment_erf_approx((1.0 - dist) / (sigma * sqrt(2.0))));\n}\n\n// Helper function for sampling the gradient at a specific 2D position\nvec3 mai_voice_embodiment_sampleGradient(vec2 position) {\n    // Initialize with background color (#0047D6)\n    vec3 result = vec3(0.0, 0.278, 0.839);\n\n    // Apply each ellipse in sequence from bottom to top\n    for (int i = 0; i < 15; i++) {\n        // Calculate the contribution of this ellipse using its custom blur\n        float value = mai_voice_embodiment_ellipseValue(position, ellipses[i].center, ellipses[i].size, ellipses[i].blur);\n\n        if (ellipses[i].isScreen) {\n            // Apply screen blend mode for light blue background ellipses\n            vec3 screenBlend = vec3(1.0) - (vec3(1.0) - ellipses[i].color) * (vec3(1.0) - result);\n            result = mix(result, screenBlend, value);\n        } else {\n            // Apply normal blend mode for foreground ellipses\n            result = mai_voice_embodiment_compositeOver(ellipses[i].color, value, result, 1.0);\n        }\n    }\n\n    return result;\n}\n\n// Helper functions for HSL-RGB color space conversion\nvec3 mai_voice_embodiment_rgbToHsl(vec3 c) {\n    float maxVal = max(max(c.r, c.g), c.b);\n    float minVal = min(min(c.r, c.g), c.b);\n    float h, s, l = (maxVal + minVal) / 2.0;\n    float d = maxVal - minVal;\n\n    if (d == 0.0) {\n        h = s = 0.0;  // Achromatic case (grayscale)\n    } else {\n        s = l > 0.5 ? d / (2.0 - maxVal - minVal) : d / (maxVal + minVal);\n        // Calculate hue\n        if (maxVal == c.r) {\n            h = (c.g - c.b) / d + (c.g < c.b ? 6.0 : 0.0);\n        } else if (maxVal == c.g) {\n            h = (c.b - c.r) / d + 2.0;\n        } else {\n            h = (c.r - c.g) / d + 4.0;\n        }\n        h /= 6.0;  // Normalize hue to [0,1] range\n    }\n    return vec3(h, s, l);\n}\n\nvec3 mai_voice_embodiment_hslToRgb(vec3 hsl) {\n    float h = hsl.x, s = hsl.y, l = hsl.z;\n\n    if (s == 0.0) {\n        return vec3(l);  // Achromatic case (grayscale)\n    }\n\n    // Calculate helper values for RGB conversion\n    float q = l < 0.5 ? l * (1.0 + s) : l + s - l * s;\n    float p = 2.0 * l - q;\n\n    // Normalize and adjust hue\n    float hk = mod(h, 1.0);\n    vec3 ts = vec3(hk + 1.0/3.0, hk, hk - 1.0/3.0);\n    ts = mix(ts, ts + 1.0, lessThan(ts, vec3(0.0)));\n    ts = mix(ts, ts - 1.0, greaterThan(ts, vec3(1.0)));\n\n    // Convert each component using the HSL to RGB formula\n    vec3 rgb;\n    rgb.r = ts.r < 1.0/6.0 ? p + (q - p) * 6.0 * ts.r :\n            ts.r < 1.0/2.0 ? q :\n            ts.r < 2.0/3.0 ? p + (q - p) * (2.0/3.0 - ts.r) * 6.0 : p;\n\n    rgb.g = ts.g < 1.0/6.0 ? p + (q - p) * 6.0 * ts.g :\n            ts.g < 1.0/2.0 ? q :\n            ts.g < 2.0/3.0 ? p + (q - p) * (2.0/3.0 - ts.g) * 6.0 : p;\n\n    rgb.b = ts.b < 1.0/6.0 ? p + (q - p) * 6.0 * ts.b :\n            ts.b < 1.0/2.0 ? q :\n            ts.b < 2.0/3.0 ? p + (q - p) * (2.0/3.0 - ts.b) * 6.0 : p;\n\n    return rgb;\n}\n\n// Helper function for applying color blend mode\nvec3 mai_voice_embodiment_applyColorBlend(vec3 base, vec3 blend) {\n    vec3 baseHsl = mai_voice_embodiment_rgbToHsl(base);\n    vec3 blendHsl = mai_voice_embodiment_rgbToHsl(blend);\n\n    // Create new color using hue and saturation from blend color, luminance from base\n    vec3 resultHsl = vec3(blendHsl.xy, baseHsl.z);\n\n    return mai_voice_embodiment_hslToRgb(resultHsl);\n}\n\n// Helper function for soft light blend\nvec3 mai_voice_embodiment_softLight(vec3 base, vec3 blend) {\n    vec3 result;\n    for (int i = 0; i < 3; i++) {\n        if (blend[i] <= 0.5) {\n            result[i] = base[i] - (1.0 - 2.0 * blend[i]) * base[i] * (1.0 - base[i]);\n        } else {\n            float d = (base[i] <= 0.25) ?\n                ((16.0 * base[i] - 12.0) * base[i] + 4.0) * base[i] :\n                sqrt(base[i]);\n            result[i] = base[i] + (2.0 * blend[i] - 1.0) * (d - base[i]);\n        }\n    }\n    return result;\n}\n\n// Calculates the shape and appearance of a blob component (inner or outer ring)\n// Parameters:\n//   uv: UV coordinates relative to blob center\n//   radius: Base radius of the blob component\n//   time: Current animation time\n//   distortionIntensity: Amount of wave distortion to apply\n//   blurRadius: Gaussian blur radius for edges\n//   blobIndex: Which blob this is (0-2) for coordinated animations\n//   extraEdgeBlur: Additional edge blur amount\n//   isOuterRing: Whether this is the outer ring (true) or inner ring (false)\n// Returns:\n//   MAIVoiceEmbodimentBlobShapeInfo containing:\n//   - alpha: Opacity value for the shape\n//   - outerDistance: Signed distance to outer ring edge (positive outside)\n//   - innerDistance: Signed distance to inner ring edge (positive inside)\n//   - isOuterRing: Whether this is part of the outer ring\nMAIVoiceEmbodimentBlobShapeInfo mai_voice_embodiment_calculateBlobShape(vec2 uv, float radius, float time, float distortionIntensity,\n                               float blurRadius, int blobIndex, float extraEdgeBlur, bool isOuterRing) {\n    float angle = atan(uv.y, uv.x);\n    float dist = length(uv);\n    float deformation = 0.0;\n\n    if (distortionIntensity > 0.0) {\n        float intensityProgress = distortionIntensity / 15.0;\n\n        // Create three different but balanced frequency patterns\n        // All patterns use integer frequencies to maintain perfect periodicity\n        float frequencies[5];\n        float phases[5];\n\n        if (blobIndex == 0) {\n            // First blob: Base pattern (2,3,1,4,1)\n            frequencies[0] = 2.0; phases[0] = u_Speeds[0];\n            frequencies[1] = 3.0; phases[1] = u_Speeds[1];\n            frequencies[2] = 1.0; phases[2] = u_Speeds[2];\n            frequencies[3] = 4.0; phases[3] = u_Speeds[3];\n            frequencies[4] = 1.0; phases[4] = u_Speeds[4];\n        }\n        else if (blobIndex == 1) {\n            // Second blob: Rotated frequencies but same wave count\n            frequencies[0] = 1.0; phases[0] = u_Speeds[0] * -0.8;\n            frequencies[1] = 4.0; phases[1] = u_Speeds[1] * 0.75;\n            frequencies[2] = 2.0; phases[2] = u_Speeds[2] * -0.8;\n            frequencies[3] = 1.0; phases[3] = u_Speeds[3] * -1.0;\n            frequencies[4] = 3.0; phases[4] = u_Speeds[4] * -1.0;\n        }\n        else {\n            // Third blob: Another unique but balanced pattern\n            frequencies[0] = 3.0; phases[0] = u_Speeds[0] * 0.5;\n            frequencies[1] = 1.0; phases[1] = u_Speeds[1] * 0.75;\n            frequencies[2] = 4.0; phases[2] = u_Speeds[2] * 0.6;\n            frequencies[3] = 2.0; phases[3] = u_Speeds[3] * -1.67;\n            frequencies[4] = 1.0; phases[4] = u_Speeds[4];\n        }\n\n        // Apply the frequencies with the same total wave energy\n        for (int i = 0; i < 5; i++) {\n            float frequency = floor(frequencies[i] *\n                                 (isOuterRing ? u_OuterWaviness[blobIndex] : u_InnerWaviness[blobIndex]));\n            float wavePhase = frequency * angle + phases[i];\n            deformation += sin(wavePhase) * (distortionIntensity / 200.0);\n        }\n\n        deformation *= (1.0 - u_CircleProgress) * intensityProgress;\n    }\n\n    float finalRadius = radius + deformation;\n\n    // Master control for anti-aliasing strength - adjust this single value to control overall AA effect\n    // Base range: 1.0 = normal, 1.5 = medium, 2.0 = strong, 2.5 = very strong\n    float baseAAStrength = 1.0;         // Base AA strength at scale 1.0\n    float targetAAAt0_5 = 1.6;          // Desired AA strength when scale is 0.5\n\n    // Dynamically adjust AA strength based on container scale\n    // Calculate how much we need to compensate to hit our target at 0.5 scale\n    float targetScaleFactor = (targetAAAt0_5 - baseAAStrength) / (1.0 - sqrt(0.5));\n    float scaleCompensation = 1.0 + (1.0 - sqrt(max(u_ContainerScale, 0.4))) * targetScaleFactor;\n    float aaStrength = baseAAStrength * scaleCompensation;\n\n    float minSmoothing = 0.014 * aaStrength;\n    float pixelWidth = fwidth(dist) * (3.5 * sqrt(aaStrength));  // Non-linear scaling for smoother control\n\n    // Enhanced anti-aliasing width calculation\n    // We calculate this based on the pixel density to avoid Safari's precision issues\n    float devicePixelRatio = 1.0;  // This will be different on retina displays\n    float pixelDensityFactor = (1.75 * aaStrength) / max(u_ViewWidth, u_ViewHeight);\n    float adaptiveSmoothing = max(minSmoothing, pixelWidth * pixelDensityFactor);\n    float aaWidth = adaptiveSmoothing * (3.5 * sqrt(aaStrength));\n\n    // Calculate shadow width separately from AA\n    float shadowWidth = max(aaWidth * (1.35 * sqrt(aaStrength)), blurRadius * 1.5 + extraEdgeBlur);\n\n    MAIVoiceEmbodimentBlobShapeInfo result;\n    result.isOuterRing = isOuterRing;\n\n    if (radius == 1.0) {  // Outer ring\n        float d = dist - finalRadius;\n\n        // Pre-calculate the base alpha before the edge\n        float baseAlpha = 1.0;\n\n        // Calculate edge transition zone with balanced range\n        float edgeStart = -aaWidth * (1.35 * sqrt(aaStrength));\n        float edgeEnd = aaWidth * (1.35 * sqrt(aaStrength));\n        float normalizedEdge = (d - edgeStart) / (edgeEnd - edgeStart);\n\n        // Enhanced smooth step function for edge transition\n        float edgeTransition = smoothstep(0.0, 1.0, normalizedEdge);\n        float smoothRange = mix(0.15, 0.1, sqrt(aaStrength) - 1.0);  // Adjust range based on AA strength\n        edgeTransition = smoothstep(smoothRange, 1.0 - smoothRange, edgeTransition);\n\n        // Calculate decay with balanced falloff\n        float t = max(d, 0.0) / shadowWidth;\n        float decayStrength = mix(-15.0, -14.0, sqrt(aaStrength) - 1.0);  // Softer decay with higher AA\n        float decay = 0.95 * exp(decayStrength * t) * (1.0 + t * 3.0 + t * t * 1.5);\n\n        // Combine the transitions with balanced smoothing\n        float hardMask = (d < 0.0) ? 1.0 : 0.0;\n        float smoothMask = smoothstep(-aaWidth * (1.35 * sqrt(aaStrength)),\n                                    aaWidth * (1.35 * sqrt(aaStrength)), d);\n        smoothMask = smoothstep(smoothRange, 1.0 - smoothRange, smoothMask);\n\n        result.alpha = mix(\n            baseAlpha,\n            decay,\n            smoothMask\n        ) * (hardMask + (1.0 - hardMask) * decay);\n\n        result.outerDistance = d;\n        result.innerDistance = 0.0;\n    } else {  // Inner ring\n        float d = finalRadius - dist;\n\n        // Pre-calculate the base alpha before the edge\n        float baseAlpha = 0.0;\n\n        // Calculate edge transition zone with balanced range\n        float edgeStart = -aaWidth * (1.35 * sqrt(aaStrength));\n        float edgeEnd = aaWidth * (1.35 * sqrt(aaStrength));\n        float normalizedEdge = (d - edgeStart) / (edgeEnd - edgeStart);\n\n        // Enhanced smooth step function for edge transition\n        float edgeTransition = smoothstep(0.0, 1.0, normalizedEdge);\n        float smoothRange = mix(0.15, 0.1, sqrt(aaStrength) - 1.0);  // Adjust range based on AA strength\n        edgeTransition = smoothstep(smoothRange, 1.0 - smoothRange, edgeTransition);\n\n        // Calculate decay with balanced falloff\n        float t = max(d, 0.0) / shadowWidth;\n        float decayStrength = mix(-15.0, -14.0, sqrt(aaStrength) - 1.0);  // Softer decay with higher AA\n        float decay = 0.95 * exp(decayStrength * t) * (1.0 + t * 3.0 + t * t * 1.5);\n\n        // Combine the transitions with balanced smoothing\n        float hardMask = (d < 0.0) ? 0.0 : 1.0;\n        float smoothMask = smoothstep(-aaWidth * (1.35 * sqrt(aaStrength)),\n                                    aaWidth * (1.35 * sqrt(aaStrength)), d);\n        smoothMask = smoothstep(smoothRange, 1.0 - smoothRange, smoothMask);\n\n        result.alpha = mix(\n            baseAlpha,\n            decay,\n            smoothMask\n        ) * (hardMask * decay);\n\n        result.outerDistance = 0.0;\n        result.innerDistance = d;\n    }\n\n    return result;\n}\n\nvoid main() {\n    // Calculate animation parameters\n    vec3 rotationAngles = mai_voice_embodiment_computeRotationAngles(u_Time);\n    vec3 gradientPositions = mai_voice_embodiment_computeGradientPositions(u_Time);\n\n    // Handle gradient debug visualization mode\n    if (u_ShowGradientDebug) {\n    vec2 uv = v_TexCoord;\n\n        // Simulate the gradient arrangement in debug view\n        float containerWidth = 1.0;  // Width of the container mask\n        float gradientWidth = 3.6;   // Width of the dynamic gradient layer\n        float slideRange = 2.6;      // Available sliding range (3.6 - 1.0)\n\n        // Get the current offset from the animation\n        float xOffset = gradientPositions[u_ActiveBlob];\n\n        // Create two visualization modes:\n        bool showFullGradient = false;  // Toggle between full gradient and container view\n\n        vec2 gradientUV;\n        vec3 gradientColor;\n\n        if (showFullGradient) {\n            // Mode 1: Show the full 3.6-wide gradient with a 1.0-wide window overlay\n            gradientUV.x = uv.x * gradientWidth;\n            gradientUV.y = uv.y;\n\n            gradientColor = mai_voice_embodiment_sampleGradient(gradientUV);\n\n            // Draw a rectangle showing the current container mask position\n            float containerLeft = xOffset;\n            float containerRight = xOffset + containerWidth;\n\n            // Highlight the container mask area\n            if (gradientUV.x >= containerLeft && gradientUV.x <= containerRight) {\n                gradientColor = mix(gradientColor, vec3(1.0), 0.1);\n\n                if (abs(gradientUV.x - containerLeft) < 0.01 || abs(gradientUV.x - containerRight) < 0.01) {\n                    gradientColor = mix(gradientColor, vec3(1.0), 0.5);\n                }\n            } else {\n                gradientColor = mix(gradientColor, vec3(0.0), 0.5);\n            }\n\n            // Draw ellipse boundaries and centers\n            for (int i = 0; i < 15; i++) {\n                vec2 center = ellipses[i].center;\n                vec2 size = ellipses[i].size;\n\n                vec2 delta = (gradientUV - center) / (size * 0.5);\n                float dist = length(delta);\n\n                if (abs(dist - 1.0) < 0.01) {\n                    vec3 boundaryColor = ellipses[i].isScreen ?\n                        vec3(0.0, 0.7, 1.0) :  // Light blue for screen blend\n                        vec3(1.0, 0.7, 0.0);   // Orange for normal blend\n\n                    gradientColor = mix(gradientColor, boundaryColor, 0.5);\n                }\n\n                if (length(gradientUV - center) < 0.02) {\n                    gradientColor = ellipses[i].isScreen ?\n                        vec3(0.0, 1.0, 1.0) :  // Cyan for screen blend\n                        vec3(1.0, 1.0, 0.0);   // Yellow for normal blend\n                }\n            }\n        } else {\n            // Mode 2: Show only what's visible through the container mask\n            vec2 containerUV;\n            containerUV.x = uv.x;\n            containerUV.y = uv.y;\n\n            gradientUV.x = xOffset + containerUV.x;\n            gradientUV.y = containerUV.y;\n\n            gradientColor = mai_voice_embodiment_sampleGradient(gradientUV);\n\n            // Draw container mask border\n            if (uv.x < 0.005 || uv.x > 0.995 || uv.y < 0.005 || uv.y > 0.995) {\n                gradientColor = mix(gradientColor, vec3(1.0), 0.3);\n            }\n\n            // Add vertical grid lines\n            float gridX = mod(gradientUV.x, 0.5);\n            if (gridX < 0.005 || gridX > 0.495) {\n                float intensity = (mod(gradientUV.x, 1.0) < 0.005 || mod(gradientUV.x, 1.0) > 0.995) ? 0.3 : 0.15;\n                gradientColor = mix(gradientColor, vec3(1.0), intensity);\n            }\n\n            // Add horizontal grid lines\n            if (abs(mod(uv.y * 4.0, 1.0)) < 0.003) {\n                float intensity = (abs(uv.y - 0.5) < 0.003) ? 0.3 : 0.15;\n                gradientColor = mix(gradientColor, vec3(1.0), intensity);\n            }\n\n            // Add position indicator\n            float positionIndicator = 0.05 + (xOffset / slideRange) * 0.9;\n            if (abs(uv.x - positionIndicator) < 0.01 && uv.y > 0.95) {\n                gradientColor = vec3(1.0);\n            }\n\n            // Add position markers\n            if (uv.y > 0.95) {\n                if (abs(uv.x - 0.05) < 0.01 || abs(uv.x - 0.95) < 0.01) {\n                    gradientColor = vec3(0.7);\n                }\n            }\n        }\n\n        FragColor = vec4(gradientColor, 1.0);\n        return;\n    }\n\n    // Calculate target size for consistent rendering across different screen sizes\n    float targetSize = min(u_ViewWidth, u_ViewHeight) * 0.7 * 1.25;\n\n    // Center and scale UV coordinates\n    vec2 centeredUV = v_TexCoord - 0.5;\n    float scaleFactorX = u_ViewWidth / targetSize;\n    float scaleFactorY = u_ViewHeight / targetSize;\n    vec2 scaledUV = vec2(centeredUV.x * scaleFactorX, centeredUV.y * scaleFactorY);\n    vec2 adjustedUV = scaledUV + 0.5;\n\n    // Convert to [-1,1] range and apply full scale\n    vec2 uv = (adjustedUV * 2.0 - 1.0) / u_FullScale;\n\n    // Use stored angles directly - they already include both base rotation and animation\n    float containerRotation0 = rotationAngles[0] * M_PI / 180.0;\n    float containerRotation1 = rotationAngles[1] * M_PI / 180.0;\n    float containerRotation2 = rotationAngles[2] * M_PI / 180.0;\n\n    vec2 rotatedContainerUV0 = mai_voice_embodiment_rotate2D(uv, containerRotation0);\n    vec2 rotatedContainerUV1 = mai_voice_embodiment_rotate2D(uv, containerRotation1);\n    vec2 rotatedContainerUV2 = mai_voice_embodiment_rotate2D(uv, containerRotation2);\n\n    // Map UV from [-1,1] to [0,1] for the container mask space\n    vec2 containerUV0 = (rotatedContainerUV0 + 1.0) * 0.5;\n    vec2 containerUV1 = (rotatedContainerUV1 + 1.0) * 0.5;\n    vec2 containerUV2 = (rotatedContainerUV2 + 1.0) * 0.5;\n\n    // Calculate the corresponding positions in the gradient layer\n    // The gradient layer is 3.6 units wide and slides within a range of 2.6 units\n    vec2 gradientUV0, gradientUV1, gradientUV2;\n\n    // Apply the same gradient positioning logic as in the debug view\n    gradientUV0.x = gradientPositions[0] + containerUV0.x;\n    gradientUV0.y = containerUV0.y;\n\n    gradientUV1.x = gradientPositions[1] + containerUV1.x;\n    gradientUV1.y = containerUV1.y;\n\n    gradientUV2.x = gradientPositions[2] + containerUV2.x;\n    gradientUV2.y = containerUV2.y;\n\n    // Sample the gradient at the calculated 2D positions\n    vec4 gradientColor0 = vec4(mai_voice_embodiment_sampleGradient(gradientUV0), 1.0);\n    vec4 gradientColor1 = vec4(mai_voice_embodiment_sampleGradient(gradientUV1), 1.0);\n    vec4 gradientColor2 = vec4(mai_voice_embodiment_sampleGradient(gradientUV2), 1.0);\n\n    // Add color blend overlay layer (#839EB5) only in disconnected state\n    vec3 overlayColor = vec3(0.514, 0.620, 0.710);\n    if (u_DisconnectedOverlayOpacity > 0.0) {\n        gradientColor0.rgb = mix(gradientColor0.rgb, mai_voice_embodiment_applyColorBlend(gradientColor0.rgb, overlayColor), u_DisconnectedOverlayOpacity);\n        gradientColor1.rgb = mix(gradientColor1.rgb, mai_voice_embodiment_applyColorBlend(gradientColor1.rgb, overlayColor), u_DisconnectedOverlayOpacity);\n        gradientColor2.rgb = mix(gradientColor2.rgb, mai_voice_embodiment_applyColorBlend(gradientColor2.rgb, overlayColor), u_DisconnectedOverlayOpacity);\n    }\n\n    // Compute UVs for each blob using their scales\n    vec2 outerUV0 = uv / u_OuterScale[0];\n    vec2 innerUV0 = uv / u_InnerScale[0];\n    vec2 outerUV1 = uv / u_OuterScale[1];\n    vec2 innerUV1 = uv / u_InnerScale[1];\n    vec2 outerUV2 = uv / u_OuterScale[2];\n    vec2 innerUV2 = uv / u_InnerScale[2];\n\n    // Calculate blob shapes\n    MAIVoiceEmbodimentBlobShapeInfo outerShape0 = mai_voice_embodiment_calculateBlobShape(outerUV0, 1.0, u_Time, u_OuterDistortionIntensity, u_OuterBlurRadius, 0, u_RespondingEdgeBlur, true);\n    MAIVoiceEmbodimentBlobShapeInfo innerShape0 = mai_voice_embodiment_calculateBlobShape(innerUV0, 1.0, u_Time + 0.5, u_InnerDistortionIntensity, u_InnerBlurRadius, 0, 0.0, false);\n\n    MAIVoiceEmbodimentBlobShapeInfo outerShape1 = mai_voice_embodiment_calculateBlobShape(outerUV1, 1.0, u_Time, u_OuterDistortionIntensity, u_OuterBlurRadius, 1, u_RespondingEdgeBlur, true);\n    MAIVoiceEmbodimentBlobShapeInfo innerShape1 = mai_voice_embodiment_calculateBlobShape(innerUV1, 1.0, u_Time + 0.5, u_InnerDistortionIntensity, u_InnerBlurRadius, 1, 0.0, false);\n\n    MAIVoiceEmbodimentBlobShapeInfo outerShape2 = mai_voice_embodiment_calculateBlobShape(outerUV2, 1.0, u_Time, u_OuterDistortionIntensity, u_OuterBlurRadius, 2, u_RespondingEdgeBlur, true);\n    MAIVoiceEmbodimentBlobShapeInfo innerShape2 = mai_voice_embodiment_calculateBlobShape(innerUV2, 1.0, u_Time + 0.5, u_InnerDistortionIntensity, u_InnerBlurRadius, 2, 0.0, false);\n\n    // Compute ring masks\n    float a0 = max(0.0, outerShape0.alpha - innerShape0.alpha) * u_BlobOpacity[0];\n    float a1 = max(0.0, outerShape1.alpha - innerShape1.alpha) * u_BlobOpacity[1];\n    float a2 = max(0.0, outerShape2.alpha - innerShape2.alpha) * u_BlobOpacity[2];\n\n    // Handle default state for blob 1\n    if (u_ActiveBlob == 0 && u_DefaultLayerOpacity > 0.001) {\n        vec4 background = vec4(0.0, 0.278, 0.839, 1.0);         // #0047D6\n        vec4 lightBlueGradient = vec4(0.0, 0.502, 1.0, 1.0);    // #0080FF\n        vec4 purpleGradient = vec4(0.431, 0.106, 0.882, 1.0);   // #6E1BE1\n        vec4 tealGradient = vec4(0.0, 0.851, 0.667, 1.0);       // #00D9AA\n        vec4 pinkGradient = vec4(0.98, 0.431, 0.871, 1.0);      // #FA6EDE\n\n        // Apply rotation to default layer without affecting scale\n        vec2 defaultLayerUV = adjustedUV - vec2(0.5);\n        vec2 rotatedUV = mai_voice_embodiment_rotate2D(defaultLayerUV, u_DefaultLayerRotation) + vec2(0.5);\n\n        vec4 lightBlueGrad = mai_voice_embodiment_radialGradient(rotatedUV, vec2(0.18, 0.18), 0.48, 0.24, lightBlueGradient);\n        vec4 purpleGrad = mai_voice_embodiment_radialGradient(rotatedUV, vec2(0.82, 0.82), 0.48, 0.24, purpleGradient);\n        vec4 tealGrad = mai_voice_embodiment_radialGradient(rotatedUV, vec2(0.1, 0.1), 0.32, 0.16, tealGradient);\n        vec4 pinkGrad = mai_voice_embodiment_radialGradient(rotatedUV, vec2(0.9, 0.9), 0.32, 0.16, pinkGradient);\n\n        vec3 result = background.rgb;\n        float resultAlpha = background.a;\n\n        // Layer the gradients in order.\n        // For light blue and purple use proper screen blend mode:\n        result = vec3(1.0) - (vec3(1.0) - result) * (vec3(1.0) - lightBlueGrad.rgb * lightBlueGrad.a);\n        resultAlpha = max(lightBlueGrad.a, resultAlpha);\n\n        result = vec3(1.0) - (vec3(1.0) - result) * (vec3(1.0) - purpleGrad.rgb * purpleGrad.a);\n        resultAlpha = max(purpleGrad.a, resultAlpha);\n\n        // For teal and pink use normal blend mode\n        result = mix(result, tealGrad.rgb, tealGrad.a);\n        resultAlpha = max(tealGrad.a, resultAlpha);\n\n        result = mix(result, pinkGrad.rgb, pinkGrad.a);\n        resultAlpha = max(pinkGrad.a, resultAlpha);\n\n        // Stroke parameters defined as percentages of canvas size\n        float outerStrokeRadius = u_OuterScale[0] * 0.5;      // Use half of outerScale for blob 0\n        float outerStrokeWidth = 0.032 * 2.0;     // 3.2% of canvas - total width (doubled for [-1,1] space)\n        float outerStrokeAlpha = 0.6;       // 60% opacity\n        float outerStrokeBlur = 0.04;       // 4% blur radius\n\n        float innerStrokeRadius = u_InnerScale[0] * 0.5;    // Use half of innerScale for blob 0\n        float innerStrokeWidth = 0.04 * 2.0;      // 4% of canvas - total width (doubled for [-1,1] space)\n        float innerStrokeAlpha = 0.7;       // 70% opacity\n        float innerStrokeBlur = 0.04;       // 4% blur radius\n\n        // Calculate half-widths for the strokes\n        float halfOuterWidth = outerStrokeWidth * 0.5;\n        float halfInnerWidth = innerStrokeWidth * 0.5;\n\n        // Create stroke masks\n        vec2 normalizedUV = (adjustedUV - 0.5) * 2.0;\n        float distFromCenter = length(normalizedUV);\n\n        // Calculate distances from the stroke center lines\n        float outerDist = abs(distFromCenter - outerStrokeRadius * 2.0);\n        float innerDist = abs(distFromCenter - innerStrokeRadius * 2.0);\n\n        // Create blurred stroke masks using error function\n        float outerStroke = 0.5 * (1.0 + mai_voice_embodiment_erf_approx((halfOuterWidth - outerDist) / (outerStrokeBlur * sqrt(2.0))));\n        float innerStroke = 0.5 * (1.0 + mai_voice_embodiment_erf_approx((halfInnerWidth - innerDist) / (innerStrokeBlur * sqrt(2.0))));\n\n        // Create stroke layers\n        vec3 strokeColor = vec3(1.0);  // Pure white\n        vec4 baseLayer = vec4(result, resultAlpha);\n\n        // Apply outer stroke - soft light blend with alpha\n        vec3 softLightOuter = mai_voice_embodiment_softLight(baseLayer.rgb, strokeColor);\n        vec3 withOuterStroke = mix(\n            baseLayer.rgb,\n            softLightOuter,\n            outerStroke * outerStrokeAlpha\n        );\n\n        // Apply inner stroke - soft light blend with alpha\n        vec3 softLightInner = mai_voice_embodiment_softLight(withOuterStroke, strokeColor);\n        vec3 withBothStrokes = mix(\n            withOuterStroke,\n            softLightInner,\n            innerStroke * innerStrokeAlpha\n        );\n\n        float ringMask = max(0.0, outerShape0.alpha - innerShape0.alpha);\n        vec3 maskedResult = withBothStrokes * ringMask;\n        gradientColor0.rgb = mix(gradientColor0.rgb, maskedResult, u_DefaultLayerOpacity);\n    }\n\n    // Render only active blob if not blob 1\n    if (u_ActiveBlob != 0) {\n        float mask;\n        vec4 blobColor;\n        if (u_ActiveBlob == 1) {\n            mask = a1;\n            blobColor = gradientColor1;\n        } else {\n            mask = a2;\n            blobColor = gradientColor2;\n        }\n        FragColor = vec4(blobColor.rgb * mask, mask);\n        return;\n    }\n\n    // Composite all three blobs\n    float outAlpha01 = a0 + a1 * (1.0 - a0);\n    vec3 compColor01;\n    if (outAlpha01 > 0.0001) {\n        compColor01 = (gradientColor0.rgb * a0 + gradientColor1.rgb * a1 * (1.0 - a0)) / outAlpha01;\n    } else {\n        compColor01 = vec3(0.0);\n    }\n\n    float outAlpha = outAlpha01 + a2 * (1.0 - outAlpha01);\n    vec3 compColor;\n    if (outAlpha > 0.0001) {\n        compColor = (compColor01 * outAlpha01 + gradientColor2.rgb * a2 * (1.0 - outAlpha01)) / outAlpha;\n    } else {\n        compColor = vec3(0.0);\n    }\n\n    FragColor = vec4(compColor * outAlpha, outAlpha);\n}",l=e;i.default=l}),66);
__d("VoiceEmbodimentViewVertex",[],(function(t,n,r,o,a,i){"use strict";var e="#version 300 es\nprecision highp float;\nprecision highp int;\n\n// Input vertex data\nlayout(location = 0) in vec2 position;  // Normalized device coordinates (-1 to 1)\n\n// Output texture coordinates to fragment shader\nout vec2 v_TexCoord;\n\n// Uniforms matching the Metal shader\nuniform float u_ContainerScale;\n\nvoid main() {\n    // Scale vertex position by container scale for proper sizing\n    vec2 scaledPosition = position * u_ContainerScale;\n\n    // Output position in clip space\n    gl_Position = vec4(scaledPosition, 0.0, 1.0);\n\n    // Convert position to UV coordinates [0,1] without scaling\n    // This ensures texture coordinates are always in the full range\n    v_TexCoord = position * 0.5 + 0.5;\n}",l=e;i.default=l}),66);
__d("VoiceEmbodimentView",["VoiceEmbodimentViewShader","VoiceEmbodimentViewVertex","emptyFunction","err","getErrorSafe","performance"],(function(t,n,r,o,a,i,l){"use strict";var e,s=6,u=3,c=10,d=1.15,m=.25,p={ExtraLarge:{defaultInnerScale:[.592,.592,.592],defaultOuterScale:[.8,.8,.8],disconnectedInnerScale:[.73,.76,.8],disconnectedOuterScale:[.92,.92,.92],listeningBaseInnerScale:[.67,.67,.67],listeningOuterScale:[.9,.9,.9],listeningSpeedRange:[1.5,3.9],respondingBaseOuterScale:[.82,.82,.82],respondingInnerScale:[.67,.67,.67],respondingSpeedRange:[2.5,4.5],volumeRangeInnerDistortion:[8,12.5],volumeRangeInnerScale:[.72,.7],volumeRangeOuterDistortion:[8,12],volumeRangeOuterScale:[.79,.85]},Small:{defaultInnerScale:[.546,.546,.546],defaultOuterScale:[.8,.8,.8],disconnectedInnerScale:[.674,.701,.738],disconnectedOuterScale:[.92,.92,.92],listeningBaseInnerScale:[.618,.618,.618],listeningOuterScale:[.9,.9,.9],listeningSpeedRange:[1.5,3.9],respondingBaseOuterScale:[.82,.82,.82],respondingInnerScale:[.618,.618,.618],respondingSpeedRange:[2.5,4.5],volumeRangeInnerDistortion:[8,12.5],volumeRangeInnerScale:[.72,.7],volumeRangeOuterDistortion:[8,12],volumeRangeOuterScale:[.79,.85]}},_={defaultState:[1,0,0],disconnectedState:[.721,.781,1],listeningState:[.721,.781,1],respondingState:[.65,.72,1]},f=.8,g=[1,1,1],h=[1,1,1],y=0,C=.7,b=1.2,v=1,S=.2,R=[[2,3],[3,-2.4],[1,1.5],[4,-.9],[1,.6]],L=function(t,n,r){return t+(n-t)*r},E=function(t,n,r,o,a,i,l,s,u){return t===void 0&&(t=0),n===void 0&&(n=0),r===void 0&&(r=0),o===void 0&&(o=0),a===void 0&&(a=[1,1,1]),i===void 0&&(i=[.8,.8,.8]),l===void 0&&(l=[.592,.592,.592]),s===void 0&&(s=0),u===void 0&&(u=1),{containerScale:u,innerBlur:o,innerIntensity:n,innerScale:l,opacity:a,outerBlur:r,outerIntensity:t,outerScale:i,rotation:s}},k=function(t,n,r){return{containerScale:t.containerScale+(n.containerScale-t.containerScale)*r,innerBlur:t.innerBlur+(n.innerBlur-t.innerBlur)*r,innerIntensity:t.innerIntensity+(n.innerIntensity-t.innerIntensity)*r,innerScale:[t.innerScale[0]+(n.innerScale[0]-t.innerScale[0])*r,t.innerScale[1]+(n.innerScale[1]-t.innerScale[1])*r,t.innerScale[2]+(n.innerScale[2]-t.innerScale[2])*r],opacity:[t.opacity[0]+(n.opacity[0]-t.opacity[0])*r,t.opacity[1]+(n.opacity[1]-t.opacity[1])*r,t.opacity[2]+(n.opacity[2]-t.opacity[2])*r],outerBlur:t.outerBlur+(n.outerBlur-t.outerBlur)*r,outerIntensity:t.outerIntensity+(n.outerIntensity-t.outerIntensity)*r,outerScale:[t.outerScale[0]+(n.outerScale[0]-t.outerScale[0])*r,t.outerScale[1]+(n.outerScale[1]-t.outerScale[1])*r,t.outerScale[2]+(n.outerScale[2]-t.outerScale[2])*r],rotation:t.rotation+(n.rotation-t.rotation)*r}},I=(function(){function t(e){var n=this;this.size=t.Size.ExtraLarge,this.previousSize=t.Size.ExtraLarge,this.blobProperties=p[this.size],this.defaultLayerOpacity=1,this.outerDistortionIntensity=10,this.innerDistortionIntensity=10.5,this.disconnectedOverlayOpacity=0,this.currentDefaultLayerSpeed=0,this.targetDefaultLayerSpeed=0,this.currentRotationAngle=0,this.targetRotationAngle=0,this.isReturningToZero=!1,this.targetState=t.State.None,this.previousState=t.State.None,this.currentAnimationSpeed=2.8,this.disconnectedStateSpeed=2,this.respondingOuterScale=this.blobProperties.respondingBaseOuterScale,this.listeningInnerScale=this.blobProperties.listeningBaseInnerScale,this.animationPhases=Array(5).fill(0),this.lastUpdateTime=0,this.currentDeltaTime=1/60,this.thinkingPulseBlend=1,this.gradientTime=0,this.transitionProgress=1,this.isTransitioning=!1,this.pendingStateTransition=null,this.currentContainerScale=1,this.targetContainerScale=1,this.connectingAnimationProgress=0,this.isConnectingAnimationComplete=!1,this.connectingAnimationDuration=10,this.connectingScaleStart=.65,this.connectingScaleEnd=.72,this.thinkingPulseRotation=0,this.thinkingPulseProgress=0,this.savedThinkingPulseProgress=null,this.thinkingPulseAccumulator=0,this.savedThinkingPulseAccumulator=null,this.thinkingPulseDuration=2,this.thinkingPulseAmount=-Math.PI*2,this.isReturningThinkingPulseToZero=!1,this.targetThinkingPulseRotation=0,this.thinkingPulseResetSpeed=5,this.kMinVolume=.17,this.kMaxVolume=1,this.kMaxSamples=10,this.volumeValues=[],this.currentVolume=0,this.targetVolumeVelocity=0,this.currentVolumeVelocity=0,this.targetVolumeValue=.5,this.volumeEasingSpeed=5,this.volumeEasingMinStep=.005,this.showGradientDebug=!1,this.currentViewWidth=0,this.currentViewHeight=0,this.currentContainerSize=0,this.isDefaultLayerRotating=!1,this.$1=t.State.None,this.volumeValue=.5,this.currentTransitionValues=E(0,0,0,0,[1,1,1],this.blobProperties.defaultOuterScale,this.blobProperties.defaultInnerScale,0),this.startTransitionValues=null,this.animationFrameId=null,this.targetFps=60,this.frameInterval=1e3/this.targetFps,this.maxTimeDelta=100,this.shaderBackgroundColor=[0,0,0],this.shaderBackgroundAlpha=0,this.isAnimating=!1,this.getBlobProperties=function(){return n.blobProperties},this.getVolumeValue=function(){return n.volumeValue},this.debugSetVolumeFromSlider=function(e){n.targetVolumeValue=e,n.volumeValue=e},this.setVolumeValue=function(e){if(n.volumeValue=e,n.state!==t.State.Disconnected){var r=L(n.blobProperties.listeningSpeedRange[0],n.blobProperties.listeningSpeedRange[1],n.volumeValue),o=L(n.blobProperties.respondingSpeedRange[0],n.blobProperties.respondingSpeedRange[1],n.volumeValue),a=0;switch(n.state){case t.State.Listening:n.previousState===t.State.Responding?a=1-n.transitionProgress:a=0;break;case t.State.Responding:n.previousState===t.State.Listening?a=n.transitionProgress:a=1;break;default:a=0}n.currentAnimationSpeed=L(r,o,a)}n.outerDistortionIntensity=L(n.blobProperties.volumeRangeOuterDistortion[0],n.blobProperties.volumeRangeOuterDistortion[1],n.volumeValue),n.innerDistortionIntensity=L(n.blobProperties.volumeRangeInnerDistortion[0],n.blobProperties.volumeRangeInnerDistortion[1],n.volumeValue);var i=L(n.blobProperties.volumeRangeOuterScale[0],n.blobProperties.volumeRangeOuterScale[1],n.volumeValue);n.respondingOuterScale=[i,i,i];var l=L(n.blobProperties.volumeRangeInnerScale[0],n.blobProperties.volumeRangeInnerScale[1],n.volumeValue);n.listeningInnerScale=[l,l,l]},this.canvas=e,this.width=e.width||e.clientWidth||300,this.height=e.height||e.clientHeight||300,e.width||(e.width=this.width),e.height||(e.height=this.height),this.initWebGL()}t.getStateTitle=function(n){switch(n){case t.State.None:return"None";case t.State.Connecting:return"Connecting";case t.State.Listening:return"Listening";case t.State.NotListening:return"Not Listening";case t.State.Responding:return"Responding";case t.State.Thinking:return"Thinking";case t.State.Disconnected:return"Disconnected";default:return"Unknown"}};var n=t.prototype;return n.containerSize=function(){if(this.currentContainerSize&&this.currentContainerSize>0)return this.currentContainerSize;var e=Math.min(this.width,this.height);return this.currentContainerSize=e,e},n.aspectFitBoundSize=function(){return this.containerSize()},n.glViewExtension=function(){var e=this.aspectFitBoundSize();return(e/.7-e)/2},n.setDefaultLayerRotating=function(t){if(this.isDefaultLayerRotating=t,t)this.targetDefaultLayerSpeed=70,this.isReturningToZero=!1;else{var e=2*Math.PI,n=this.currentRotationAngle%e;this.targetRotationAngle=this.currentRotationAngle-n-e,this.targetDefaultLayerSpeed=0,this.isReturningToZero=!0}},n.setState=function(n){r("emptyFunction")("[VoiceEmbodiment] setState called with: "+t.getStateTitle(n)),this.state=n},n.getEffectiveAnimationSpeed=function(){return this.state===t.State.Disconnected?this.disconnectedStateSpeed:this.currentAnimationSpeed},n.targetTransitionValues=function(){switch(this.targetState){case t.State.None:case t.State.Thinking:case t.State.NotListening:default:return E(0,0,0,0,_.defaultState,this.blobProperties.defaultOuterScale,this.blobProperties.defaultInnerScale,0,1);case t.State.Connecting:return E(0,0,0,0,_.defaultState,this.blobProperties.defaultOuterScale,this.blobProperties.defaultInnerScale,0,this.connectingScaleStart);case t.State.Disconnected:return E(0,6,0,b,_.disconnectedState,this.blobProperties.disconnectedOuterScale,this.blobProperties.disconnectedInnerScale,0,1);case t.State.Listening:return E(0,this.innerDistortionIntensity,0,b,_.listeningState,this.blobProperties.listeningOuterScale,this.listeningInnerScale,0,1);case t.State.Responding:return E(this.outerDistortionIntensity,0,C,0,_.respondingState,this.respondingOuterScale,this.blobProperties.respondingInnerScale,0,1)}},n.effectiveOuterIntensity=function(){if(this.isTransitioning)return this.currentTransitionValues.outerIntensity;switch(this.state){case t.State.None:case t.State.Connecting:case t.State.Listening:case t.State.NotListening:case t.State.Disconnected:case t.State.Thinking:default:return 0;case t.State.Responding:return this.outerDistortionIntensity}},n.effectiveInnerIntensity=function(){if(this.isTransitioning)return this.currentTransitionValues.innerIntensity;switch(this.state){case t.State.None:case t.State.NotListening:case t.State.Responding:case t.State.Connecting:case t.State.Thinking:default:return 0;case t.State.Disconnected:return 6;case t.State.Listening:return this.innerDistortionIntensity}},n.effectiveOuterBlur=function(){if(this.isTransitioning)return this.currentTransitionValues.outerBlur;switch(this.state){case t.State.None:case t.State.NotListening:case t.State.Connecting:case t.State.Listening:case t.State.Disconnected:case t.State.Thinking:default:return 0;case t.State.Responding:return C}},n.effectiveInnerBlur=function(){if(this.isTransitioning)return this.currentTransitionValues.innerBlur;switch(this.state){case t.State.None:case t.State.NotListening:case t.State.Connecting:case t.State.Responding:case t.State.Thinking:default:return 0;case t.State.Listening:case t.State.Disconnected:return b}},n.effectiveOpacity=function(){if(this.isTransitioning)return this.currentTransitionValues.opacity;switch(this.state){case t.State.None:case t.State.NotListening:case t.State.Connecting:case t.State.Thinking:default:return _.defaultState;case t.State.Disconnected:return _.disconnectedState;case t.State.Listening:return _.listeningState;case t.State.Responding:return _.respondingState}},n.effectiveOuterScale=function(){if(this.isTransitioning)return this.currentTransitionValues.outerScale;switch(this.state){case t.State.None:case t.State.NotListening:case t.State.Connecting:case t.State.Thinking:default:return this.blobProperties.defaultOuterScale;case t.State.Disconnected:return this.blobProperties.disconnectedOuterScale;case t.State.Listening:return this.blobProperties.listeningOuterScale;case t.State.Responding:return this.respondingOuterScale}},n.effectiveInnerScale=function(){if(this.isTransitioning)return this.currentTransitionValues.innerScale;switch(this.state){case t.State.None:case t.State.NotListening:case t.State.Connecting:case t.State.Thinking:default:return this.blobProperties.defaultInnerScale;case t.State.Disconnected:return this.blobProperties.disconnectedInnerScale;case t.State.Listening:return this.listeningInnerScale;case t.State.Responding:return this.blobProperties.respondingInnerScale}},n.effectiveRespondingEdgeBlur=function(){return this.isTransitioning?this.targetState===t.State.Responding&&this.previousState!==t.State.Responding?L(0,S,this.transitionProgress):this.previousState===t.State.Responding&&this.targetState!==t.State.Responding?L(S,0,this.transitionProgress):0:this.state===t.State.Responding?S:0},n.loadShader=function(t,n){var e;if(n==="shaders/web_voice_embodiment_vertex.glsl")e=r("VoiceEmbodimentViewVertex");else if(n==="shaders/web_voice_embodiment_shader.glsl")e=r("VoiceEmbodimentViewShader");else throw r("err")("Failed to load shader from "+n);var o=this.gl;if(!o)return null;var a=o.createShader(t);if(e!==void 0&&a){if(o.shaderSource(a,e),o.compileShader(a),!o.getShaderParameter(a,o.COMPILE_STATUS)){var i=o.getShaderInfoLog(a);throw o.deleteShader(a),r("err")("Failed to compile shader: "+String(i))}return a}},n.initWebGL=function(){if(this.gl=this.canvas.getContext("webgl2",{alpha:!0,antialias:!0,depth:!1,powerPreference:"default",premultipliedAlpha:!0,preserveDrawingBuffer:!1,stencil:!1}),!this.gl)throw r("err")("WebGL 2 is not supported in your browser");var e=this.gl;r("emptyFunction")("Loading shaders...");var t=this.loadShader(e.VERTEX_SHADER,"shaders/web_voice_embodiment_vertex.glsl"),n=this.loadShader(e.FRAGMENT_SHADER,"shaders/web_voice_embodiment_shader.glsl");if(this.program=e.createProgram(),e.attachShader(this.program,t),e.attachShader(this.program,n),e.linkProgram(this.program),!e.getProgramParameter(this.program,e.LINK_STATUS)){var o=e.getProgramInfoLog(this.program);throw r("err")("Unable to initialize the shader program: "+String(o))}var a=new Float32Array([-1,-1,1,-1,-1,1,1,1]);this.vertexBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,a,e.STATIC_DRAW),this.positionAttrib=e.getAttribLocation(this.program,"position"),e.enableVertexAttribArray(this.positionAttrib),this.uniformLocations={activeBlob:e.getUniformLocation(this.program,"u_ActiveBlob"),animationSpeed:e.getUniformLocation(this.program,"u_AnimationSpeed"),backgroundAlpha:e.getUniformLocation(this.program,"u_BackgroundAlpha"),backgroundColor:e.getUniformLocation(this.program,"u_BackgroundColor"),blobOpacity:e.getUniformLocation(this.program,"u_BlobOpacity"),circleProgress:e.getUniformLocation(this.program,"u_CircleProgress"),containerScale:e.getUniformLocation(this.program,"u_ContainerScale"),containerSize:e.getUniformLocation(this.program,"u_ContainerSize"),defaultLayerOpacity:e.getUniformLocation(this.program,"u_DefaultLayerOpacity"),defaultLayerRotation:e.getUniformLocation(this.program,"u_DefaultLayerRotation"),disconnectedOverlayOpacity:e.getUniformLocation(this.program,"u_DisconnectedOverlayOpacity"),frequencies:e.getUniformLocation(this.program,"u_Frequencies"),fullScale:e.getUniformLocation(this.program,"u_FullScale"),gradientPosition:e.getUniformLocation(this.program,"u_GradientPosition"),innerBlurRadius:e.getUniformLocation(this.program,"u_InnerBlurRadius"),innerDistortionIntensity:e.getUniformLocation(this.program,"u_InnerDistortionIntensity"),innerScale:e.getUniformLocation(this.program,"u_InnerScale"),innerWaviness:e.getUniformLocation(this.program,"u_InnerWaviness"),outerBlurRadius:e.getUniformLocation(this.program,"u_OuterBlurRadius"),outerDistortionIntensity:e.getUniformLocation(this.program,"u_OuterDistortionIntensity"),outerScale:e.getUniformLocation(this.program,"u_OuterScale"),outerWaviness:e.getUniformLocation(this.program,"u_OuterWaviness"),respondingEdgeBlur:e.getUniformLocation(this.program,"u_RespondingEdgeBlur"),showGradientDebug:e.getUniformLocation(this.program,"u_ShowGradientDebug"),speeds:e.getUniformLocation(this.program,"u_Speeds"),time:e.getUniformLocation(this.program,"u_Time"),viewHeight:e.getUniformLocation(this.program,"u_ViewHeight"),viewWidth:e.getUniformLocation(this.program,"u_ViewWidth")},this.width=this.canvas.width,this.height=this.canvas.height,this.currentContainerSize=this.containerSize(),this.currentViewWidth=this.width,this.currentViewHeight=this.height,r("emptyFunction")("WebGL initialization complete"),this.startAnimation()},n.handleResize=function(){var e=window.devicePixelRatio||1,t=this.canvas.clientWidth,n=this.canvas.clientHeight;this.width=t,this.height=n,this.currentViewWidth=t,this.currentViewHeight=n,this.currentContainerSize=Math.min(t,n);var o=this.currentContainerSize,a=(t-o)/2,i=(n-o)/2;this.gl&&((this.canvas.width!==t*e||this.canvas.height!==n*e)&&(this.canvas.width=t*e,this.canvas.height=n*e),this.gl.viewport(a*e,i*e,o*e,o*e),r("emptyFunction")("Resize handled by VoiceEmbodimentView:",{containerSize:o,dpr:e,viewportOffset:{x:a,y:i}}),this.render())},n.startAnimation=function(){var t=this;r("emptyFunction")("Starting animation loop"),this.lastUpdateTime=(e||(e=r("performance"))).now(),this.isAnimating=!0;var n=function(o){t.lastUpdateTime||(t.lastUpdateTime=o-1e3/60);var e=o-t.lastUpdateTime;if(e>1e3){t.lastUpdateTime=o,t.animationFrameId=window.requestAnimationFrame(n);return}var a=Math.min(e,t.maxTimeDelta)/1e3;t.lastUpdateTime=o,t.currentDeltaTime=a;var i=t.canvas.clientWidth,l=t.canvas.clientHeight;(i!==t.currentViewWidth||l!==t.currentViewHeight)&&t.handleResize();try{t.displayTick(a),t.render()}catch(e){var s=r("getErrorSafe")(e);r("emptyFunction")("Error in animation loop:",s),r("emptyFunction")("Animation error details:",s.message,s.stack)}t.animationFrameId=window.requestAnimationFrame(n)};this.animationFrameId=window.requestAnimationFrame(n)},n.displayTick=function(n){if(this.isReturningToZero){var e=this.targetRotationAngle-this.currentRotationAngle;if(Math.abs(e)>.01){var r=e*3;this.currentRotationAngle+=r*n}else this.currentRotationAngle=this.targetRotationAngle,this.isReturningToZero=!1}else this.isDefaultLayerRotating&&(this.currentRotationAngle+=this.currentDefaultLayerSpeed*n*(-Math.PI/180));var o=.15;if(this.currentDefaultLayerSpeed+=(this.targetDefaultLayerSpeed-this.currentDefaultLayerSpeed)*o,this.isTransitioning){this.transitionProgress=Math.min(1,this.transitionProgress+n/f);var a=T(this.transitionProgress),i=this.startTransitionValues;if(i){var l=this.targetTransitionValues();l&&(this.currentTransitionValues=k(i,l,a))}this.transitionProgress>=1&&(this.isTransitioning=!1,this.startTransitionValues=null,this.state===t.State.Connecting&&(this.connectingAnimationProgress=0,this.isConnectingAnimationComplete=!1),this.state===t.State.Thinking&&(this.thinkingPulseProgress=0,this.thinkingPulseRotation=0),this.pendingStateTransition!==null&&(this.pendingStateTransition=null))}if(this.state===t.State.Connecting&&!this.isTransitioning&&!this.isConnectingAnimationComplete){var s=n/this.connectingAnimationDuration;this.connectingAnimationProgress=Math.min(1,this.connectingAnimationProgress+s);var u=1-Math.pow(1-this.connectingAnimationProgress,3),c=this.connectingScaleStart+(this.connectingScaleEnd-this.connectingScaleStart)*u;this.currentContainerScale=c,this.connectingAnimationProgress>=1&&(this.isConnectingAnimationComplete=!0)}if(this.isReturningThinkingPulseToZero){var d=this.targetThinkingPulseRotation-this.thinkingPulseRotation;if(Math.abs(d)>.01){var m=d*3;this.thinkingPulseRotation+=m*n}else this.thinkingPulseRotation=this.targetThinkingPulseRotation,this.isReturningThinkingPulseToZero=!1}else if(this.state===t.State.Thinking&&!this.isTransitioning){this.thinkingPulseProgress+=n/this.thinkingPulseDuration,this.thinkingPulseProgress>=1&&(this.thinkingPulseProgress-=1);var p=this.thinkingPulseProgress,_=p<.5?4*p*p*p:1+4*Math.pow(p-1,3);this.thinkingPulseRotation=this.thinkingPulseAmount*_}var g=.55,h=.1,y=g+(this.getEffectiveAnimationSpeed()-g)*h;this.gradientTime+=n*y;for(var C=[],b=0;b<this.animationPhases.length;b++){var v=R[b][1]*this.getEffectiveAnimationSpeed(),S=this.animationPhases[b]+v*n;(S>1e3||S<-1e3)&&(S%=2*Math.PI),C.push(S)}this.animationPhases=C;var L=3;if([t.State.None,t.State.NotListening,t.State.Connecting,t.State.Thinking].includes(this.state)?this.defaultLayerOpacity=Math.min(this.defaultLayerOpacity+L*n,1):this.defaultLayerOpacity=Math.max(this.defaultLayerOpacity-L*n,0),this.state===t.State.Disconnected?this.disconnectedOverlayOpacity=Math.min(this.disconnectedOverlayOpacity+.05,1):this.disconnectedOverlayOpacity=Math.max(this.disconnectedOverlayOpacity-.05,0),this.currentVolumeVelocity=this.capDiffValue(this.targetVolumeVelocity,this.currentVolumeVelocity,.005,.001),Math.abs(this.volumeValue-this.targetVolumeValue)>.001){var E=this.targetVolumeValue-this.volumeValue,I=Math.min(Math.abs(E),Math.max(Math.abs(E)*this.volumeEasingSpeed*n,this.volumeEasingMinStep));E>0?this.volumeValue+=I:this.volumeValue-=I}else this.volumeValue=this.targetVolumeValue;this.updateVolumeProperties()},n.updateVolumeProperties=function(){if(this.state!==t.State.Disconnected){var e=L(this.blobProperties.listeningSpeedRange[0],this.blobProperties.listeningSpeedRange[1],this.volumeValue),n=L(this.blobProperties.respondingSpeedRange[0],this.blobProperties.respondingSpeedRange[1],this.volumeValue),r=0;this.state===t.State.Listening?this.previousState===t.State.Responding&&(r=1-this.transitionProgress):this.state===t.State.Responding&&(this.previousState===t.State.Listening?r=this.transitionProgress:r=1),this.currentAnimationSpeed=L(e,n,r)}this.outerDistortionIntensity=L(this.blobProperties.volumeRangeOuterDistortion[0],this.blobProperties.volumeRangeOuterDistortion[1],this.volumeValue),this.innerDistortionIntensity=L(this.blobProperties.volumeRangeInnerDistortion[0],this.blobProperties.volumeRangeInnerDistortion[1],this.volumeValue);var o=L(this.blobProperties.volumeRangeOuterScale[0],this.blobProperties.volumeRangeOuterScale[1],this.volumeValue);this.respondingOuterScale=[o,o,o];var a=L(this.blobProperties.volumeRangeInnerScale[0],this.blobProperties.volumeRangeInnerScale[1],this.volumeValue);this.listeningInnerScale=[a,a,a]},n.render=function(){var e=this.gl;if(e)try{var n,o,a,i,l,s,u,c,d,m,p,_,f,C,b,S,L,E,k,I,T,D,x,$,P,N,M,w;this.width=this.canvas.width,this.height=this.canvas.height,this.currentContainerSize=Math.min(this.width,this.height),this.currentViewWidth=this.width,this.currentViewHeight=this.height;var A=window.devicePixelRatio||1,F=this.currentContainerSize/A,O=(this.width/A-F)/2,B=(this.height/A-F)/2;if(e.viewport(O*A,B*A,F*A,F*A),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),e.useProgram(this.program),this.isTransitioning)this.currentContainerScale=this.currentTransitionValues.containerScale;else if(this.state!==t.State.Connecting){this.targetContainerScale=1;var W=.15,q=this.targetContainerScale-this.currentContainerScale;Math.abs(q)>.001&&(this.currentContainerScale+=q*W)}var U=this.currentRotationAngle;(this.state===t.State.Thinking||this.isReturningThinkingPulseToZero)&&(U+=this.thinkingPulseRotation);var V=this.computeGradientPositions(this.gradientTime)||[0,0,0];e.uniform1f((n=this.uniformLocations)==null?void 0:n.time,this.gradientTime),e.uniform1f((o=this.uniformLocations)==null?void 0:o.outerDistortionIntensity,this.effectiveOuterIntensity()),e.uniform1f((a=this.uniformLocations)==null?void 0:a.innerDistortionIntensity,this.effectiveInnerIntensity()),e.uniform3f((i=this.uniformLocations)==null?void 0:i.innerWaviness,g[0],g[1],g[2]),e.uniform3f((l=this.uniformLocations)==null?void 0:l.outerWaviness,h[0],h[1],h[2]),e.uniform1f((s=this.uniformLocations)==null?void 0:s.circleProgress,y),e.uniform1f((u=this.uniformLocations)==null?void 0:u.animationSpeed,1);var H=R?R.map(function(e){return e[0]}):[0,0,0,0,0];e.uniform1fv((c=this.uniformLocations)==null?void 0:c.frequencies,new Float32Array(H));var G=this.animationPhases||[0,0,0,0,0];e.uniform1fv((d=this.uniformLocations)==null?void 0:d.speeds,new Float32Array(G)),e.uniform1f((m=this.uniformLocations)==null?void 0:m.outerBlurRadius,this.effectiveOuterBlur()),e.uniform1f((p=this.uniformLocations)==null?void 0:p.innerBlurRadius,this.effectiveInnerBlur()),e.uniform1f((_=this.uniformLocations)==null?void 0:_.fullScale,v),e.uniform1f((f=this.uniformLocations)==null?void 0:f.containerScale,this.currentContainerScale);var z=this.currentContainerSize;e.uniform1f((C=this.uniformLocations)==null?void 0:C.viewWidth,z),e.uniform1f((b=this.uniformLocations)==null?void 0:b.viewHeight,z),e.uniform1f((S=this.uniformLocations)==null?void 0:S.containerSize,z);var j=this.effectiveOuterScale()||[.8,.8,.8];e.uniform3f((L=this.uniformLocations)==null?void 0:L.outerScale,j[0],j[1],j[2]);var K=this.effectiveInnerScale()||[.592,.592,.592];e.uniform3f((E=this.uniformLocations)==null?void 0:E.innerScale,K[0],K[1],K[2]),e.uniform3f((k=this.uniformLocations)==null?void 0:k.gradientPosition,V[0],V[1],V[2]);var Q=this.isTransitioning?this.currentTransitionValues.opacity:this.effectiveOpacity(),X=Q||[1,0,0];e.uniform3f((I=this.uniformLocations)==null?void 0:I.blobOpacity,X[0],X[1],X[2]),e.uniform1f((T=this.uniformLocations)==null?void 0:T.defaultLayerOpacity,this.defaultLayerOpacity),e.uniform1f((D=this.uniformLocations)==null?void 0:D.defaultLayerRotation,U),e.uniform1f((x=this.uniformLocations)==null?void 0:x.respondingEdgeBlur,this.effectiveRespondingEdgeBlur()),e.uniform1f(($=this.uniformLocations)==null?void 0:$.disconnectedOverlayOpacity,this.disconnectedOverlayOpacity),e.uniform1i((P=this.uniformLocations)==null?void 0:P.showGradientDebug,this.showGradientDebug?1:0),e.uniform1i((N=this.uniformLocations)==null?void 0:N.activeBlob,0);var Y=this.shaderBackgroundColor||[0,0,0];e.uniform3f((M=this.uniformLocations)==null?void 0:M.backgroundColor,Y[0],Y[1],Y[2]),e.uniform1f((w=this.uniformLocations)==null?void 0:w.backgroundAlpha,this.shaderBackgroundAlpha||0);var J=this.positionAttrib;typeof J=="number"&&(e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.vertexAttribPointer(J,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(J)),e.enable(e.BLEND),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA),e.drawArrays(e.TRIANGLE_STRIP,0,4)}catch(e){var Z=r("getErrorSafe")(e);r("emptyFunction")("Error in render:",Z),r("emptyFunction")("Render error details:",Z.message,Z.stack);return}},n.startNewTransition=function(){switch(this.previousState){case t.State.None:case t.State.NotListening:case t.State.Connecting:case t.State.Disconnected:case t.State.Thinking:break;case t.State.Listening:this.currentTransitionValues.innerIntensity=this.innerDistortionIntensity,this.currentTransitionValues.innerScale=this.listeningInnerScale;break;case t.State.Responding:this.currentTransitionValues.outerIntensity=this.outerDistortionIntensity,this.currentTransitionValues.outerScale=this.respondingOuterScale;break}this.startTransitionValues=E(this.currentTransitionValues.outerIntensity,this.currentTransitionValues.innerIntensity,this.currentTransitionValues.outerBlur,this.currentTransitionValues.innerBlur,this.currentTransitionValues.opacity,this.currentTransitionValues.outerScale,this.currentTransitionValues.innerScale,this.currentTransitionValues.rotation,this.currentContainerScale),this.transitionProgress=0,this.isTransitioning=!0},n.updateTransitionValues=function(){if(this.isTransitioning){var e=T(this.transitionProgress);this.startTransitionValues&&(this.currentTransitionValues=k(this.startTransitionValues,this.targetTransitionValues(),e))}},n.capDiffValue=function(t,n,r,o){var e=t-n;return Math.abs(e)<o?t:n+Math.max(Math.min(e,r),-r)},n.setVoiceEmbodimentViewState=function(t){this.state=t},n.setVoiceEmbodimentViewSize=function(t){if(this.size!==t){this.previousSize=this.size,this.size=t,this.blobProperties=p[t];var e=this.state;this.setState(e)}},n.updateWithVolume=function(t){var e=Math.min(Math.max((t-this.kMinVolume)/(this.kMaxVolume-this.kMinVolume),0),1);this.volumeValues.length>=this.kMaxSamples&&this.volumeValues.pop(),this.volumeValues.unshift(e);var n=this.volumeValues.reduce(function(e,t){return e+t},0),r=Math.min(Math.max(n/this.volumeValues.length,0),1);this.targetVolumeVelocity=Math.max(e-r,0),this.currentVolume=e,this.targetVolumeValue=Math.min(Math.max(e+this.targetVolumeVelocity*6,0),1)},n.setVolume=function(t){this.targetVolumeValue=Math.max(0,Math.min(1,t))},n.setShowGradientDebug=function(t){this.showGradientDebug=t},n.setBackgroundColor=function(t){this.shaderBackgroundColor=[t.r/255,t.g/255,t.b/255],this.shaderBackgroundAlpha=t.a/255},n.destroy=function(){this.animationFrameId&&window.cancelAnimationFrame(this.animationFrameId)},n.computeGradientOffset=function(t,n){var e=Math.max(0,t-n),r=e%s;if(r<u){var o=r/u,a=c,i=1/(1+Math.exp(-a*(o-.5))),l=(i-1/(1+Math.exp(a*.5)))/(1/(1+Math.exp(-a*.5))-1/(1+Math.exp(a*.5)));return 2.6*l}var d=(r-u)/u,m=c,p=1/(1+Math.exp(-m*(d-.5))),_=(p-1/(1+Math.exp(m*.5)))/(1/(1+Math.exp(-m*.5))-1/(1+Math.exp(m*.5)));return 2.6*(1-_)},n.computeGradientPositions=function(t){return[this.computeGradientOffset(t,0),this.computeGradientOffset(t,d),this.computeGradientOffset(t,m)]},n.computeRotationAngles=function(t){var e=35*Math.PI/180,n=315*Math.PI/180,r=135*Math.PI/180,o=e-75*t,a=n-90*Math.max(0,t-d),i=r-70*Math.max(0,t-m);return[o,a,i]},babelHelpers.createClass(t,[{key:"state",get:function(){return this.$1},set:function(n){switch(r("emptyFunction")("[VoiceEmbodiment] State setter called with: "+t.getStateTitle(n)),n){case t.State.Connecting:case t.State.Thinking:case t.State.Disconnected:this.isDefaultLayerRotating||(r("emptyFunction")("[VoiceEmbodiment] Starting rotation for state: "+t.getStateTitle(n)),this.setDefaultLayerRotating(!0));break;case t.State.None:case t.State.Listening:case t.State.NotListening:case t.State.Responding:this.isDefaultLayerRotating&&(r("emptyFunction")("[VoiceEmbodiment] Stopping rotation for state: "+t.getStateTitle(n)),this.setDefaultLayerRotating(!1));break}if(this.$1!==n||this.previousSize!==this.size){if(r("emptyFunction")("[VoiceEmbodiment] State or size changed: state="+t.getStateTitle(this.$1)+" -> "+t.getStateTitle(n)+", size changed="+String(this.previousSize!==this.size)),this.isTransitioning?(r("emptyFunction")("[VoiceEmbodiment] Already transitioning, storing pending state: "+t.getStateTitle(n)),this.pendingStateTransition=n,this.startTransitionValues=E(this.currentTransitionValues.outerIntensity,this.currentTransitionValues.innerIntensity,this.currentTransitionValues.outerBlur,this.currentTransitionValues.innerBlur,this.currentTransitionValues.opacity,this.currentTransitionValues.outerScale,this.currentTransitionValues.innerScale,this.currentTransitionValues.rotation,this.currentContainerScale),this.transitionProgress=0,this.previousState=this.$1,this.targetState=n,r("emptyFunction")("[VoiceEmbodiment] Updated transition: previous="+t.getStateTitle(this.previousState)+", target="+t.getStateTitle(this.targetState))):(r("emptyFunction")("[VoiceEmbodiment] Starting new transition to: "+t.getStateTitle(n)),this.previousState=this.$1,this.targetState=n,this.startNewTransition()),this.$1===t.State.Thinking&&n!==t.State.Thinking){r("emptyFunction")("[VoiceEmbodiment] Exiting thinking state, resetting pulse rotation");var e=this.thinkingPulseRotation%(2*Math.PI),o=0,a=o-e;a>0&&(a-=2*Math.PI),this.targetThinkingPulseRotation=this.thinkingPulseRotation+a,this.isReturningThinkingPulseToZero=!0}this.previousSize=this.size,this.$1=n,r("emptyFunction")("[VoiceEmbodiment] State updated to: "+t.getStateTitle(this.$1))}else r("emptyFunction")("[VoiceEmbodiment] No change in state or size, skipping transition")}}])})();I.State={Connecting:"Connecting",Disconnected:"Disconnected",Listening:"Listening",None:"None",NotListening:"NotListening",Responding:"Responding",Thinking:"Thinking"},I.Size={ExtraLarge:"ExtraLarge",Small:"Small"};var T=function(t){for(var e=.7,n=0,r=0,o=1,a=0,i=1,l=function(n){var t=1-n;return 3*t*t*n*e+3*t*n*n*r+n*n*n},s=function(t){var e=1-t;return 3*e*e*t*n+3*e*t*t*o+t*t*t},u=!1,c=0,d=0;d<8;d++){var m=(a+i)/2,p=l(m);if(Math.abs(p-t)<.001){u=!0,c=m;break}p<t?a=m:i=m}return u||(c=(a+i)/2),s(c)};l.default=I}),98);
__d("KadabraVoiceAnimatedLogo.react",["KDSAnimatedLogo.react","RpGenaiSctpCaptionsGenAIBotStateTypes","VoiceEmbodimentView","ZenonCallsModelTypes","ZenonGenAICallHooks","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useEffect,d=u.useRef,m=u.useState,p=200,_=80,f={fallback:{height:"x1ebt64t",marginTop:"xqui205",width:"x1ozfbi4",$$css:!0}};function g(){var e=o("react-compiler-runtime").c(23),t=o("ZenonGenAICallHooks").useCallState(),n=m(null),a=n[0],i=n[1],l=d(null),u=m(o("RpGenaiSctpCaptionsGenAIBotStateTypes").BotStateType.AMBIENT),_=u[0],g=u[1],h=m(!1),y=h[0],C=h[1],b=o("ZenonGenAICallHooks").useBotState(),v,S;e[0]!==b?(v=function(){return b(g)},S=[b],e[0]=b,e[1]=v,e[2]=S):(v=e[1],S=e[2]),c(v,S);var R,L;e[3]!==a?(R=function(){var e=function(){var e=l.current;e!=null&&(e.destroy(),C(!0))},t=function(){var e=l.current;if(e!=null)try{e.initWebGL(),C(!1)}catch(e){C(!0)}};if(a instanceof HTMLCanvasElement){try{l.current=new(r("VoiceEmbodimentView"))(a)}catch(e){C(!0)}a.addEventListener("webglcontextrestored",t),a.addEventListener("webglcontextlost",e)}return(function(){l.current!=null&&(l.current.destroy(),l.current=null),a instanceof HTMLCanvasElement&&(a.addEventListener("webglcontextrestored",t),a.removeEventListener("webglcontextlost",e))})},L=[a],e[3]=a,e[4]=R,e[5]=L):(R=e[4],L=e[5]),c(R,L);var E;e[6]!==_||e[7]!==t?(E=function(){var e=l.current;if(e!=null){if(t!==o("ZenonCallsModelTypes").ZenonCallState.Connected){e.setState(r("VoiceEmbodimentView").State.None);return}e:switch(_){case o("RpGenaiSctpCaptionsGenAIBotStateTypes").BotStateType.AMBIENT:{e.setState(r("VoiceEmbodimentView").State.NotListening);break e}case o("RpGenaiSctpCaptionsGenAIBotStateTypes").BotStateType.LISTENING:{e.setState(r("VoiceEmbodimentView").State.Listening);break e}case o("RpGenaiSctpCaptionsGenAIBotStateTypes").BotStateType.RESPONDING:{e.setState(r("VoiceEmbodimentView").State.Responding);break e}case o("RpGenaiSctpCaptionsGenAIBotStateTypes").BotStateType.THINKING:e.setState(r("VoiceEmbodimentView").State.Thinking)}}},e[6]=_,e[7]=t,e[8]=E):E=e[8];var k;e[9]!==_||e[10]!==t||e[11]!==a?(k=[a,_,t],e[9]=_,e[10]=t,e[11]=a,e[12]=k):k=e[12],c(E,k);var I;e[13]!==y?(I=y&&s.jsx(r("KDSAnimatedLogo.react"),{animationType:"fade-regular",playing:!0,size:152,xstyle:f.fallback}),e[13]=y,e[14]=I):I=e[14];var T;e[15]!==y?(T={0:{className:"x12qwhre x1hkcv85 x1ncir08 xseoqlg x6c5l4p x3qffmf"},1:{className:"x12qwhre x1hkcv85 x1ncir08 xseoqlg x6c5l4p x1s85apg xbj1t70"}}[!!y<<0],e[15]=y,e[16]=T):T=e[16];var D;e[17]===Symbol.for("react.memo_cache_sentinel")?(D=function(t){i(t)},e[17]=D):D=e[17];var x;e[18]!==T?(x=s.jsx("canvas",babelHelpers.extends({},T,{"data-testid":void 0,height:p*2,ref:D,width:p*2})),e[18]=T,e[19]=x):x=e[19];var $;return e[20]!==I||e[21]!==x?($=s.jsxs(s.Fragment,{children:[I,x]}),e[20]=I,e[21]=x,e[22]=$):$=e[22],$}l.default=g}),98);
__d("KadabraVoiceDecoratedText.react",["react","react-compiler-runtime","stylex"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c={emphasized:{fontWeight:"xw1mzvt",$$css:!0}};function d(e,t,n,r){return r===void 0&&(r=function(t){return t}),e.split(t).map(n).reduce(function(e,n,o,a){return[].concat(e,[n,o!==a.length-1&&u.jsx("span",{className:"xdz8niu x127lhb5 xn0cd8s",children:r(t,o)},"s_"+o)])},[])}function m(t){var n=o("react-compiler-runtime").c(6),a=t.emphasizedXStyle,i=t.text,l;if(n[0]!==a||n[1]!==i){var s=i.search(/[\.(\?\!)\?\!]/),m=i.charAt(s),_,f;n[3]!==a?(_=function(n,o){return u.jsx("span",babelHelpers.extends({},(e||(e=r("stylex"))).props(o===0&&[c.emphasized,a]),{children:d(n," ",p)}),o)},f=function(n,o){return u.jsx("span",babelHelpers.extends({},(e||(e=r("stylex"))).props(o===0&&[c.emphasized,a]),{children:n}))},n[3]=a,n[4]=_,n[5]=f):(_=n[4],f=n[5]),l=d(i,m,_,f),n[0]=a,n[1]=i,n[2]=l}else l=n[2];return l}function p(e,t){return u.jsx("span",{className:"xdz8niu x127lhb5 xn0cd8s",children:e},t)}p.displayName=p.name+" [from "+i.id+"]",l.default=m}),98);
__d("KadabraVoiceAssistantTextScrollableArea.react",["KDSScrollableArea.react","KadabraVoiceDecoratedText.react","react","react-compiler-runtime","stylex"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=s,d=c.useEffect,m=c.useRef,p=c.useState,_={opacity:"xb4nw82",transition:"xcfecua",$$css:!0},f={root:{fontSize:"x1aueamr xfv1jfb",lineHeight:"x1qfxs89",maxWidth:"x16bzkbk",minHeight:"x8nclml",overflowX:"xw2csxc",overflowY:"x1odjw0f",position:"x1n2onr6",$$css:!0},scrollableArea:{height:"x5yr21d",paddingInlineEnd:"xpdmqnj",textAlign:"x1yc453h",whiteSpace:"x126k92a",$$css:!0},visibility:function(t){return[_,{"--x-opacity":(t?1:0)!=null?t?1:0:void 0}]}};function g(t){var n=o("react-compiler-runtime").c(22),a=t.addPaddingForScroll,i=t.isVisible,l=t.text,s=a===void 0?!1:a,c=i===void 0?!1:i,_=m(null),g=p(!1),h=g[0],y=g[1],C=p(!1),b=C[0],v=C[1],S;n[0]===Symbol.for("react.memo_cache_sentinel")?(S=function(){var e;if(_.current!=null){var t=(e=_.current)==null?void 0:e.getDOMNode();t!=null&&(y(t.scrollTop>0),v(t.scrollTop<t.scrollHeight-t.clientHeight-8))}},n[0]=S):S=n[0];var R;n[1]!==l?(R=[_,l],n[1]=l,n[2]=R):R=n[2],d(S,R);var L;n[3]===Symbol.for("react.memo_cache_sentinel")?(L=function(t){var e=t.currentTarget;y(e.scrollTop>0),v(e.scrollTop<e.scrollHeight-e.clientHeight-8)},n[3]=L):L=n[3];var E=L,k;n[4]!==c?(k=(e||(e=r("stylex"))).props(f.root,f.visibility(c)),n[4]=c,n[5]=k):k=n[5];var I;n[6]!==s?(I={0:{},1:{className:"xbmvrgn"}}[!!s<<0],n[6]=s,n[7]=I):I=n[7];var T;n[8]!==l?(T=u.jsx(r("KadabraVoiceDecoratedText.react"),{text:l}),n[8]=l,n[9]=T):T=n[9];var D;n[10]!==I||n[11]!==T?(D=u.jsx(r("KDSScrollableArea.react"),{horizontal:!1,onScroll:E,ref:_,testid:void 0,vertical:!0,xstyle:f.scrollableArea,children:u.jsx("div",babelHelpers.extends({},I,{children:T}))}),n[10]=I,n[11]=T,n[12]=D):D=n[12];var x;n[13]!==h?(x=h&&u.jsx("div",{className:"x13vifvy xtijo5x x1ey2m1c x1o0tod x47corl x10l6tqk xk6j48z"}),n[13]=h,n[14]=x):x=n[14];var $;n[15]!==b?($=b&&u.jsx("div",{className:"x13vifvy xtijo5x x1ey2m1c x1o0tod x47corl x10l6tqk x1firbd1"}),n[15]=b,n[16]=$):$=n[16];var P;return n[17]!==x||n[18]!==$||n[19]!==k||n[20]!==D?(P=u.jsxs("div",babelHelpers.extends({},k,{children:[D,x,$]})),n[17]=x,n[18]=$,n[19]=k,n[20]=D,n[21]=P):P=n[21],P}l.default=g}),98);
__d("KadabraVoiceMemoryUpdated.react",["fbt","CometPressable.react","GenaiMetaMemoryFalcoEvent","KDSDialogLoadingState.react","KDSText.react","KadabraMemoryDialog.entrypoint","react","react-compiler-runtime","useKDSEntryPointDialog","useSinglePartialViewImpression"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(e){var t,n,a=o("react-compiler-runtime").c(13),i=e.memoryViewModel,l;a[0]===Symbol.for("react.memo_cache_sentinel")?(l=s._(/*BTDS*/"Memory updated"),a[0]=l):l=a[0];var c=l,p=(t=i==null||(n=i.memory_disclosure)==null?void 0:n.disclosure_text)!=null?t:"",f;a[1]===Symbol.for("react.memo_cache_sentinel")?(f={fetchPolicy:"network-only"},a[1]=f):f=a[1];var g=r("useKDSEntryPointDialog")(r("KadabraMemoryDialog.entrypoint"),f,"button",_),h=g[0],y;a[2]===Symbol.for("react.memo_cache_sentinel")?(y={onImpressionStart:m},a[2]=y):y=a[2];var C=r("useSinglePartialViewImpression")(y),b;a[3]===Symbol.for("react.memo_cache_sentinel")?(b={className:"x1aueamr x1qfxs89 x16bzkbk xw2csxc x1odjw0f x1n2onr6"},a[3]=b):b=a[3];var v;a[4]!==h?(v=function(){h({}),r("GenaiMetaMemoryFalcoEvent").log(d)},a[4]=h,a[5]=v):v=a[5];var S=p!==""&&"\n",R;a[6]!==p||a[7]!==S?(R=u.jsxs(r("KDSText.react"),{color:"secondary",textStyle:"subtitleEmphasized",children:[c,S,p]}),a[6]=p,a[7]=S,a[8]=R):R=a[8];var L;return a[9]!==C||a[10]!==v||a[11]!==R?(L=u.jsx("div",babelHelpers.extends({},b,{children:u.jsx(r("CometPressable.react"),{onPress:v,overlayDisabled:!0,ref:C,testid:void 0,children:R})})),a[9]=C,a[10]=v,a[11]=R,a[12]=L):L=a[12],L}function d(){return{client_id:"",event:"memory_updated_bottomsheet_opened"}}function m(){return r("GenaiMetaMemoryFalcoEvent").log(p)}function p(){return{client_id:"",event:"memory_update_admin_text_impression",source:"admin_text"}}function _(e){return u.jsx(r("KDSDialogLoadingState.react"),{onClose:e,size:"large"})}_.displayName=_.name+" [from "+i.id+"]",l.default=c}),226);
__d("KadabraVoiceSearchEngineButton.react",["fbt","KadabraCommentFooterButton.react","KadabraSearchEngineIcon.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c={textWidth:{maxWidth:"x1ncir08",$$css:!0}};function d(e){var t=o("react-compiler-runtime").c(12),n=e.attribution_link,a=e.onPress,i=e.search_engine,l=e.search_query,d;t[0]!==i?(d=i==null?void 0:function(){return u.jsx(r("KadabraSearchEngineIcon.react"),{searchEngine:i,size:"small"})},t[0]=i,t[1]=d):d=t[1];var m=l==null||l==="",p;t[2]!==l?(p=s._(/*BTDS*/"{Search query that was used to generate the response}",[s._param("Search query that was used to generate the response",l)]),t[2]=l,t[3]=p):p=t[3];var _;t[4]!==n?(_={url:n},t[4]=n,t[5]=_):_=t[5];var f;return t[6]!==a||t[7]!==d||t[8]!==m||t[9]!==p||t[10]!==_?(f=u.jsx(r("KadabraCommentFooterButton.react"),{addOnStart:d,isLabelHidden:m,label:p,linkProps:_,onPress:a,testid:void 0,xstyle:c.textWidth}),t[6]=a,t[7]=d,t[8]=m,t[9]=p,t[10]=_,t[11]=f):f=t[11],f}l.default=d}),226);
__d("KadabraVoiceSearchPluginDialog.entrypoint",["JSResourceForInteraction"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(t){var e=t.references_favicons,n=t.references_titles,r=t.references_uris;return{extraProps:{references_favicons:e,references_titles:n,references_uris:r}}},root:r("JSResourceForInteraction")("KadabraVoiceSearchPluginDialog.react").__setRef("KadabraVoiceSearchPluginDialog.entrypoint")};l.default=e}),98);
__d("KadabraVoiceSearchPluginSourcesButton.react",["fbt","KadabraCommentFooterButton.react","KadabraVoiceSearchPluginDialog.entrypoint","react","react-compiler-runtime","useKDSEntryPointDialog"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(e){var t=o("react-compiler-runtime").c(8),n=e.onPress,a=e.references_favicons,i=e.references_titles,l=e.references_uris,c;t[0]!==a||t[1]!==i||t[2]!==l?(c={references_favicons:a,references_titles:i,references_uris:l},t[0]=a,t[1]=i,t[2]=l,t[3]=c):c=t[3];var d=r("useKDSEntryPointDialog")(r("KadabraVoiceSearchPluginDialog.entrypoint"),c),m=d[0],p;t[4]===Symbol.for("react.memo_cache_sentinel")?(p=s._(/*BTDS*/"Sources"),t[4]=p):p=t[4];var _;return t[5]!==n||t[6]!==m?(_=u.jsx(r("KadabraCommentFooterButton.react"),{label:p,onPress:function(){m({}),n==null||n()},testid:void 0}),t[5]=n,t[6]=m,t[7]=_):_=t[7],_}l.default=c}),226);
__d("KadabraVoiceSearchResultsRenderer.react",["KadabraCommentFooter.react","KadabraSearchUtils","KadabraVoiceSearchEngineButton.react","KadabraVoiceSearchPluginSourcesButton.react","XFBGenAIOrchestratorSearchEngine.facebook","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(17),n=e.searchViewModel,a;if(t[0]!==n.attribution_link||t[1]!==n.search_engine||t[2]!==n.search_query){var i=r("XFBGenAIOrchestratorSearchEngine.facebook").cast(n.search_engine);a=o("KadabraSearchUtils").showSearchEngineAttribution(i)?s.jsx(r("KadabraVoiceSearchEngineButton.react"),{attribution_link:n.attribution_link,search_engine:i,search_query:n.search_query}):null,t[0]=n.attribution_link,t[1]=n.search_engine,t[2]=n.search_query,t[3]=a}else a=t[3];var l=a,u;if(t[4]!==n.references_title){var c;u=(c=n.references_title)!=null?c:[],t[4]=n.references_title,t[5]=u}else u=t[5];var d=u,m;if(t[6]!==n.search_result_uri){var p;m=(p=n.search_result_uri)!=null?p:[],t[6]=n.search_result_uri,t[7]=m}else m=t[7];var _=m,f;if(t[8]!==n.thumbnail_cdn_url){var g;f=(g=n.thumbnail_cdn_url)!=null?g:[],t[8]=n.thumbnail_cdn_url,t[9]=f}else f=t[9];var h=f,y;t[10]!==h||t[11]!==d||t[12]!==_?(y=d.length>0&&s.jsx(r("KadabraVoiceSearchPluginSourcesButton.react"),{references_favicons:h,references_titles:d,references_uris:_}),t[10]=h,t[11]=d,t[12]=_,t[13]=y):y=t[13];var C;return t[14]!==l||t[15]!==y?(C=s.jsxs(r("KadabraCommentFooter.react"),{children:[l,y]}),t[14]=l,t[15]=y,t[16]=C):C=t[16],C}l.default=u}),98);
__d("useCometAIVoiceTranscription",["ZenonGenAICallHooks","cometAIVoiceTranscriptionUtils","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useEffect,c=s.useState;function d(){var e=o("react-compiler-runtime").c(9),t=c(null),n=t[0],r=t[1],a=c(""),i=a[0],l=a[1],s=c(""),d=s[0],m=s[1],p=c(null),_=p[0],f=p[1],g=o("ZenonGenAICallHooks").useSubscribeGenAICallConnectState(),h=o("ZenonGenAICallHooks").useCallTranscripts(!1),y,C;e[0]!==h?(y=function(){return h(function(e){var t=o("cometAIVoiceTranscriptionUtils").getMessages(e);o("cometAIVoiceTranscriptionUtils").isListeningOrThinking(e)&&(l(""),m(""),f(null));for(var n of t)n.role==="user"?l(n.text):(m(n.text),f(n.botContent)),r(n)})},C=[h],e[0]=h,e[1]=y,e[2]=C):(y=e[1],C=e[2]),u(y,C);var b;return e[3]!==d||e[4]!==_||e[5]!==g||e[6]!==n||e[7]!==i?(b={assistantText:d,botContent:_,isTranscriptionReady:g,transcriptionMessage:n,userText:i},e[3]=d,e[4]=_,e[5]=g,e[6]=n,e[7]=i,e[8]=b):b=e[8],b}l.default=d}),98);
__d("useKadabraVoiceTranscription",["react","react-compiler-runtime","useCometAIVoiceTranscription"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useState;function u(){var e,t,n=o("react-compiler-runtime").c(5),a=r("useCometAIVoiceTranscription")(),i=a.assistantText,l=a.botContent,u=a.userText,c=s(!1),d=c[0],m=c[1],p=l==null||(e=l.llmResp)==null?void 0:e.genaiViewModels;(p==null||(t=p.streaming_state_view_model)==null?void 0:t.streaming_state)==="Imagining"&&!d&&m(!0),(p==null?void 0:p.imagine_view_model)!=null&&d&&m(!1);var _;return n[0]!==i||n[1]!==d||n[2]!==u||n[3]!==p?(_={assistantText:i,isAssistantImagining:d,userText:u,viewModels:p},n[0]=i,n[1]=d,n[2]=u,n[3]=p,n[4]=_):_=n[4],_}l.default=u}),98);
__d("KadabraVoiceAssistantText.react",["KDSFlexbox.react","KadabraVoiceAnimatedLogo.react","KadabraVoiceAssistantTextScrollableArea.react","KadabraVoiceMemoryUpdated.react","KadabraVoiceSearchResultsRenderer.react","react","react-compiler-runtime","useCometAIVoiceContext","useKadabraVoiceTranscription"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={assistantText:{alignItems:"x1cy8zhl",flexDirection:"xdt5ytf",height:"x5yr21d",marginTop:"x1xmf6yo",marginBottom:"x1e56ztr",maxWidth:"x16bzkbk",minHeight:"x1gg8mnh",rowGap:"x3pnbk8",$$css:!0},logo:{minHeight:"x98io7z xpwmlu0",$$css:!0},memoryResults:{alignItems:"x1cy8zhl",columnGap:"xfex06f",display:"x78zum5",$$css:!0},searchResults:{alignItems:"x1cy8zhl",columnGap:"xfex06f",display:"x78zum5",marginTop:"x1xmf6yo",$$css:!0}};function c(){var e=o("react-compiler-runtime").c(14),t=r("useKadabraVoiceTranscription")(),n=t.assistantText,a=t.isAssistantImagining,i=t.viewModels,l=r("useCometAIVoiceContext")(),c=l.lastMessage;if(a||(i==null?void 0:i.imagine_view_model)!=null)return null;var d;e[0]===Symbol.for("react.memo_cache_sentinel")?(d=s.jsx(r("KDSFlexbox.react"),{alignItems:"end",xstyle:u.logo,children:s.jsx(r("KadabraVoiceAnimatedLogo.react"),{})}),e[0]=d):d=e[0];var m;e[1]!==(c==null?void 0:c.role)||e[2]!==(i==null?void 0:i.memory_update_view_model)?(m=(i==null?void 0:i.memory_update_view_model)!=null&&(c==null?void 0:c.role)==="assistant"&&s.jsx(r("KDSFlexbox.react"),{xstyle:u.memoryResults,children:s.jsx(r("KadabraVoiceMemoryUpdated.react"),{memoryViewModel:i==null?void 0:i.memory_update_view_model})}),e[1]=c==null?void 0:c.role,e[2]=i==null?void 0:i.memory_update_view_model,e[3]=m):m=e[3];var p=(c==null?void 0:c.role)==="assistant",_;e[4]!==n||e[5]!==p?(_=s.jsx(r("KadabraVoiceAssistantTextScrollableArea.react"),{isVisible:p,text:n}),e[4]=n,e[5]=p,e[6]=_):_=e[6];var f;e[7]!==(c==null?void 0:c.role)||e[8]!==(i==null?void 0:i.search_view_model)?(f=(i==null?void 0:i.search_view_model)!=null&&(c==null?void 0:c.role)==="assistant"&&s.jsx(r("KDSFlexbox.react"),{xstyle:u.searchResults,children:s.jsx(r("KadabraVoiceSearchResultsRenderer.react"),{searchViewModel:i==null?void 0:i.search_view_model})}),e[7]=c==null?void 0:c.role,e[8]=i==null?void 0:i.search_view_model,e[9]=f):f=e[9];var g;return e[10]!==m||e[11]!==_||e[12]!==f?(g=s.jsxs(s.Fragment,{children:[d,s.jsxs(r("KDSFlexbox.react"),{grow:1,xstyle:u.assistantText,children:[m,_,f]})]}),e[10]=m,e[11]=_,e[12]=f,e[13]=g):g=e[13],g}l.default=c}),98);
__d("KadabraVoiceCaller.react",["CometAIVoiceEndCallSubreason","CometAIVoiceInteraction","FBLogger","KadabraMetaAIEntryPointContext","KadabraPromptSessionManager","ZenonCallsModelTypes","ZenonGenAICallHooks","ZenonGenAICallsContext","generateAbraConversationID","promiseDone","react","react-compiler-runtime","useOnBeforeUnload","usePrevious"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.use,c=s.useEffect,d=s.useRef;function m(e){var t=o("react-compiler-runtime").c(25),n=e.convoStarterPrompt,a=e.convoStarterPromptId,i=e.externalConversationID,l=e.onCallTerminated,s=e.onInvalidEntry,m=e.onUnmount,_=u(r("ZenonGenAICallsContext")),f=_.userMediaTracks,g=o("ZenonGenAICallHooks").useCallMetaAIBotCallback(),h=f[0],y=o("ZenonGenAICallHooks").useCurrentCall(),C=o("ZenonGenAICallHooks").useCallState(),b=r("usePrevious")(C),v=d(!1),S=u(o("KadabraMetaAIEntryPointContext").KadabraMetaAIEntryPointContext),R;t[0]===Symbol.for("react.memo_cache_sentinel")?(R=r("KadabraPromptSessionManager").getPromptSessionId(),t[0]=R):R=t[0];var L=R,E;t[1]!==m?(E=function(){m()},t[1]=m,t[2]=E):E=t[2],r("useOnBeforeUnload")(E);var k,I;t[3]!==s||t[4]!==f.length?(k=function(){!v&&f.length===0&&s()},I=[s,f.length],t[3]=s,t[4]=f.length,t[5]=k,t[6]=I):(k=t[5],I=t[6]),c(k,I);var T,D;t[7]!==g||t[8]!==n||t[9]!==a||t[10]!==S||t[11]!==i||t[12]!==h?(T=function(){if(!v.current){v.current=!0;var e=i!=null?i:r("generateAbraConversationID")(),t={call_trigger:"meta_ai_voice",convo_starter_prompt:n,convo_starter_prompt_id:a,entry_point:S,entry_point_raw_value:S,meta_ai_ephemeral_thread_id:""+e,thread_session_id:L};r("promiseDone")(g({callTrigger:"meta_ai_voice",mediaTracks:[h],messages:{meta_ai_session_metadata:JSON.stringify(t)}}),void 0,p)}},D=[g,S,i,h,L,n,a],t[7]=g,t[8]=n,t[9]=a,t[10]=S,t[11]=i,t[12]=h,t[13]=T,t[14]=D):(T=t[13],D=t[14]),c(T,D);var x;t[15]!==C||t[16]!==(y==null?void 0:y.endCallReason)||t[17]!==l||t[18]!==b?(x=function(){if((C===o("ZenonCallsModelTypes").ZenonCallState.Terminating||C===o("ZenonCallsModelTypes").ZenonCallState.Terminated)&&b!==null&&b!==C){var e;o("CometAIVoiceInteraction").failVoiceTrace(o("CometAIVoiceInteraction").getPendingVoiceInteraction(),(e=y==null?void 0:y.endCallReason)!=null?e:o("CometAIVoiceEndCallSubreason").CometAIVoiceEndCallSubreason.CALL_TERMINATED,C),l(o("CometAIVoiceEndCallSubreason").CometAIVoiceEndCallSubreason.CALL_TERMINATED)}},t[15]=C,t[16]=y==null?void 0:y.endCallReason,t[17]=l,t[18]=b,t[19]=x):x=t[19];var $=y==null?void 0:y.endCallReason,P;return t[20]!==C||t[21]!==l||t[22]!==b||t[23]!==$?(P=[C,$,b,l],t[20]=C,t[21]=l,t[22]=b,t[23]=$,t[24]=P):P=t[24],c(x,P),null}function p(e){r("FBLogger")("kadabra_core").catching(e).mustfix("Failed to call")}l.default=m}),98);
__d("MetaBrandMicrophoneOffOutline24Icon.react",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useId;function c(e){var t=u();return s.jsxs("svg",babelHelpers.extends({viewBox:"0 0 24 24",fill:"currentColor",width:"1em",height:"1em"},e,{children:[e.title!=null&&s.jsx("title",{children:e.title}),s.jsxs("g",{clipPath:"url(#"+t+")",children:[s.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.293 2.293a1 1 0 1 1 1.414 1.414l-17 17a1 1 0 0 1-1.414-1.414l3.696-3.696a6.48 6.48 0 0 1-1.663-3.063C4.136 11.709 4 10.835 4 10a1 1 0 0 1 2 0c0 .633.104 1.346.275 2.082a4.533 4.533 0 0 0 1.133 2.096l1.57-1.57a3.348 3.348 0 0 1-.685-1.52A18.117 18.117 0 0 1 8 8c0-1.075.128-2.15.293-3.087C8.603 3.148 10.208 2 12 2c1.792 0 3.396 1.148 3.707 2.913.047.268.091.548.13.836l3.456-3.456zm-5.3 5.3a16.909 16.909 0 0 0-.256-2.334C13.622 4.603 12.984 4 12 4c-.984 0-1.622.603-1.737 1.26A16.137 16.137 0 0 0 10 8c0 .925.111 1.879.263 2.74.026.148.078.293.155.428l3.575-3.575z"}),s.jsx("path",{d:"m9.318 17.596 1.667-1.666c.33.046.67.07 1.015.07 2.753 0 5.17-1.52 5.725-3.918.17-.736.275-1.45.275-2.082a1 1 0 1 1 2 0c0 .835-.135 1.709-.326 2.534-.746 3.22-3.639 5.076-6.674 5.41V20h2a1 1 0 1 1 0 2H9a1 1 0 1 1 0-2h2v-2.055a9.057 9.057 0 0 1-1.682-.349z"})]}),s.jsxs("defs",{children:[s.jsx("clipPath",{id:t,children:s.jsx("path",{d:"M0 0H24V24H0z"})}),e.children]})]}))}c.displayName=c.name+" [from "+i.id+"]",c._isSVG=!0;var d=c;l.default=d}),98);
__d("KadabraVoiceMicButton.react",["fbt","KDSIconButton.react","KDSText.react","KDSTooltip.react","MetaBrandMicrophoneOffOutline24Icon.react","MetaBrandMicrophoneOutline24Icon.react","ZenonGenAICallHooks","react","react-compiler-runtime","useKadabraInteractionLogger"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e.useCallback,d={iconBackground:{backgroundColor:"x7l9s84 xfvt6uf",$$css:!0},mutedIcon:{color:"x1a1m0xk",$$css:!0}};function m(){var e,t=o("react-compiler-runtime").c(14),n=(e=o("ZenonGenAICallHooks")).useLocalTrackMuteStatus(),a=e.useMuteLocalTrack(),i=e.useUnmuteLocalTrack(),l=r("useKadabraInteractionLogger")(),c=e.useSelectedAudioDevice(),m;t[0]!==l||t[1]!==a?(m=function(){a(),l.log({action_target:"microphone_button",action_type:"click",event_name:"voice_microphone_mute",target_area:"voice_composer"})},t[0]=l,t[1]=a,t[2]=m):m=t[2];var p=m,_;t[3]!==l||t[4]!==i?(_=function(){i(),l.log({action_target:"microphone_button",action_type:"click",event_name:"voice_microphone_unmute",target_area:"voice_composer"})},t[3]=l,t[4]=i,t[5]=_):_=t[5];var f=_,g;t[6]!==c||t[7]!==n?(g=n?u.jsxs(u.Fragment,{children:[u.jsx(r("KDSText.react"),{textStyle:"bodyEmphasized",children:s._(/*BTDS*/"Turn on microphone")}),u.jsx(r("KDSText.react"),{children:c!=null?c:null})]}):u.jsxs(u.Fragment,{children:[u.jsx(r("KDSText.react"),{textStyle:"bodyEmphasized",children:s._(/*BTDS*/"Turn off microphone")}),u.jsx(r("KDSText.react"),{children:c!=null?c:null})]}),t[6]=c,t[7]=n,t[8]=g):g=t[8];var h=g,y;return t[9]!==p||t[10]!==f||t[11]!==n||t[12]!==h?(y=n?u.jsx(r("KDSTooltip.react"),{position:"above",tooltip:h,children:u.jsx(r("KDSIconButton.react"),{icon:r("MetaBrandMicrophoneOffOutline24Icon.react"),label:s._(/*BTDS*/"Unmute"),onPress:f,size:"36",variant:"flat",xstyle:[d.mutedIcon,d.iconBackground]})}):u.jsx(r("KDSTooltip.react"),{position:"above",tooltip:h,children:u.jsx(r("KDSIconButton.react"),{icon:r("MetaBrandMicrophoneOutline24Icon.react"),label:s._(/*BTDS*/"Mute"),onPress:p,size:"36",variant:"flat",xstyle:d.iconBackground})}),t[9]=p,t[10]=f,t[11]=n,t[12]=h,t[13]=y):y=t[13],y}l.default=m}),226);
__d("MetaBrandSpeakerOffOutline24Icon.react",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useId;function c(e){var t=u();return s.jsxs("svg",babelHelpers.extends({viewBox:"0 0 24 24",fill:"currentColor",width:"1em",height:"1em"},e,{children:[e.title!=null&&s.jsx("title",{children:e.title}),s.jsx("g",{clipPath:"url(#"+t+")",children:s.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.341 4.247a1 1 0 0 1 1.317 1.506l-16 14a1 1 0 0 1-1.317-1.506L6.71 15.3a1.49 1.49 0 0 1-.176-.34A8.74 8.74 0 0 1 6 12a8.74 8.74 0 0 1 .534-2.96C6.776 8.375 7.434 8 8.14 8H10l3.137-3.138c.447-.446 1.17-.36 1.434.213.28.613.618 1.478.894 2.564l3.877-3.392zm-5.594 4.896a14.694 14.694 0 0 0-.401-1.66L10.828 10H8.32A6.667 6.667 0 0 0 8 12c0 .73.134 1.391.293 1.915l5.454-4.772zm2.25 3.177-2.143 1.858c-.122.896-.307 1.68-.508 2.339L12.329 15.5l-1.516 1.313 2.324 2.324c.447.447 1.17.361 1.434-.213.571-1.246 1.373-3.529 1.426-6.604z"})}),s.jsxs("defs",{children:[s.jsx("clipPath",{id:t,children:s.jsx("path",{d:"M0 0H24V24H0z"})}),e.children]})]}))}c.displayName=c.name+" [from "+i.id+"]",c._isSVG=!0;var d=c;l.default=d}),98);
__d("MetaBrandSpeakerWithTwoArcsOutline24Icon.react",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs("svg",babelHelpers.extends({viewBox:"0 0 24 24",fill:"currentColor",width:"1em",height:"1em"},e,{children:[e.title!=null&&s.jsx("title",{children:e.title}),e.children!=null&&s.jsx("defs",{children:e.children}),s.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m5 16 3.137 3.137c.447.447 1.17.361 1.434-.213C10.16 17.635 11 15.237 11 12c0-3.237-.838-5.636-1.43-6.925-.262-.574-.986-.659-1.433-.213L5 8H3.141c-.707 0-1.365.375-1.607 1.04A8.74 8.74 0 0 0 1 12a8.74 8.74 0 0 0 .534 2.96c.242.665.9 1.04 1.607 1.04H5zm.828-6H3.32A6.667 6.667 0 0 0 3 12c0 .77.149 1.463.32 2h2.508l2.518 2.517C8.696 15.37 9 13.842 9 12c0-1.843-.304-3.37-.654-4.517L5.828 10zM16 8.308c0 .244.088.469.234.642l.006.008a1.4 1.4 0 0 1 .065.098c.063.102.16.28.263.543.203.523.432 1.4.432 2.708 0 1.31-.229 2.186-.432 2.71-.102.262-.2.44-.263.542a1.39 1.39 0 0 1-.065.098l-.007.009.004-.005.005-.005.002-.004.002-.001v-.001a1 1 0 1 0 1.535 1.282l.008-.01a3.377 3.377 0 0 0 .218-.313c.124-.201.277-.488.425-.868.296-.762.568-1.885.568-3.434 0-1.548-.272-2.67-.568-3.433-.148-.38-.3-.667-.425-.869a3.39 3.39 0 0 0-.218-.312l-.02-.024a1 1 0 0 0-1.77.638z"}),s.jsx("path",{d:"M12.606 10.756a1 1 0 1 1 1.807-.857l.014.03c.018.039.042.091.07.157.056.13.129.312.201.53.142.425.302 1.04.302 1.692 0 .651-.16 1.266-.302 1.69a6.864 6.864 0 0 1-.27.688l-.017.034a1 1 0 1 1-1.804-.863l.008-.017.044-.098c.038-.089.09-.219.142-.376.108-.325.199-.71.199-1.058 0-.349-.09-.734-.199-1.06a4.848 4.848 0 0 0-.186-.473l-.01-.02z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("KadabraVoiceSpeakerButton.react",["fbt","KDSIconButton.react","MetaBrandSpeakerOffOutline24Icon.react","MetaBrandSpeakerWithTwoArcsOutline24Icon.react","ZenonGenAICallHooks","react","react-compiler-runtime","useKadabraInteractionLogger"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e.useCallback;function d(){var e=o("react-compiler-runtime").c(10),t=o("ZenonGenAICallHooks").useRemoteTrackMuteStatus(),n=o("ZenonGenAICallHooks").useMuteRemoteTrack(),a=o("ZenonGenAICallHooks").useUnmuteRemoteTrack(),i=r("useKadabraInteractionLogger")(),l;e[0]!==i||e[1]!==n?(l=function(){n(),i.log({action_target:"speaker_button",action_type:"click",event_name:"voice_speaker_mute",target_area:"voice_composer"})},e[0]=i,e[1]=n,e[2]=l):l=e[2];var c=l,d;e[3]!==i||e[4]!==a?(d=function(){a(),i.log({action_target:"speaker_button",action_type:"click",event_name:"voice_speaker_unmute",target_area:"voice_composer"})},e[3]=i,e[4]=a,e[5]=d):d=e[5];var m=d,p;return e[6]!==c||e[7]!==m||e[8]!==t?(p=t?u.jsx(r("KDSIconButton.react"),{icon:r("MetaBrandSpeakerOffOutline24Icon.react"),label:s._(/*BTDS*/"Unmute"),onPress:m,size:"36",variant:"flat"}):u.jsx(r("KDSIconButton.react"),{icon:r("MetaBrandSpeakerWithTwoArcsOutline24Icon.react"),label:s._(/*BTDS*/"Mute"),onPress:c,size:"36",variant:"flat"}),e[6]=c,e[7]=m,e[8]=t,e[9]=p):p=e[9],p}l.default=d}),226);
__d("KadabraVoiceStopButton.react",["fbt","CometAIVoiceVisualizer.react","KDSButton_DEPRECATED.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(e){var t=o("react-compiler-runtime").c(4),n=e.callConnected,a=e.onPress,i=!n,l;t[0]===Symbol.for("react.memo_cache_sentinel")?(l=s._(/*BTDS*/"Stop"),t[0]=l):l=t[0];var c;return t[1]!==a||t[2]!==i?(c=u.jsx(r("KDSButton_DEPRECATED.react"),{addOnStart:d,isDisabled:i,label:l,onPress:a,size:"marge",testid:void 0,variant:"negativeEmphasized"}),t[1]=a,t[2]=i,t[3]=c):c=t[3],c}function d(){return u.jsx(r("CometAIVoiceVisualizer.react"),{})}d.displayName=d.name+" [from "+i.id+"]",l.default=c}),226);
__d("KadabraVoiceControlBar.react",["fbt","CometPressable.react","KDSFlexbox.react","KDSText.react","KadabraVoiceMicButton.react","KadabraVoiceSpeakerButton.react","KadabraVoiceStopButton.react","ZenonCallsModelTypes","ZenonGenAICallHooks","react","react-compiler-runtime","useCometAIVoiceContext","useKadabraImpressionLogger","useKadabraInteractionLogger","useKadabraPageLayout","useSinglePartialViewImpression"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e.useState,d={paddingTop:"x1y1aw1k",paddingBottom:"xwib8y2",paddingInlineEnd:"xf159sx",paddingInlineStart:"xnvo3vl",$$css:!0},m={composerPressable:{alignItems:"x6s0dn4",borderEndStartRadius:"xr0m5pc",borderStartStartRadius:"x1142k65",display:"x78zum5",overflowX:"x6ikm8r",overflowY:"x10wlt62",paddingTop:"xyamay9",paddingInlineEnd:"xv54qhq",paddingBottom:"x1l90r2v",paddingInlineStart:"xf7dkkf",width:"xop8lp1",$$css:!0},controls:function(t){return[d,{"--x-paddingInlineStart":(function(e){return typeof e=="number"?e+"px":e!=null?e:void 0})(t?0:8)}]},root:{backgroundColor:"xiu98fq",borderTopColor:"x953nvl",borderInlineEndColor:"xrvh0qo",borderBottomColor:"x3jaecy",borderInlineStartColor:"xiptsbm",borderStartStartRadius:"x1142k65",borderStartEndRadius:"x9okykr",borderEndEndRadius:"x3hdh8v",borderEndStartRadius:"xr0m5pc",borderTopStyle:"x13fuv20",borderInlineEndStyle:"x18b5jzi",borderBottomStyle:"x1q0q8m5",borderInlineStartStyle:"x1t7ytsu",borderTopWidth:"x178xt8z",borderInlineEndWidth:"x1lun4ml",borderBottomWidth:"xso031l",borderInlineStartWidth:"xpilrb4",boxShadow:"xdt1tcc",viewTransitionName:"xhob4qy",$$css:!0},rootActive:{backgroundColor:"x1kxwk59",$$css:!0},rootHover:{backgroundColor:"xh867z1",$$css:!0}};function p(e){var t=o("react-compiler-runtime").c(5),n=e.onFocusChange,a=e.onHoverChange,i=e.onPress,l;t[0]===Symbol.for("react.memo_cache_sentinel")?(l=u.jsx(r("KDSText.react"),{color:"secondary",textStyle:"bodyEmphasized",children:s._(/*BTDS*/"Type or talk...")}),t[0]=l):l=t[0];var c;return t[1]!==n||t[2]!==a||t[3]!==i?(c=u.jsx(r("CometPressable.react"),{onFocusChange:n,onHoverChange:a,onPress:i,overlayDisabled:!0,xstyle:m.composerPressable,children:l}),t[1]=n,t[2]=a,t[3]=i,t[4]=c):c=t[4],c}function _(e){var t=o("react-compiler-runtime").c(26),n=e.onStopPress,a=c(!1),i=a[0],l=a[1],s=c(!1),d=s[0],_=s[1],f=r("useKadabraInteractionLogger")(),g=r("useCometAIVoiceContext")(),h=g.callStartTime,y=o("ZenonGenAICallHooks").useCallState(),C;t[0]!==f||t[1]!==n?(C=function(){n(),f.log({action_target:"stop_button",action_type:"click",event_name:"voice_session_end",target_area:"voice_composer"})},t[0]=f,t[1]=n,t[2]=C):C=t[2];var b=C,v=r("useKadabraImpressionLogger")(),S;t[3]!==v?(S={onImpressionStart:function(){v.log({action_target:"voice_composer",event_name:"voice_session_impression",target_area:"voice_composer"})}},t[3]=v,t[4]=S):S=t[4];var R=r("useSinglePartialViewImpression")(S),L=r("useKadabraPageLayout")(),E=L.isMobileLayout,k=h!==null&&!E,I=i&&m.rootHover,T=d&&m.rootActive,D;t[5]!==I||t[6]!==T?(D=[m.root,I,T],t[5]=I,t[6]=T,t[7]=D):D=t[7];var x;t[8]!==b||t[9]!==k?(x=k&&u.jsx(r("KDSFlexbox.react"),{grow:1,children:u.jsx(p,{onFocusChange:function(t){return _(t)},onHoverChange:function(t){return l(t)},onPress:b})}),t[8]=b,t[9]=k,t[10]=x):x=t[10];var $;t[11]!==k?($=m.controls(k),t[11]=k,t[12]=$):$=t[12];var P,N;t[13]===Symbol.for("react.memo_cache_sentinel")?(P=u.jsx(r("KadabraVoiceSpeakerButton.react"),{}),N=u.jsx(r("KadabraVoiceMicButton.react"),{}),t[13]=P,t[14]=N):(P=t[13],N=t[14]);var M=y===o("ZenonCallsModelTypes").ZenonCallState.Connected,w;t[15]!==b||t[16]!==M?(w=u.jsx(r("KadabraVoiceStopButton.react"),{callConnected:M,onPress:b}),t[15]=b,t[16]=M,t[17]=w):w=t[17];var A;t[18]!==w||t[19]!==$?(A=u.jsxs(r("KDSFlexbox.react"),{gap:8,xstyle:$,children:[P,N,w]}),t[18]=w,t[19]=$,t[20]=A):A=t[20];var F;return t[21]!==R||t[22]!==A||t[23]!==D||t[24]!==x?(F=u.jsxs(r("KDSFlexbox.react"),{ref:R,xstyle:D,children:[x,A]}),t[21]=R,t[22]=A,t[23]=D,t[24]=x,t[25]=F):F=t[25],F}l.default=_}),226);
__d("KadabraVoiceImagineLoadingAnimation.react",["CometHeroHoldTrigger.react","KDSImage.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=250,c="xekv6nw-B",d={image:{borderTopColor:null,borderInlineEndColor:null,borderBottomColor:null,borderInlineStartColor:null,borderEndStartRadius:"xbiv7yw",borderTopStyle:"x1ejq31n",borderInlineEndStyle:"x18oe1m7",borderBottomStyle:"x1sy0etr",borderInlineStartStyle:"xstzfhl",borderTopWidth:"x5jjk7t",borderInlineEndWidth:"xj94awi",borderBottomWidth:"x34gi0r",borderInlineStartWidth:"x1qiqhqr",$$css:!0}};function m(e){var t=o("react-compiler-runtime").c(8),n=e.fadeIn,a=e.shouldHold,i=n===void 0?!0:n,l=a===void 0?!0:a,u;t[0]!==i?(u={0:{className:"x6s0dn4 x5jjk7t xj94awi x34gi0r x1qiqhqr x78zum5 x5yr21d xl56j7k x10l6tqk x13vifvy xh8yej3"},1:{className:"x6s0dn4 x5jjk7t xj94awi x34gi0r x1qiqhqr x78zum5 x5yr21d xl56j7k x10l6tqk x13vifvy xh8yej3 xs4xyr0 x127lhb5 xa3vuyk"}}[!!i<<0],t[0]=i,t[1]=u):u=t[1];var c;t[2]!==l?(c=l&&s.jsx(r("CometHeroHoldTrigger.react"),{description:"Hold for agent to finish imagining for voice",hold:!0}),t[2]=l,t[3]=c):c=t[3];var m;t[4]===Symbol.for("react.memo_cache_sentinel")?(m=s.jsx(r("KDSImage.react"),{height:"100%",src:"/images/gen_ai/meta_ai/imagine_canvas_shimmer/square/ImagineLoader_WWW_Square_Canvas_2x.gif",testid:void 0,width:"100%",xstyle:d.image}),t[4]=m):m=t[4];var p;return t[5]!==u||t[6]!==c?(p=s.jsxs("div",babelHelpers.extends({},u,{children:[c,m]})),t[5]=u,t[6]=c,t[7]=p):p=t[7],p}l.default=m}),98);
__d("KadabraVoiceImagineMedia.react",["CometPlaceholder.react","KDSFlexbox.react","KadabraImagineMedia.react","KadabraImagineMediaGridItemGlimmer.react","XFBGenAIMediaType.facebook","react","react-compiler-runtime","useBoolean","useKadabraPageLayout"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={image:{borderStartStartRadius:"x17m9png",borderStartEndRadius:"x91sizk",borderEndEndRadius:"x1vva9xg",borderEndStartRadius:"x1jfkl46",transition:"x1alevnd",$$css:!0}};function c(e){var t=o("react-compiler-runtime").c(6),n=e.children,a=e.imageUri,l;t[0]===Symbol.for("react.memo_cache_sentinel")?(l={className:"x78zum5 xdt5ytf xl1xv1r x1n2onr6 x1vjfegm"},t[0]=l):l=t[0];var u;t[1]!==n?(u=s.jsx("div",babelHelpers.extends({},l,{children:n})),t[1]=n,t[2]=u):u=t[2];var c;return t[3]!==a||t[4]!==u?(c=s.jsx(r("CometPlaceholder.react"),{fallback:null,name:i.id,children:u},a),t[3]=a,t[4]=u,t[5]=c):c=t[5],c}function d(e){var t=o("react-compiler-runtime").c(8),n=e.imagineData,a=e.xstyle,i=r("useKadabraPageLayout")(),l=i.isTabletBreakPoint,d=r("useBoolean")(!1),m=d.setFalse,p=d.setTrue;if(n.length===0)return null;var _=l?"nowrap":"wrap",f;if(t[0]!==n[0]){var g,h,y,C,b;f=n[0]!=null?s.jsx(c,{imageUri:(g=(h=n[0])==null?void 0:h.uri)!=null?g:"",children:s.jsx(r("KadabraImagineMedia.react"),{mediaType:r("XFBGenAIMediaType.facebook").cast((y=n[0])==null?void 0:y.media_type),uri:(C=(b=n[0])==null?void 0:b.uri)!=null?C:"",width:"100%",xstyle:u.image})}):s.jsx(r("KadabraImagineMediaGridItemGlimmer.react"),{aspectRatio:1}),t[0]=n[0],t[1]=f}else f=t[1];var v;return t[2]!==p||t[3]!==m||t[4]!==_||t[5]!==f||t[6]!==a?(v=s.jsx(r("KDSFlexbox.react"),{alignItems:"center",gap:2,onPointerEnter:p,onPointerLeave:m,testid:void 0,wrap:_,xstyle:a,children:f}),t[2]=p,t[3]=m,t[4]=_,t[5]=f,t[6]=a,t[7]=v):v=t[7],v}l.default=d}),98);
__d("KadabraVoiceImagine.react",["BaseAspectRatioContainer.react","KDSFlexbox.react","KDSImageGridItem.react","KadabraVoiceImagineLoadingAnimation.react","KadabraVoiceImagineMedia.react","react","react-compiler-runtime","useKadabraVoiceTranscription"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={noBorder:{borderTopWidth:"x972fbf",borderInlineEndWidth:"x10w94by",borderBottomWidth:"x1qhh985",borderInlineStartWidth:"x14e42zd",$$css:!0},root:{alignItems:"x6s0dn4",height:"x5yr21d",justifyContent:"xl56j7k",overflowY:"x1odjw0f",width:"xh8yej3",$$css:!0},section:{alignItems:"x6s0dn4",display:"x78zum5",justifyContent:"xl56j7k",marginBottom:"x1iymm2a",marginTop:"xg87l8a",maxHeight:"x1rq5m6k",maxWidth:"x65f84u",minHeight:"xbwy6ji",width:"xvue9z",$$css:!0}};function c(){var e=o("react-compiler-runtime").c(7),t=r("useKadabraVoiceTranscription")(),n=t.isAssistantImagining,a=t.viewModels;if(n){var i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i={role:"none"},e[0]=i):i=e[0];var l;return e[1]===Symbol.for("react.memo_cache_sentinel")?(l=s.jsx(r("KDSFlexbox.react"),{xstyle:u.root,children:s.jsx(r("KDSFlexbox.react"),{grow:1,xstyle:u.section,children:s.jsx(r("KDSImageGridItem.react"),{accessibilityProps:i,aspectRatio:1,xstyle:u.noBorder,children:s.jsx(r("BaseAspectRatioContainer.react"),{aspectRatio:1,children:s.jsx(r("KadabraVoiceImagineLoadingAnimation.react"),{})})})})}),e[1]=l):l=e[1],l}if((a==null?void 0:a.imagine_view_model)!=null){var c,d;e[2]===Symbol.for("react.memo_cache_sentinel")?(d={role:"img"},e[2]=d):d=e[2];var m;if(e[3]!==(a==null||(c=a.imagine_view_model)==null?void 0:c.imagine_raw_data)){var p,_,f;m=(p=a==null||(_=a.imagine_view_model)==null?void 0:_.imagine_raw_data)!=null?p:[],e[3]=a==null||(f=a.imagine_view_model)==null?void 0:f.imagine_raw_data,e[4]=m}else m=e[4];var g;return e[5]!==m?(g=s.jsx(r("KDSFlexbox.react"),{xstyle:u.root,children:s.jsx(r("KDSFlexbox.react"),{grow:1,xstyle:u.section,children:s.jsx(r("KDSImageGridItem.react"),{accessibilityProps:d,aspectRatio:1,xstyle:u.noBorder,children:s.jsx(r("BaseAspectRatioContainer.react"),{aspectRatio:1,children:s.jsx(r("KadabraVoiceImagineMedia.react"),{imagineData:m})})})})}),e[5]=m,e[6]=g):g=e[6],g}return null}l.default=c}),98);
__d("KadabraVoiceUserTextScrollableArea.react",["KDSScrollableArea.react","react","react-compiler-runtime","stylex"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=s,d=c.useEffect,m=c.useRef,p=c.useState,_=608,f={opacity:"xb4nw82",transition:"xcfecua",$$css:!0},g={root:{maxWidth:"x16bzkbk",position:"x1n2onr6",$$css:!0},scrollableArea:{color:"xhgddhk",direction:"xzyj77d",fontSize:"x1lkfr7t",fontWeight:"x95da8x",maxWidth:"x16bzkbk",whiteSpace:"xuxw1ft",$$css:!0},visibility:function(t){return[f,{"--x-opacity":(t?1:0)!=null?t?1:0:void 0}]}};function h(t){var n=o("react-compiler-runtime").c(15),a=t.isVisible,i=t.text,l=a===void 0?!1:a,s=m(),c=p(!1),_=c[0],f=c[1],h;n[0]===Symbol.for("react.memo_cache_sentinel")?(h=function(){var e;if(s.current!=null){var t=(e=s.current)==null?void 0:e.getDOMNode();t!=null&&f(t.scrollLeft>-t.scrollWidth+t.clientWidth)}},n[0]=h):h=n[0];var y;n[1]!==i?(y=[i],n[1]=i,n[2]=y):y=n[2],d(h,y);var C;n[3]===Symbol.for("react.memo_cache_sentinel")?(C=function(t){var e=t.currentTarget;f(e.scrollLeft>-e.scrollWidth+e.clientWidth)},n[3]=C):C=n[3];var b=C,v;n[4]!==l?(v=(e||(e=r("stylex"))).props(g.root,g.visibility(l)),n[4]=l,n[5]=v):v=n[5];var S;n[6]===Symbol.for("react.memo_cache_sentinel")?(S={className:"xzt5al7"},n[6]=S):S=n[6];var R;n[7]!==i?(R=u.jsx(r("KDSScrollableArea.react"),{hideScrollbar:!0,horizontal:!0,onScroll:b,ref:s,testid:void 0,vertical:!1,xstyle:g.scrollableArea,children:u.jsx("div",babelHelpers.extends({},S,{children:i}))}),n[7]=i,n[8]=R):R=n[8];var L;n[9]!==_?(L=_&&u.jsx("div",{className:"x1nnuvzv x13vifvy xtijo5x x1ey2m1c x1o0tod x47corl x10l6tqk x1gkzon0"}),n[9]=_,n[10]=L):L=n[10];var E;return n[11]!==v||n[12]!==R||n[13]!==L?(E=u.jsxs("div",babelHelpers.extends({},v,{children:[R,L]})),n[11]=v,n[12]=R,n[13]=L,n[14]=E):E=n[14],E}l.default=h}),98);
__d("KadabraVoiceUserText.react",["KadabraVoiceUserTextScrollableArea.react","react","react-compiler-runtime","useCometAIVoiceContext","useKadabraVoiceTranscription"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(){var e=o("react-compiler-runtime").c(3),t=r("useKadabraVoiceTranscription")(),n=t.isAssistantImagining,a=t.userText,i=r("useCometAIVoiceContext")(),l=i.lastMessage,u=(l==null?void 0:l.role)==="user"||n,c;return e[0]!==u||e[1]!==a?(c=s.jsx(r("KadabraVoiceUserTextScrollableArea.react"),{isVisible:u,text:a}),e[0]=u,e[1]=a,e[2]=c):c=e[2],c}l.default=u}),98);
__d("KadabraVoiceInput.react",["KDSFlexbox.react","KadabraVoiceAssistantText.react","KadabraVoiceControlBar.react","KadabraVoiceImagine.react","KadabraVoiceUserText.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={root:{marginBottom:"x13ihpsm",rowGap:"xi32cqo",$$css:!0}};function c(e){var t=o("react-compiler-runtime").c(8),n=e.onStopPress,a=e.ref,i,l;t[0]===Symbol.for("react.memo_cache_sentinel")?(i=s.jsx(r("KadabraVoiceImagine.react"),{}),l=s.jsx(r("KadabraVoiceAssistantText.react"),{}),t[0]=i,t[1]=l):(i=t[0],l=t[1]);var c;t[2]===Symbol.for("react.memo_cache_sentinel")?(c=s.jsx(r("KDSFlexbox.react"),{shrink:0,children:s.jsx(r("KadabraVoiceUserText.react"),{})}),t[2]=c):c=t[2];var d;t[3]!==n?(d=s.jsx(r("KadabraVoiceControlBar.react"),{onStopPress:n}),t[3]=n,t[4]=d):d=t[4];var m;return t[5]!==a||t[6]!==d?(m=s.jsxs(r("KDSFlexbox.react"),{alignItems:"center",direction:"column",gap:32,grow:1,justifyContent:"center",ref:a,xstyle:u.root,children:[i,l,c,d]}),t[5]=a,t[6]=d,t[7]=m):m=t[7],m}l.default=c}),98);
__d("KadabraVoiceInteractionTracker.react",["CometAIVoiceInteraction","CometAIVoiceInteractionTracker.react","CometHeroInteractionIDContext","react","react-compiler-runtime","useCometAIVoiceContext"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=r("react")),c=(e||(e=o("react"))).use;function d(e){var t=o("react-compiler-runtime").c(9),n=e.onTurnChange,a=c(r("CometHeroInteractionIDContext")),i=r("useCometAIVoiceContext")(),l=i.voiceConnectionInteractionTracePolicy,s;t[0]!==a?(s=o("CometAIVoiceInteraction").getPendingVoiceNavigationByID(a),t[0]=a,t[1]=s):s=t[1];var d=s,m;t[2]!==a||t[3]!==l?(m=o("CometAIVoiceInteraction").getPendingVoiceTurnInteractionByID(l,a),t[2]=a,t[3]=l,t[4]=m):m=t[4];var p=m,_;return t[5]!==d||t[6]!==n||t[7]!==p?(_=u.jsx(r("CometAIVoiceInteractionTracker.react"),{onTurnChange:n,voiceConnectionInteraction:d,voiceTurnInteraction:p}),t[5]=d,t[6]=n,t[7]=p,t[8]=_):_=t[8],_}l.default=d}),98);
__d("KadabraVoiceStoreUpdaters",["KadabraSendMessageStoreUpdaters","kadabraSendMessageUpdater"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.conversationExists,n=e.environment,a=e.externalConversationId,i=e.messageId,l=e.role,s=e.text,u=!1;if(n.commitUpdate(function(e){var t=e.get(i);t!=null&&(u=!0,o("KadabraSendMessageStoreUpdaters").updatePlainTextUserMessage(t,s))}),!u){var c=o("KadabraSendMessageStoreUpdaters").deconstructMessageID(i),d=c.offlineThreadingId;r("kadabraSendMessageUpdater")(n,"abra__chat__voice",{attachments:[],botMessage:l==="assistant"?s:void 0,botMessageOfflineThreadingId:d,externalConversationId:a,isNewConversation:!t,offlineThreadingId:d,shouldInsertBotMessageOverride:l==="assistant",shouldInsertUserMessageOverride:l==="user",streamingState:"OVERALL_DONE",userMessage:l==="user"?s:void 0})}}function s(e,t){var n=!1;return e.commitUpdate(function(e){e.get(t)&&(n=!0)}),n}l.createOrUpdatePlainTextMessage=e,l.conversationExists=s}),98);
__d("MuteDetectionConstants",[],(function(t,n,r,o,a,i){"use strict";var e=5e3,l=30*1e3,s=5*1e3,u="[mute detection]",c="MuteDetection";i.DELAY_BEFORE_AUTO_DISMISS_MS=e,i.SHORT_THROTTLE_MS=l,i.DELAY_AFTER_CALL_CONNECTED_MS=s,i.CHECKPOINT_PREFIX=u,i.ERROR_DOMAIN=c}),66);
/**
 * License: https://www.facebook.com/legal/license/FvDBz6o_GK7/
 */
__d("PureJSVoiceActivityDetector",["FBLogger","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e={bufferLen:512,debug:!1,energyIntegration:1,energyOffset:1e-8,energyThresholdRatioNeg:.5,energyThresholdRatioPos:2,fftSize:512,filter:[{f:200,v:0},{f:2e3,v:1}],logLimit:100,smoothingTimeConstant:.99},s=30,u=-15,c=s*2,d=u*2,m=(function(){function t(t,n,o,a){var i=this;this.filter=[],this.ready={energy:!1},this.vadState=!1,this.energy=0,this.voiceTrend=0,this.logging=!1,this.log_i=0,this.log_limit=100;var l=babelHelpers.extends({},e,a),s=l.bufferLen,u=l.debug,c=l.energyIntegration,d=l.energyOffset,m=l.energyThresholdRatioNeg,p=l.energyThresholdRatioPos,_=l.fftSize,f=l.filter,g=l.smoothingTimeConstant,h=t.context;this.debug=u,this.hertzPerBin=h.sampleRate/_,this.iterationFrequency=h.sampleRate/s,this.iterationPeriod=1/this.iterationFrequency,u&&r("FBLogger")("rtc_www").debug("Vad | sampleRate: "+h.sampleRate+" | hertzPerBin: "+this.hertzPerBin+" | iterationFrequency: "+this.iterationFrequency+" | iterationPeriod: "+this.iterationPeriod);var y=h.createAnalyser();y.smoothingTimeConstant=g,y.fftSize=_,this.analyser=y,this.setFilter(f),this.floatFrequencyData=new Float32Array(y.frequencyBinCount),this.floatFrequencyDataLinear=new Float32Array(this.floatFrequencyData.length);var C=h.createScriptProcessor(s,1,1);C.onaudioprocess=function(e){y.getFloatFrequencyData(i.floatFrequencyData),i.update(),i.monitor()},this.scriptProcessorNode=C,this.context=h,this.source=t,this.voiceStart=n,this.voiceStop=o,this.energyOffset=d,this.energyThresholdPos=d*p,this.energyThresholdNeg=d*m,this.energyOptions={integration:c,thresholdRatioNeg:m,thresholdRatioPos:p}}var o=t.prototype;return o.triggerLog=function(t){this.logging=!0,this.log_i=0,this.log_limit=typeof t=="number"?t:this.log_limit},o.log=function(t){this.logging&&this.log_i<this.log_limit?(this.log_i++,r("FBLogger")("rtc_www").debug(t)):this.logging=!1},o.update=function(){for(var e=this.floatFrequencyData,t=0,n=e.length;t<n;t++)this.floatFrequencyDataLinear[t]=Math.pow(10,e[t]/10);this.ready={energy:!1}},o.getEnergy=function(){if(this.ready.energy)return this.energy;for(var e=0,t=this.floatFrequencyDataLinear,n=0,r=t.length;n<r;n++)e+=this.filter[n]*t[n]*t[n];return this.energy=e,this.ready={energy:!0},e},o.monitor=function(){var e=this.getEnergy(),t=e-this.energyOffset;t>this.energyThresholdPos?this.voiceTrend=this.voiceTrend+1>c?c:this.voiceTrend+1:t<-this.energyThresholdNeg?this.voiceTrend=this.voiceTrend-1<d?d:this.voiceTrend-1:this.voiceTrend>0?this.voiceTrend--:this.voiceTrend<0&&this.voiceTrend++,this.debug&&r("FBLogger")("rtc_www").debug("voiceTrend = "+this.voiceTrend);var n=!1,o=!1;this.voiceTrend>s?n=!0:this.voiceTrend<u&&(o=!0);var a=this.energyOptions,i=a.integration,l=a.thresholdRatioNeg,m=a.thresholdRatioPos,p=t*this.iterationPeriod*i;return p>0||!o?this.energyOffset+=p:this.energyOffset+=p*10,this.energyOffset=this.energyOffset<0?0:this.energyOffset,this.energyThresholdPos=this.energyOffset*m,this.energyThresholdNeg=this.energyOffset*l,n&&!this.vadState&&(this.vadState=!0,this.voiceStart()),o&&this.vadState&&(this.vadState=!1,this.voiceStop()),this.log("e: "+e+" | e_of: "+this.energyOffset+" | e+_th: "+this.energyThresholdPos+" | e-_th: "+this.energyThresholdNeg+" | signal: "+t+" | int: "+p+" | voiceTrend: "+this.voiceTrend+" | start: "+(n?"true":"false")+" | end: "+(o?"true":"false")),t},o.setFilter=function(t){for(var e=[],n=0,r=this.analyser.fftSize/2;n<r;n++){e[n]=0;for(var o=0,a=t.length;o<a;o++)if(n*this.hertzPerBin<t[o].f){e[n]=t[o].v;break}}this.filter=e},o.startDetecting=function(){this.source.connect(this.analyser),this.scriptProcessorNode.connect(this.context.destination),this.source.connect(this.scriptProcessorNode)},o.stopDetecting=function(){this.source.disconnect(this.analyser),this.scriptProcessorNode.disconnect(this.context.destination),this.source.disconnect(this.scriptProcessorNode),this.voiceStop()},o.init=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){});function t(){return e.apply(this,arguments)}return t})(),t})();l.default=m}),98);
__d("WebRTCVADWasm",["Promise","bx"],(function(t,n,r,o,a,i){"use strict";var e,l=n("bx").getURL(n("bx")("1531528")),s=(function(){var t=typeof document!="undefined"&&document.currentScript?document.currentScript.src:void 0;return function(r){r=r||{};var o=typeof r!="undefined"?r:{},a,i;o.ready=new(e||(e=n("Promise")))(function(e,t){a=e,i=t});var s={},u;for(u in o)Object.prototype.hasOwnProperty.call(o,u)&&(s[u]=o[u]);var c=[],d="./this.program",m=function(t,n){throw n},p=!0,_=!1,f="",g,h,y,C;document.currentScript&&(f=document.currentScript.src),t&&(f=t),f.indexOf("blob:")!==0?f=f.substr(0,f.lastIndexOf("/")+1):f="",g=function(t){var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},h=function(t,n,r){var e=new XMLHttpRequest;e.open("GET",t,!0),e.responseType="arraybuffer",e.onload=function(){if(e.status==200||e.status==0&&e.response){n(e.response);return}r()},e.onerror=r,e.send(null)},C=function(t){document.title=t};var b=o.print||console.log.bind(console),v=o.printErr||console.warn.bind(console);for(u in s)Object.prototype.hasOwnProperty.call(s,u)&&(o[u]=s[u]);s=null,o.arguments&&(c=o.arguments),o.thisProgram&&(d=o.thisProgram),o.quit&&(m=o.quit);var S={debugger:function(){},"f64-rem":function(t,n){return t%n}},R=new Array(0),L;o.wasmBinary&&(L=o.wasmBinary);var E;o.noExitRuntime&&(E=o.noExitRuntime),typeof WebAssembly!="object"&&v("no native wasm support detected");var k,I=new WebAssembly.Table({element:"anyfunc",initial:48,maximum:48}),T=!1,D=0;function x(e,t){e||Re("Assertion failed: "+t)}function $(e){var t=o["_"+e];return x(t,"Cannot call unknown function "+e+", make sure it is exported"),t}function P(e,t,n,r,o){var a={array:function(t){var e=ut(t.length);return q(t,e),e},string:function(t){var e=0;if(t!=null&&t!==0){var n=(t.length<<2)+1;e=ut(n),O(t,e,n)}return e}};function i(e){return t==="string"?A(e):t==="boolean"?!!e:e}var l=$(e),s=[],u=0;if(r)for(var c=0;c<r.length;c++){var d=a[n[c]];d?(u===0&&(u=dt()),s[c]=d(r[c])):s[c]=r[c]}var m=l.apply(null,s);return m=i(m),u!==0&&ct(u),m}function N(e,t,n,r){n=n||[];var o=n.every(function(e){return e==="number"}),a=t!=="string";return a&&o&&!r?$(e):function(){return P(e,t,n,arguments,r)}}var M=typeof TextDecoder!="undefined"?new TextDecoder("utf8"):void 0;function w(e,t,n){for(var r=t+n,o=t;e[o]&&!(o>=r);)++o;if(o-t>16&&e.subarray&&M)return M.decode(e.subarray(t,o));for(var a="";t<o;){var i=e[t++];if(!(i&128)){a+=String.fromCharCode(i);continue}var l=e[t++]&63;if((i&224)==192){a+=String.fromCharCode((i&31)<<6|l);continue}var s=e[t++]&63;if((i&240)==224?i=(i&15)<<12|l<<6|s:i=(i&7)<<18|l<<12|s<<6|e[t++]&63,i<65536)a+=String.fromCharCode(i);else{var u=i-65536;a+=String.fromCharCode(55296|u>>10,56320|u&1023)}}return a}function A(e,t){return e?w(G,e,t):""}function F(e,t,n,r){if(!(r>0))return 0;for(var o=n,a=n+r-1,i=0;i<e.length;++i){var l=e.charCodeAt(i);if(l>=55296&&l<=57343){var s=e.charCodeAt(++i);l=65536+((l&1023)<<10)|s&1023}if(l<=127){if(n>=a)break;t[n++]=l}else if(l<=2047){if(n+1>=a)break;t[n++]=192|l>>6,t[n++]=128|l&63}else if(l<=65535){if(n+2>=a)break;t[n++]=224|l>>12,t[n++]=128|l>>6&63,t[n++]=128|l&63}else{if(n+3>=a)break;t[n++]=240|l>>18,t[n++]=128|l>>12&63,t[n++]=128|l>>6&63,t[n++]=128|l&63}}return t[n]=0,n-o}function O(e,t,n){return F(e,G,t,n)}function B(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r>=55296&&r<=57343&&(r=65536+((r&1023)<<10)|e.charCodeAt(++n)&1023),r<=127?++t:r<=2047?t+=2:r<=65535?t+=3:t+=4}return t}function W(e){var t=B(e)+1,n=ut(t);return F(e,H,n,t),n}function q(e,t){H.set(e,t)}var U=65536,V,H,G,z,j,K,Q,X,Y;function J(e){V=e,o.HEAP8=H=new Int8Array(e),o.HEAP16=z=new Int16Array(e),o.HEAP32=K=new Int32Array(e),o.HEAPU8=G=new Uint8Array(e),o.HEAPU16=j=new Uint16Array(e),o.HEAPU32=Q=new Uint32Array(e),o.HEAPF32=X=new Float32Array(e),o.HEAPF64=Y=new Float64Array(e)}var Z=5261904,ee=18832,te=o.INITIAL_MEMORY||16777216;o.wasmMemory?k=o.wasmMemory:k=new WebAssembly.Memory({initial:te/U,maximum:te/U}),k&&(V=k.buffer),te=V.byteLength,J(V),K[ee>>2]=Z;function ne(e){for(;e.length>0;){var t=e.shift();if(typeof t=="function"){t(o);continue}var n=t.func;typeof n=="number"?t.arg===void 0?o.dynCall_v(n):o.dynCall_vi(n,t.arg):n(t.arg===void 0?null:t.arg)}}var re=[],oe=[],ae=[],ie=[],le=!1,se=!1;function ue(){if(o.preRun)for(typeof o.preRun=="function"&&(o.preRun=[o.preRun]);o.preRun.length;)_e(o.preRun.shift());ne(re)}function ce(){le=!0,ne(oe)}function de(){ne(ae)}function me(){se=!0}function pe(){if(o.postRun)for(typeof o.postRun=="function"&&(o.postRun=[o.postRun]);o.postRun.length;)fe(o.postRun.shift());ne(ie)}function _e(e){re.unshift(e)}function fe(e){ie.unshift(e)}var ge=Math.cos,he=Math.sin,ye=0,Ce=null,be=null;function ve(e){ye++,o.monitorRunDependencies&&o.monitorRunDependencies(ye)}function Se(e){if(ye--,o.monitorRunDependencies&&o.monitorRunDependencies(ye),ye==0&&(Ce!==null&&(clearInterval(Ce),Ce=null),be)){var t=be;be=null,t()}}o.preloadedImages={},o.preloadedAudios={};function Re(e){throw o.onAbort&&o.onAbort(e),e+="",b(e),v(e),T=!0,D=1,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.",new WebAssembly.RuntimeError(e)}function Le(e,t){return String.prototype.startsWith?e.startsWith(t):e.indexOf(t)===0}var Ee="data:application/octet-stream;base64,";function ke(e){return Le(e,Ee)}var Ie=l;function Te(){try{if(L)return new Uint8Array(L);if(y)return y(Ie);throw"both async and sync fetching of the wasm failed"}catch(e){Re(e)}}function De(){return!L&&(p||_)&&typeof fetch=="function"?fetch(Ie,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw"failed to load wasm binary file at '"+Ie+"'";return e.arrayBuffer()}).catch(function(){return Te()}):new(e||(e=n("Promise")))(function(e,t){e(Te())})}function xe(){var e={asm2wasm:S,env:Ze,global:{Infinity:1/0,NaN:NaN},"global.Math":Math,wasi_snapshot_preview1:Ze};function t(e,t){var n=e.exports;o.asm=n,Se("wasm-instantiate")}ve("wasm-instantiate");function n(e){t(e.instance)}function r(t){return De().then(function(t){return WebAssembly.instantiate(t,e)}).then(t,function(e){v("failed to asynchronously prepare wasm: "+e),Re(e)})}function a(){if(!L&&typeof WebAssembly.instantiateStreaming=="function"&&!ke(Ie)&&typeof fetch=="function")fetch(Ie,{credentials:"same-origin"}).then(function(t){var o=WebAssembly.instantiateStreaming(t,e);return o.then(n,function(e){v("wasm streaming compile failed: "+e),v("falling back to ArrayBuffer instantiation"),r(n)})});else return r(n)}if(o.instantiateWasm)try{var i=o.instantiateWasm(e,t);return i}catch(e){return v("Module.instantiateWasm callback failed with error: "+e),!1}return a(),{}}o.asm=xe,oe.push({func:function(){tt()}});function $e(e,t,n,r){Re("Assertion failed: "+A(e)+", at: "+[t?A(t):"unknown filename",n,r?A(r):"unknown function"])}function Pe(e){return at(e)}var Ne={},Me=0;function we(e,t,n){throw Ne[e]={adjusted:[e],caught:!1,destructor:n,ptr:e,refcount:0,rethrown:!1,type:t},Me=e,"uncaught_exception"in nt?nt.uncaught_exceptions++:nt.uncaught_exceptions=1,e}var Ae={basename:function(t){if(t==="/")return"/";var e=t.lastIndexOf("/");return e===-1?t:t.substr(e+1)},dirname:function(t){var e=Ae.splitPath(t),n=e[0],r=e[1];return!n&&!r?".":(r&&(r=r.substr(0,r.length-1)),n+r)},extname:function(t){return Ae.splitPath(t)[3]},join:function(){var e=Array.prototype.slice.call(arguments,0);return Ae.normalize(e.join("/"))},join2:function(t,n){return Ae.normalize(t+"/"+n)},normalize:function(t){var e=t.charAt(0)==="/",n=t.substr(-1)==="/";return t=Ae.normalizeArray(t.split("/").filter(function(e){return!!e}),!e).join("/"),!t&&!e&&(t="."),t&&n&&(t+="/"),(e?"/":"")+t},normalizeArray:function(t,n){for(var e=0,r=t.length-1;r>=0;r--){var o=t[r];o==="."?t.splice(r,1):o===".."?(t.splice(r,1),e++):e&&(t.splice(r,1),e--)}if(n)for(;e;e--)t.unshift("..");return t},splitPath:function(t){var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return e.exec(t).slice(1)}},Fe={buffers:[null,[],[]],get:function(){Fe.varargs+=4;var e=K[Fe.varargs-4>>2];return e},get64:function(t,n){return t},getStr:function(t){var e=A(t);return e},mappings:{},printChar:function(t,n){var e=Fe.buffers[t];n===0||n===10?((t===1?b:v)(w(e,0)),e.length=0):e.push(n)},varargs:void 0};function Oe(e){return 0}function Be(e){return Oe(e)}function We(e,t,n,r,o){}function qe(e,t,n,r,o){return void 0}function Ue(e,t,n,r){for(var o=0,a=0;a<n;a++){for(var i=K[t+a*8>>2],l=K[t+(a*8+4)>>2],s=0;s<l;s++)Fe.printChar(e,G[i+s]);o+=l}return K[r>>2]=o,0}function Ve(e,t,n,r){return Ue(e,t,n,r)}function He(){Re()}function Ge(){return G.length}function ze(e){Re("OOM")}function je(e){e=e>>>0,ze(e)}var Ke=ge,Qe=he;function Xe(){Re("trap!")}function Ye(e,t,n){G.copyWithin(e,t,t+n)}var Je={},Ze={__memory_base:1024,__table_base:0,a:Re,b:He,c:Ke,d:$e,e:Qe,f:Ve,g:Be,h:we,i:Pe,j:qe,k:Xe,l:je,m:Ye,memory:k,n:Ge,table:I},et=o.asm(Je,Ze,V);o.asm=et;var tt=o.__GLOBAL__sub_I_main_cc=function(){return o.asm.o.apply(null,arguments)},nt=o.__ZSt18uncaught_exceptionv=function(){return o.asm.p.apply(null,arguments)},rt=o._free=function(){return o.asm.q.apply(null,arguments)},ot=o._main=function(){return o.asm.r.apply(null,arguments)},at=o._malloc=function(){return o.asm.s.apply(null,arguments)},it=o._process_data=function(){return o.asm.t.apply(null,arguments)},lt=o._set_debug=function(){return o.asm.u.apply(null,arguments)},st=o._set_sensitivity=function(){return o.asm.v.apply(null,arguments)},ut=o.stackAlloc=function(){return o.asm.y.apply(null,arguments)},ct=o.stackRestore=function(){return o.asm.z.apply(null,arguments)},dt=o.stackSave=function(){return o.asm.A.apply(null,arguments)},mt=o.dynCall_v=function(){return o.asm.w.apply(null,arguments)},pt=o.dynCall_vi=function(){return o.asm.x.apply(null,arguments)};o.asm=et,o.ccall=P,o.cwrap=N;var _t;function ft(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}var gt=!1;be=function e(){_t||yt(),_t||(be=e)};function ht(e){var t=o._main;e=e||[];var n=e.length+1,r=ut((n+1)*4);K[r>>2]=W(d);for(var a=1;a<n;a++)K[(r>>2)+a]=W(e[a-1]);K[(r>>2)+n]=0;try{var i=t(n,r);Ct(i,!0)}catch(e){if(e instanceof ft)return;if(e=="unwind"){E=!0;return}else{var l=e;e&&typeof e=="object"&&e.stack&&(l=[e,e.stack]),v("exception thrown: "+l),m(1,e)}}finally{gt=!0}}function yt(e){if(e=e||c,ye>0||(ue(),ye>0))return;function t(){_t||(_t=!0,o.calledRun=!0,!T&&(ce(),de(),a(o),o.onRuntimeInitialized&&o.onRuntimeInitialized(),bt&&ht(e),pe()))}o.setStatus?(o.setStatus("Running..."),setTimeout(function(){setTimeout(function(){o.setStatus("")},1),t()},1)):t()}o.run=yt;function Ct(e,t){t&&E&&e===0||(E||(T=!0,D=e,me(),o.onExit&&o.onExit(e)),m(e,new ft(e)))}if(o.preInit)for(typeof o.preInit=="function"&&(o.preInit=[o.preInit]);o.preInit.length>0;)o.preInit.pop()();var bt=!0;return o.noInitialRun&&(bt=!1),E=!0,yt(),r.ready}})();typeof i=="object"&&typeof a=="object"?a.exports=s:typeof define=="function"&&define.amd?define([],function(){return s}):typeof i=="object"&&(i.WebRTCVADWasm=s)}),null);
__d("toVADModuleObject",[],(function(t,n,r,o,a,i){"use strict";function e(e){var t=e.cwrap("malloc","number",["number"]);function n(e){var n=t(e);return typeof n=="number"?n:-1}var r=e.cwrap("free","number",["number"]);function o(e){var t=r(e);return typeof t=="number"?t:1}var a=e.cwrap("process_data","boolean",["number","number","number","number","number","number"]);function i(e,t,n,r,o,i){var l=a(e,t,n,r,o,i);return typeof l=="number"?l===1:!1}var l=e.cwrap("set_debug",null,["boolean"]);function s(e){l(e)}var u=e.cwrap("set_sensitivity",null,["number"]);function c(e){u(e)}return{HEAPU8:e.HEAPU8,free:o,malloc:n,processData:i,setDebug:s,setSensitivity:c}}i.default=e}),66);
__d("WebRTCVoiceActivityDetector",["FBLogger","RTCVadConfig","WebRTCVADWasm","asyncToGeneratorRuntime","getErrorSafe","toVADModuleObject"],(function(t,n,r,o,a,i,l){"use strict";var e=480,s=1500,u=6e3,c=(function(){function t(t,n,o,a){var i;this.context=t.context,this.source=t,this.vadInstance=r("WebRTCVADWasm")(),this.voiceStart=n,this.voiceStop=o,this.vadBuffer=new Int16Array(e),this.leftovers=0,this.touchedVoice=!1,this.voiceSamples=0,this.silenceSamples=0,this.timePrev=Date.now(),this.debug=(i=a==null?void 0:a.debug)!=null?i:!1}t.isSupported=function(){try{if(typeof WebAssembly=="object"&&typeof WebAssembly.instantiate=="function"){var e=new WebAssembly.Module(Uint8Array.of(0,97,115,109,1,0,0,0));if(e instanceof WebAssembly.Module)return new WebAssembly.Instance(e)instanceof WebAssembly.Instance}}catch(e){var t=r("getErrorSafe")(e);r("FBLogger")("webrtc_vad").catching(t).mustfix("Instantiating empty WebAssembly module threw an error")}return!1};var o=t.prototype;return o.isVoice=function(t){if(this.vadModule==null)return!1;var e=this.vadModule,n=t.length*Int16Array.BYTES_PER_ELEMENT,r=e.malloc(n);if(r===-1)return!1;var o=new Uint8Array(e.HEAPU8.buffer,r,n);o.set(new Uint8Array(t.buffer));var a=e.processData(o.byteOffset,t.length,48e3,t[0],t[100],t[2e3]);return e.free(o.byteOffset),a},o.init=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=this,t=yield this.vadInstance;this.vadModule=r("toVADModuleObject")(t),this.vadModule.setSensitivity(r("RTCVadConfig").WASM_SENSITIVITY/100);var n=this.context.createScriptProcessor(2048,1,1);n.onaudioprocess=function(t){return e.monitor(t)},this.recorder=n});function t(){return e.apply(this,arguments)}return t})(),o.monitor=function(n){for(var t=d(n.inputBuffer.getChannelData(0)),o=0;o<t.length;o+=e){var a=o+e;if(a>t.length){this.vadBuffer.set(t.slice(o)),this.leftovers=t.length-o;break}this.leftovers>0?(a-=this.leftovers,this.vadBuffer.set(t.slice(o,a),this.leftovers),o-=this.leftovers,this.leftovers=0):this.vadBuffer.set(t.slice(o,a));var i=!1,l=this.isVoice(this.vadBuffer),c=Date.now();this.log("voiceSamples = "+this.voiceSamples),l?(this.voiceSamples+=c-this.timePrev,this.voiceSamples>r("RTCVadConfig").WASM_INTERVAL&&(this.log("triggered touched voice"),this.touchedVoice=!0,this.voiceStart())):this.touchedVoice?(this.silenceSamples+=c-this.timePrev,this.silenceSamples>s&&(this.log("triggered touched silence"),i=!0)):this.voiceSamples!==0&&(this.voiceSamples-=c-this.timePrev,this.voiceSamples<0&&(this.voiceSamples=0)),this.touchedVoice&&i&&(this.log("triggered finished voice"),this.voiceStop(),this.reset()),c-this.timePrev>u&&this.touchedVoice&&(this.log("triggered finished voice due to reset"),this.voiceStop(),this.reset()),this.timePrev=c}},o.log=function(t){this.debug&&r("FBLogger")("rtc_mute_detection").info(t)},o.reset=function(){this.touchedVoice=!1,this.voiceSamples=0,this.silenceSamples=0},o.startDetecting=function(){var e=this.recorder;this.timePrev=Date.now(),e!=null&&(e.connect(this.context.destination),this.source.connect(e))},o.stopDetecting=function(){this.reset();var e=this.recorder;if(e!=null)try{e.disconnect(this.context.destination),this.source.disconnect(e)}catch(e){var t=r("getErrorSafe")(e);if(t instanceof DOMException&&t.name==="InvalidAccessError")r("FBLogger")("webrtc_vad").catching(t).mustfix("Tried to disconnect unconnected AudioNode");else throw t}finally{this.voiceStop()}},t})();function d(e){for(var t=new Int16Array(e.length),n=0;n<e.length;n++){var r=Math.max(-1,Math.min(1,e[n]));t[n]=r<0?r*32768:r*32767}return t}l.default=c}),98);
__d("VoiceActivityDetector",["EventEmitter","MuteDetectionConstants","PureJSVoiceActivityDetector","RefCountedAudioContextSingleton","WebRTCVoiceActivityDetector","ZenonMediaActionLogger","asyncToGeneratorRuntime","getErrorSafe","performanceNow"],(function(t,n,r,o,a,i,l){"use strict";var e,s=null,u=(function(t){function a(e){var n;return n=t.call(this)||this,n.isDetecting=!1,n.voiceActive=!1,n.$VoiceActivityDetector$p_1=null,n.$VoiceActivityDetector$p_2=null,n.$VoiceActivityDetector$p_3=null,n.$VoiceActivityDetector$p_4=!1,n.$VoiceActivityDetector$p_5=!1,n.debug=e,n}babelHelpers.inheritsLoose(a,t),a.get=function(t){return t===void 0&&(t=!1),s==null&&(s=new a(t)),s};var i=a.prototype;return i.initialize=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n=this,a,i=(e||(e=r("performanceNow")))();if(this.audioStream=t,this.$VoiceActivityDetector$p_2==null){var l=o("RefCountedAudioContextSingleton").get(),s=l.audioContext,u=l.destroy;this.$VoiceActivityDetector$p_2=s,this.$VoiceActivityDetector$p_3=u}var c=this.$VoiceActivityDetector$p_2;if(!(c==null||!this.audioStream)){if(this.$VoiceActivityDetector$p_5){this.$VoiceActivityDetector$p_6("Called stopDetecting() before finishing initialization, will not initialize voice activity detector"),this.$VoiceActivityDetector$p_7(),this.$VoiceActivityDetector$p_5=!1;return}var d=c.createMediaStreamSource(this.audioStream),m=function(){n.voiceActive=!0,n.emit("voiceActivityUpdate",!0)},p=function(){n.voiceActive=!1,n.emit("voiceActivityUpdate",!1)},_;r("WebRTCVoiceActivityDetector")!=null&&r("WebRTCVoiceActivityDetector").isSupported()?(this.$VoiceActivityDetector$p_1=new(r("WebRTCVoiceActivityDetector"))(d,m,p,{debug:this.debug}),_="WebRTCVoiceActivityDetector"):(this.$VoiceActivityDetector$p_1=new(r("PureJSVoiceActivityDetector"))(d,m,p,{debug:this.debug,fftSize:512}),_="PureJSVoiceActivityDetector"),yield this.$VoiceActivityDetector$p_1.init(),this.$VoiceActivityDetector$p_8("Initialized "+_+". Time elapsed (ms): "+(e()-i),(a=this.audioStream)==null||(a=a.getAudioTracks()[0])==null?void 0:a.id)}});function a(e){return t.apply(this,arguments)}return a})(),i.startDetecting=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){if(this.$VoiceActivityDetector$p_4){this.$VoiceActivityDetector$p_8("Ignoring subsequent call to startDetecting() before previous call finished");return}try{if(e===this.audioStream){this.$VoiceActivityDetector$p_9();return}this.stopDetecting(),this.$VoiceActivityDetector$p_7(),this.$VoiceActivityDetector$p_4=!0,yield this.initialize(e),this.$VoiceActivityDetector$p_9()}catch(e){this.$VoiceActivityDetector$p_6(""+r("getErrorSafe")(e).toString())}finally{this.$VoiceActivityDetector$p_4=!1,this.$VoiceActivityDetector$p_5&&(this.stopDetecting(),this.$VoiceActivityDetector$p_5=!1)}});function t(t){return e.apply(this,arguments)}return t})(),i.$VoiceActivityDetector$p_9=function(){if(this.$VoiceActivityDetector$p_1!=null&&!this.isDetecting)this.$VoiceActivityDetector$p_1.startDetecting(),this.isDetecting=!0;else if(this.isDetecting){var e;this.$VoiceActivityDetector$p_8("Already detecting voice activity on this track",(e=this.audioStream)==null||(e=e.getAudioTracks()[0])==null?void 0:e.id)}},i.stopDetecting=function(){this.$VoiceActivityDetector$p_1!=null&&this.isDetecting&&!this.$VoiceActivityDetector$p_4?(this.$VoiceActivityDetector$p_1.stopDetecting(),this.isDetecting=!1):this.$VoiceActivityDetector$p_4&&(this.$VoiceActivityDetector$p_5=!0,this.$VoiceActivityDetector$p_8("Queued call to stopDetecting() before startDetecting() completed"))},i.$VoiceActivityDetector$p_7=function(){if(this.audioStream!=null){var e;(e=this.audioStream)==null||e.getTracks().forEach(function(e){e.stop()}),this.audioStream=null}},i.endCall=function(){var e;this.stopDetecting(),this.$VoiceActivityDetector$p_7(),(e=this.$VoiceActivityDetector$p_3)==null||e.call(this),this.$VoiceActivityDetector$p_2=null,this.$VoiceActivityDetector$p_3=null,this.$VoiceActivityDetector$p_1=null},i.$VoiceActivityDetector$p_6=function(t){var e,n=(e=this.audioStream)==null?void 0:e.getAudioTracks()[0];this.$VoiceActivityDetector$p_8("Failed to start detecting voice activity",n==null?void 0:n.id,t)},i.$VoiceActivityDetector$p_8=function(t,n,a){r("ZenonMediaActionLogger").logEvent({checkpoint:o("MuteDetectionConstants").CHECKPOINT_PREFIX+" "+t,errorDomain:a!=null?o("MuteDetectionConstants").ERROR_DOMAIN:void 0,errorType:a,mediaID:n})},a})(r("EventEmitter"));l.default=u}),98);
__d("VoiceActivityDetectorHooks",["VoiceActivityDetector","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useEffect;function u(e,t){s(function(){var n=r("VoiceActivityDetector").get().addListener("voiceActivityUpdate",function(n){n?e():t()});return function(){return n.remove()}},[e,t])}l.useVoiceActivityListener=u}),98);
__d("useMediaStreamRef.react",["ZenonUIMedia","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useEffect,c=s.useRef;function d(e){var t=o("react-compiler-runtime").c(3),n=c(null),a,i;return t[0]!==e?(a=function(){var t=n.current;if(!(t===null||e===void 0))return r("ZenonUIMedia").attachMediaStream(t,e),(function(){t===null||e===void 0||r("ZenonUIMedia").detachMediaStream(t)})},i=[e,n],t[0]=e,t[1]=a,t[2]=i):(a=t[1],i=t[2]),u(a,i),n}l.default=d}),98);
__d("ZenonGenAIRemoteAudioPlayer.react",["VoiceActivityDetectorHooks","justknobx","react","useMediaStreamRef.react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useCallback;function c(e){var t=e.muted,n=e.stream,a=r("useMediaStreamRef.react")(n),i=r("justknobx")._("4625")/100,l=u(function(){a.current&&(a.current.volume=i)},[i,a]),c=u(function(){a.current&&(a.current.volume=1)},[a]);return o("VoiceActivityDetectorHooks").useVoiceActivityListener(l,c),s.jsx("audio",{autoPlay:!0,className:"x1s85apg","data-testid":void 0,muted:t,ref:a})}c.displayName=c.name+" [from "+i.id+"]",l.default=c}),98);
__d("ZenonGenAIRemoteAudioContainer.react",["ZenonCallsModelTypes","ZenonGenAICallHooks","ZenonGenAIRemoteAudioPlayer.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(){var e=o("react-compiler-runtime").c(9),t=o("ZenonGenAICallHooks").useCallState(),n=o("ZenonGenAICallHooks").useParticipantToDisplayMedia(),a,i;if(e[0]!==t||e[1]!==n){i=Symbol.for("react.early_return_sentinel");e:{var l=n.keys().next().value;if(t===o("ZenonCallsModelTypes").ZenonCallState.New||t===o("ZenonCallsModelTypes").ZenonCallState.Terminated||n.size===0||l==null){var u;e[4]===Symbol.for("react.memo_cache_sentinel")?(u=s.jsx(s.Fragment,{}),e[4]=u):u=e[4],i=u;break e}a=n.get(l)}e[0]=t,e[1]=n,e[2]=a,e[3]=i}else a=e[2],i=e[3];if(i!==Symbol.for("react.early_return_sentinel"))return i;var c=a;if(c==null){var d;return e[5]===Symbol.for("react.memo_cache_sentinel")?(d=s.jsx(s.Fragment,{}),e[5]=d):d=e[5],d}var m;e[6]===Symbol.for("react.memo_cache_sentinel")?(m={className:"xqtp20y xg01cxk x10l6tqk xnalus7"},e[6]=m):m=e[6];var p;return e[7]!==c.webrtcStream?(p=s.jsx("div",babelHelpers.extends({},m,{children:s.jsx(r("ZenonGenAIRemoteAudioPlayer.react"),{muted:!1,stream:c.webrtcStream})})),e[7]=c.webrtcStream,e[8]=p):p=e[8],p}l.default=u}),98);
__d("KadabraVoiceManager",["CometAIVoiceCallTimerContextUpdater.react","CometAIVoiceLastMessageContextUpdater.react","CometAIVoiceManagerDev.react","CometAIVoiceMonitorE2EConnection.react","CometRelay","KadabraVoiceAbftTracker.react","KadabraVoiceInteractionTracker.react","KadabraVoiceStoreUpdaters","VoiceActivityDetector","ZenonCallSDK","ZenonGenAICallHooks","ZenonGenAICallsContext","ZenonGenAIRemoteAudioContainer.react","cometAIVoiceTranscriptionUtils","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.use,d=u.useEffect,m=u.useLayoutEffect,p=u.useRef;function _(e){var t=o("react-compiler-runtime").c(12),n=e.children,a=e.externalConversationID,i=e.isNewConversation,l=e.onTurnChange,u=c(r("ZenonGenAICallsContext")),d=u.callSDK,p=u.currentCallInstance,_=u.setCallSDK,y;t[0]!==_?(y=function(){_(f)},t[0]=_,t[1]=y):y=t[1];var C;t[2]!==d||t[3]!==_?(C=[d,_],t[2]=d,t[3]=_,t[4]=C):C=t[4],m(y,C);var b;return t[5]!==d||t[6]!==n||t[7]!==p||t[8]!==a||t[9]!==i||t[10]!==l?(b=d!=null&&p!=null&&s.jsxs(s.Fragment,{children:[n,s.jsx(r("ZenonGenAIRemoteAudioContainer.react"),{}),s.jsx(r("CometAIVoiceMonitorE2EConnection.react"),{}),s.jsx(r("CometAIVoiceCallTimerContextUpdater.react"),{}),s.jsx(r("CometAIVoiceLastMessageContextUpdater.react"),{}),s.jsx(g,{externalConversationID:a,isNewConversation:i}),s.jsx(r("KadabraVoiceInteractionTracker.react"),{onTurnChange:l}),s.jsx(r("KadabraVoiceAbftTracker.react"),{}),s.jsx(r("CometAIVoiceManagerDev.react"),{}),s.jsx(h,{})]}),t[5]=d,t[6]=n,t[7]=p,t[8]=a,t[9]=i,t[10]=l,t[11]=b):b=t[11],b}function f(e){return e!=null?e:new(r("ZenonCallSDK"))({relayEnvironment:null})}function g(e){var t=o("react-compiler-runtime").c(9),n=e.externalConversationID,r=e.isNewConversation,a=o("CometRelay").useRelayEnvironment(),i=o("ZenonGenAICallHooks").useCallTranscripts(),l=o("ZenonGenAICallHooks").useBotState(),s=p(!r),u;t[0]!==a||t[1]!==n||t[2]!==i?(u=function(){return i(function(e){for(var t of o("cometAIVoiceTranscriptionUtils").getOTIDMessages(e)){var r=t.otid,i=t.role,l=t.text;o("KadabraVoiceStoreUpdaters").createOrUpdatePlainTextMessage({conversationExists:s.current,environment:a,externalConversationId:n,messageId:r,role:i,text:l}),s.current=!0}})},t[0]=a,t[1]=n,t[2]=i,t[3]=u):u=t[3];var c;return t[4]!==l||t[5]!==a||t[6]!==n||t[7]!==i?(c=[l,a,n,i],t[4]=l,t[5]=a,t[6]=n,t[7]=i,t[8]=c):c=t[8],d(u,c),null}function h(){var e=o("react-compiler-runtime").c(4),t=p(!1),n=o("ZenonGenAICallHooks").useLocalAudioTrack(),a=c(r("ZenonGenAICallsContext")),i=a.isE2EConnected,l,s;return e[0]!==i||e[1]!==n?(l=function(){t.current||!i||!n||(t.current=!0,r("VoiceActivityDetector").get().startDetecting(n==null?void 0:n.webrtcStream))},s=[i,n],e[0]=i,e[1]=n,e[2]=l,e[3]=s):(l=e[2],s=e[3]),d(l,s),null}l.default=_}),98);
__d("KadabraVoiceLayout.react",["CometAIVoiceEndCallSubreason","CometHeroInteractionIDContext","KDSFlexbox.react","KadabraVoiceCaller.react","KadabraVoiceInput.react","KadabraVoiceManager","NetworkStatus","ZenonGenAICallHooks","getInteractionIDWithInheritance","hero-tracing","react","react-compiler-runtime","useKadabraCometInteractionTracing"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.use,d=u.useEffect,m={root:{height:"xfij2m4",$$css:!0}};function p(e){var t=o("react-compiler-runtime").c(21),n=e.convoStarterPrompt,a=e.convoStarterPromptId,i=e.externalConversationID,l=e.isNewConversation,u=e.onCallTerminated,p=e.onDeviceDisonnect,_=e.onInvalidEntry,f=e.onStopPress,g=e.onUnmount,h=c(r("CometHeroInteractionIDContext")),y=r("useKadabraCometInteractionTracing")("kadabra.voiceTurn"),C=y.startInteraction,b=y.traceIdState;o("ZenonGenAICallHooks").useDetectDeviceDisconnect(p);var v;t[0]!==h||t[1]!==b?(v=r("getInteractionIDWithInheritance")(h,b),t[0]=h,t[1]=b,t[2]=v):v=t[2];var S=v,R;t[3]!==C?(R=function(t,n){C(t,n)},t[3]=C,t[4]=R):R=t[4];var L=R,E,k;t[5]!==u?(E=function(){var e=function(t){var e=t.online;e||u(o("CometAIVoiceEndCallSubreason").CometAIVoiceEndCallSubreason.OFFLINE)},t=r("NetworkStatus").onChange(e);return(function(){return t.remove()})},k=[u],t[5]=u,t[6]=E,t[7]=k):(E=t[6],k=t[7]),d(E,k);var I;t[8]!==n||t[9]!==a||t[10]!==i||t[11]!==l||t[12]!==u||t[13]!==_||t[14]!==f||t[15]!==L||t[16]!==g?(I=function(t){return s.jsxs(r("KadabraVoiceManager"),{externalConversationID:i,isNewConversation:l,onTurnChange:L,children:[s.jsx(r("KadabraVoiceCaller.react"),{convoStarterPrompt:n,convoStarterPromptId:a,externalConversationID:i,onCallTerminated:u,onInvalidEntry:_,onUnmount:g}),s.jsx(r("KadabraVoiceInput.react"),{onStopPress:f,ref:t})]})},t[8]=n,t[9]=a,t[10]=i,t[11]=l,t[12]=u,t[13]=_,t[14]=f,t[15]=L,t[16]=g,t[17]=I):I=t[17];var T;return t[18]!==S||t[19]!==I?(T=s.jsx(r("KDSFlexbox.react"),{direction:"column",xstyle:m.root,children:s.jsx(o("hero-tracing").HeroInteraction,{interactionDesc:"KadabraVoiceLayout",interactionUUID:S,pageletName:"KadabraVoiceLayout",renderTrackedDOMElement:I})}),t[18]=S,t[19]=I,t[20]=T):T=t[20],T}l.default=p}),98);
__d("KadabraVoicePromptRootQuery.graphql",["KadabraVoicePromptRootQuery_abraRelayOperation","relay-runtime"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"prompt_id"}],t={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null}],type:"XABSocialProfile",abstractKey:null},r=[{kind:"Variable",name:"id",variableName:"prompt_id"}],o={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"KadabraVoicePromptRootQuery",selections:[{alias:"viewer",args:null,concreteType:null,kind:"LinkedField",name:"xab_viewer",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"social_profile",plural:!1,selections:[t],storageKey:null}],storageKey:null},{alias:"post",args:r,concreteType:null,kind:"LinkedField",name:"xfb_genai_fetch_post",plural:!1,selections:[{kind:"InlineFragment",selections:[{fragment:{kind:"InlineFragment",selections:[{args:null,kind:"FragmentSpread",name:"KadabraVoicePromptRoot_post"}],type:"GenAIPostBase",abstractKey:"__isGenAIPostBase"},kind:"AliasedInlineFragmentSpread",name:"KadabraVoicePromptRoot_post"}],type:"GenAIPostBase",abstractKey:"__isGenAIPostBase"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"KadabraVoicePromptRootQuery",selections:[{alias:"viewer",args:null,concreteType:null,kind:"LinkedField",name:"xab_viewer",plural:!1,selections:[o,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"social_profile",plural:!1,selections:[o,t,a],storageKey:null},a],storageKey:null},{alias:"post",args:r,concreteType:null,kind:"LinkedField",name:"xfb_genai_fetch_post",plural:!1,selections:[o,{kind:"InlineFragment",selections:[a,{alias:null,args:null,kind:"ScalarField",name:"external_conversation_id",storageKey:null}],type:"GenAIPostBase",abstractKey:"__isGenAIPostBase"},{kind:"InlineFragment",selections:[a],type:"Node",abstractKey:"__isNode"}],storageKey:null}]},params:{id:n("KadabraVoicePromptRootQuery_abraRelayOperation"),metadata:{},name:"KadabraVoicePromptRootQuery",operationKind:"query",text:null}}})();n("relay-runtime").PreloadableQueryRegistry.set(e.params.id,e),a.exports=e}),null);
__d("KadabraVoicePromptRoot_post.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"KadabraVoicePromptRoot_post",selections:[{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},action:"THROW"},{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"external_conversation_id",storageKey:null},action:"THROW"}],type:"GenAIPostBase",abstractKey:"__isGenAIPostBase"};a.exports=e}),null);
__d("KadabraVoiceUtils",["FBLogger","ZenonGenAICallHooks","ZenonGenAICallsContext","ZenonLocalAudioVideoManager","react","react-compiler-runtime","useCometAIVoiceContext"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.use,c=s.useCallback;function d(e){var t=o("react-compiler-runtime").c(11),n=u(r("ZenonGenAICallsContext")),a=n.setUserMediaTracks,i=n.userMediaTracks,l=o("ZenonGenAICallHooks").useEndCallCallback(),s=o("ZenonGenAICallHooks").useCurrentCall(),c=r("useCometAIVoiceContext")(),d=c.previousCallID,p=c.setCallStartTime,_=c.setLastMessage,f=c.setLastOTIDMessage,g=c.setPreviousCallID,h;return t[0]!==(s==null?void 0:s.clientCallId)||t[1]!==e||t[2]!==l||t[3]!==d||t[4]!==p||t[5]!==_||t[6]!==f||t[7]!==g||t[8]!==a||t[9]!==i?(h=function(t){(s==null?void 0:s.clientCallId)!==d&&(g(s==null?void 0:s.clientCallId),l(t),i.length>1&&r("FBLogger")("kadabra_core").mustfix("Unexpected more than 1 user media track"),r("ZenonLocalAudioVideoManager").release("PRIMARY_AUDIO"),i.forEach(m),a([]),p(null),_(null),f(null))},t[0]=s==null?void 0:s.clientCallId,t[1]=e,t[2]=l,t[3]=d,t[4]=p,t[5]=_,t[6]=f,t[7]=g,t[8]=a,t[9]=i,t[10]=h):h=t[10],s==null||s.clientCallId,h}function m(e){return e.webrtcTrack.stop()}l.useEndCall=d}),98);
__d("KadabraVoicePromptRoot.react",["CometAIVoiceEndCallSubreason","CometAIVoiceInteraction","CometRelay","FBLogger","KadabraMetaAIEntryPointContext","KadabraRouteUtils","KadabraVoiceLayout.react","KadabraVoicePromptRootQuery.graphql","KadabraVoicePromptRoot_post.graphql","KadabraVoiceUtils","react","react-compiler-runtime","useCometRouterDispatcher"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=u||(u=o("react")),d=u,m=d.use,p=d.useRef;function _(t){var a,i,l,u=o("react-compiler-runtime").c(26),d=t.queries,_=d.queryRef,f=o("CometRelay").usePreloadedQuery(e!==void 0?e:e=n("KadabraVoicePromptRootQuery.graphql"),_),g=o("CometRelay").useFragment(s!==void 0?s:s=n("KadabraVoicePromptRoot_post.graphql"),(a=f.post)==null?void 0:a.KadabraVoicePromptRoot_post),h=((i=f.viewer)==null||(i=i.social_profile)==null?void 0:i.username)!=null?"@"+((l=f.viewer.social_profile)==null?void 0:l.username):void 0,y=r("useCometRouterDispatcher")(),C=m(o("KadabraMetaAIEntryPointContext").KadabraMetaAIEntryPointContext),b;u[0]!==y||u[1]!==C||u[2]!==g||u[3]!==h?(b=function(){g!=null&&(y==null||y.go(o("KadabraRouteUtils").kadabraRoutePrompt({prompt_id:g.id,vanity:h}),{passthroughProps:{forceMessageSortingForVoice:!0,metaAIEntryPoint:C},replace:!0,traceParams:{navigation_source:"voice_call"}}))},u[0]=y,u[1]=C,u[2]=g,u[3]=h,u[4]=b):b=u[4];var v=b,S=o("KadabraVoiceUtils").useEndCall("KadabraVoicePromptRoot"),R=p(!1),L;u[5]!==S?(L=function(t){var e;R.current||(R.current=!0,(e=o("CometAIVoiceInteraction").getPendingVoiceInteraction())==null||e.cancelTrace(t,!0),S(t))},u[5]=S,u[6]=L):L=u[6];var E=L,k=g==null?void 0:g.external_conversation_id;if(k==null)throw r("FBLogger")("kadabra_core").mustfixThrow("Null external_conversation_id for existing conversation.");var I;u[7]!==E||u[8]!==v?(I=function(){E(o("CometAIVoiceEndCallSubreason").CometAIVoiceEndCallSubreason.USER_ENDED_CALL),v()},u[7]=E,u[8]=v,u[9]=I):I=u[9];var T=I,D;u[10]!==v?(D=function(t){var e;R.current||((e=o("CometAIVoiceInteraction").getPendingVoiceInteraction())==null||e.cancelTrace(t,!0),v())},u[10]=v,u[11]=D):D=u[11];var x=D,$;u[12]!==E?($=function(){E(o("CometAIVoiceEndCallSubreason").CometAIVoiceEndCallSubreason.COMPONENT_UNMOUNTED)},u[12]=E,u[13]=$):$=u[13];var P=$,N;u[14]!==v?(N=function(){v()},u[14]=v,u[15]=N):N=u[15];var M=N,w;u[16]!==E||u[17]!==v?(w=function(){E(o("CometAIVoiceEndCallSubreason").CometAIVoiceEndCallSubreason.DEVICE_DISCONNECTED),v()},u[16]=E,u[17]=v,u[18]=w):w=u[18];var A=w,F;return u[19]!==k||u[20]!==x||u[21]!==A||u[22]!==M||u[23]!==T||u[24]!==P?(F=c.jsx(r("KadabraVoiceLayout.react"),{externalConversationID:k,isNewConversation:!1,onCallTerminated:x,onDeviceDisonnect:A,onInvalidEntry:M,onStopPress:T,onUnmount:P}),u[19]=k,u[20]=x,u[21]=A,u[22]=M,u[23]=T,u[24]=P,u[25]=F):F=u[25],F}l.default=_}),98);